(function(a,c){function b(a){var b=pb[a]={};n.each(a.split(Fa),function(a,d){b[d]=!0});return b}function d(a,b,d){if(d===c&&1===a.nodeType)if(d="data-"+b.replace(Na,"-$1").toLowerCase(),d=a.getAttribute(d),"string"===typeof d){try{d="true"===d?!0:"false"===d?!1:"null"===d?null:+d+""===d?+d:ab.test(d)?n.parseJSON(d):d}catch(e){}n.data(a,b,d)}else d=c;return d}function e(a){for(var b in a)if(("data"!==b||!n.isEmptyObject(a[b]))&&"toJSON"!==b)return!1;return!0}function f(){return!1}function g(){return!0}
function h(a){return!a||!a.parentNode||11===a.parentNode.nodeType}function l(a,b){do a=a[b];while(a&&1!==a.nodeType);return a}function m(a,b,d){b=b||0;if(n.isFunction(b))return n.grep(a,function(a,c){return!!b.call(a,c,a)===d});if(b.nodeType)return n.grep(a,function(a,c){return a===b===d});if("string"===typeof b){var c=n.grep(a,function(a){return 1===a.nodeType});if(M.test(b))return n.filter(b,c,!d);b=n.filter(b,c)}return n.grep(a,function(a,c){return 0<=n.inArray(a,b)===d})}function p(a){var b=qa.split("|");
a=a.createDocumentFragment();if(a.createElement)for(;b.length;)a.createElement(b.pop());return a}function q(a,b){return a.getElementsByTagName(b)[0]||a.appendChild(a.ownerDocument.createElement(b))}function t(a,b){if(1===b.nodeType&&n.hasData(a)){var d,c,e;c=n._data(a);var f=n._data(b,c),g=c.events;if(g)for(d in delete f.handle,f.events={},g)for(c=0,e=g[d].length;c<e;c++)n.event.add(b,d,g[d][c]);f.data&&(f.data=n.extend({},f.data))}}function y(a,b){var d;1===b.nodeType&&(b.clearAttributes&&b.clearAttributes(),
b.mergeAttributes&&b.mergeAttributes(a),d=b.nodeName.toLowerCase(),"object"===d?(b.parentNode&&(b.outerHTML=a.outerHTML),n.support.html5Clone&&a.innerHTML&&!n.trim(b.innerHTML)&&(b.innerHTML=a.innerHTML)):"input"===d&&xa.test(a.type)?(b.defaultChecked=b.checked=a.checked,b.value!==a.value&&(b.value=a.value)):"option"===d?b.selected=a.defaultSelected:"input"===d||"textarea"===d?b.defaultValue=a.defaultValue:"script"===d&&b.text!==a.text&&(b.text=a.text),b.removeAttribute(n.expando))}function u(a){return"undefined"!==
typeof a.getElementsByTagName?a.getElementsByTagName("*"):"undefined"!==typeof a.querySelectorAll?a.querySelectorAll("*"):[]}function C(a){xa.test(a.type)&&(a.defaultChecked=a.checked)}function B(a,b){if(b in a)return b;for(var d=b.charAt(0).toUpperCase()+b.slice(1),c=b,e=Uc.length;e--;)if(b=Uc[e]+d,b in a)return b;return c}function I(a,b){a=b||a;return"none"===n.css(a,"display")||!n.contains(a.ownerDocument,a)}function F(a,b){for(var d,c,e=[],f=0,g=a.length;f<g;f++)d=a[f],d.style&&(e[f]=n._data(d,
"olddisplay"),b?(e[f]||"none"!==d.style.display||(d.style.display=""),""===d.style.display&&I(d)&&(e[f]=n._data(d,"olddisplay",z(d.nodeName)))):(c=Da(d,"display"),e[f]||"none"===c||n._data(d,"olddisplay",c)));for(f=0;f<g;f++)d=a[f],!d.style||b&&"none"!==d.style.display&&""!==d.style.display||(d.style.display=b?e[f]||"":"none");return a}function A(a,b,d){return(a=Dc.exec(b))?Math.max(0,a[1]-(d||0))+(a[2]||"px"):b}function r(a,b,d,c){b=d===(c?"border":"content")?4:"width"===b?1:0;for(var e=0;4>b;b+=
2)"margin"===d&&(e+=n.css(a,d+fb[b],!0)),c?("content"===d&&(e-=parseFloat(Da(a,"padding"+fb[b]))||0),"margin"!==d&&(e-=parseFloat(Da(a,"border"+fb[b]+"Width"))||0)):(e+=parseFloat(Da(a,"padding"+fb[b]))||0,"padding"!==d&&(e+=parseFloat(Da(a,"border"+fb[b]+"Width"))||0));return e}function v(a,b,d){var c="width"===b?a.offsetWidth:a.offsetHeight,e=!0,f=n.support.boxSizing&&"border-box"===n.css(a,"boxSizing");if(0>=c||null==c){c=Da(a,b);if(0>c||null==c)c=a.style[b];if(ec.test(c))return c;e=f&&(n.support.boxSizingReliable||
c===a.style[b]);c=parseFloat(c)||0}return c+r(a,b,d||(f?"border":"content"),e)+"px"}function z(a){if(Ec[a])return Ec[a];var b=n("<"+a+">").appendTo(L.body),d=b.css("display");b.remove();if("none"===d||""===d)Wa=L.body.appendChild(Wa||n.extend(L.createElement("iframe"),{frameBorder:0,width:0,height:0})),qb&&Wa.createElement||(qb=(Wa.contentWindow||Wa.contentDocument).document,qb.write("<!doctype html><html><body>"),qb.close()),b=qb.body.appendChild(qb.createElement(a)),d=Da(b,"display"),L.body.removeChild(Wa);
return Ec[a]=d}function H(a,b,d,c){var e;if(n.isArray(b))n.each(b,function(b,e){d||jd.test(a)?c(a,e):H(a+"["+("object"===typeof e?b:"")+"]",e,d,c)});else if(d||"object"!==n.type(b))c(a,b);else for(e in b)H(a+"["+e+"]",b[e],d,c)}function O(a){return function(b,d){"string"!==typeof b&&(d=b,b="*");var c,e,f=b.toLowerCase().split(Fa),g=0,h=f.length;if(n.isFunction(d))for(;g<h;g++)c=f[g],(e=/^\+/.test(c))&&(c=c.substr(1)||"*"),c=a[c]=a[c]||[],c[e?"unshift":"push"](d)}}function T(a,b,d,e,f,g){f=f||b.dataTypes[0];
g=g||{};g[f]=!0;var h;f=a[f];for(var l=0,m=f?f.length:0,x=a===Fc;l<m&&(x||!h);l++)h=f[l](b,d,e),"string"===typeof h&&(!x||g[h]?h=c:(b.dataTypes.unshift(h),h=T(a,b,d,e,h,g)));!x&&h||g["*"]||(h=T(a,b,d,e,"*",g));return h}function J(a,b){var d,e,f=n.ajaxSettings.flatOptions||{};for(d in b)b[d]!==c&&((f[d]?a:e||(e={}))[d]=b[d]);e&&n.extend(!0,a,e)}function Z(){try{return new a.XMLHttpRequest}catch(b){}}function na(){setTimeout(function(){sc=c},0);return sc=n.now()}function sa(a,b){n.each(b,function(b,
d){for(var c=(fc[b]||[]).concat(fc["*"]),e=0,f=c.length;e<f&&!c[e].call(a,b,d);e++);})}function ia(a,b,d){var c=0,e=gc.length,f=n.Deferred().always(function(){delete g.elem}),g=function(){for(var b=sc||na(),b=Math.max(0,h.startTime+h.duration-b),d=1-(b/h.duration||0),c=0,e=h.tweens.length;c<e;c++)h.tweens[c].run(d);f.notifyWith(a,[h,d,b]);if(1>d&&e)return b;f.resolveWith(a,[h]);return!1},h=f.promise({elem:a,props:n.extend({},b),opts:n.extend(!0,{specialEasing:{}},d),originalProperties:b,originalOptions:d,
startTime:sc||na(),duration:d.duration,tweens:[],createTween:function(b,d,c){b=n.Tween(a,h.opts,b,d,h.opts.specialEasing[b]||h.opts.easing);h.tweens.push(b);return b},stop:function(b){for(var d=0,c=b?h.tweens.length:0;d<c;d++)h.tweens[d].run(1);b?f.resolveWith(a,[h,b]):f.rejectWith(a,[h,b]);return this}});d=h.props;for(aa(d,h.opts.specialEasing);c<e;c++)if(b=gc[c].call(h,a,d,h.opts))return b;sa(h,d);n.isFunction(h.opts.start)&&h.opts.start.call(a,h);n.fx.timer(n.extend(g,{anim:h,queue:h.opts.queue,
elem:a}));return h.progress(h.opts.progress).done(h.opts.done,h.opts.complete).fail(h.opts.fail).always(h.opts.always)}function aa(a,b){var d,c,e,f,g;for(d in a)if(c=n.camelCase(d),e=b[c],f=a[d],n.isArray(f)&&(e=f[1],f=a[d]=f[0]),d!==c&&(a[c]=f,delete a[d]),(g=n.cssHooks[c])&&"expand"in g)for(d in f=g.expand(f),delete a[c],f)d in a||(a[d]=f[d],b[d]=e);else b[c]=e}function ja(a,b,d,c,e){return new ja.prototype.init(a,b,d,c,e)}function ca(a,b){var d,c={height:a},e=0;for(b=b?1:0;4>e;e+=2-b)d=fb[e],c["margin"+
d]=c["padding"+d]=a;b&&(c.opacity=c.width=a);return c}function fa(a){return n.isWindow(a)?a:9===a.nodeType?a.defaultView||a.parentWindow:!1}var ba,la,L=a.document,R=a.location,Xa=a.navigator,Ya=a.jQuery,Oa=a.$,Ia=Array.prototype.push,za=Array.prototype.slice,bb=Array.prototype.indexOf,gb=Object.prototype.toString,rb=Object.prototype.hasOwnProperty,sb=String.prototype.trim,n=function(a,b){return new n.fn.init(a,b,ba)},cb=/[\-+]?(?:\d*\.|)\d+(?:[eE][\-+]?\d+|)/.source,Ib=/\S/,Fa=/\s+/,zb=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,
Jb=/^(?:[^#<]*(<[\w\W]+>)[^>]*$|#([\w\-]*)$)/,tb=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,Ab=/^[\],:{}\s]*$/,ub=/(?:^|:|,)(?:\s*\[)+/g,db=/\\(?:["\\\/bfnrt]|u[\da-fA-F]{4})/g,hb=/"[^"\\\r\n]*"|true|false|null|-?(?:\d\d*\.|)\d+(?:[eE][\-+]?\d+|)/g,ua=/^-ms-/,Bb=/-([\da-z])/gi,Ta=function(a,b){return(b+"").toUpperCase()},vb=function(){L.addEventListener?(L.removeEventListener("DOMContentLoaded",vb,!1),n.ready()):"complete"===L.readyState&&(L.detachEvent("onreadystatechange",vb),n.ready())},Ja={};n.fn=n.prototype=
{constructor:n,init:function(a,b,d){var e;if(!a)return this;if(a.nodeType)return this.context=this[0]=a,this.length=1,this;if("string"===typeof a){e="<"===a.charAt(0)&&">"===a.charAt(a.length-1)&&3<=a.length?[null,a,null]:Jb.exec(a);if(!e||!e[1]&&b)return!b||b.jquery?(b||d).find(a):this.constructor(b).find(a);if(e[1])return a=(b=b instanceof n?b[0]:b)&&b.nodeType?b.ownerDocument||b:L,a=n.parseHTML(e[1],a,!0),tb.test(e[1])&&n.isPlainObject(b)&&this.attr.call(a,b,!0),n.merge(this,a);if((b=L.getElementById(e[2]))&&
b.parentNode){if(b.id!==e[2])return d.find(a);this.length=1;this[0]=b}this.context=L;this.selector=a;return this}if(n.isFunction(a))return d.ready(a);a.selector!==c&&(this.selector=a.selector,this.context=a.context);return n.makeArray(a,this)},selector:"",jquery:"1.8.2",length:0,size:function(){return this.length},toArray:function(){return za.call(this)},get:function(a){return null==a?this.toArray():0>a?this[this.length+a]:this[a]},pushStack:function(a,b,d){a=n.merge(this.constructor(),a);a.prevObject=
this;a.context=this.context;"find"===b?a.selector=this.selector+(this.selector?" ":"")+d:b&&(a.selector=this.selector+"."+b+"("+d+")");return a},each:function(a,b){return n.each(this,a,b)},ready:function(a){n.ready.promise().done(a);return this},eq:function(a){a=+a;return-1===a?this.slice(a):this.slice(a,a+1)},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},slice:function(){return this.pushStack(za.apply(this,arguments),"slice",za.call(arguments).join(","))},map:function(a){return this.pushStack(n.map(this,
function(b,d){return a.call(b,d,b)}))},end:function(){return this.prevObject||this.constructor(null)},push:Ia,sort:[].sort,splice:[].splice};n.fn.init.prototype=n.fn;n.extend=n.fn.extend=function(){var a,b,d,e,f,g=arguments[0]||{},h=1,l=arguments.length,m=!1;"boolean"===typeof g&&(m=g,g=arguments[1]||{},h=2);"object"===typeof g||n.isFunction(g)||(g={});l===h&&(g=this,--h);for(;h<l;h++)if(null!=(a=arguments[h]))for(b in a)d=g[b],e=a[b],g!==e&&(m&&e&&(n.isPlainObject(e)||(f=n.isArray(e)))?(f?(f=!1,
d=d&&n.isArray(d)?d:[]):d=d&&n.isPlainObject(d)?d:{},g[b]=n.extend(m,d,e)):e!==c&&(g[b]=e));return g};n.extend({noConflict:function(b){a.$===n&&(a.$=Oa);b&&a.jQuery===n&&(a.jQuery=Ya);return n},isReady:!1,readyWait:1,holdReady:function(a){a?n.readyWait++:n.ready(!0)},ready:function(a){if(!0===a?!--n.readyWait:!n.isReady){if(!L.body)return setTimeout(n.ready,1);n.isReady=!0;!0!==a&&0<--n.readyWait||(la.resolveWith(L,[n]),n.fn.trigger&&n(L).trigger("ready").off("ready"))}},isFunction:function(a){return"function"===
n.type(a)},isArray:Array.isArray||function(a){return"array"===n.type(a)},isWindow:function(a){return null!=a&&a==a.window},isNumeric:function(a){return!isNaN(parseFloat(a))&&isFinite(a)},type:function(a){return null==a?String(a):Ja[gb.call(a)]||"object"},isPlainObject:function(a){if(!a||"object"!==n.type(a)||a.nodeType||n.isWindow(a))return!1;try{if(a.constructor&&!rb.call(a,"constructor")&&!rb.call(a.constructor.prototype,"isPrototypeOf"))return!1}catch(b){return!1}for(var d in a);return d===c||
rb.call(a,d)},isEmptyObject:function(a){for(var b in a)return!1;return!0},error:function(a){throw Error(a);},parseHTML:function(a,b,d){var c;if(!a||"string"!==typeof a)return null;"boolean"===typeof b&&(d=b,b=0);b=b||L;if(c=tb.exec(a))return[b.createElement(c[1])];c=n.buildFragment([a],b,d?null:[]);return n.merge([],(c.cacheable?n.clone(c.fragment):c.fragment).childNodes)},parseJSON:function(b){if(!b||"string"!==typeof b)return null;b=n.trim(b);if(a.JSON&&a.JSON.parse)return a.JSON.parse(b);if(Ab.test(b.replace(db,
"@").replace(hb,"]").replace(ub,"")))return(new Function("return "+b))();n.error("Invalid JSON: "+b)},parseXML:function(b){var d,e;if(!b||"string"!==typeof b)return null;try{a.DOMParser?(e=new DOMParser,d=e.parseFromString(b,"text/xml")):(d=new ActiveXObject("Microsoft.XMLDOM"),d.async="false",d.loadXML(b))}catch(f){d=c}d&&d.documentElement&&!d.getElementsByTagName("parsererror").length||n.error("Invalid XML: "+b);return d},noop:function(){},globalEval:function(b){b&&Ib.test(b)&&(a.execScript||function(b){a.eval.call(a,
b)})(b)},camelCase:function(a){return a.replace(ua,"ms-").replace(Bb,Ta)},nodeName:function(a,b){return a.nodeName&&a.nodeName.toLowerCase()===b.toLowerCase()},each:function(a,b,d){var e,f=0,g=a.length,h=g===c||n.isFunction(a);if(d)if(h)for(e in a){if(!1===b.apply(a[e],d))break}else for(;f<g&&!1!==b.apply(a[f++],d););else if(h)for(e in a){if(!1===b.call(a[e],e,a[e]))break}else for(;f<g&&!1!==b.call(a[f],f,a[f++]););return a},trim:sb&&!sb.call("\ufeff\u00a0")?function(a){return null==a?"":sb.call(a)}:
function(a){return null==a?"":(a+"").replace(zb,"")},makeArray:function(a,b){var d,c=b||[];null!=a&&(d=n.type(a),null==a.length||"string"===d||"function"===d||"regexp"===d||n.isWindow(a)?Ia.call(c,a):n.merge(c,a));return c},inArray:function(a,b,d){var c;if(b){if(bb)return bb.call(b,a,d);c=b.length;for(d=d?0>d?Math.max(0,c+d):d:0;d<c;d++)if(d in b&&b[d]===a)return d}return-1},merge:function(a,b){var d=b.length,e=a.length,f=0;if("number"===typeof d)for(;f<d;f++)a[e++]=b[f];else for(;b[f]!==c;)a[e++]=
b[f++];a.length=e;return a},grep:function(a,b,d){var c,e=[],f=0,g=a.length;for(d=!!d;f<g;f++)c=!!b(a[f],f),d!==c&&e.push(a[f]);return e},map:function(a,b,d){var e,f,g=[],h=0,l=a.length;if(a instanceof n||l!==c&&"number"===typeof l&&(0<l&&a[0]&&a[l-1]||0===l||n.isArray(a)))for(;h<l;h++)e=b(a[h],h,d),null!=e&&(g[g.length]=e);else for(f in a)e=b(a[f],f,d),null!=e&&(g[g.length]=e);return g.concat.apply([],g)},guid:1,proxy:function(a,b){var d,e;"string"===typeof b&&(d=a[b],b=a,a=d);if(!n.isFunction(a))return c;
e=za.call(arguments,2);d=function(){return a.apply(b,e.concat(za.call(arguments)))};d.guid=a.guid=a.guid||n.guid++;return d},access:function(a,b,d,e,f,g,h){var l,m=null==d,x=0,D=a.length;if(d&&"object"===typeof d){for(x in d)n.access(a,b,x,d[x],1,g,e);f=1}else if(e!==c){l=h===c&&n.isFunction(e);m&&(l?(l=b,b=function(a,b,d){return l.call(n(a),d)}):(b.call(a,e),b=null));if(b)for(;x<D;x++)b(a[x],d,l?e.call(a[x],x,b(a[x],d)):e,h);f=1}return f?a:m?b.call(a):D?b(a[0],d):g},now:function(){return(new Date).getTime()}});
n.ready.promise=function(b){if(!la)if(la=n.Deferred(),"complete"===L.readyState)setTimeout(n.ready,1);else if(L.addEventListener)L.addEventListener("DOMContentLoaded",vb,!1),a.addEventListener("load",n.ready,!1);else{L.attachEvent("onreadystatechange",vb);a.attachEvent("onload",n.ready);var d=!1;try{d=null==a.frameElement&&L.documentElement}catch(c){}d&&d.doScroll&&function rc(){if(!n.isReady){try{d.doScroll("left")}catch(a){return setTimeout(rc,50)}n.ready()}}()}return la.promise(b)};n.each("Boolean Number String Function Array Date RegExp Object".split(" "),
function(a,b){Ja["[object "+b+"]"]=b.toLowerCase()});ba=n(L);var pb={};n.Callbacks=function(a){a="string"===typeof a?pb[a]||b(a):n.extend({},a);var d,e,f,g,h,l,m=[],x=!a.once&&[],D=function(b){d=a.memory&&b;e=!0;l=g||0;g=0;h=m.length;for(f=!0;m&&l<h;l++)if(!1===m[l].apply(b[0],b[1])&&a.stopOnFalse){d=!1;break}f=!1;m&&(x?x.length&&D(x.shift()):d?m=[]:E.disable())},E={add:function(){if(m){var b=m.length;(function re(b){n.each(b,function(b,d){var e=n.type(d);"function"!==e||a.unique&&E.has(d)?d&&d.length&&
"string"!==e&&re(d):m.push(d)})})(arguments);f?h=m.length:d&&(g=b,D(d))}return this},remove:function(){m&&n.each(arguments,function(a,b){for(var d;-1<(d=n.inArray(b,m,d));)m.splice(d,1),f&&(d<=h&&h--,d<=l&&l--)});return this},has:function(a){return-1<n.inArray(a,m)},empty:function(){m=[];return this},disable:function(){m=x=d=c;return this},disabled:function(){return!m},lock:function(){x=c;d||E.disable();return this},locked:function(){return!x},fireWith:function(a,b){b=b||[];b=[a,b.slice?b.slice():
b];!m||e&&!x||(f?x.push(b):D(b));return this},fire:function(){E.fireWith(this,arguments);return this},fired:function(){return!!e}};return E};n.extend({Deferred:function(a){var b=[["resolve","done",n.Callbacks("once memory"),"resolved"],["reject","fail",n.Callbacks("once memory"),"rejected"],["notify","progress",n.Callbacks("memory")]],d="pending",e={state:function(){return d},always:function(){c.done(arguments).fail(arguments);return this},then:function(){var a=arguments;return n.Deferred(function(d){n.each(b,
function(b,e){var f=e[0],g=a[b];c[e[1]](n.isFunction(g)?function(){var a=g.apply(this,arguments);if(a&&n.isFunction(a.promise))a.promise().done(d.resolve).fail(d.reject).progress(d.notify);else d[f+"With"](this===c?d:this,[a])}:d[f])});a=null}).promise()},promise:function(a){return null!=a?n.extend(a,e):e}},c={};e.pipe=e.then;n.each(b,function(a,f){var g=f[2],h=f[3];e[f[1]]=g.add;h&&g.add(function(){d=h},b[a^1][2].disable,b[2][2].lock);c[f[0]]=g.fire;c[f[0]+"With"]=g.fireWith});e.promise(c);a&&a.call(c,
c);return c},when:function(a){var b=0,d=za.call(arguments),e=d.length,c=1!==e||a&&n.isFunction(a.promise)?e:0,f=1===c?a:n.Deferred(),g=function(a,b,d){return function(e){b[a]=this;d[a]=1<arguments.length?za.call(arguments):e;d===h?f.notifyWith(b,d):--c||f.resolveWith(b,d)}},h,l,m;if(1<e)for(h=Array(e),l=Array(e),m=Array(e);b<e;b++)d[b]&&n.isFunction(d[b].promise)?d[b].promise().done(g(b,m,d)).fail(f.reject).progress(g(b,l,h)):--c;c||f.resolveWith(m,d);return f.promise()}});n.support=function(){var b,
d,e,c,f,g,h,l=L.createElement("div");l.setAttribute("className","t");l.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>";d=l.getElementsByTagName("*");e=l.getElementsByTagName("a")[0];e.style.cssText="top:1px;float:left;opacity:.5";if(!d||!d.length)return{};c=L.createElement("select");f=c.appendChild(L.createElement("option"));d=l.getElementsByTagName("input")[0];b={leadingWhitespace:3===l.firstChild.nodeType,tbody:!l.getElementsByTagName("tbody").length,htmlSerialize:!!l.getElementsByTagName("link").length,
style:/top/.test(e.getAttribute("style")),hrefNormalized:"/a"===e.getAttribute("href"),opacity:/^0.5/.test(e.style.opacity),cssFloat:!!e.style.cssFloat,checkOn:"on"===d.value,optSelected:f.selected,getSetAttribute:"t"!==l.className,enctype:!!L.createElement("form").enctype,html5Clone:"<:nav></:nav>"!==L.createElement("nav").cloneNode(!0).outerHTML,boxModel:"CSS1Compat"===L.compatMode,submitBubbles:!0,changeBubbles:!0,focusinBubbles:!1,deleteExpando:!0,noCloneEvent:!0,inlineBlockNeedsLayout:!1,shrinkWrapBlocks:!1,
reliableMarginRight:!0,boxSizingReliable:!0,pixelPosition:!1};d.checked=!0;b.noCloneChecked=d.cloneNode(!0).checked;c.disabled=!0;b.optDisabled=!f.disabled;try{delete l.test}catch(m){b.deleteExpando=!1}!l.addEventListener&&l.attachEvent&&l.fireEvent&&(l.attachEvent("onclick",e=function(){b.noCloneEvent=!1}),l.cloneNode(!0).fireEvent("onclick"),l.detachEvent("onclick",e));d=L.createElement("input");d.value="t";d.setAttribute("type","radio");b.radioValue="t"===d.value;d.setAttribute("checked","checked");
d.setAttribute("name","t");l.appendChild(d);e=L.createDocumentFragment();e.appendChild(l.lastChild);b.checkClone=e.cloneNode(!0).cloneNode(!0).lastChild.checked;b.appendChecked=d.checked;e.removeChild(d);e.appendChild(l);if(l.attachEvent)for(g in{submit:!0,change:!0,focusin:!0})d="on"+g,h=d in l,h||(l.setAttribute(d,"return;"),h="function"===typeof l[d]),b[g+"Bubbles"]=h;n(function(){var d,e,c,f=L.getElementsByTagName("body")[0];f&&(d=L.createElement("div"),d.style.cssText="visibility:hidden;border:0;width:0;height:0;position:static;top:0;margin-top:1px",
f.insertBefore(d,f.firstChild),e=L.createElement("div"),d.appendChild(e),e.innerHTML="<table><tr><td></td><td>t</td></tr></table>",c=e.getElementsByTagName("td"),c[0].style.cssText="padding:0;margin:0;border:0;display:none",h=0===c[0].offsetHeight,c[0].style.display="",c[1].style.display="none",b.reliableHiddenOffsets=h&&0===c[0].offsetHeight,e.innerHTML="",e.style.cssText="box-sizing:border-box;-moz-box-sizing:border-box;-webkit-box-sizing:border-box;padding:1px;border:1px;display:block;width:4px;margin-top:1%;position:absolute;top:1%;",
b.boxSizing=4===e.offsetWidth,b.doesNotIncludeMarginInBodyOffset=1!==f.offsetTop,a.getComputedStyle&&(b.pixelPosition="1%"!==(a.getComputedStyle(e,null)||{}).top,b.boxSizingReliable="4px"===(a.getComputedStyle(e,null)||{width:"4px"}).width,c=L.createElement("div"),c.style.cssText=e.style.cssText="padding:0;margin:0;border:0;display:block;overflow:hidden;",c.style.marginRight=c.style.width="0",e.style.width="1px",e.appendChild(c),b.reliableMarginRight=!parseFloat((a.getComputedStyle(c,null)||{}).marginRight)),
"undefined"!==typeof e.style.zoom&&(e.innerHTML="",e.style.cssText="padding:0;margin:0;border:0;display:block;overflow:hidden;width:1px;padding:1px;display:inline;zoom:1",b.inlineBlockNeedsLayout=3===e.offsetWidth,e.style.display="block",e.style.overflow="visible",e.innerHTML="<div></div>",e.firstChild.style.width="5px",b.shrinkWrapBlocks=3!==e.offsetWidth,d.style.zoom=1),f.removeChild(d))});e.removeChild(l);d=e=c=f=d=e=l=null;return b}();var ab=/(?:\{[\s\S]*\}|\[[\s\S]*\])$/,Na=/([A-Z])/g;n.extend({cache:{},
deletedIds:[],uuid:0,expando:"jQuery"+(n.fn.jquery+Math.random()).replace(/\D/g,""),noData:{embed:!0,object:"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000",applet:!0},hasData:function(a){a=a.nodeType?n.cache[a[n.expando]]:a[n.expando];return!!a&&!e(a)},data:function(a,b,d,e){if(n.acceptData(a)){var f=n.expando,g="string"===typeof b,h=a.nodeType,l=h?n.cache:a,m=h?a[f]:a[f]&&f;if(m&&l[m]&&(e||l[m].data)||!g||d!==c){m||(h?a[f]=m=n.deletedIds.pop()||n.guid++:m=f);l[m]||(l[m]={},h||(l[m].toJSON=n.noop));
if("object"===typeof b||"function"===typeof b)e?l[m]=n.extend(l[m],b):l[m].data=n.extend(l[m].data,b);a=l[m];e||(a.data||(a.data={}),a=a.data);d!==c&&(a[n.camelCase(b)]=d);g?(d=a[b],null==d&&(d=a[n.camelCase(b)])):d=a;return d}}},removeData:function(a,b,d){if(n.acceptData(a)){var c,f,g,h=a.nodeType,l=h?n.cache:a,m=h?a[n.expando]:n.expando;if(l[m]){if(b&&(c=d?l[m]:l[m].data)){n.isArray(b)||(b in c?b=[b]:(b=n.camelCase(b),b=b in c?[b]:b.split(" ")));f=0;for(g=b.length;f<g;f++)delete c[b[f]];if(!(d?
e:n.isEmptyObject)(c))return}if(!d&&(delete l[m].data,!e(l[m])))return;h?n.cleanData([a],!0):n.support.deleteExpando||l!=l.window?delete l[m]:l[m]=null}}},_data:function(a,b,d){return n.data(a,b,d,!0)},acceptData:function(a){var b=a.nodeName&&n.noData[a.nodeName.toLowerCase()];return!b||!0!==b&&a.getAttribute("classid")===b}});n.fn.extend({data:function(a,b){var e,f,g,h,l,m=this[0],x=0,D=null;if(a===c){if(this.length&&(D=n.data(m),1===m.nodeType&&!n._data(m,"parsedAttrs"))){g=m.attributes;for(l=g.length;x<
l;x++)h=g[x].name,h.indexOf("data-")||(h=n.camelCase(h.substring(5)),d(m,h,D[h]));n._data(m,"parsedAttrs",!0)}return D}if("object"===typeof a)return this.each(function(){n.data(this,a)});e=a.split(".",2);e[1]=e[1]?"."+e[1]:"";f=e[1]+"!";return n.access(this,function(b){if(b===c)return D=this.triggerHandler("getData"+f,[e[0]]),D===c&&m&&(D=n.data(m,a),D=d(m,a,D)),D===c&&e[1]?this.data(e[0]):D;e[1]=b;this.each(function(){var d=n(this);d.triggerHandler("setData"+f,e);n.data(this,a,b);d.triggerHandler("changeData"+
f,e)})},null,b,1<arguments.length,null,!1)},removeData:function(a){return this.each(function(){n.removeData(this,a)})}});n.extend({queue:function(a,b,d){var e;if(a)return b=(b||"fx")+"queue",e=n._data(a,b),d&&(!e||n.isArray(d)?e=n._data(a,b,n.makeArray(d)):e.push(d)),e||[]},dequeue:function(a,b){b=b||"fx";var d=n.queue(a,b),e=d.length,c=d.shift(),f=n._queueHooks(a,b),g=function(){n.dequeue(a,b)};"inprogress"===c&&(c=d.shift(),e--);c&&("fx"===b&&d.unshift("inprogress"),delete f.stop,c.call(a,g,f));
!e&&f&&f.empty.fire()},_queueHooks:function(a,b){var d=b+"queueHooks";return n._data(a,d)||n._data(a,d,{empty:n.Callbacks("once memory").add(function(){n.removeData(a,b+"queue",!0);n.removeData(a,d,!0)})})}});n.fn.extend({queue:function(a,b){var d=2;"string"!==typeof a&&(b=a,a="fx",d--);return arguments.length<d?n.queue(this[0],a):b===c?this:this.each(function(){var d=n.queue(this,a,b);n._queueHooks(this,a);"fx"===a&&"inprogress"!==d[0]&&n.dequeue(this,a)})},dequeue:function(a){return this.each(function(){n.dequeue(this,
a)})},delay:function(a,b){a=n.fx?n.fx.speeds[a]||a:a;return this.queue(b||"fx",function(b,d){var e=setTimeout(b,a);d.stop=function(){clearTimeout(e)}})},clearQueue:function(a){return this.queue(a||"fx",[])},promise:function(a,b){var d,e=1,f=n.Deferred(),g=this,h=this.length,l=function(){--e||f.resolveWith(g,[g])};"string"!==typeof a&&(b=a,a=c);for(a=a||"fx";h--;)(d=n._data(g[h],a+"queueHooks"))&&d.empty&&(e++,d.empty.add(l));l();return f.promise(b)}});var da,ta,Za,ib=/[\t\r\n]/g,Wb=/\r/g,W=/^(?:button|input)$/i,
Cb=/^(?:button|input|object|select|textarea)$/i,Pa=/^a(?:rea|)$/i,$a=/^(?:autofocus|autoplay|async|checked|controls|defer|disabled|hidden|loop|multiple|open|readonly|required|scoped|selected)$/i,Ka=n.support.getSetAttribute;n.fn.extend({attr:function(a,b){return n.access(this,n.attr,a,b,1<arguments.length)},removeAttr:function(a){return this.each(function(){n.removeAttr(this,a)})},prop:function(a,b){return n.access(this,n.prop,a,b,1<arguments.length)},removeProp:function(a){a=n.propFix[a]||a;return this.each(function(){try{this[a]=
c,delete this[a]}catch(b){}})},addClass:function(a){var b,d,e,c,f,g,h;if(n.isFunction(a))return this.each(function(b){n(this).addClass(a.call(this,b,this.className))});if(a&&"string"===typeof a)for(b=a.split(Fa),d=0,e=this.length;d<e;d++)if(c=this[d],1===c.nodeType)if(c.className||1!==b.length){f=" "+c.className+" ";g=0;for(h=b.length;g<h;g++)0>f.indexOf(" "+b[g]+" ")&&(f+=b[g]+" ");c.className=n.trim(f)}else c.className=a;return this},removeClass:function(a){var b,d,e,f,g,h,l;if(n.isFunction(a))return this.each(function(b){n(this).removeClass(a.call(this,
b,this.className))});if(a&&"string"===typeof a||a===c)for(b=(a||"").split(Fa),h=0,l=this.length;h<l;h++)if(e=this[h],1===e.nodeType&&e.className){d=(" "+e.className+" ").replace(ib," ");f=0;for(g=b.length;f<g;f++)for(;0<=d.indexOf(" "+b[f]+" ");)d=d.replace(" "+b[f]+" "," ");e.className=a?n.trim(d):""}return this},toggleClass:function(a,b){var d=typeof a,e="boolean"===typeof b;return n.isFunction(a)?this.each(function(d){n(this).toggleClass(a.call(this,d,this.className,b),b)}):this.each(function(){if("string"===
d)for(var c,f=0,g=n(this),h=b,l=a.split(Fa);c=l[f++];)h=e?h:!g.hasClass(c),g[h?"addClass":"removeClass"](c);else if("undefined"===d||"boolean"===d)this.className&&n._data(this,"__className__",this.className),this.className=this.className||!1===a?"":n._data(this,"__className__")||""})},hasClass:function(a){a=" "+a+" ";for(var b=0,d=this.length;b<d;b++)if(1===this[b].nodeType&&0<=(" "+this[b].className+" ").replace(ib," ").indexOf(a))return!0;return!1},val:function(a){var b,d,e,f=this[0];if(arguments.length)return e=
n.isFunction(a),this.each(function(d){var f=n(this);1===this.nodeType&&(d=e?a.call(this,d,f.val()):a,null==d?d="":"number"===typeof d?d+="":n.isArray(d)&&(d=n.map(d,function(a){return null==a?"":a+""})),b=n.valHooks[this.type]||n.valHooks[this.nodeName.toLowerCase()],b&&"set"in b&&b.set(this,d,"value")!==c||(this.value=d))});if(f){if((b=n.valHooks[f.type]||n.valHooks[f.nodeName.toLowerCase()])&&"get"in b&&(d=b.get(f,"value"))!==c)return d;d=f.value;return"string"===typeof d?d.replace(Wb,""):null==
d?"":d}}});n.extend({valHooks:{option:{get:function(a){var b=a.attributes.value;return!b||b.specified?a.value:a.text}},select:{get:function(a){var b,d,e=a.selectedIndex,c=[],f=a.options,g="select-one"===a.type;if(0>e)return null;a=g?e:0;for(d=g?e+1:f.length;a<d;a++)if(b=f[a],!(!b.selected||(n.support.optDisabled?b.disabled:null!==b.getAttribute("disabled"))||b.parentNode.disabled&&n.nodeName(b.parentNode,"optgroup"))){b=n(b).val();if(g)return b;c.push(b)}return g&&!c.length&&f.length?n(f[e]).val():
c},set:function(a,b){var d=n.makeArray(b);n(a).find("option").each(function(){this.selected=0<=n.inArray(n(this).val(),d)});d.length||(a.selectedIndex=-1);return d}}},attrFn:{},attr:function(a,b,d,e){var f,g,h=a.nodeType;if(a&&3!==h&&8!==h&&2!==h){if(e&&n.isFunction(n.fn[b]))return n(a)[b](d);if("undefined"===typeof a.getAttribute)return n.prop(a,b,d);if(e=1!==h||!n.isXMLDoc(a))b=b.toLowerCase(),g=n.attrHooks[b]||($a.test(b)?ta:da);if(d!==c)if(null===d)n.removeAttr(a,b);else{if(g&&"set"in g&&e&&(f=
g.set(a,d,b))!==c)return f;a.setAttribute(b,d+"");return d}else{if(g&&"get"in g&&e&&null!==(f=g.get(a,b)))return f;f=a.getAttribute(b);return null===f?c:f}}},removeAttr:function(a,b){var d,e,c,f,g=0;if(b&&1===a.nodeType)for(e=b.split(Fa);g<e.length;g++)if(c=e[g])d=n.propFix[c]||c,(f=$a.test(c))||n.attr(a,c,""),a.removeAttribute(Ka?c:d),f&&d in a&&(a[d]=!1)},attrHooks:{type:{set:function(a,b){if(W.test(a.nodeName)&&a.parentNode)n.error("type property can't be changed");else if(!n.support.radioValue&&
"radio"===b&&n.nodeName(a,"input")){var d=a.value;a.setAttribute("type",b);d&&(a.value=d);return b}}},value:{get:function(a,b){return da&&n.nodeName(a,"button")?da.get(a,b):b in a?a.value:null},set:function(a,b,d){if(da&&n.nodeName(a,"button"))return da.set(a,b,d);a.value=b}}},propFix:{tabindex:"tabIndex",readonly:"readOnly","for":"htmlFor","class":"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",usemap:"useMap",frameborder:"frameBorder",
contenteditable:"contentEditable"},prop:function(a,b,d){var e,f,g;g=a.nodeType;if(a&&3!==g&&8!==g&&2!==g){if(g=1!==g||!n.isXMLDoc(a))b=n.propFix[b]||b,f=n.propHooks[b];return d!==c?f&&"set"in f&&(e=f.set(a,d,b))!==c?e:a[b]=d:f&&"get"in f&&null!==(e=f.get(a,b))?e:a[b]}},propHooks:{tabIndex:{get:function(a){var b=a.getAttributeNode("tabindex");return b&&b.specified?parseInt(b.value,10):Cb.test(a.nodeName)||Pa.test(a.nodeName)&&a.href?0:c}}}});ta={get:function(a,b){var d,e=n.prop(a,b);return!0===e||
"boolean"!==typeof e&&(d=a.getAttributeNode(b))&&!1!==d.nodeValue?b.toLowerCase():c},set:function(a,b,d){!1===b?n.removeAttr(a,d):(b=n.propFix[d]||d,b in a&&(a[b]=!0),a.setAttribute(d,d.toLowerCase()));return d}};Ka||(Za={name:!0,id:!0,coords:!0},da=n.valHooks.button={get:function(a,b){var d;return(d=a.getAttributeNode(b))&&(Za[b]?""!==d.value:d.specified)?d.value:c},set:function(a,b,d){var e=a.getAttributeNode(d);e||(e=L.createAttribute(d),a.setAttributeNode(e));return e.value=b+""}},n.each(["width",
"height"],function(a,b){n.attrHooks[b]=n.extend(n.attrHooks[b],{set:function(a,d){if(""===d)return a.setAttribute(b,"auto"),d}})}),n.attrHooks.contenteditable={get:da.get,set:function(a,b,d){""===b&&(b="false");da.set(a,b,d)}});n.support.hrefNormalized||n.each(["href","src","width","height"],function(a,b){n.attrHooks[b]=n.extend(n.attrHooks[b],{get:function(a){a=a.getAttribute(b,2);return null===a?c:a}})});n.support.style||(n.attrHooks.style={get:function(a){return a.style.cssText.toLowerCase()||
c},set:function(a,b){return a.style.cssText=b+""}});n.support.optSelected||(n.propHooks.selected=n.extend(n.propHooks.selected,{get:function(a){if(a=a.parentNode)a.selectedIndex,a.parentNode&&a.parentNode.selectedIndex;return null}}));n.support.enctype||(n.propFix.enctype="encoding");n.support.checkOn||n.each(["radio","checkbox"],function(){n.valHooks[this]={get:function(a){return null===a.getAttribute("value")?"on":a.value}}});n.each(["radio","checkbox"],function(){n.valHooks[this]=n.extend(n.valHooks[this],
{set:function(a,b){if(n.isArray(b))return a.checked=0<=n.inArray(n(a).val(),b)}})});var jb=/^(?:textarea|input|select)$/i,Ba=/^([^\.]*|)(?:\.(.+)|)$/,ka=/(?:^|\s)hover(\.\S+|)\b/,Qa=/^key/,kb=/^(?:mouse|contextmenu)|click/,oa=/^(?:focusinfocus|focusoutblur)$/,S=function(a){return n.event.special.hover?a:a.replace(ka,"mouseenter$1 mouseleave$1")};n.event={add:function(a,b,d,e,f){var g,h,l,m,x,D,E,p,U;if(3!==a.nodeType&&8!==a.nodeType&&b&&d&&(g=n._data(a))){d.handler&&(E=d,d=E.handler,f=E.selector);
d.guid||(d.guid=n.guid++);l=g.events;l||(g.events=l={});h=g.handle;h||(g.handle=h=function(a){return"undefined"===typeof n||a&&n.event.triggered===a.type?c:n.event.dispatch.apply(h.elem,arguments)},h.elem=a);b=n.trim(S(b)).split(" ");for(g=0;g<b.length;g++)m=Ba.exec(b[g])||[],x=m[1],D=(m[2]||"").split(".").sort(),U=n.event.special[x]||{},x=(f?U.delegateType:U.bindType)||x,U=n.event.special[x]||{},m=n.extend({type:x,origType:m[1],data:e,handler:d,guid:d.guid,selector:f,needsContext:f&&n.expr.match.needsContext.test(f),
namespace:D.join(".")},E),p=l[x],p||(p=l[x]=[],p.delegateCount=0,U.setup&&!1!==U.setup.call(a,e,D,h)||(a.addEventListener?a.addEventListener(x,h,!1):a.attachEvent&&a.attachEvent("on"+x,h))),U.add&&(U.add.call(a,m),m.handler.guid||(m.handler.guid=d.guid)),f?p.splice(p.delegateCount++,0,m):p.push(m),n.event.global[x]=!0;a=null}},global:{},remove:function(a,b,d,e,c){var f,g,h,l,m,x,D,E,p,U,q=n.hasData(a)&&n._data(a);if(q&&(D=q.events)){b=n.trim(S(b||"")).split(" ");for(f=0;f<b.length;f++)if(g=Ba.exec(b[f])||
[],h=l=g[1],g=g[2],h){E=n.event.special[h]||{};h=(e?E.delegateType:E.bindType)||h;p=D[h]||[];m=p.length;g=g?new RegExp("(^|\\.)"+g.split(".").sort().join("\\.(?:.*\\.|)")+"(\\.|$)"):null;for(x=0;x<p.length;x++)U=p[x],!c&&l!==U.origType||d&&d.guid!==U.guid||g&&!g.test(U.namespace)||e&&e!==U.selector&&("**"!==e||!U.selector)||(p.splice(x--,1),U.selector&&p.delegateCount--,E.remove&&E.remove.call(a,U));0===p.length&&m!==p.length&&(E.teardown&&!1!==E.teardown.call(a,g,q.handle)||n.removeEvent(a,h,q.handle),
delete D[h])}else for(h in D)n.event.remove(a,h+b[f],d,e,!0);n.isEmptyObject(D)&&(delete q.handle,n.removeData(a,"events",!0))}},customEvent:{getData:!0,setData:!0,changeData:!0},trigger:function(b,d,e,f){if(!e||3!==e.nodeType&&8!==e.nodeType){var g,h,l,m,x,D,E=b.type||b;l=[];if(!oa.test(E+n.event.triggered)&&(0<=E.indexOf("!")&&(E=E.slice(0,-1),g=!0),0<=E.indexOf(".")&&(l=E.split("."),E=l.shift(),l.sort()),e&&!n.event.customEvent[E]||n.event.global[E]))if(b="object"===typeof b?b[n.expando]?b:new n.Event(E,
b):new n.Event(E),b.type=E,b.isTrigger=!0,b.exclusive=g,b.namespace=l.join("."),b.namespace_re=b.namespace?new RegExp("(^|\\.)"+l.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,l=0>E.indexOf(":")?"on"+E:"",e){if(b.result=c,b.target||(b.target=e),d=null!=d?n.makeArray(d):[],d.unshift(b),m=n.event.special[E]||{},!m.trigger||!1!==m.trigger.apply(e,d)){D=[[e,m.bindType||E]];if(!f&&!m.noBubble&&!n.isWindow(e)){x=m.delegateType||E;g=oa.test(x+E)?e:e.parentNode;for(h=e;g;g=g.parentNode)D.push([g,x]),h=g;h===(e.ownerDocument||
L)&&D.push([h.defaultView||h.parentWindow||a,x])}for(h=0;h<D.length&&!b.isPropagationStopped();h++)g=D[h][0],b.type=D[h][1],(x=(n._data(g,"events")||{})[b.type]&&n._data(g,"handle"))&&x.apply(g,d),(x=l&&g[l])&&n.acceptData(g)&&x.apply&&!1===x.apply(g,d)&&b.preventDefault();b.type=E;f||b.isDefaultPrevented()||m._default&&!1!==m._default.apply(e.ownerDocument,d)||"click"===E&&n.nodeName(e,"a")||!n.acceptData(e)||!l||!e[E]||("focus"===E||"blur"===E)&&0===b.target.offsetWidth||n.isWindow(e)||((h=e[l])&&
(e[l]=null),n.event.triggered=E,e[E](),n.event.triggered=c,h&&(e[l]=h));return b.result}}else for(h in e=n.cache,e)e[h].events&&e[h].events[E]&&n.event.trigger(b,d,e[h].handle.elem,!0)}},dispatch:function(b){b=n.event.fix(b||a.event);var d,e,f,g,h,l,m=(n._data(this,"events")||{})[b.type]||[],x=m.delegateCount,D=za.call(arguments),E=!b.exclusive&&!b.namespace,p=n.event.special[b.type]||{},U=[];D[0]=b;b.delegateTarget=this;if(!p.preDispatch||!1!==p.preDispatch.call(this,b)){if(x&&(!b.button||"click"!==
b.type))for(e=b.target;e!=this;e=e.parentNode||this)if(!0!==e.disabled||"click"!==b.type){g={};h=[];for(d=0;d<x;d++)f=m[d],l=f.selector,g[l]===c&&(g[l]=f.needsContext?0<=n(l,this).index(e):n.find(l,this,null,[e]).length),g[l]&&h.push(f);h.length&&U.push({elem:e,matches:h})}m.length>x&&U.push({elem:this,matches:m.slice(x)});for(d=0;d<U.length&&!b.isPropagationStopped();d++)for(g=U[d],b.currentTarget=g.elem,e=0;e<g.matches.length&&!b.isImmediatePropagationStopped();e++)if(f=g.matches[e],E||!b.namespace&&
!f.namespace||b.namespace_re&&b.namespace_re.test(f.namespace))b.data=f.data,b.handleObj=f,f=((n.event.special[f.origType]||{}).handle||f.handler).apply(g.elem,D),f!==c&&(b.result=f,!1===f&&(b.preventDefault(),b.stopPropagation()));p.postDispatch&&p.postDispatch.call(this,b);return b.result}},props:"attrChange attrName relatedNode srcElement altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:["char",
"charCode","key","keyCode"],filter:function(a,b){null==a.which&&(a.which=null!=b.charCode?b.charCode:b.keyCode);return a}},mouseHooks:{props:"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(a,b){var d,e,f=b.button,g=b.fromElement;null==a.pageX&&null!=b.clientX&&(d=a.target.ownerDocument||L,e=d.documentElement,d=d.body,a.pageX=b.clientX+(e&&e.scrollLeft||d&&d.scrollLeft||0)-(e&&e.clientLeft||d&&d.clientLeft||0),a.pageY=b.clientY+
(e&&e.scrollTop||d&&d.scrollTop||0)-(e&&e.clientTop||d&&d.clientTop||0));!a.relatedTarget&&g&&(a.relatedTarget=g===a.target?b.toElement:g);a.which||f===c||(a.which=f&1?1:f&2?3:f&4?2:0);return a}},fix:function(a){if(a[n.expando])return a;var b,d,e=a,c=n.event.fixHooks[a.type]||{},f=c.props?this.props.concat(c.props):this.props;a=n.Event(e);for(b=f.length;b;)d=f[--b],a[d]=e[d];a.target||(a.target=e.srcElement||L);3===a.target.nodeType&&(a.target=a.target.parentNode);a.metaKey=!!a.metaKey;return c.filter?
c.filter(a,e):a},special:{load:{noBubble:!0},focus:{delegateType:"focusin"},blur:{delegateType:"focusout"},beforeunload:{setup:function(a,b,d){n.isWindow(this)&&(this.onbeforeunload=d)},teardown:function(a,b){this.onbeforeunload===b&&(this.onbeforeunload=null)}}},simulate:function(a,b,d,e){a=n.extend(new n.Event,d,{type:a,isSimulated:!0,originalEvent:{}});e?n.event.trigger(a,null,b):n.event.dispatch.call(b,a);a.isDefaultPrevented()&&d.preventDefault()}};n.event.handle=n.event.dispatch;n.removeEvent=
L.removeEventListener?function(a,b,d){a.removeEventListener&&a.removeEventListener(b,d,!1)}:function(a,b,d){b="on"+b;a.detachEvent&&("undefined"===typeof a[b]&&(a[b]=null),a.detachEvent(b,d))};n.Event=function(a,b){if(!(this instanceof n.Event))return new n.Event(a,b);a&&a.type?(this.originalEvent=a,this.type=a.type,this.isDefaultPrevented=a.defaultPrevented||!1===a.returnValue||a.getPreventDefault&&a.getPreventDefault()?g:f):this.type=a;b&&n.extend(this,b);this.timeStamp=a&&a.timeStamp||n.now();
this[n.expando]=!0};n.Event.prototype={preventDefault:function(){this.isDefaultPrevented=g;var a=this.originalEvent;a&&(a.preventDefault?a.preventDefault():a.returnValue=!1)},stopPropagation:function(){this.isPropagationStopped=g;var a=this.originalEvent;a&&(a.stopPropagation&&a.stopPropagation(),a.cancelBubble=!0)},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=g;this.stopPropagation()},isDefaultPrevented:f,isPropagationStopped:f,isImmediatePropagationStopped:f};n.each({mouseenter:"mouseover",
mouseleave:"mouseout"},function(a,b){n.event.special[a]={delegateType:b,bindType:b,handle:function(a){var d,e=a.relatedTarget,c=a.handleObj;if(!e||e!==this&&!n.contains(this,e))a.type=c.origType,d=c.handler.apply(this,arguments),a.type=b;return d}}});n.support.submitBubbles||(n.event.special.submit={setup:function(){if(n.nodeName(this,"form"))return!1;n.event.add(this,"click._submit keypress._submit",function(a){a=a.target;(a=n.nodeName(a,"input")||n.nodeName(a,"button")?a.form:c)&&!n._data(a,"_submit_attached")&&
(n.event.add(a,"submit._submit",function(a){a._submit_bubble=!0}),n._data(a,"_submit_attached",!0))})},postDispatch:function(a){a._submit_bubble&&(delete a._submit_bubble,this.parentNode&&!a.isTrigger&&n.event.simulate("submit",this.parentNode,a,!0))},teardown:function(){if(n.nodeName(this,"form"))return!1;n.event.remove(this,"._submit")}});n.support.changeBubbles||(n.event.special.change={setup:function(){if(jb.test(this.nodeName)){if("checkbox"===this.type||"radio"===this.type)n.event.add(this,
"propertychange._change",function(a){"checked"===a.originalEvent.propertyName&&(this._just_changed=!0)}),n.event.add(this,"click._change",function(a){this._just_changed&&!a.isTrigger&&(this._just_changed=!1);n.event.simulate("change",this,a,!0)});return!1}n.event.add(this,"beforeactivate._change",function(a){a=a.target;jb.test(a.nodeName)&&!n._data(a,"_change_attached")&&(n.event.add(a,"change._change",function(a){!this.parentNode||a.isSimulated||a.isTrigger||n.event.simulate("change",this.parentNode,
a,!0)}),n._data(a,"_change_attached",!0))})},handle:function(a){var b=a.target;if(this!==b||a.isSimulated||a.isTrigger||"radio"!==b.type&&"checkbox"!==b.type)return a.handleObj.handler.apply(this,arguments)},teardown:function(){n.event.remove(this,"._change");return!jb.test(this.nodeName)}});n.support.focusinBubbles||n.each({focus:"focusin",blur:"focusout"},function(a,b){var d=0,e=function(a){n.event.simulate(b,a.target,n.event.fix(a),!0)};n.event.special[b]={setup:function(){0===d++&&L.addEventListener(a,
e,!0)},teardown:function(){0===--d&&L.removeEventListener(a,e,!0)}}});n.fn.extend({on:function(a,b,d,e,g){var h,l;if("object"===typeof a){"string"!==typeof b&&(d=d||b,b=c);for(l in a)this.on(l,b,d,a[l],g);return this}null==d&&null==e?(e=b,d=b=c):null==e&&("string"===typeof b?(e=d,d=c):(e=d,d=b,b=c));if(!1===e)e=f;else if(!e)return this;1===g&&(h=e,e=function(a){n().off(a);return h.apply(this,arguments)},e.guid=h.guid||(h.guid=n.guid++));return this.each(function(){n.event.add(this,a,e,d,b)})},one:function(a,
b,d,e){return this.on(a,b,d,e,1)},off:function(a,b,d){var e;if(a&&a.preventDefault&&a.handleObj)return e=a.handleObj,n(a.delegateTarget).off(e.namespace?e.origType+"."+e.namespace:e.origType,e.selector,e.handler),this;if("object"===typeof a){for(e in a)this.off(e,b,a[e]);return this}if(!1===b||"function"===typeof b)d=b,b=c;!1===d&&(d=f);return this.each(function(){n.event.remove(this,a,d,b)})},bind:function(a,b,d){return this.on(a,null,b,d)},unbind:function(a,b){return this.off(a,null,b)},live:function(a,
b,d){n(this.context).on(a,this.selector,b,d);return this},die:function(a,b){n(this.context).off(a,this.selector||"**",b);return this},delegate:function(a,b,d,e){return this.on(b,a,d,e)},undelegate:function(a,b,d){return 1===arguments.length?this.off(a,"**"):this.off(b,a||"**",d)},trigger:function(a,b){return this.each(function(){n.event.trigger(a,b,this)})},triggerHandler:function(a,b){if(this[0])return n.event.trigger(a,b,this[0],!0)},toggle:function(a){var b=arguments,d=a.guid||n.guid++,e=0,c=function(d){var c=
(n._data(this,"lastToggle"+a.guid)||0)%e;n._data(this,"lastToggle"+a.guid,c+1);d.preventDefault();return b[c].apply(this,arguments)||!1};for(c.guid=d;e<b.length;)b[e++].guid=d;return this.click(c)},hover:function(a,b){return this.mouseenter(a).mouseleave(b||a)}});n.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(a,b){n.fn[b]=
function(a,d){null==d&&(d=a,a=null);return 0<arguments.length?this.on(b,null,a,d):this.trigger(b)};Qa.test(b)&&(n.event.fixHooks[b]=n.event.keyHooks);kb.test(b)&&(n.event.fixHooks[b]=n.event.mouseHooks)});(function(a,b){function d(a,b,e,c){e=e||[];b=b||C;var f,g,h,l,m=b.nodeType;if(!a||"string"!==typeof a)return e;if(1!==m&&9!==m)return[];h=t(b);if(!h&&!c&&(f=la.exec(a)))if(l=f[1])if(9===m)if((g=b.getElementById(l))&&g.parentNode){if(g.id===l)return e.push(g),e}else return e;else{if(b.ownerDocument&&
(g=b.ownerDocument.getElementById(l))&&A(b,g)&&g.id===l)return e.push(g),e}else{if(f[2])return H.apply(e,wb.call(b.getElementsByTagName(a),0)),e;if((l=f[3])&&Q&&b.getElementsByClassName)return H.apply(e,wb.call(b.getElementsByClassName(l),0)),e}return U(a.replace(Da,"$1"),b,e,c,h)}function e(a){return function(b){return"input"===b.nodeName.toLowerCase()&&b.type===a}}function c(a){return function(b){var d=b.nodeName.toLowerCase();return("input"===d||"button"===d)&&b.type===a}}function f(a){return na(function(b){b=
+b;return na(function(d,e){for(var c,f=a([],d.length,b),g=f.length;g--;)d[c=f[g]]&&(d[c]=!(e[c]=d[c]))})})}function g(a,b,d){if(a===b)return d;for(a=a.nextSibling;a;){if(a===b)return-1;a=a.nextSibling}return 1}function h(a,b){var e,c,f,g,l,m,x;if(l=sa[B][a])return b?0:l.slice(0);l=a;m=[];for(x=ha.preFilter;l;){if(!e||(c=ia.exec(l)))c&&(l=l.slice(c[0].length)),m.push(f=[]);e=!1;if(c=ja.exec(l))f.push(e=new I(c.shift())),l=l.slice(e.length),e.type=c[0].replace(Da," ");for(g in ha.filter)!(c=K[g].exec(l))||
x[g]&&!(c=x[g](c,C,!0))||(f.push(e=new I(c.shift())),l=l.slice(e.length),e.type=g,e.matches=c);if(!e)break}return b?l.length:l?d.error(a):sa(a,m).slice(0)}function l(a,b,d){var e=b.dir,c=d&&"parentNode"===b.dir,f=Kb++;return b.first?function(b,d,f){for(;b=b[e];)if(c||1===b.nodeType)return a(b,d,f)}:function(b,d,g){if(!g)for(var h,l=F+" "+f+" ",m=l+xa;b=b[e];){if(c||1===b.nodeType){if((h=b[B])===m)return b.sizset;if("string"===typeof h&&0===h.indexOf(l)){if(b.sizset)return b}else{b[B]=m;if(a(b,d,g))return b.sizset=
!0,b;b.sizset=!1}}}else for(;b=b[e];)if((c||1===b.nodeType)&&a(b,d,g))return b}}function m(a){return 1<a.length?function(b,d,e){for(var c=a.length;c--;)if(!a[c](b,d,e))return!1;return!0}:a[0]}function x(a,b,d,e,c){for(var f,g=[],h=0,l=a.length,m=null!=b;h<l;h++)if(f=a[h])if(!d||d(f,e,c))g.push(f),m&&b.push(h);return g}function D(a,b,e,c,f,g){c&&!c[B]&&(c=D(c));f&&!f[B]&&(f=D(f,g));return na(function(g,h,l,m){if(!g||!f){var D,E,p=[],U=[],n=h.length;if(!(E=g)){E=b||"*";var q=l.nodeType?[l]:l,xa=[];
D=0;for(var Ga=q.length;D<Ga;D++)d(E,q[D],xa,g);E=xa}q=!a||!g&&b?E:x(E,p,a,l,m);xa=e?f||(g?a:n||c)?[]:h:q;e&&e(q,xa,l,m);if(c)for(E=x(xa,U),c(E,[],l,m),l=E.length;l--;)if(D=E[l])xa[U[l]]=!(q[U[l]]=D);if(g)for(l=a&&xa.length;l--;){if(D=xa[l])g[p[l]]=!(h[p[l]]=D)}else xa=x(xa===h?xa.splice(n,xa.length):xa),f?f(null,h,xa,m):H.apply(h,xa)}})}function E(a){var b,d,e,c=a.length,f=ha.relative[a[0].type];d=f||ha.relative[" "];for(var g=f?1:0,h=l(function(a){return a===b},d,!0),x=l(function(a){return-1<Z.call(b,
a)},d,!0),p=[function(a,d,e){return!f&&(e||d!==z)||((b=d).nodeType?h(a,d,e):x(a,d,e))}];g<c;g++)if(d=ha.relative[a[g].type])p=[l(m(p),d)];else{d=ha.filter[a[g].type].apply(null,a[g].matches);if(d[B]){for(e=++g;e<c&&!ha.relative[a[e].type];e++);return D(1<g&&m(p),1<g&&a.slice(0,g-1).join("").replace(Da,"$1"),d,g<e&&E(a.slice(g,e)),e<c&&E(a=a.slice(e)),e<c&&a.join(""))}p.push(d)}return m(p)}function p(a,b){var e=0<b.length,c=0<a.length,f=function(g,h,l,m,D){var E,p,U=[],n=0,q="0",Ga=g&&[],r=null!=D,
t=z,A=g||c&&ha.find.TAG("*",D&&h.parentNode||h),Tc=F+=null==t?1:Math.E;r&&(z=h!==C&&h,xa=f.el);for(;null!=(D=A[q]);q++){if(c&&D){for(E=0;p=a[E];E++)if(p(D,h,l)){m.push(D);break}r&&(F=Tc,xa=++f.el)}e&&((D=!p&&D)&&n--,g&&Ga.push(D))}n+=q;if(e&&q!==n){for(E=0;p=b[E];E++)p(Ga,U,h,l);if(g){if(0<n)for(;q--;)Ga[q]||U[q]||(U[q]=Ea.call(m));U=x(U)}H.apply(m,U);r&&!g&&0<U.length&&1<n+b.length&&d.uniqueSort(m)}r&&(F=Tc,z=t);return Ga};f.el=0;return e?na(f):f}function U(a,b,d,e,c){var f,g,l,m,x=h(a);if(!e&&1===
x.length){g=x[0]=x[0].slice(0);if(2<g.length&&"ID"===(l=g[0]).type&&9===b.nodeType&&!c&&ha.relative[g[1].type]){b=ha.find.ID(l.matches[0].replace(ba,""),b,c)[0];if(!b)return d;a=a.slice(g.shift().length)}for(f=K.POS.test(a)?-1:g.length-1;0<=f;f--){l=g[f];if(ha.relative[m=l.type])break;if(m=ha.find[m])if(e=m(l.matches[0].replace(ba,""),fa.test(g[0].type)&&b.parentNode||b,c)){g.splice(f,1);a=e.length&&g.join("");if(!a)return H.apply(d,wb.call(e,0)),d;break}}}y(a,x)(e,b,c,d,fa.test(a));return d}function q(){}
var xa,Ga,ha,r,t,A,y,u,v,z,La=!0,B=("sizcache"+Math.random()).replace(".",""),I=String,C=a.document,J=C.documentElement,F=0,Kb=0,Ea=[].pop,H=[].push,wb=[].slice,Z=[].indexOf||function(a){for(var b=0,d=this.length;b<d;b++)if(this[b]===a)return b;return-1},na=function(a,b){a[B]=null==b||b;return a},ca=function(){var a={},b=[];return na(function(d,e){b.push(d)>ha.cacheLength&&delete a[b.shift()];return a[d]=e},a)},O=ca(),sa=ca(),Yb=ca(),ca="\\[[\\x20\\t\\r\\n\\f]*((?:\\\\.|[-\\w]|[^\\x00-\\xa0])+)[\\x20\\t\\r\\n\\f]*(?:([*^$|!~]?=)[\\x20\\t\\r\\n\\f]*(?:(['\"])((?:\\\\.|[^\\\\])*?)\\3|("+
"(?:\\\\.|[-\\w]|[^\\x00-\\xa0])+".replace("w","w#")+")|)|)[\\x20\\t\\r\\n\\f]*\\]",T=":((?:\\\\.|[-\\w]|[^\\x00-\\xa0])+)(?:\\((?:(['\"])((?:\\\\.|[^\\\\])*?)\\2|([^()[\\]]*|(?:(?:"+ca+")|[^:]|\\\\.)*|.*))\\)|)",Da=RegExp("^[\\x20\\t\\r\\n\\f]+|((?:^|[^\\\\])(?:\\\\.)*)[\\x20\\t\\r\\n\\f]+$","g"),ia=/^[\x20\t\r\n\f]*,[\x20\t\r\n\f]*/,ja=/^[\x20\t\r\n\f]*([\x20\t\r\n\f>+~])[\x20\t\r\n\f]*/,aa=new RegExp(T),la=/^(?:#([\w\-]+)|(\w+)|\.([\w\-]+))$/,fa=/[\x20\t\r\n\f]*[+~]/,L=/h\d/i,Wa=/input|select|textarea|button/i,
ba=/\\(?!\\)/g,K={ID:/^#((?:\\.|[-\w]|[^\x00-\xa0])+)/,CLASS:/^\.((?:\\.|[-\w]|[^\x00-\xa0])+)/,NAME:/^\[name=['"]?((?:\\.|[-\w]|[^\x00-\xa0])+)['"]?\]/,TAG:new RegExp("^("+"(?:\\\\.|[-\\w]|[^\\x00-\\xa0])+".replace("w","w*")+")"),ATTR:new RegExp("^"+ca),PSEUDO:new RegExp("^"+T),POS:/:(even|odd|eq|gt|lt|nth|first|last)(?:\([\x20\t\r\n\f]*((?:-\d)?\d*)[\x20\t\r\n\f]*\)|)(?=[^-]|$)/i,CHILD:/^:(only|nth|first|last)-child(?:\([\x20\t\r\n\f]*(even|odd|(([+-]|)(\d*)n|)[\x20\t\r\n\f]*(?:([+-]|)[\x20\t\r\n\f]*(\d+)|))[\x20\t\r\n\f]*\)|)/i,
needsContext:/^[\x20\t\r\n\f]*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\([\x20\t\r\n\f]*((?:-\d)?\d*)[\x20\t\r\n\f]*\)|)(?=[^-]|$)/i},R=function(a){var b=C.createElement("div");try{return a(b)}catch(d){return!1}finally{}},ca=R(function(a){a.appendChild(C.createComment(""));return!a.getElementsByTagName("*").length}),M=R(function(a){a.innerHTML="<a href='#'></a>";return a.firstChild&&"undefined"!==typeof a.firstChild.getAttribute&&"#"===a.firstChild.getAttribute("href")}),qb=R(function(a){a.innerHTML=
"<select></select>";a=typeof a.lastChild.getAttribute("multiple");return"boolean"!==a&&"string"!==a}),Q=R(function(a){a.innerHTML="<div class='hidden e'></div><div class='hidden'></div>";if(!a.getElementsByClassName||!a.getElementsByClassName("e").length)return!1;a.lastChild.className="e";return 2===a.getElementsByClassName("e").length}),S=R(function(a){a.id=B+0;a.innerHTML="<a name='"+B+"'></a><div name='"+B+"'></div>";J.insertBefore(a,J.firstChild);var b=C.getElementsByName&&C.getElementsByName(B).length===
2+C.getElementsByName(B+0).length;Ga=!C.getElementById(B);J.removeChild(a);return b});try{wb.call(J.childNodes,0)[0].nodeType}catch(hc){wb=function(a){for(var b,d=[];b=this[a];a++)d.push(b);return d}}d.matches=function(a,b){return d(a,null,null,b)};d.matchesSelector=function(a,b){return 0<d(b,null,null,[a]).length};r=d.getText=function(a){var b,d="",e=0;if(b=a.nodeType)if(1===b||9===b||11===b){if("string"===typeof a.textContent)return a.textContent;for(a=a.firstChild;a;a=a.nextSibling)d+=r(a)}else{if(3===
b||4===b)return a.nodeValue}else for(;b=a[e];e++)d+=r(b);return d};t=d.isXML=function(a){return(a=a&&(a.ownerDocument||a).documentElement)?"HTML"!==a.nodeName:!1};A=d.contains=J.contains?function(a,b){var d=9===a.nodeType?a.documentElement:a,e=b&&b.parentNode;return a===e||!!(e&&1===e.nodeType&&d.contains&&d.contains(e))}:J.compareDocumentPosition?function(a,b){return b&&!!(a.compareDocumentPosition(b)&16)}:function(a,b){for(;b=b.parentNode;)if(b===a)return!0;return!1};d.attr=function(a,b){var d,
e=t(a);e||(b=b.toLowerCase());return(d=ha.attrHandle[b])?d(a):e||qb?a.getAttribute(b):(d=a.getAttributeNode(b))?"boolean"===typeof a[b]?a[b]?b:null:d.specified?d.value:null:null};ha=d.selectors={cacheLength:50,createPseudo:na,match:K,attrHandle:M?{}:{href:function(a){return a.getAttribute("href",2)},type:function(a){return a.getAttribute("type")}},find:{ID:Ga?function(a,b,d){if("undefined"!==typeof b.getElementById&&!d)return(a=b.getElementById(a))&&a.parentNode?[a]:[]}:function(a,d,e){if("undefined"!==
typeof d.getElementById&&!e)return(d=d.getElementById(a))?d.id===a||"undefined"!==typeof d.getAttributeNode&&d.getAttributeNode("id").value===a?[d]:b:[]},TAG:ca?function(a,b){if("undefined"!==typeof b.getElementsByTagName)return b.getElementsByTagName(a)}:function(a,b){var d=b.getElementsByTagName(a);if("*"===a){for(var e,c=[],f=0;e=d[f];f++)1===e.nodeType&&c.push(e);return c}return d},NAME:S&&function(a,b){if("undefined"!==typeof b.getElementsByName)return b.getElementsByName(name)},CLASS:Q&&function(a,
b,d){if("undefined"!==typeof b.getElementsByClassName&&!d)return b.getElementsByClassName(a)}},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(a){a[1]=a[1].replace(ba,"");a[3]=(a[4]||a[5]||"").replace(ba,"");"~="===a[2]&&(a[3]=" "+a[3]+" ");return a.slice(0,4)},CHILD:function(a){a[1]=a[1].toLowerCase();"nth"===a[1]?(a[2]||d.error(a[0]),a[3]=+(a[3]?a[4]+(a[5]||1):2*("even"===a[2]||"odd"===a[2])),
a[4]=+(a[6]+a[7]||"odd"===a[2])):a[2]&&d.error(a[0]);return a},PSEUDO:function(a){var b,d;if(K.CHILD.test(a[0]))return null;if(a[3])a[2]=a[3];else if(b=a[4])aa.test(b)&&(d=h(b,!0))&&(d=b.indexOf(")",b.length-d)-b.length)&&(b=b.slice(0,d),a[0]=a[0].slice(0,d)),a[2]=b;return a.slice(0,3)}},filter:{ID:Ga?function(a){a=a.replace(ba,"");return function(b){return b.getAttribute("id")===a}}:function(a){a=a.replace(ba,"");return function(b){return(b="undefined"!==typeof b.getAttributeNode&&b.getAttributeNode("id"))&&
b.value===a}},TAG:function(a){if("*"===a)return function(){return!0};a=a.replace(ba,"").toLowerCase();return function(b){return b.nodeName&&b.nodeName.toLowerCase()===a}},CLASS:function(a){var b=O[B][a];b||(b=O(a,new RegExp("(^|[\\x20\\t\\r\\n\\f])"+a+"([\\x20\\t\\r\\n\\f]|$)")));return function(a){return b.test(a.className||"undefined"!==typeof a.getAttribute&&a.getAttribute("class")||"")}},ATTR:function(a,b,e){return function(c,f){var g=d.attr(c,a);if(null==g)return"!="===b;if(!b)return!0;g+="";
return"="===b?g===e:"!="===b?g!==e:"^="===b?e&&0===g.indexOf(e):"*="===b?e&&-1<g.indexOf(e):"$="===b?e&&g.substr(g.length-e.length)===e:"~="===b?-1<(" "+g+" ").indexOf(e):"|="===b?g===e||g.substr(0,e.length+1)===e+"-":!1}},CHILD:function(a,b,d,e){return"nth"===a?function(a){var b,c;b=a.parentNode;if(1===d&&0===e)return!0;if(b)for(c=0,b=b.firstChild;b&&(1!==b.nodeType||(c++,a!==b));b=b.nextSibling);c-=e;return c===d||0===c%d&&0<=c/d}:function(b){var d=b;switch(a){case "only":case "first":for(;d=d.previousSibling;)if(1===
d.nodeType)return!1;if("first"===a)return!0;d=b;case "last":for(;d=d.nextSibling;)if(1===d.nodeType)return!1;return!0}}},PSEUDO:function(a,b){var e,c=ha.pseudos[a]||ha.setFilters[a.toLowerCase()]||d.error("unsupported pseudo: "+a);return c[B]?c(b):1<c.length?(e=[a,a,"",b],ha.setFilters.hasOwnProperty(a.toLowerCase())?na(function(a,d){for(var e,f=c(a,b),g=f.length;g--;)e=Z.call(a,f[g]),a[e]=!(d[e]=f[g])}):function(a){return c(a,0,e)}):c}},pseudos:{not:na(function(a){var b=[],d=[],e=y(a.replace(Da,
"$1"));return e[B]?na(function(a,b,d,c){c=e(a,null,c,[]);for(var f=a.length;f--;)if(d=c[f])a[f]=!(b[f]=d)}):function(a,c,f){b[0]=a;e(b,null,f,d);return!d.pop()}}),has:na(function(a){return function(b){return 0<d(a,b).length}}),contains:na(function(a){return function(b){return-1<(b.textContent||b.innerText||r(b)).indexOf(a)}}),enabled:function(a){return!1===a.disabled},disabled:function(a){return!0===a.disabled},checked:function(a){var b=a.nodeName.toLowerCase();return"input"===b&&!!a.checked||"option"===
b&&!!a.selected},selected:function(a){a.parentNode&&a.parentNode.selectedIndex;return!0===a.selected},parent:function(a){return!ha.pseudos.empty(a)},empty:function(a){var b;for(a=a.firstChild;a;){if("@"<a.nodeName||3===(b=a.nodeType)||4===b)return!1;a=a.nextSibling}return!0},header:function(a){return L.test(a.nodeName)},text:function(a){var b,d;return"input"===a.nodeName.toLowerCase()&&"text"===(b=a.type)&&(null==(d=a.getAttribute("type"))||d.toLowerCase()===b)},radio:e("radio"),checkbox:e("checkbox"),
file:e("file"),password:e("password"),image:e("image"),submit:c("submit"),reset:c("reset"),button:function(a){var b=a.nodeName.toLowerCase();return"input"===b&&"button"===a.type||"button"===b},input:function(a){return Wa.test(a.nodeName)},focus:function(a){var b=a.ownerDocument;return a===b.activeElement&&(!b.hasFocus||b.hasFocus())&&!(!a.type&&!a.href)},active:function(a){return a===a.ownerDocument.activeElement},first:f(function(a,b,d){return[0]}),last:f(function(a,b,d){return[b-1]}),eq:f(function(a,
b,d){return[0>d?d+b:d]}),even:f(function(a,b,d){for(d=0;d<b;d+=2)a.push(d);return a}),odd:f(function(a,b,d){for(d=1;d<b;d+=2)a.push(d);return a}),lt:f(function(a,b,d){for(b=0>d?d+b:d;0<=--b;)a.push(b);return a}),gt:f(function(a,b,d){for(d=0>d?d+b:d;++d<b;)a.push(d);return a})}};u=J.compareDocumentPosition?function(a,b){return a===b?(v=!0,0):(a.compareDocumentPosition&&b.compareDocumentPosition?a.compareDocumentPosition(b)&4:a.compareDocumentPosition)?-1:1}:function(a,b){if(a===b)return v=!0,0;if(a.sourceIndex&&
b.sourceIndex)return a.sourceIndex-b.sourceIndex;var d,e,c=[],f=[];d=a.parentNode;e=b.parentNode;var h=d;if(d===e)return g(a,b);if(!d)return-1;if(!e)return 1;for(;h;)c.unshift(h),h=h.parentNode;for(h=e;h;)f.unshift(h),h=h.parentNode;d=c.length;e=f.length;for(h=0;h<d&&h<e;h++)if(c[h]!==f[h])return g(c[h],f[h]);return h===d?g(a,f[h],-1):g(c[h],b,1)};[0,0].sort(u);La=!v;d.uniqueSort=function(a){var b,d=1;v=La;a.sort(u);if(v)for(;b=a[d];d++)b===a[d-1]&&a.splice(d--,1);return a};d.error=function(a){throw Error("Syntax error, unrecognized expression: "+
a);};y=d.compile=function(a,b){var d,e=[],c=[],f=Yb[B][a];if(!f){b||(b=h(a));for(d=b.length;d--;)f=E(b[d]),f[B]?e.push(f):c.push(f);f=Yb(a,p(c,e))}return f};C.querySelectorAll&&function(){var a,b=U,e=/'|\\/g,c=/\=[\x20\t\r\n\f]*([^'"\]]*)[\x20\t\r\n\f]*\]/g,f=[":focus"],g=[":active",":focus"],l=J.matchesSelector||J.mozMatchesSelector||J.webkitMatchesSelector||J.oMatchesSelector||J.msMatchesSelector;R(function(a){a.innerHTML="<select><option selected=''></option></select>";a.querySelectorAll("[selected]").length||
f.push("\\[[\\x20\\t\\r\\n\\f]*(?:checked|disabled|ismap|multiple|readonly|selected|value)");a.querySelectorAll(":checked").length||f.push(":checked")});R(function(a){a.innerHTML="<p test=''></p>";a.querySelectorAll("[test^='']").length&&f.push("[*^$]=[\\x20\\t\\r\\n\\f]*(?:\"\"|'')");a.innerHTML="<input type='hidden'/>";a.querySelectorAll(":enabled").length||f.push(":enabled",":disabled")});f=new RegExp(f.join("|"));U=function(a,d,c,g,l){if(!(g||l||f&&f.test(a))){var m,x,D=!0,E=B;x=d;m=9===d.nodeType&&
a;if(1===d.nodeType&&"object"!==d.nodeName.toLowerCase()){m=h(a);(D=d.getAttribute("id"))?E=D.replace(e,"\\$&"):d.setAttribute("id",E);E="[id='"+E+"'] ";for(x=m.length;x--;)m[x]=E+m[x].join("");x=fa.test(a)&&d.parentNode||d;m=m.join(",")}if(m)try{return H.apply(c,wb.call(x.querySelectorAll(m),0)),c}catch(p){}finally{D||d.removeAttribute("id")}}return b(a,d,c,g,l)};l&&(R(function(b){a=l.call(b,"div");try{l.call(b,"[test!='']:sizzle"),g.push("!=",T)}catch(d){}}),g=new RegExp(g.join("|")),d.matchesSelector=
function(b,e){e=e.replace(c,"='$1']");if(!(t(b)||g.test(e)||f&&f.test(e)))try{var h=l.call(b,e);if(h||a||b.document&&11!==b.document.nodeType)return h}catch(m){}return 0<d(e,null,null,[b]).length})}();ha.pseudos.nth=ha.pseudos.eq;ha.filters=q.prototype=ha.pseudos;ha.setFilters=new q;d.attr=n.attr;n.find=d;n.expr=d.selectors;n.expr[":"]=n.expr.pseudos;n.unique=d.uniqueSort;n.text=d.getText;n.isXMLDoc=d.isXML;n.contains=d.contains})(a);var Db=/Until$/,Ob=/^(?:parents|prev(?:Until|All))/,M=/^.[^:#\[\.,]*$/,
K=n.expr.match.needsContext,Ra={children:!0,contents:!0,next:!0,prev:!0};n.fn.extend({find:function(a){var b,d,e,c,f,g,h=this;if("string"!==typeof a)return n(a).filter(function(){b=0;for(d=h.length;b<d;b++)if(n.contains(h[b],this))return!0});g=this.pushStack("","find",a);b=0;for(d=this.length;b<d;b++)if(e=g.length,n.find(a,this[b],g),0<b)for(c=e;c<g.length;c++)for(f=0;f<e;f++)if(g[f]===g[c]){g.splice(c--,1);break}return g},has:function(a){var b,d=n(a,this),e=d.length;return this.filter(function(){for(b=
0;b<e;b++)if(n.contains(this,d[b]))return!0})},not:function(a){return this.pushStack(m(this,a,!1),"not",a)},filter:function(a){return this.pushStack(m(this,a,!0),"filter",a)},is:function(a){return!!a&&("string"===typeof a?K.test(a)?0<=n(a,this.context).index(this[0]):0<n.filter(a,this).length:0<this.filter(a).length)},closest:function(a,b){for(var d,e=0,c=this.length,f=[],g=K.test(a)||"string"!==typeof a?n(a,b||this.context):0;e<c;e++)for(d=this[e];d&&d.ownerDocument&&d!==b&&11!==d.nodeType;){if(g?
-1<g.index(d):n.find.matchesSelector(d,a)){f.push(d);break}d=d.parentNode}f=1<f.length?n.unique(f):f;return this.pushStack(f,"closest",a)},index:function(a){return a?"string"===typeof a?n.inArray(this[0],n(a)):n.inArray(a.jquery?a[0]:a,this):this[0]&&this[0].parentNode?this.prevAll().length:-1},add:function(a,b){var d="string"===typeof a?n(a,b):n.makeArray(a&&a.nodeType?[a]:a),e=n.merge(this.get(),d);return this.pushStack(h(d[0])||h(e[0])?e:n.unique(e))},addBack:function(a){return this.add(null==
a?this.prevObject:this.prevObject.filter(a))}});n.fn.andSelf=n.fn.addBack;n.each({parent:function(a){return(a=a.parentNode)&&11!==a.nodeType?a:null},parents:function(a){return n.dir(a,"parentNode")},parentsUntil:function(a,b,d){return n.dir(a,"parentNode",d)},next:function(a){return l(a,"nextSibling")},prev:function(a){return l(a,"previousSibling")},nextAll:function(a){return n.dir(a,"nextSibling")},prevAll:function(a){return n.dir(a,"previousSibling")},nextUntil:function(a,b,d){return n.dir(a,"nextSibling",
d)},prevUntil:function(a,b,d){return n.dir(a,"previousSibling",d)},siblings:function(a){return n.sibling((a.parentNode||{}).firstChild,a)},children:function(a){return n.sibling(a.firstChild)},contents:function(a){return n.nodeName(a,"iframe")?a.contentDocument||a.contentWindow.document:n.merge([],a.childNodes)}},function(a,b){n.fn[a]=function(d,e){var c=n.map(this,b,d);Db.test(a)||(e=d);e&&"string"===typeof e&&(c=n.filter(e,c));c=1<this.length&&!Ra[a]?n.unique(c):c;1<this.length&&Ob.test(a)&&(c=c.reverse());
return this.pushStack(c,a,za.call(arguments).join(","))}});n.extend({filter:function(a,b,d){d&&(a=":not("+a+")");return 1===b.length?n.find.matchesSelector(b[0],a)?[b[0]]:[]:n.find.matches(a,b)},dir:function(a,b,d){var e=[];for(a=a[b];a&&9!==a.nodeType&&(d===c||1!==a.nodeType||!n(a).is(d));)1===a.nodeType&&e.push(a),a=a[b];return e},sibling:function(a,b){for(var d=[];a;a=a.nextSibling)1===a.nodeType&&a!==b&&d.push(a);return d}});var qa="abbr|article|aside|audio|bdi|canvas|data|datalist|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video",
Aa=/ jQuery\d+="(?:null|\d+)"/g,Sa=/^\s+/,Q=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,va=/<([\w:]+)/,x=/<tbody/i,D=/<|&#?\w+;/,E=/<(?:script|style|link)/i,U=/<(?:script|object|embed|option|style)/i,Ga=new RegExp("<(?:"+qa+")[\\s/>]","i"),xa=/^(?:checkbox|radio)$/,ha=/checked\s*(?:[^=]|=\s*.checked.)/i,La=/\/(java|ecma)script/i,Kb=/^\s*<!(?:\[CDATA\[|\-\-)|[\]\-]{2}>\s*$/g,Ea={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],
thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],area:[1,"<map>","</map>"],_default:[0,"",""]},wb=p(L),Yb=wb.appendChild(L.createElement("div"));Ea.optgroup=Ea.option;Ea.tbody=Ea.tfoot=Ea.colgroup=Ea.caption=Ea.thead;Ea.th=Ea.td;n.support.htmlSerialize||(Ea._default=[1,"X<div>","</div>"]);n.fn.extend({text:function(a){return n.access(this,function(a){return a===
c?n.text(this):this.empty().append((this[0]&&this[0].ownerDocument||L).createTextNode(a))},null,a,arguments.length)},wrapAll:function(a){if(n.isFunction(a))return this.each(function(b){n(this).wrapAll(a.call(this,b))});if(this[0]){var b=n(a,this[0].ownerDocument).eq(0).clone(!0);this[0].parentNode&&b.insertBefore(this[0]);b.map(function(){for(var a=this;a.firstChild&&1===a.firstChild.nodeType;)a=a.firstChild;return a}).append(this)}return this},wrapInner:function(a){return n.isFunction(a)?this.each(function(b){n(this).wrapInner(a.call(this,
b))}):this.each(function(){var b=n(this),d=b.contents();d.length?d.wrapAll(a):b.append(a)})},wrap:function(a){var b=n.isFunction(a);return this.each(function(d){n(this).wrapAll(b?a.call(this,d):a)})},unwrap:function(){return this.parent().each(function(){n.nodeName(this,"body")||n(this).replaceWith(this.childNodes)}).end()},append:function(){return this.domManip(arguments,!0,function(a){1!==this.nodeType&&11!==this.nodeType||this.appendChild(a)})},prepend:function(){return this.domManip(arguments,
!0,function(a){1!==this.nodeType&&11!==this.nodeType||this.insertBefore(a,this.firstChild)})},before:function(){if(!h(this[0]))return this.domManip(arguments,!1,function(a){this.parentNode.insertBefore(a,this)});if(arguments.length){var a=n.clean(arguments);return this.pushStack(n.merge(a,this),"before",this.selector)}},after:function(){if(!h(this[0]))return this.domManip(arguments,!1,function(a){this.parentNode.insertBefore(a,this.nextSibling)});if(arguments.length){var a=n.clean(arguments);return this.pushStack(n.merge(this,
a),"after",this.selector)}},remove:function(a,b){for(var d,e=0;null!=(d=this[e]);e++)if(!a||n.filter(a,[d]).length)b||1!==d.nodeType||(n.cleanData(d.getElementsByTagName("*")),n.cleanData([d])),d.parentNode&&d.parentNode.removeChild(d);return this},empty:function(){for(var a,b=0;null!=(a=this[b]);b++)for(1===a.nodeType&&n.cleanData(a.getElementsByTagName("*"));a.firstChild;)a.removeChild(a.firstChild);return this},clone:function(a,b){a=null==a?!1:a;b=null==b?a:b;return this.map(function(){return n.clone(this,
a,b)})},html:function(a){return n.access(this,function(a){var b=this[0]||{},d=0,e=this.length;if(a===c)return 1===b.nodeType?b.innerHTML.replace(Aa,""):c;if(!("string"!==typeof a||E.test(a)||!n.support.htmlSerialize&&Ga.test(a)||!n.support.leadingWhitespace&&Sa.test(a)||Ea[(va.exec(a)||["",""])[1].toLowerCase()])){a=a.replace(Q,"<$1></$2>");try{for(;d<e;d++)b=this[d]||{},1===b.nodeType&&(n.cleanData(b.getElementsByTagName("*")),b.innerHTML=a);b=0}catch(f){}}b&&this.empty().append(a)},null,a,arguments.length)},
replaceWith:function(a){if(!h(this[0])){if(n.isFunction(a))return this.each(function(b){var d=n(this),e=d.html();d.replaceWith(a.call(this,b,e))});"string"!==typeof a&&(a=n(a).detach());return this.each(function(){var b=this.nextSibling,d=this.parentNode;n(this).remove();b?n(b).before(a):n(d).append(a)})}return this.length?this.pushStack(n(n.isFunction(a)?a():a),"replaceWith",a):this},detach:function(a){return this.remove(a,!0)},domManip:function(a,b,d){a=[].concat.apply([],a);var e,f,g,h=0,l=a[0],
m=[],x=this.length;if(!n.support.checkClone&&1<x&&"string"===typeof l&&ha.test(l))return this.each(function(){n(this).domManip(a,b,d)});if(n.isFunction(l))return this.each(function(e){var f=n(this);a[0]=l.call(this,e,b?f.html():c);f.domManip(a,b,d)});if(this[0]){e=n.buildFragment(a,this,m);g=e.fragment;f=g.firstChild;1===g.childNodes.length&&(g=f);if(f)for(b=b&&n.nodeName(f,"tr"),e=e.cacheable||x-1;h<x;h++)d.call(b&&n.nodeName(this[h],"table")?q(this[h],"tbody"):this[h],h===e?g:n.clone(g,!0,!0));
g=f=null;m.length&&n.each(m,function(a,b){b.src?n.ajax?n.ajax({url:b.src,type:"GET",dataType:"script",async:!1,global:!1,"throws":!0}):n.error("no ajax"):n.globalEval((b.text||b.textContent||b.innerHTML||"").replace(Kb,""));b.parentNode&&b.parentNode.removeChild(b)})}return this}});n.buildFragment=function(a,b,d){var e,f,g,h=a[0];b=b||L;b=!b.nodeType&&b[0]||b;b=b.ownerDocument||b;!(1===a.length&&"string"===typeof h&&512>h.length&&b===L&&"<"===h.charAt(0))||U.test(h)||!n.support.checkClone&&ha.test(h)||
!n.support.html5Clone&&Ga.test(h)||(f=!0,e=n.fragments[h],g=e!==c);e||(e=b.createDocumentFragment(),n.clean(a,b,e,d),f&&(n.fragments[h]=g&&e));return{fragment:e,cacheable:f}};n.fragments={};n.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(a,b){n.fn[a]=function(d){var e,c=0,f=[];d=n(d);var g=d.length;e=1===this.length&&this[0].parentNode;if((null==e||e&&11===e.nodeType&&1===e.childNodes.length)&&1===g)return d[b](this[0]),this;
for(;c<g;c++)e=(0<c?this.clone(!0):this).get(),n(d[c])[b](e),f=f.concat(e);return this.pushStack(f,a,d.selector)}});n.extend({clone:function(a,b,d){var e,c,f,g;n.support.html5Clone||n.isXMLDoc(a)||!Ga.test("<"+a.nodeName+">")?g=a.cloneNode(!0):(Yb.innerHTML=a.outerHTML,Yb.removeChild(g=Yb.firstChild));if(!(n.support.noCloneEvent&&n.support.noCloneChecked||1!==a.nodeType&&11!==a.nodeType||n.isXMLDoc(a)))for(y(a,g),e=u(a),c=u(g),f=0;e[f];++f)c[f]&&y(e[f],c[f]);if(b&&(t(a,g),d))for(e=u(a),c=u(g),f=0;e[f];++f)t(e[f],
c[f]);return g},clean:function(a,b,d,e){var c,f,g,h,l,m,E=b===L&&wb,U=[];b&&"undefined"!==typeof b.createDocumentFragment||(b=L);for(c=0;null!=(g=a[c]);c++)if("number"===typeof g&&(g+=""),g){if("string"===typeof g)if(D.test(g)){E=E||p(b);m=b.createElement("div");E.appendChild(m);g=g.replace(Q,"<$1></$2>");f=(va.exec(g)||["",""])[1].toLowerCase();h=Ea[f]||Ea._default;l=h[0];for(m.innerHTML=h[1]+g+h[2];l--;)m=m.lastChild;if(!n.support.tbody)for(l=x.test(g),h="table"!==f||l?"<table>"!==h[1]||l?[]:m.childNodes:
m.firstChild&&m.firstChild.childNodes,f=h.length-1;0<=f;--f)n.nodeName(h[f],"tbody")&&!h[f].childNodes.length&&h[f].parentNode.removeChild(h[f]);!n.support.leadingWhitespace&&Sa.test(g)&&m.insertBefore(b.createTextNode(Sa.exec(g)[0]),m.firstChild);g=m.childNodes;m.parentNode.removeChild(m)}else g=b.createTextNode(g);g.nodeType?U.push(g):n.merge(U,g)}m&&(g=m=E=null);if(!n.support.appendChecked)for(c=0;null!=(g=U[c]);c++)n.nodeName(g,"input")?C(g):"undefined"!==typeof g.getElementsByTagName&&n.grep(g.getElementsByTagName("input"),
C);if(d)for(a=function(a){if(!a.type||La.test(a.type))return e?e.push(a.parentNode?a.parentNode.removeChild(a):a):d.appendChild(a)},c=0;null!=(g=U[c]);c++)n.nodeName(g,"script")&&a(g)||(d.appendChild(g),"undefined"!==typeof g.getElementsByTagName&&(g=n.grep(n.merge([],g.getElementsByTagName("script")),a),U.splice.apply(U,[c+1,0].concat(g)),c+=g.length));return U},cleanData:function(a,b){for(var d,e,c,f,g=0,h=n.expando,l=n.cache,m=n.support.deleteExpando,x=n.event.special;null!=(c=a[g]);g++)if(b||
n.acceptData(c))if(d=(e=c[h])&&l[e]){if(d.events)for(f in d.events)x[f]?n.event.remove(c,f):n.removeEvent(c,f,d.handle);l[e]&&(delete l[e],m?delete c[h]:c.removeAttribute?c.removeAttribute(h):c[h]=null,n.deletedIds.push(e))}}});(function(){var a,b;n.uaMatch=function(a){a=a.toLowerCase();a=/(chrome)[ \/]([\w.]+)/.exec(a)||/(webkit)[ \/]([\w.]+)/.exec(a)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(a)||/(msie) ([\w.]+)/.exec(a)||0>a.indexOf("compatible")&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(a)||[];return{browser:a[1]||
"",version:a[2]||"0"}};a=n.uaMatch(Xa.userAgent);b={};a.browser&&(b[a.browser]=!0,b.version=a.version);b.chrome?b.webkit=!0:b.webkit&&(b.safari=!0);n.browser=b;n.sub=function(){function a(b,d){return new a.fn.init(b,d)}n.extend(!0,a,this);a.superclass=this;a.fn=a.prototype=this();a.fn.constructor=a;a.sub=this.sub;a.fn.init=function(d,e){e&&e instanceof n&&!(e instanceof a)&&(e=a(e));return n.fn.init.call(this,d,e,b)};a.fn.init.prototype=a.fn;var b=a(L);return a}})();var Da,Wa,qb,Pb=/alpha\([^)]*\)/i,
ad=/opacity=([^)]*)/,Jc=/^(top|right|bottom|left)$/,Kc=/^(none|table(?!-c[ea]).+)/,hc=/^margin/,Dc=new RegExp("^("+cb+")(.*)$","i"),ec=new RegExp("^("+cb+")(?!px)[a-z%]+$","i"),uc=new RegExp("^([-+])=("+cb+")","i"),Ec={},pd={position:"absolute",visibility:"hidden",display:"block"},qd={letterSpacing:0,fontWeight:400},fb=["Top","Right","Bottom","Left"],Uc=["Webkit","O","Moz","ms"],rd=n.fn.toggle;n.fn.extend({css:function(a,b){return n.access(this,function(a,b,d){return d!==c?n.style(a,b,d):n.css(a,
b)},a,b,1<arguments.length)},show:function(){return F(this,!0)},hide:function(){return F(this)},toggle:function(a,b){var d="boolean"===typeof a;return n.isFunction(a)&&n.isFunction(b)?rd.apply(this,arguments):this.each(function(){(d?a:I(this))?n(this).show():n(this).hide()})}});n.extend({cssHooks:{opacity:{get:function(a,b){if(b){var d=Da(a,"opacity");return""===d?"1":d}}}},cssNumber:{fillOpacity:!0,fontWeight:!0,lineHeight:!0,opacity:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":n.support.cssFloat?
"cssFloat":"styleFloat"},style:function(a,b,d,e){if(a&&3!==a.nodeType&&8!==a.nodeType&&a.style){var f,g,h,l=n.camelCase(b),m=a.style;b=n.cssProps[l]||(n.cssProps[l]=B(m,l));h=n.cssHooks[b]||n.cssHooks[l];if(d!==c){if(g=typeof d,"string"===g&&(f=uc.exec(d))&&(d=(f[1]+1)*f[2]+parseFloat(n.css(a,b)),g="number"),!(null==d||"number"===g&&isNaN(d)||("number"!==g||n.cssNumber[l]||(d+="px"),h&&"set"in h&&(d=h.set(a,d,e))===c)))try{m[b]=d}catch(x){}}else return h&&"get"in h&&(f=h.get(a,!1,e))!==c?f:m[b]}},
css:function(a,b,d,e){var f,g;g=n.camelCase(b);b=n.cssProps[g]||(n.cssProps[g]=B(a.style,g));(g=n.cssHooks[b]||n.cssHooks[g])&&"get"in g&&(f=g.get(a,!0,e));f===c&&(f=Da(a,b));"normal"===f&&b in qd&&(f=qd[b]);return d||e!==c?(a=parseFloat(f),d||n.isNumeric(a)?a||0:f):f},swap:function(a,b,d){var e,c={};for(e in b)c[e]=a.style[e],a.style[e]=b[e];d=d.call(a);for(e in b)a.style[e]=c[e];return d}});a.getComputedStyle?Da=function(b,d){var e,c,f,g,h=a.getComputedStyle(b,null),l=b.style;h&&(e=h[d],""!==e||
n.contains(b.ownerDocument,b)||(e=n.style(b,d)),ec.test(e)&&hc.test(d)&&(c=l.width,f=l.minWidth,g=l.maxWidth,l.minWidth=l.maxWidth=l.width=e,e=h.width,l.width=c,l.minWidth=f,l.maxWidth=g));return e}:L.documentElement.currentStyle&&(Da=function(a,b){var d,e,c=a.currentStyle&&a.currentStyle[b],f=a.style;null==c&&f&&f[b]&&(c=f[b]);if(ec.test(c)&&!Jc.test(b)){d=f.left;if(e=a.runtimeStyle&&a.runtimeStyle.left)a.runtimeStyle.left=a.currentStyle.left;f.left="fontSize"===b?"1em":c;c=f.pixelLeft+"px";f.left=
d;e&&(a.runtimeStyle.left=e)}return""===c?"auto":c});n.each(["height","width"],function(a,b){n.cssHooks[b]={get:function(a,d,e){if(d)return 0===a.offsetWidth&&Kc.test(Da(a,"display"))?n.swap(a,pd,function(){return v(a,b,e)}):v(a,b,e)},set:function(a,d,e){return A(a,d,e?r(a,b,e,n.support.boxSizing&&"border-box"===n.css(a,"boxSizing")):0)}}});n.support.opacity||(n.cssHooks.opacity={get:function(a,b){return ad.test((b&&a.currentStyle?a.currentStyle.filter:a.style.filter)||"")?.01*parseFloat(RegExp.$1)+
"":b?"1":""},set:function(a,b){var d=a.style,e=a.currentStyle,c=n.isNumeric(b)?"alpha(opacity="+100*b+")":"",f=e&&e.filter||d.filter||"";d.zoom=1;if(1<=b&&""===n.trim(f.replace(Pb,""))&&d.removeAttribute&&(d.removeAttribute("filter"),e&&!e.filter))return;d.filter=Pb.test(f)?f.replace(Pb,c):f+" "+c}});n(function(){n.support.reliableMarginRight||(n.cssHooks.marginRight={get:function(a,b){return n.swap(a,{display:"inline-block"},function(){if(b)return Da(a,"marginRight")})}});!n.support.pixelPosition&&
n.fn.position&&n.each(["top","left"],function(a,b){n.cssHooks[b]={get:function(a,d){if(d){var e=Da(a,b);return ec.test(e)?n(a).position()[b]+"px":e}}}})});n.expr&&n.expr.filters&&(n.expr.filters.hidden=function(a){return 0===a.offsetWidth&&0===a.offsetHeight||!n.support.reliableHiddenOffsets&&"none"===(a.style&&a.style.display||Da(a,"display"))},n.expr.filters.visible=function(a){return!n.expr.filters.hidden(a)});n.each({margin:"",padding:"",border:"Width"},function(a,b){n.cssHooks[a+b]={expand:function(d){var e=
"string"===typeof d?d.split(" "):[d],c={};for(d=0;4>d;d++)c[a+fb[d]+b]=e[d]||e[d-2]||e[0];return c}};hc.test(a)||(n.cssHooks[a+b].set=A)});var Lc=/%20/g,jd=/\[\]$/,sd=/\r?\n/g,td=/^(?:color|date|datetime|datetime-local|email|hidden|month|number|password|range|search|tel|text|time|url|week)$/i,xe=/^(?:select|textarea)/i;n.fn.extend({serialize:function(){return n.param(this.serializeArray())},serializeArray:function(){return this.map(function(){return this.elements?n.makeArray(this.elements):this}).filter(function(){return this.name&&
!this.disabled&&(this.checked||xe.test(this.nodeName)||td.test(this.type))}).map(function(a,b){var d=n(this).val();return null==d?null:n.isArray(d)?n.map(d,function(a,d){return{name:b.name,value:a.replace(sd,"\r\n")}}):{name:b.name,value:d.replace(sd,"\r\n")}}).get()}});n.param=function(a,b){var d,e=[],f=function(a,b){b=n.isFunction(b)?b():null==b?"":b;e[e.length]=encodeURIComponent(a)+"="+encodeURIComponent(b)};b===c&&(b=n.ajaxSettings&&n.ajaxSettings.traditional);if(n.isArray(a)||a.jquery&&!n.isPlainObject(a))n.each(a,
function(){f(this.name,this.value)});else for(d in a)H(d,a[d],b,f);return e.join("&").replace(Lc,"+")};var ic,Qb,ud=/#.*$/,vd=/^(.*?):[ \t]*([^\r\n]*)\r?$/mg,bd=/^(?:GET|HEAD)$/,wd=/^\/\//,xd=/\?/,ye=/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,yd=/([?&])_=[^&]*/,Rb=/^([\w\+\.\-]+:)(?:\/\/([^\/?#:]*)(?::(\d+)|)|)/,cd=n.fn.load,Fc={},zd={},Ad=["*/"]+["*"];try{Qb=R.href}catch(ze){Qb=L.createElement("a"),Qb.href="",Qb=Qb.href}ic=Rb.exec(Qb.toLowerCase())||[];n.fn.load=function(a,b,d){if("string"!==
typeof a&&cd)return cd.apply(this,arguments);if(!this.length)return this;var e,f,g,h=this,l=a.indexOf(" ");0<=l&&(e=a.slice(l,a.length),a=a.slice(0,l));n.isFunction(b)?(d=b,b=c):b&&"object"===typeof b&&(f="POST");n.ajax({url:a,type:f,dataType:"html",data:b,complete:function(a,b){d&&h.each(d,g||[a.responseText,b,a])}}).done(function(a){g=arguments;h.html(e?n("<div>").append(a.replace(ye,"")).find(e):a)});return this};n.each("ajaxStart ajaxStop ajaxComplete ajaxError ajaxSuccess ajaxSend".split(" "),
function(a,b){n.fn[b]=function(a){return this.on(b,a)}});n.each(["get","post"],function(a,b){n[b]=function(a,d,e,f){n.isFunction(d)&&(f=f||e,e=d,d=c);return n.ajax({type:b,url:a,data:d,success:e,dataType:f})}});n.extend({getScript:function(a,b){return n.get(a,c,b,"script")},getJSON:function(a,b,d){return n.get(a,b,d,"json")},ajaxSetup:function(a,b){b?J(a,n.ajaxSettings):(b=a,a=n.ajaxSettings);J(a,b);return a},ajaxSettings:{url:Qb,isLocal:/^(?:about|app|app\-storage|.+\-extension|file|res|widget):$/.test(ic[1]),
global:!0,type:"GET",contentType:"application/x-www-form-urlencoded; charset=UTF-8",processData:!0,async:!0,accepts:{xml:"application/xml, text/xml",html:"text/html",text:"text/plain",json:"application/json, text/javascript","*":Ad},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText"},converters:{"* text":a.String,"text html":!0,"text json":n.parseJSON,"text xml":n.parseXML},flatOptions:{context:!0,url:!0}},ajaxPrefilter:O(Fc),ajaxTransport:O(zd),ajax:function(a,
b){function d(a,b,g,m){var D,ha,r,A,u=b;if(2!==t){t=2;l&&clearTimeout(l);h=c;f=m||"";y.readyState=0<a?4:0;if(g){A=E;m=y;var v,z,La,B,I=A.contents,C=A.dataTypes,J=A.responseFields;for(z in J)z in g&&(m[J[z]]=g[z]);for(;"*"===C[0];)C.shift(),v===c&&(v=A.mimeType||m.getResponseHeader("content-type"));if(v)for(z in I)if(I[z]&&I[z].test(v)){C.unshift(z);break}if(C[0]in g)La=C[0];else{for(z in g){if(!C[0]||A.converters[z+" "+C[0]]){La=z;break}B||(B=z)}La=La||B}La?(La!==C[0]&&C.unshift(La),A=g[La]):A=void 0}if(200<=
a&&300>a||304===a)if(E.ifModified&&((g=y.getResponseHeader("Last-Modified"))&&(n.lastModified[e]=g),(g=y.getResponseHeader("Etag"))&&(n.etag[e]=g)),304===a)u="notmodified",D=!0;else{a:{ha=E;r=A;var F,Kb,u=ha.dataTypes.slice();v=u[0];z={};La=0;ha.dataFilter&&(r=ha.dataFilter(r,ha.dataType));if(u[1])for(F in ha.converters)z[F.toLowerCase()]=ha.converters[F];for(;g=u[++La];)if("*"!==g){if("*"!==v&&v!==g){F=z[v+" "+g]||z["* "+g];if(!F)for(Kb in z)if(D=Kb.split(" "),D[1]===g&&(F=z[v+" "+D[0]]||z["* "+
D[0]])){!0===F?F=z[Kb]:!0!==z[Kb]&&(g=D[0],u.splice(La--,0,g));break}if(!0!==F)if(F&&ha["throws"])r=F(r);else try{r=F(r)}catch(Ea){D={state:"parsererror",error:F?Ea:"No conversion from "+v+" to "+g};break a}}v=g}D={state:"success",data:r}}u=D.state;ha=D.data;r=D.error;D=!r}else if(r=u,!u||a)u="error",0>a&&(a=0);y.status=a;y.statusText=(b||u)+"";D?q.resolveWith(p,[ha,u,y]):q.rejectWith(p,[y,u,r]);y.statusCode(Ga);Ga=c;x&&U.trigger("ajax"+(D?"Success":"Error"),[y,E,D?ha:r]);xa.fireWith(p,[y,u]);x&&
(U.trigger("ajaxComplete",[y,E]),--n.active||n.event.trigger("ajaxStop"))}}"object"===typeof a&&(b=a,a=c);b=b||{};var e,f,g,h,l,m,x,D,E=n.ajaxSetup({},b),p=E.context||E,U=p!==E&&(p.nodeType||p instanceof n)?n(p):n.event,q=n.Deferred(),xa=n.Callbacks("once memory"),Ga=E.statusCode||{},ha={},r={},t=0,A="canceled",y={readyState:0,setRequestHeader:function(a,b){if(!t){var d=a.toLowerCase();a=r[d]=r[d]||a;ha[a]=b}return this},getAllResponseHeaders:function(){return 2===t?f:null},getResponseHeader:function(a){var b;
if(2===t){if(!g)for(g={};b=vd.exec(f);)g[b[1].toLowerCase()]=b[2];b=g[a.toLowerCase()]}return b===c?null:b},overrideMimeType:function(a){t||(E.mimeType=a);return this},abort:function(a){a=a||A;h&&h.abort(a);d(0,a);return this}};q.promise(y);y.success=y.done;y.error=y.fail;y.complete=xa.add;y.statusCode=function(a){if(a){var b;if(2>t)for(b in a)Ga[b]=[Ga[b],a[b]];else b=a[y.status],y.always(b)}return this};E.url=((a||E.url)+"").replace(ud,"").replace(wd,ic[1]+"//");E.dataTypes=n.trim(E.dataType||"*").toLowerCase().split(Fa);
null==E.crossDomain&&(m=Rb.exec(E.url.toLowerCase())||!1,E.crossDomain=m&&m.join(":")+(m[3]?"":"http:"===m[1]?80:443)!==ic.join(":")+(ic[3]?"":"http:"===ic[1]?80:443));E.data&&E.processData&&"string"!==typeof E.data&&(E.data=n.param(E.data,E.traditional));T(Fc,E,b,y);if(2===t)return y;x=E.global;E.type=E.type.toUpperCase();E.hasContent=!bd.test(E.type);x&&0===n.active++&&n.event.trigger("ajaxStart");if(!E.hasContent&&(E.data&&(E.url+=(xd.test(E.url)?"&":"?")+E.data,delete E.data),e=E.url,!1===E.cache)){m=
n.now();var u=E.url.replace(yd,"$1_="+m);E.url=u+(u===E.url?(xd.test(E.url)?"&":"?")+"_="+m:"")}(E.data&&E.hasContent&&!1!==E.contentType||b.contentType)&&y.setRequestHeader("Content-Type",E.contentType);E.ifModified&&(e=e||E.url,n.lastModified[e]&&y.setRequestHeader("If-Modified-Since",n.lastModified[e]),n.etag[e]&&y.setRequestHeader("If-None-Match",n.etag[e]));y.setRequestHeader("Accept",E.dataTypes[0]&&E.accepts[E.dataTypes[0]]?E.accepts[E.dataTypes[0]]+("*"!==E.dataTypes[0]?", "+Ad+"; q=0.01":
""):E.accepts["*"]);for(D in E.headers)y.setRequestHeader(D,E.headers[D]);if(E.beforeSend&&(!1===E.beforeSend.call(p,y,E)||2===t))return y.abort();A="abort";for(D in{success:1,error:1,complete:1})y[D](E[D]);if(h=T(zd,E,b,y)){y.readyState=1;x&&U.trigger("ajaxSend",[y,E]);E.async&&0<E.timeout&&(l=setTimeout(function(){y.abort("timeout")},E.timeout));try{t=1,h.send(ha,d)}catch(v){if(2>t)d(-1,v);else throw v;}}else d(-1,"No Transport");return y},active:0,lastModified:{},etag:{}});var Bd=[],Cd=/\?/,vc=
/(=)\?(?=&|$)|\?\?/,Sb=n.now();n.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var a=Bd.pop()||n.expando+"_"+Sb++;this[a]=!0;return a}});n.ajaxPrefilter("json jsonp",function(b,d,e){var f,g,h,l=b.data,m=b.url,x=!1!==b.jsonp,D=x&&vc.test(m),E=x&&!D&&"string"===typeof l&&!(b.contentType||"").indexOf("application/x-www-form-urlencoded")&&vc.test(l);if("jsonp"===b.dataTypes[0]||D||E)return f=b.jsonpCallback=n.isFunction(b.jsonpCallback)?b.jsonpCallback():b.jsonpCallback,g=a[f],D?b.url=m.replace(vc,
"$1"+f):E?b.data=l.replace(vc,"$1"+f):x&&(b.url+=(Cd.test(m)?"&":"?")+b.jsonp+"="+f),b.converters["script json"]=function(){h||n.error(f+" was not called");return h[0]},b.dataTypes[0]="json",a[f]=function(){h=arguments},e.always(function(){a[f]=g;b[f]&&(b.jsonpCallback=d.jsonpCallback,Bd.push(f));h&&n.isFunction(g)&&g(h[0]);h=g=c}),"script"});n.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/javascript|ecmascript/},
converters:{"text script":function(a){n.globalEval(a);return a}}});n.ajaxPrefilter("script",function(a){a.cache===c&&(a.cache=!1);a.crossDomain&&(a.type="GET",a.global=!1)});n.ajaxTransport("script",function(a){if(a.crossDomain){var b,d=L.head||L.getElementsByTagName("head")[0]||L.documentElement;return{send:function(e,f){b=L.createElement("script");b.async="async";a.scriptCharset&&(b.charset=a.scriptCharset);b.src=a.url;b.onload=b.onreadystatechange=function(a,e){if(e||!b.readyState||/loaded|complete/.test(b.readyState))b.onload=
b.onreadystatechange=null,d&&b.parentNode&&d.removeChild(b),b=c,e||f(200,"success")};d.insertBefore(b,d.firstChild)},abort:function(){if(b)b.onload(0,1)}}}});var Tb,Mc=a.ActiveXObject?function(){for(var a in Tb)Tb[a](0,1)}:!1,wc=0;n.ajaxSettings.xhr=a.ActiveXObject?function(){var b;if(!(b=!this.isLocal&&Z()))a:{try{b=new a.ActiveXObject("Microsoft.XMLHTTP");break a}catch(d){}b=void 0}return b}:Z;(function(a){n.extend(n.support,{ajax:!!a,cors:!!a&&"withCredentials"in a})})(n.ajaxSettings.xhr());n.support.ajax&&
n.ajaxTransport(function(b){if(!b.crossDomain||n.support.cors){var d;return{send:function(e,f){var g,h,l=b.xhr();b.username?l.open(b.type,b.url,b.async,b.username,b.password):l.open(b.type,b.url,b.async);if(b.xhrFields)for(h in b.xhrFields)l[h]=b.xhrFields[h];b.mimeType&&l.overrideMimeType&&l.overrideMimeType(b.mimeType);b.crossDomain||e["X-Requested-With"]||(e["X-Requested-With"]="XMLHttpRequest");try{for(h in e)l.setRequestHeader(h,e[h])}catch(m){}l.send(b.hasContent&&b.data||null);d=function(a,
e){var h,m,x,D,E;try{if(d&&(e||4===l.readyState))if(d=c,g&&(l.onreadystatechange=n.noop,Mc&&delete Tb[g]),e)4!==l.readyState&&l.abort();else{h=l.status;x=l.getAllResponseHeaders();D={};(E=l.responseXML)&&E.documentElement&&(D.xml=E);try{D.text=l.responseText}catch(p){}try{m=l.statusText}catch(U){m=""}h||!b.isLocal||b.crossDomain?1223===h&&(h=204):h=D.text?200:404}}catch(q){e||f(-1,q)}D&&f(h,m,D,x)};b.async?4===l.readyState?setTimeout(d,0):(g=++wc,Mc&&(Tb||(Tb={},n(a).unload(Mc)),Tb[g]=d),l.onreadystatechange=
d):d()},abort:function(){d&&d(0,1)}}}});var sc,jc,Dd=/^(?:toggle|show|hide)$/,Ed=new RegExp("^(?:([-+])=|)("+cb+")([a-z%]*)$","i"),Fd=/queueHooks$/,gc=[function(a,b,d){var e,c,f,g,h,l,m=this,x=a.style,D={},E=[],p=a.nodeType&&I(a);d.queue||(h=n._queueHooks(a,"fx"),null==h.unqueued&&(h.unqueued=0,l=h.empty.fire,h.empty.fire=function(){h.unqueued||l()}),h.unqueued++,m.always(function(){m.always(function(){h.unqueued--;n.queue(a,"fx").length||h.empty.fire()})}));1===a.nodeType&&("height"in b||"width"in
b)&&(d.overflow=[x.overflow,x.overflowX,x.overflowY],"inline"===n.css(a,"display")&&"none"===n.css(a,"float")&&(n.support.inlineBlockNeedsLayout&&"inline"!==z(a.nodeName)?x.zoom=1:x.display="inline-block"));d.overflow&&(x.overflow="hidden",n.support.shrinkWrapBlocks||m.done(function(){x.overflow=d.overflow[0];x.overflowX=d.overflow[1];x.overflowY=d.overflow[2]}));for(e in b)c=b[e],Dd.exec(c)&&(delete b[e],c!==(p?"hide":"show")&&E.push(e));if(c=E.length)for(f=n._data(a,"fxshow")||n._data(a,"fxshow",
{}),p?n(a).show():m.done(function(){n(a).hide()}),m.done(function(){var b;n.removeData(a,"fxshow",!0);for(b in D)n.style(a,b,D[b])}),e=0;e<c;e++)b=E[e],g=m.createTween(b,p?f[b]:0),D[b]=f[b]||n.style(a,b),b in f||(f[b]=g.start,p&&(g.end=g.start,g.start="width"===b||"height"===b?1:0))}],fc={"*":[function(a,b){var d,e,c=this.createTween(a,b),f=Ed.exec(b),g=c.cur(),h=+g||0,l=1,m=20;if(f){d=+f[2];e=f[3]||(n.cssNumber[a]?"":"px");if("px"!==e&&h){h=n.css(c.elem,a,!0)||d||1;do l=l||".5",h/=l,n.style(c.elem,
a,h+e);while(l!==(l=c.cur()/g)&&1!==l&&--m)}c.unit=e;c.start=h;c.end=f[1]?h+(f[1]+1)*d:d}return c}]};n.Animation=n.extend(ia,{tweener:function(a,b){n.isFunction(a)?(b=a,a=["*"]):a=a.split(" ");for(var d,e=0,c=a.length;e<c;e++)d=a[e],fc[d]=fc[d]||[],fc[d].unshift(b)},prefilter:function(a,b){b?gc.unshift(a):gc.push(a)}});n.Tween=ja;ja.prototype={constructor:ja,init:function(a,b,d,e,c,f){this.elem=a;this.prop=d;this.easing=c||"swing";this.options=b;this.start=this.now=this.cur();this.end=e;this.unit=
f||(n.cssNumber[d]?"":"px")},cur:function(){var a=ja.propHooks[this.prop];return a&&a.get?a.get(this):ja.propHooks._default.get(this)},run:function(a){var b,d=ja.propHooks[this.prop];this.pos=this.options.duration?b=n.easing[this.easing](a,this.options.duration*a,0,1,this.options.duration):b=a;this.now=(this.end-this.start)*b+this.start;this.options.step&&this.options.step.call(this.elem,this.now,this);d&&d.set?d.set(this):ja.propHooks._default.set(this);return this}};ja.prototype.init.prototype=
ja.prototype;ja.propHooks={_default:{get:function(a){return null==a.elem[a.prop]||a.elem.style&&null!=a.elem.style[a.prop]?(a=n.css(a.elem,a.prop,!1,""))&&"auto"!==a?a:0:a.elem[a.prop]},set:function(a){if(n.fx.step[a.prop])n.fx.step[a.prop](a);else a.elem.style&&(null!=a.elem.style[n.cssProps[a.prop]]||n.cssHooks[a.prop])?n.style(a.elem,a.prop,a.now+a.unit):a.elem[a.prop]=a.now}}};ja.propHooks.scrollTop=ja.propHooks.scrollLeft={set:function(a){a.elem.nodeType&&a.elem.parentNode&&(a.elem[a.prop]=a.now)}};
n.each(["toggle","show","hide"],function(a,b){var d=n.fn[b];n.fn[b]=function(e,c,f){return null==e||"boolean"===typeof e||!a&&n.isFunction(e)&&n.isFunction(c)?d.apply(this,arguments):this.animate(ca(b,!0),e,c,f)}});n.fn.extend({fadeTo:function(a,b,d,e){return this.filter(I).css("opacity",0).show().end().animate({opacity:b},a,d,e)},animate:function(a,b,d,e){var c=n.isEmptyObject(a),f=n.speed(b,d,e);b=function(){var b=ia(this,n.extend({},a),f);c&&b.stop(!0)};return c||!1===f.queue?this.each(b):this.queue(f.queue,
b)},stop:function(a,b,d){var e=function(a){var b=a.stop;delete a.stop;b(d)};"string"!==typeof a&&(d=b,b=a,a=c);b&&!1!==a&&this.queue(a||"fx",[]);return this.each(function(){var b=!0,c=null!=a&&a+"queueHooks",f=n.timers,g=n._data(this);if(c)g[c]&&g[c].stop&&e(g[c]);else for(c in g)g[c]&&g[c].stop&&Fd.test(c)&&e(g[c]);for(c=f.length;c--;)f[c].elem!==this||null!=a&&f[c].queue!==a||(f[c].anim.stop(d),b=!1,f.splice(c,1));!b&&d||n.dequeue(this,a)})}});n.each({slideDown:ca("show"),slideUp:ca("hide"),slideToggle:ca("toggle"),
fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(a,b){n.fn[a]=function(a,d,e){return this.animate(b,a,d,e)}});n.speed=function(a,b,d){var e=a&&"object"===typeof a?n.extend({},a):{complete:d||!d&&b||n.isFunction(a)&&a,duration:a,easing:d&&b||b&&!n.isFunction(b)&&b};e.duration=n.fx.off?0:"number"===typeof e.duration?e.duration:e.duration in n.fx.speeds?n.fx.speeds[e.duration]:n.fx.speeds._default;if(null==e.queue||!0===e.queue)e.queue="fx";e.old=e.complete;e.complete=
function(){n.isFunction(e.old)&&e.old.call(this);e.queue&&n.dequeue(this,e.queue)};return e};n.easing={linear:function(a){return a},swing:function(a){return.5-Math.cos(a*Math.PI)/2}};n.timers=[];n.fx=ja.prototype.init;n.fx.tick=function(){for(var a,b=n.timers,d=0;d<b.length;d++)a=b[d],a()||b[d]!==a||b.splice(d--,1);b.length||n.fx.stop()};n.fx.timer=function(a){a()&&n.timers.push(a)&&!jc&&(jc=setInterval(n.fx.tick,n.fx.interval))};n.fx.interval=13;n.fx.stop=function(){clearInterval(jc);jc=null};n.fx.speeds=
{slow:600,fast:200,_default:400};n.fx.step={};n.expr&&n.expr.filters&&(n.expr.filters.animated=function(a){return n.grep(n.timers,function(b){return a===b.elem}).length});var dd=/^(?:body|html)$/i;n.fn.offset=function(a){if(arguments.length)return a===c?this:this.each(function(b){n.offset.setOffset(this,a,b)});var b,d,e,f,g,h={top:0,left:0};if(e=(f=this[0])&&f.ownerDocument){if((d=e.body)===f)return n.offset.bodyOffset(f);b=e.documentElement;if(!n.contains(b,f))return h;"undefined"!==typeof f.getBoundingClientRect&&
(h=f.getBoundingClientRect());e=fa(e);f=b.clientTop||d.clientTop||0;d=b.clientLeft||d.clientLeft||0;g=e.pageYOffset||b.scrollTop;b=e.pageXOffset||b.scrollLeft;return{top:h.top+g-f,left:h.left+b-d}}};n.offset={bodyOffset:function(a){var b=a.offsetTop,d=a.offsetLeft;n.support.doesNotIncludeMarginInBodyOffset&&(b+=parseFloat(n.css(a,"marginTop"))||0,d+=parseFloat(n.css(a,"marginLeft"))||0);return{top:b,left:d}},setOffset:function(a,b,d){var e=n.css(a,"position");"static"===e&&(a.style.position="relative");
var c=n(a),f=c.offset(),g=n.css(a,"top"),h=n.css(a,"left"),l={},m={};("absolute"===e||"fixed"===e)&&-1<n.inArray("auto",[g,h])?(m=c.position(),e=m.top,h=m.left):(e=parseFloat(g)||0,h=parseFloat(h)||0);n.isFunction(b)&&(b=b.call(a,d,f));null!=b.top&&(l.top=b.top-f.top+e);null!=b.left&&(l.left=b.left-f.left+h);"using"in b?b.using.call(a,l):c.css(l)}};n.fn.extend({position:function(){if(this[0]){var a=this[0],b=this.offsetParent(),d=this.offset(),e=dd.test(b[0].nodeName)?{top:0,left:0}:b.offset();d.top-=
parseFloat(n.css(a,"marginTop"))||0;d.left-=parseFloat(n.css(a,"marginLeft"))||0;e.top+=parseFloat(n.css(b[0],"borderTopWidth"))||0;e.left+=parseFloat(n.css(b[0],"borderLeftWidth"))||0;return{top:d.top-e.top,left:d.left-e.left}}},offsetParent:function(){return this.map(function(){for(var a=this.offsetParent||L.body;a&&!dd.test(a.nodeName)&&"static"===n.css(a,"position");)a=a.offsetParent;return a||L.body})}});n.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(a,b){var d=/Y/.test(b);
n.fn[a]=function(e){return n.access(this,function(a,e,f){var g=fa(a);if(f===c)return g?b in g?g[b]:g.document.documentElement[e]:a[e];g?g.scrollTo(d?n(g).scrollLeft():f,d?f:n(g).scrollTop()):a[e]=f},a,e,arguments.length,null)}});n.each({Height:"height",Width:"width"},function(a,b){n.each({padding:"inner"+a,content:b,"":"outer"+a},function(d,e){n.fn[e]=function(e,f){var g=arguments.length&&(d||"boolean"!==typeof e),h=d||(!0===e||!0===f?"margin":"border");return n.access(this,function(b,d,e){return n.isWindow(b)?
b.document.documentElement["client"+a]:9===b.nodeType?(d=b.documentElement,Math.max(b.body["scroll"+a],d["scroll"+a],b.body["offset"+a],d["offset"+a],d["client"+a])):e===c?n.css(b,d,e,h):n.style(b,d,e,h)},b,g?e:c,g,null)}})});a.jQuery=a.$=n;"function"===typeof define&&define.amd&&define.amd.jQuery&&define("jquery",[],function(){return n})})(window);
(function(a,c){function b(b,e){var c,f;c=b.nodeName.toLowerCase();if("area"===c){c=b.parentNode;f=c.name;if(!b.href||!f||"map"!==c.nodeName.toLowerCase())return!1;c=a("img[usemap=#"+f+"]")[0];return!!c&&d(c)}return(/input|select|textarea|button|object/.test(c)?!b.disabled:"a"===c?b.href||e:e)&&d(b)}function d(b){return a.expr.filters.visible(b)&&!a(b).parents().andSelf().filter(function(){return"hidden"===a.css(this,"visibility")}).length}var e=0,f=/^ui-id-\d+$/;a.ui=a.ui||{};a.ui.version||(a.extend(a.ui,
{version:"1.9.1",keyCode:{BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38}}),a.fn.extend({_focus:a.fn.focus,focus:function(b,d){return"number"===typeof b?this.each(function(){var e=this;setTimeout(function(){a(e).focus();d&&d.call(e)},b)}):this._focus.apply(this,arguments)},scrollParent:function(){var b;
b=a.ui.ie&&/(static|relative)/.test(this.css("position"))||/absolute/.test(this.css("position"))?this.parents().filter(function(){return/(relative|absolute|fixed)/.test(a.css(this,"position"))&&/(auto|scroll)/.test(a.css(this,"overflow")+a.css(this,"overflow-y")+a.css(this,"overflow-x"))}).eq(0):this.parents().filter(function(){return/(auto|scroll)/.test(a.css(this,"overflow")+a.css(this,"overflow-y")+a.css(this,"overflow-x"))}).eq(0);return/fixed/.test(this.css("position"))||!b.length?a(document):
b},zIndex:function(b){if(b!==c)return this.css("zIndex",b);if(this.length){b=a(this[0]);for(var d;b.length&&b[0]!==document;){d=b.css("position");if("absolute"===d||"relative"===d||"fixed"===d)if(d=parseInt(b.css("zIndex"),10),!isNaN(d)&&0!==d)return d;b=b.parent()}}return 0},uniqueId:function(){return this.each(function(){this.id||(this.id="ui-id-"+ ++e)})},removeUniqueId:function(){return this.each(function(){f.test(this.id)&&a(this).removeAttr("id")})}}),a("<a>").outerWidth(1).jquery||a.each(["Width",
"Height"],function(b,d){function e(b,d,c,g){a.each(f,function(){d-=parseFloat(a.css(b,"padding"+this))||0;c&&(d-=parseFloat(a.css(b,"border"+this+"Width"))||0);g&&(d-=parseFloat(a.css(b,"margin"+this))||0)});return d}var f="Width"===d?["Left","Right"]:["Top","Bottom"],p=d.toLowerCase(),q={innerWidth:a.fn.innerWidth,innerHeight:a.fn.innerHeight,outerWidth:a.fn.outerWidth,outerHeight:a.fn.outerHeight};a.fn["inner"+d]=function(b){return b===c?q["inner"+d].call(this):this.each(function(){a(this).css(p,
e(this,b)+"px")})};a.fn["outer"+d]=function(b,c){return"number"!==typeof b?q["outer"+d].call(this,b):this.each(function(){a(this).css(p,e(this,b,!0,c)+"px")})}}),a.extend(a.expr[":"],{data:a.expr.createPseudo?a.expr.createPseudo(function(b){return function(d){return!!a.data(d,b)}}):function(b,d,e){return!!a.data(b,e[3])},focusable:function(d){return b(d,!isNaN(a.attr(d,"tabindex")))},tabbable:function(d){var e=a.attr(d,"tabindex"),c=isNaN(e);return(c||0<=e)&&b(d,!c)}}),a(function(){var b=document.body,
d=b.appendChild(d=document.createElement("div"));d.offsetHeight;a.extend(d.style,{minHeight:"100px",height:"auto",padding:0,borderWidth:0});a.support.minHeight=100===d.offsetHeight;a.support.selectstart="onselectstart"in d;b.removeChild(d).style.display="none"}),function(){var b=/msie ([\w.]+)/.exec(navigator.userAgent.toLowerCase())||[];a.ui.ie=b.length?!0:!1;a.ui.ie6=6===parseFloat(b[1],10)}(),a.fn.extend({disableSelection:function(){return this.bind((a.support.selectstart?"selectstart":"mousedown")+
".ui-disableSelection",function(a){a.preventDefault()})},enableSelection:function(){return this.unbind(".ui-disableSelection")}}),a.extend(a.ui,{plugin:{add:function(b,d,e){var c;b=a.ui[b].prototype;for(c in e)b.plugins[c]=b.plugins[c]||[],b.plugins[c].push([d,e[c]])},call:function(a,b,d){var e=a.plugins[b];if(e&&a.element[0].parentNode&&11!==a.element[0].parentNode.nodeType)for(b=0;b<e.length;b++)a.options[e[b][0]]&&e[b][1].apply(a.element,d)}},contains:a.contains,hasScroll:function(b,d){if("hidden"===
a(b).css("overflow"))return!1;var e=d&&"left"===d?"scrollLeft":"scrollTop",c=!1;if(0<b[e])return!0;b[e]=1;c=0<b[e];b[e]=0;return c},isOverAxis:function(a,b,d){return a>b&&a<b+d},isOver:function(b,d,e,c,f,q){return a.ui.isOverAxis(b,e,f)&&a.ui.isOverAxis(d,c,q)}}))})(jQuery);
(function(a,c){var b=0,d=Array.prototype.slice,e=a.cleanData;a.cleanData=function(b){for(var d=0,c;null!=(c=b[d]);d++)try{a(c).triggerHandler("remove")}catch(l){}e(b)};a.widget=function(b,d,e){var c,m,p,q,t=b.split(".")[0];b=b.split(".")[1];c=t+"-"+b;e||(e=d,d=a.Widget);a.expr[":"][c.toLowerCase()]=function(b){return!!a.data(b,c)};a[t]=a[t]||{};m=a[t][b];p=a[t][b]=function(a,b){if(!this._createWidget)return new p(a,b);arguments.length&&this._createWidget(a,b)};a.extend(p,m,{version:e.version,_proto:a.extend({},
e),_childConstructors:[]});q=new d;q.options=a.widget.extend({},q.options);a.each(e,function(b,c){a.isFunction(c)&&(e[b]=function(){var a=function(){return d.prototype[b].apply(this,arguments)},e=function(a){return d.prototype[b].apply(this,a)};return function(){var b=this._super,d=this._superApply,f;this._super=a;this._superApply=e;f=c.apply(this,arguments);this._super=b;this._superApply=d;return f}}())});p.prototype=a.widget.extend(q,{widgetEventPrefix:q.widgetEventPrefix||b},e,{constructor:p,namespace:t,
widgetName:b,widgetBaseClass:c,widgetFullName:c});m?(a.each(m._childConstructors,function(b,d){var e=d.prototype;a.widget(e.namespace+"."+e.widgetName,p,d._proto)}),delete m._childConstructors):d._childConstructors.push(p);a.widget.bridge(b,p)};a.widget.extend=function(b){for(var e=d.call(arguments,1),h=0,l=e.length,m,p;h<l;h++)for(m in e[h])p=e[h][m],e[h].hasOwnProperty(m)&&p!==c&&(a.isPlainObject(p)?b[m]=a.isPlainObject(b[m])?a.widget.extend({},b[m],p):a.widget.extend({},p):b[m]=p);return b};a.widget.bridge=
function(b,e){var h=e.prototype.widgetFullName;a.fn[b]=function(l){var m="string"===typeof l,p=d.call(arguments,1),q=this;l=!m&&p.length?a.widget.extend.apply(null,[l].concat(p)):l;m?this.each(function(){var d,e=a.data(this,h);if(!e)return a.error("cannot call methods on "+b+" prior to initialization; attempted to call method '"+l+"'");if(!a.isFunction(e[l])||"_"===l.charAt(0))return a.error("no such method '"+l+"' for "+b+" widget instance");d=e[l].apply(e,p);if(d!==e&&d!==c)return q=d&&d.jquery?
q.pushStack(d.get()):d,!1}):this.each(function(){var b=a.data(this,h);b?b.option(l||{})._init():new e(l,this)});return q}};a.Widget=function(){};a.Widget._childConstructors=[];a.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{disabled:!1,create:null},_createWidget:function(d,e){e=a(e||this.defaultElement||this)[0];this.element=a(e);this.uuid=b++;this.eventNamespace="."+this.widgetName+this.uuid;this.options=a.widget.extend({},this.options,this._getCreateOptions(),
d);this.bindings=a();this.hoverable=a();this.focusable=a();e!==this&&(a.data(e,this.widgetName,this),a.data(e,this.widgetFullName,this),this._on(this.element,{remove:function(a){a.target===e&&this.destroy()}}),this.document=a(e.style?e.ownerDocument:e.document||e),this.window=a(this.document[0].defaultView||this.document[0].parentWindow));this._create();this._trigger("create",null,this._getCreateEventData());this._init()},_getCreateOptions:a.noop,_getCreateEventData:a.noop,_create:a.noop,_init:a.noop,
destroy:function(){this._destroy();this.element.unbind(this.eventNamespace).removeData(this.widgetName).removeData(this.widgetFullName).removeData(a.camelCase(this.widgetFullName));this.widget().unbind(this.eventNamespace).removeAttr("aria-disabled").removeClass(this.widgetFullName+"-disabled ui-state-disabled");this.bindings.unbind(this.eventNamespace);this.hoverable.removeClass("ui-state-hover");this.focusable.removeClass("ui-state-focus")},_destroy:a.noop,widget:function(){return this.element},
option:function(b,d){var e=b,l,m,p;if(0===arguments.length)return a.widget.extend({},this.options);if("string"===typeof b)if(e={},l=b.split("."),b=l.shift(),l.length){m=e[b]=a.widget.extend({},this.options[b]);for(p=0;p<l.length-1;p++)m[l[p]]=m[l[p]]||{},m=m[l[p]];b=l.pop();if(d===c)return m[b]===c?null:m[b];m[b]=d}else{if(d===c)return this.options[b]===c?null:this.options[b];e[b]=d}this._setOptions(e);return this},_setOptions:function(a){for(var b in a)this._setOption(b,a[b]);return this},_setOption:function(a,
b){this.options[a]=b;"disabled"===a&&(this.widget().toggleClass(this.widgetFullName+"-disabled ui-state-disabled",!!b).attr("aria-disabled",b),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus"));return this},enable:function(){return this._setOption("disabled",!1)},disable:function(){return this._setOption("disabled",!0)},_on:function(b,d){var e,c=this;d?(b=e=a(b),this.bindings=this.bindings.add(b)):(d=b,b=this.element,e=this.widget());a.each(d,function(d,g){function q(){if(!0!==
c.options.disabled&&!a(this).hasClass("ui-state-disabled"))return("string"===typeof g?c[g]:g).apply(c,arguments)}"string"!==typeof g&&(q.guid=g.guid=g.guid||q.guid||a.guid++);var t=d.match(/^(\w+)\s*(.*)$/),y=t[1]+c.eventNamespace;(t=t[2])?e.delegate(t,y,q):b.bind(y,q)})},_off:function(a,b){b=(b||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace;a.unbind(b).undelegate(b)},_delay:function(a,b){var d=this;return setTimeout(function(){return("string"===typeof a?d[a]:a).apply(d,arguments)},
b||0)},_hoverable:function(b){this.hoverable=this.hoverable.add(b);this._on(b,{mouseenter:function(b){a(b.currentTarget).addClass("ui-state-hover")},mouseleave:function(b){a(b.currentTarget).removeClass("ui-state-hover")}})},_focusable:function(b){this.focusable=this.focusable.add(b);this._on(b,{focusin:function(b){a(b.currentTarget).addClass("ui-state-focus")},focusout:function(b){a(b.currentTarget).removeClass("ui-state-focus")}})},_trigger:function(b,d,e){var c,m=this.options[b];e=e||{};d=a.Event(d);
d.type=(b===this.widgetEventPrefix?b:this.widgetEventPrefix+b).toLowerCase();d.target=this.element[0];if(b=d.originalEvent)for(c in b)c in d||(d[c]=b[c]);this.element.trigger(d,e);return!(a.isFunction(m)&&!1===m.apply(this.element[0],[d].concat(e))||d.isDefaultPrevented())}};a.each({show:"fadeIn",hide:"fadeOut"},function(b,d){a.Widget.prototype["_"+b]=function(e,c,m){"string"===typeof c&&(c={effect:c});var p,q=c?!0===c||"number"===typeof c?d:c.effect||d:b;c=c||{};"number"===typeof c&&(c={duration:c});
p=!a.isEmptyObject(c);c.complete=m;c.delay&&e.delay(c.delay);if(p&&a.effects&&(a.effects.effect[q]||!1!==a.uiBackCompat&&a.effects[q]))e[b](c);else if(q!==b&&e[q])e[q](c.duration,c.easing,m);else e.queue(function(d){a(this)[b]();m&&m.call(e[0]);d()})}});!1!==a.uiBackCompat&&(a.Widget.prototype._getCreateOptions=function(){return a.metadata&&a.metadata.get(this.element[0])[this.widgetName]})})(jQuery);
(function(a,c){var b=!1;a(document).mouseup(function(a){b=!1});a.widget("ui.mouse",{version:"1.9.1",options:{cancel:"input,textarea,button,select,option",distance:1,delay:0},_mouseInit:function(){var b=this;this.element.bind("mousedown."+this.widgetName,function(a){return b._mouseDown(a)}).bind("click."+this.widgetName,function(e){if(!0===a.data(e.target,b.widgetName+".preventClickEvent"))return a.removeData(e.target,b.widgetName+".preventClickEvent"),e.stopImmediatePropagation(),!1});this.started=
!1},_mouseDestroy:function(){this.element.unbind("."+this.widgetName);this._mouseMoveDelegate&&a(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate)},_mouseDown:function(d){if(!b){this._mouseStarted&&this._mouseUp(d);this._mouseDownEvent=d;var e=this,c=1===d.which,g="string"===typeof this.options.cancel&&d.target.nodeName?a(d.target).closest(this.options.cancel).length:!1;if(!c||g||!this._mouseCapture(d))return!0;this.mouseDelayMet=
!this.options.delay;this.mouseDelayMet||(this._mouseDelayTimer=setTimeout(function(){e.mouseDelayMet=!0},this.options.delay));if(this._mouseDistanceMet(d)&&this._mouseDelayMet(d)&&(this._mouseStarted=!1!==this._mouseStart(d),!this._mouseStarted))return d.preventDefault(),!0;!0===a.data(d.target,this.widgetName+".preventClickEvent")&&a.removeData(d.target,this.widgetName+".preventClickEvent");this._mouseMoveDelegate=function(a){return e._mouseMove(a)};this._mouseUpDelegate=function(a){return e._mouseUp(a)};
a(document).bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate);d.preventDefault();return b=!0}},_mouseMove:function(b){if(a.ui.ie&&!(9<=document.documentMode)&&!b.button)return this._mouseUp(b);if(this._mouseStarted)return this._mouseDrag(b),b.preventDefault();this._mouseDistanceMet(b)&&this._mouseDelayMet(b)&&((this._mouseStarted=!1!==this._mouseStart(this._mouseDownEvent,b))?this._mouseDrag(b):this._mouseUp(b));return!this._mouseStarted},
_mouseUp:function(b){a(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate);this._mouseStarted&&(this._mouseStarted=!1,b.target===this._mouseDownEvent.target&&a.data(b.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(b));return!1},_mouseDistanceMet:function(a){return Math.max(Math.abs(this._mouseDownEvent.pageX-a.pageX),Math.abs(this._mouseDownEvent.pageY-a.pageY))>=this.options.distance},_mouseDelayMet:function(a){return this.mouseDelayMet},
_mouseStart:function(a){},_mouseDrag:function(a){},_mouseStop:function(a){},_mouseCapture:function(a){return!0}})})(jQuery);
(function(a,c){function b(a,b,d){return[parseInt(a[0],10)*(q.test(a[0])?b/100:1),parseInt(a[1],10)*(q.test(a[1])?d/100:1)]}a.ui=a.ui||{};var d,e=Math.max,f=Math.abs,g=Math.round,h=/left|center|right/,l=/top|center|bottom/,m=/[\+\-]\d+%?/,p=/^\w+/,q=/%$/,t=a.fn.position;a.position={scrollbarWidth:function(){if(d!==c)return d;var b,e,f=a("<div style='display:block;width:50px;height:50px;overflow:hidden;'><div style='height:100px;width:auto;'></div></div>");e=f.children()[0];a("body").append(f);b=e.offsetWidth;
f.css("overflow","scroll");e=e.offsetWidth;b===e&&(e=f[0].clientWidth);f.remove();return d=b-e},getScrollInfo:function(b){var d=b.isWindow?"":b.element.css("overflow-x"),e=b.isWindow?"":b.element.css("overflow-y"),e="scroll"===e||"auto"===e&&b.height<b.element[0].scrollHeight;return{width:"scroll"===d||"auto"===d&&b.width<b.element[0].scrollWidth?a.position.scrollbarWidth():0,height:e?a.position.scrollbarWidth():0}},getWithinInfo:function(b){b=a(b||window);var d=a.isWindow(b[0]);return{element:b,
isWindow:d,offset:b.offset()||{left:0,top:0},scrollLeft:b.scrollLeft(),scrollTop:b.scrollTop(),width:d?b.width():b.outerWidth(),height:d?b.height():b.outerHeight()}}};a.fn.position=function(d){if(!d||!d.of)return t.apply(this,arguments);d=a.extend({},d);var c,q,B,I,F,A=a(d.of),r=a.position.getWithinInfo(d.within),v=a.position.getScrollInfo(r),z=A[0],H=(d.collision||"flip").split(" "),O={};9===z.nodeType?(q=A.width(),B=A.height(),I={top:0,left:0}):a.isWindow(z)?(q=A.width(),B=A.height(),I={top:A.scrollTop(),
left:A.scrollLeft()}):z.preventDefault?(d.at="left top",q=B=0,I={top:z.pageY,left:z.pageX}):(q=A.outerWidth(),B=A.outerHeight(),I=A.offset());F=a.extend({},I);a.each(["my","at"],function(){var a=(d[this]||"").split(" "),b,e;1===a.length&&(a=h.test(a[0])?a.concat(["center"]):l.test(a[0])?["center"].concat(a):["center","center"]);a[0]=h.test(a[0])?a[0]:"center";a[1]=l.test(a[1])?a[1]:"center";b=m.exec(a[0]);e=m.exec(a[1]);O[this]=[b?b[0]:0,e?e[0]:0];d[this]=[p.exec(a[0])[0],p.exec(a[1])[0]]});1===H.length&&
(H[1]=H[0]);"right"===d.at[0]?F.left+=q:"center"===d.at[0]&&(F.left+=q/2);"bottom"===d.at[1]?F.top+=B:"center"===d.at[1]&&(F.top+=B/2);c=b(O.at,q,B);F.left+=c[0];F.top+=c[1];return this.each(function(){var h,l,m=a(this),p=m.outerWidth(),t=m.outerHeight(),z=parseInt(a.css(this,"marginLeft"),10)||0,aa=parseInt(a.css(this,"marginTop"),10)||0,ja=p+z+(parseInt(a.css(this,"marginRight"),10)||0)+v.width,ca=t+aa+(parseInt(a.css(this,"marginBottom"),10)||0)+v.height,fa=a.extend({},F),ba=b(O.my,m.outerWidth(),
m.outerHeight());"right"===d.my[0]?fa.left-=p:"center"===d.my[0]&&(fa.left-=p/2);"bottom"===d.my[1]?fa.top-=t:"center"===d.my[1]&&(fa.top-=t/2);fa.left+=ba[0];fa.top+=ba[1];a.support.offsetFractions||(fa.left=g(fa.left),fa.top=g(fa.top));h={marginLeft:z,marginTop:aa};a.each(["left","top"],function(b,e){if(a.ui.position[H[b]])a.ui.position[H[b]][e](fa,{targetWidth:q,targetHeight:B,elemWidth:p,elemHeight:t,collisionPosition:h,collisionWidth:ja,collisionHeight:ca,offset:[c[0]+ba[0],c[1]+ba[1]],my:d.my,
at:d.at,within:r,elem:m})});a.fn.bgiframe&&m.bgiframe();d.using&&(l=function(a){var b=I.left-fa.left,c=b+q-p,g=I.top-fa.top,h=g+B-t,l={target:{element:A,left:I.left,top:I.top,width:q,height:B},element:{element:m,left:fa.left,top:fa.top,width:p,height:t},horizontal:0>c?"left":0<b?"right":"center",vertical:0>h?"top":0<g?"bottom":"middle"};q<p&&f(b+c)<q&&(l.horizontal="center");B<t&&f(g+h)<B&&(l.vertical="middle");e(f(b),f(c))>e(f(g),f(h))?l.important="horizontal":l.important="vertical";d.using.call(this,
a,l)});m.offset(a.extend(fa,{using:l}))})};a.ui.position={fit:{left:function(a,b){var d=b.within,c=d.isWindow?d.scrollLeft:d.offset.left,f=d.width,g=a.left-b.collisionPosition.marginLeft,d=c-g,h=g+b.collisionWidth-f-c;b.collisionWidth>f?0<d&&0>=h?(c=a.left+d+b.collisionWidth-f-c,a.left+=d-c):a.left=0<h&&0>=d?c:d>h?c+f-b.collisionWidth:c:a.left=0<d?a.left+d:0<h?a.left-h:e(a.left-g,a.left)},top:function(a,b){var d=b.within,c=d.isWindow?d.scrollTop:d.offset.top,f=b.within.height,g=a.top-b.collisionPosition.marginTop,
d=c-g,h=g+b.collisionHeight-f-c;b.collisionHeight>f?0<d&&0>=h?(c=a.top+d+b.collisionHeight-f-c,a.top+=d-c):a.top=0<h&&0>=d?c:d>h?c+f-b.collisionHeight:c:a.top=0<d?a.top+d:0<h?a.top-h:e(a.top-g,a.top)}},flip:{left:function(a,b){var d=b.within,e=d.offset.left+d.scrollLeft,c=d.width,g=d.isWindow?d.scrollLeft:d.offset.left,h=a.left-b.collisionPosition.marginLeft,d=h-g,l=h+b.collisionWidth-c-g,h="left"===b.my[0]?-b.elemWidth:"right"===b.my[0]?b.elemWidth:0,m="left"===b.at[0]?b.targetWidth:"right"===b.at[0]?
-b.targetWidth:0,p=-2*b.offset[0];if(0>d){if(e=a.left+h+m+p+b.collisionWidth-c-e,0>e||e<f(d))a.left+=h+m+p}else 0<l&&(e=a.left-b.collisionPosition.marginLeft+h+m+p-g,0<e||f(e)<l)&&(a.left+=h+m+p)},top:function(a,b){var d=b.within,e=d.offset.top+d.scrollTop,c=d.height,g=d.isWindow?d.scrollTop:d.offset.top,h=a.top-b.collisionPosition.marginTop,d=h-g,l=h+b.collisionHeight-c-g,h="top"===b.my[1]?-b.elemHeight:"bottom"===b.my[1]?b.elemHeight:0,m="top"===b.at[1]?b.targetHeight:"bottom"===b.at[1]?-b.targetHeight:
0,p=-2*b.offset[1];0>d?(e=a.top+h+m+p+b.collisionHeight-c-e,a.top+h+m+p>d&&(0>e||e<f(d))&&(a.top+=h+m+p)):0<l&&(e=a.top-b.collisionPosition.marginTop+h+m+p-g,a.top+h+m+p>l&&(0<e||f(e)<l)&&(a.top+=h+m+p))}},flipfit:{left:function(){a.ui.position.flip.left.apply(this,arguments);a.ui.position.fit.left.apply(this,arguments)},top:function(){a.ui.position.flip.top.apply(this,arguments);a.ui.position.fit.top.apply(this,arguments)}}};(function(){var b,d,e,c,f=document.getElementsByTagName("body")[0];e=document.createElement("div");
b=document.createElement(f?"div":"body");d={visibility:"hidden",width:0,height:0,border:0,margin:0,background:"none"};f&&a.extend(d,{position:"absolute",left:"-1000px",top:"-1000px"});for(c in d)b.style[c]=d[c];b.appendChild(e);d=f||document.documentElement;d.insertBefore(b,d.firstChild);e.style.cssText="position: absolute; left: 10.7432222px;";e=a(e).offset().left;a.support.offsetFractions=10<e&&11>e;b.innerHTML="";d.removeChild(b)})();!1!==a.uiBackCompat&&function(a){var b=a.fn.position;a.fn.position=
function(d){if(!d||!d.offset)return b.call(this,d);var e=d.offset.split(" "),f=d.at.split(" ");1===e.length&&(e[1]=e[0]);/^\d/.test(e[0])&&(e[0]="+"+e[0]);/^\d/.test(e[1])&&(e[1]="+"+e[1]);1===f.length&&(/left|center|right/.test(f[0])?f[1]="center":(f[1]=f[0],f[0]="center"));return b.call(this,a.extend(d,{at:f[0]+e[0]+" "+f[1]+e[1],offset:c}))}}(jQuery)})(jQuery);
(function(a,c){a.widget("ui.draggable",a.ui.mouse,{version:"1.9.1",widgetEventPrefix:"drag",options:{addClasses:!0,appendTo:"parent",axis:!1,connectToSortable:!1,containment:!1,cursor:"auto",cursorAt:!1,grid:!1,handle:!1,helper:"original",iframeFix:!1,opacity:!1,refreshPositions:!1,revert:!1,revertDuration:500,scope:"default",scroll:!0,scrollSensitivity:20,scrollSpeed:20,snap:!1,snapMode:"both",snapTolerance:20,stack:!1,zIndex:!1},_create:function(){"original"!=this.options.helper||/^(?:r|a|f)/.test(this.element.css("position"))||
(this.element[0].style.position="relative");this.options.addClasses&&this.element.addClass("ui-draggable");this.options.disabled&&this.element.addClass("ui-draggable-disabled");this._mouseInit()},_destroy:function(){this.element.removeClass("ui-draggable ui-draggable-dragging ui-draggable-disabled");this._mouseDestroy()},_mouseCapture:function(b){var d=this.options;if(this.helper||d.disabled||a(b.target).is(".ui-resizable-handle"))return!1;this.handle=this._getHandle(b);if(!this.handle)return!1;a(!0===
d.iframeFix?"iframe":d.iframeFix).each(function(){a('<div class="ui-draggable-iframeFix" style="background: #fff;"></div>').css({width:this.offsetWidth+"px",height:this.offsetHeight+"px",position:"absolute",opacity:"0.001",zIndex:1E3}).css(a(this).offset()).appendTo("body")});return!0},_mouseStart:function(b){var d=this.options;this.helper=this._createHelper(b);this.helper.addClass("ui-draggable-dragging");this._cacheHelperProportions();a.ui.ddmanager&&(a.ui.ddmanager.current=this);this._cacheMargins();
this.cssPosition=this.helper.css("position");this.scrollParent=this.helper.scrollParent();this.offset=this.positionAbs=this.element.offset();this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left};a.extend(this.offset,{click:{left:b.pageX-this.offset.left,top:b.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()});this.originalPosition=this.position=this._generatePosition(b);this.originalPageX=b.pageX;this.originalPageY=b.pageY;
d.cursorAt&&this._adjustOffsetFromHelper(d.cursorAt);d.containment&&this._setContainment();if(!1===this._trigger("start",b))return this._clear(),!1;this._cacheHelperProportions();a.ui.ddmanager&&!d.dropBehaviour&&a.ui.ddmanager.prepareOffsets(this,b);this._mouseDrag(b,!0);a.ui.ddmanager&&a.ui.ddmanager.dragStart(this,b);return!0},_mouseDrag:function(b,d){this.position=this._generatePosition(b);this.positionAbs=this._convertPositionTo("absolute");if(!d){var e=this._uiHash();if(!1===this._trigger("drag",
b,e))return this._mouseUp({}),!1;this.position=e.position}this.options.axis&&"y"==this.options.axis||(this.helper[0].style.left=this.position.left+"px");this.options.axis&&"x"==this.options.axis||(this.helper[0].style.top=this.position.top+"px");a.ui.ddmanager&&a.ui.ddmanager.drag(this,b);return!1},_mouseStop:function(b){var d=!1;a.ui.ddmanager&&!this.options.dropBehaviour&&(d=a.ui.ddmanager.drop(this,b));this.dropped&&(d=this.dropped,this.dropped=!1);for(var e=this.element[0],c=!1;e&&(e=e.parentNode);)e==
document&&(c=!0);if(!c&&"original"===this.options.helper)return!1;if("invalid"==this.options.revert&&!d||"valid"==this.options.revert&&d||!0===this.options.revert||a.isFunction(this.options.revert)&&this.options.revert.call(this.element,d)){var g=this;a(this.helper).animate(this.originalPosition,parseInt(this.options.revertDuration,10),function(){!1!==g._trigger("stop",b)&&g._clear()})}else!1!==this._trigger("stop",b)&&this._clear();return!1},_mouseUp:function(b){a("div.ui-draggable-iframeFix").each(function(){this.parentNode.removeChild(this)});
a.ui.ddmanager&&a.ui.ddmanager.dragStop(this,b);return a.ui.mouse.prototype._mouseUp.call(this,b)},cancel:function(){this.helper.is(".ui-draggable-dragging")?this._mouseUp({}):this._clear();return this},_getHandle:function(b){var d=this.options.handle&&a(this.options.handle,this.element).length?!1:!0;a(this.options.handle,this.element).find("*").andSelf().each(function(){this==b.target&&(d=!0)});return d},_createHelper:function(b){var d=this.options;b=a.isFunction(d.helper)?a(d.helper.apply(this.element[0],
[b])):"clone"==d.helper?this.element.clone().removeAttr("id"):this.element;b.parents("body").length||b.appendTo("parent"==d.appendTo?this.element[0].parentNode:d.appendTo);b[0]==this.element[0]||/(fixed|absolute)/.test(b.css("position"))||b.css("position","absolute");return b},_adjustOffsetFromHelper:function(b){"string"==typeof b&&(b=b.split(" "));a.isArray(b)&&(b={left:+b[0],top:+b[1]||0});"left"in b&&(this.offset.click.left=b.left+this.margins.left);"right"in b&&(this.offset.click.left=this.helperProportions.width-
b.right+this.margins.left);"top"in b&&(this.offset.click.top=b.top+this.margins.top);"bottom"in b&&(this.offset.click.top=this.helperProportions.height-b.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var b=this.offsetParent.offset();"absolute"==this.cssPosition&&this.scrollParent[0]!=document&&a.contains(this.scrollParent[0],this.offsetParent[0])&&(b.left+=this.scrollParent.scrollLeft(),b.top+=this.scrollParent.scrollTop());if(this.offsetParent[0]==
document.body||this.offsetParent[0].tagName&&"html"==this.offsetParent[0].tagName.toLowerCase()&&a.ui.ie)b={top:0,left:0};return{top:b.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:b.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"==this.cssPosition){var a=this.element.position();return{top:a.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:a.left-(parseInt(this.helper.css("left"),10)||
0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.element.css("marginLeft"),10)||0,top:parseInt(this.element.css("marginTop"),10)||0,right:parseInt(this.element.css("marginRight"),10)||0,bottom:parseInt(this.element.css("marginBottom"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var b=this.options;"parent"==b.containment&&
(b.containment=this.helper[0].parentNode);if("document"==b.containment||"window"==b.containment)this.containment=["document"==b.containment?0:a(window).scrollLeft()-this.offset.relative.left-this.offset.parent.left,"document"==b.containment?0:a(window).scrollTop()-this.offset.relative.top-this.offset.parent.top,("document"==b.containment?0:a(window).scrollLeft())+a("document"==b.containment?document:window).width()-this.helperProportions.width-this.margins.left,("document"==b.containment?0:a(window).scrollTop())+
(a("document"==b.containment?document:window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top];if(/^(document|window|parent)$/.test(b.containment)||b.containment.constructor==Array)b.containment.constructor==Array&&(this.containment=b.containment);else{var b=a(b.containment),d=b[0];if(d){b.offset();var e="hidden"!=a(d).css("overflow");this.containment=[(parseInt(a(d).css("borderLeftWidth"),10)||0)+(parseInt(a(d).css("paddingLeft"),10)||0),(parseInt(a(d).css("borderTopWidth"),
10)||0)+(parseInt(a(d).css("paddingTop"),10)||0),(e?Math.max(d.scrollWidth,d.offsetWidth):d.offsetWidth)-(parseInt(a(d).css("borderLeftWidth"),10)||0)-(parseInt(a(d).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left-this.margins.right,(e?Math.max(d.scrollHeight,d.offsetHeight):d.offsetHeight)-(parseInt(a(d).css("borderTopWidth"),10)||0)-(parseInt(a(d).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top-this.margins.bottom];this.relative_container=b}}},
_convertPositionTo:function(b,d){d||(d=this.position);var e="absolute"==b?1:-1,c="absolute"!=this.cssPosition||this.scrollParent[0]!=document&&a.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,g=/(html|body)/i.test(c[0].tagName);return{top:d.top+this.offset.relative.top*e+this.offset.parent.top*e-("fixed"==this.cssPosition?-this.scrollParent.scrollTop():g?0:c.scrollTop())*e,left:d.left+this.offset.relative.left*e+this.offset.parent.left*e-("fixed"==this.cssPosition?
-this.scrollParent.scrollLeft():g?0:c.scrollLeft())*e}},_generatePosition:function(b){var d=this.options,e="absolute"!=this.cssPosition||this.scrollParent[0]!=document&&a.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,c=/(html|body)/i.test(e[0].tagName),g=b.pageX,h=b.pageY;if(this.originalPosition){var l;this.containment&&(this.relative_container?(l=this.relative_container.offset(),l=[this.containment[0]+l.left,this.containment[1]+l.top,this.containment[2]+
l.left,this.containment[3]+l.top]):l=this.containment,b.pageX-this.offset.click.left<l[0]&&(g=l[0]+this.offset.click.left),b.pageY-this.offset.click.top<l[1]&&(h=l[1]+this.offset.click.top),b.pageX-this.offset.click.left>l[2]&&(g=l[2]+this.offset.click.left),b.pageY-this.offset.click.top>l[3]&&(h=l[3]+this.offset.click.top));d.grid&&(h=d.grid[1]?this.originalPageY+Math.round((h-this.originalPageY)/d.grid[1])*d.grid[1]:this.originalPageY,h=l?h-this.offset.click.top<l[1]||h-this.offset.click.top>l[3]?
h-this.offset.click.top<l[1]?h+d.grid[1]:h-d.grid[1]:h:h,g=d.grid[0]?this.originalPageX+Math.round((g-this.originalPageX)/d.grid[0])*d.grid[0]:this.originalPageX,g=l?g-this.offset.click.left<l[0]||g-this.offset.click.left>l[2]?g-this.offset.click.left<l[0]?g+d.grid[0]:g-d.grid[0]:g:g)}return{top:h-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"==this.cssPosition?-this.scrollParent.scrollTop():c?0:e.scrollTop()),left:g-this.offset.click.left-this.offset.relative.left-
this.offset.parent.left+("fixed"==this.cssPosition?-this.scrollParent.scrollLeft():c?0:e.scrollLeft())}},_clear:function(){this.helper.removeClass("ui-draggable-dragging");this.helper[0]==this.element[0]||this.cancelHelperRemoval||this.helper.remove();this.helper=null;this.cancelHelperRemoval=!1},_trigger:function(b,d,e){e=e||this._uiHash();a.ui.plugin.call(this,b,[d,e]);"drag"==b&&(this.positionAbs=this._convertPositionTo("absolute"));return a.Widget.prototype._trigger.call(this,b,d,e)},plugins:{},
_uiHash:function(a){return{helper:this.helper,position:this.position,originalPosition:this.originalPosition,offset:this.positionAbs}}});a.ui.plugin.add("draggable","connectToSortable",{start:function(b,d){var e=a(this).data("draggable"),c=e.options,g=a.extend({},d,{item:e.element});e.sortables=[];a(c.connectToSortable).each(function(){var d=a.data(this,"sortable");d&&!d.options.disabled&&(e.sortables.push({instance:d,shouldRevert:d.options.revert}),d.refreshPositions(),d._trigger("activate",b,g))})},
stop:function(b,d){var e=a(this).data("draggable"),c=a.extend({},d,{item:e.element});a.each(e.sortables,function(){this.instance.isOver?(this.instance.isOver=0,e.cancelHelperRemoval=!0,this.instance.cancelHelperRemoval=!1,this.shouldRevert&&(this.instance.options.revert=!0),this.instance._mouseStop(b),this.instance.options.helper=this.instance.options._helper,"original"==e.options.helper&&this.instance.currentItem.css({top:"auto",left:"auto"})):(this.instance.cancelHelperRemoval=!1,this.instance._trigger("deactivate",
b,c))})},drag:function(b,d){var e=a(this).data("draggable"),c=this;a.each(e.sortables,function(g){var h=!1,l=this;this.instance.positionAbs=e.positionAbs;this.instance.helperProportions=e.helperProportions;this.instance.offset.click=e.offset.click;this.instance._intersectsWith(this.instance.containerCache)&&(h=!0,a.each(e.sortables,function(){this.instance.positionAbs=e.positionAbs;this.instance.helperProportions=e.helperProportions;this.instance.offset.click=e.offset.click;this!=l&&this.instance._intersectsWith(this.instance.containerCache)&&
a.ui.contains(l.instance.element[0],this.instance.element[0])&&(h=!1);return h}));h?(this.instance.isOver||(this.instance.isOver=1,this.instance.currentItem=a(c).clone().removeAttr("id").appendTo(this.instance.element).data("sortable-item",!0),this.instance.options._helper=this.instance.options.helper,this.instance.options.helper=function(){return d.helper[0]},b.target=this.instance.currentItem[0],this.instance._mouseCapture(b,!0),this.instance._mouseStart(b,!0,!0),this.instance.offset.click.top=
e.offset.click.top,this.instance.offset.click.left=e.offset.click.left,this.instance.offset.parent.left-=e.offset.parent.left-this.instance.offset.parent.left,this.instance.offset.parent.top-=e.offset.parent.top-this.instance.offset.parent.top,e._trigger("toSortable",b),e.dropped=this.instance.element,e.currentItem=e.element,this.instance.fromOutside=e),this.instance.currentItem&&this.instance._mouseDrag(b)):this.instance.isOver&&(this.instance.isOver=0,this.instance.cancelHelperRemoval=!0,this.instance.options.revert=
!1,this.instance._trigger("out",b,this.instance._uiHash(this.instance)),this.instance._mouseStop(b,!0),this.instance.options.helper=this.instance.options._helper,this.instance.currentItem.remove(),this.instance.placeholder&&this.instance.placeholder.remove(),e._trigger("fromSortable",b),e.dropped=!1)})}});a.ui.plugin.add("draggable","cursor",{start:function(b,d){var e=a("body"),c=a(this).data("draggable").options;e.css("cursor")&&(c._cursor=e.css("cursor"));e.css("cursor",c.cursor)},stop:function(b,
d){var e=a(this).data("draggable").options;e._cursor&&a("body").css("cursor",e._cursor)}});a.ui.plugin.add("draggable","opacity",{start:function(b,d){var e=a(d.helper),c=a(this).data("draggable").options;e.css("opacity")&&(c._opacity=e.css("opacity"));e.css("opacity",c.opacity)},stop:function(b,d){var e=a(this).data("draggable").options;e._opacity&&a(d.helper).css("opacity",e._opacity)}});a.ui.plugin.add("draggable","scroll",{start:function(b,d){var e=a(this).data("draggable");e.scrollParent[0]!=
document&&"HTML"!=e.scrollParent[0].tagName&&(e.overflowOffset=e.scrollParent.offset())},drag:function(b,d){var e=a(this).data("draggable"),c=e.options,g=!1;e.scrollParent[0]!=document&&"HTML"!=e.scrollParent[0].tagName?(c.axis&&"x"==c.axis||(e.overflowOffset.top+e.scrollParent[0].offsetHeight-b.pageY<c.scrollSensitivity?e.scrollParent[0].scrollTop=g=e.scrollParent[0].scrollTop+c.scrollSpeed:b.pageY-e.overflowOffset.top<c.scrollSensitivity&&(e.scrollParent[0].scrollTop=g=e.scrollParent[0].scrollTop-
c.scrollSpeed)),c.axis&&"y"==c.axis||(e.overflowOffset.left+e.scrollParent[0].offsetWidth-b.pageX<c.scrollSensitivity?e.scrollParent[0].scrollLeft=g=e.scrollParent[0].scrollLeft+c.scrollSpeed:b.pageX-e.overflowOffset.left<c.scrollSensitivity&&(e.scrollParent[0].scrollLeft=g=e.scrollParent[0].scrollLeft-c.scrollSpeed))):(c.axis&&"x"==c.axis||(b.pageY-a(document).scrollTop()<c.scrollSensitivity?g=a(document).scrollTop(a(document).scrollTop()-c.scrollSpeed):a(window).height()-(b.pageY-a(document).scrollTop())<
c.scrollSensitivity&&(g=a(document).scrollTop(a(document).scrollTop()+c.scrollSpeed))),c.axis&&"y"==c.axis||(b.pageX-a(document).scrollLeft()<c.scrollSensitivity?g=a(document).scrollLeft(a(document).scrollLeft()-c.scrollSpeed):a(window).width()-(b.pageX-a(document).scrollLeft())<c.scrollSensitivity&&(g=a(document).scrollLeft(a(document).scrollLeft()+c.scrollSpeed))));!1!==g&&a.ui.ddmanager&&!c.dropBehaviour&&a.ui.ddmanager.prepareOffsets(e,b)}});a.ui.plugin.add("draggable","snap",{start:function(b,
d){var e=a(this).data("draggable"),c=e.options;e.snapElements=[];a(c.snap.constructor!=String?c.snap.items||":data(draggable)":c.snap).each(function(){var b=a(this),d=b.offset();this!=e.element[0]&&e.snapElements.push({item:this,width:b.outerWidth(),height:b.outerHeight(),top:d.top,left:d.left})})},drag:function(b,d){for(var e=a(this).data("draggable"),c=e.options,g=c.snapTolerance,h=d.offset.left,l=h+e.helperProportions.width,m=d.offset.top,p=m+e.helperProportions.height,q=e.snapElements.length-
1;0<=q;q--){var t=e.snapElements[q].left,y=t+e.snapElements[q].width,u=e.snapElements[q].top,C=u+e.snapElements[q].height;if(t-g<h&&h<y+g&&u-g<m&&m<C+g||t-g<h&&h<y+g&&u-g<p&&p<C+g||t-g<l&&l<y+g&&u-g<m&&m<C+g||t-g<l&&l<y+g&&u-g<p&&p<C+g){if("inner"!=c.snapMode){var B=Math.abs(u-p)<=g,I=Math.abs(C-m)<=g,F=Math.abs(t-l)<=g,A=Math.abs(y-h)<=g;B&&(d.position.top=e._convertPositionTo("relative",{top:u-e.helperProportions.height,left:0}).top-e.margins.top);I&&(d.position.top=e._convertPositionTo("relative",
{top:C,left:0}).top-e.margins.top);F&&(d.position.left=e._convertPositionTo("relative",{top:0,left:t-e.helperProportions.width}).left-e.margins.left);A&&(d.position.left=e._convertPositionTo("relative",{top:0,left:y}).left-e.margins.left)}var r=B||I||F||A;"outer"!=c.snapMode&&(B=Math.abs(u-m)<=g,I=Math.abs(C-p)<=g,F=Math.abs(t-h)<=g,A=Math.abs(y-l)<=g,B&&(d.position.top=e._convertPositionTo("relative",{top:u,left:0}).top-e.margins.top),I&&(d.position.top=e._convertPositionTo("relative",{top:C-e.helperProportions.height,
left:0}).top-e.margins.top),F&&(d.position.left=e._convertPositionTo("relative",{top:0,left:t}).left-e.margins.left),A&&(d.position.left=e._convertPositionTo("relative",{top:0,left:y-e.helperProportions.width}).left-e.margins.left));!e.snapElements[q].snapping&&(B||I||F||A||r)&&e.options.snap.snap&&e.options.snap.snap.call(e.element,b,a.extend(e._uiHash(),{snapItem:e.snapElements[q].item}));e.snapElements[q].snapping=B||I||F||A||r}else e.snapElements[q].snapping&&e.options.snap.release&&e.options.snap.release.call(e.element,
b,a.extend(e._uiHash(),{snapItem:e.snapElements[q].item})),e.snapElements[q].snapping=!1}}});a.ui.plugin.add("draggable","stack",{start:function(b,d){var e=a(this).data("draggable").options,e=a.makeArray(a(e.stack)).sort(function(b,d){return(parseInt(a(b).css("zIndex"),10)||0)-(parseInt(a(d).css("zIndex"),10)||0)});if(e.length){var c=parseInt(e[0].style.zIndex)||0;a(e).each(function(a){this.style.zIndex=c+a});this[0].style.zIndex=c+e.length}}});a.ui.plugin.add("draggable","zIndex",{start:function(b,
d){var e=a(d.helper),c=a(this).data("draggable").options;e.css("zIndex")&&(c._zIndex=e.css("zIndex"));e.css("zIndex",c.zIndex)},stop:function(b,d){var e=a(this).data("draggable").options;e._zIndex&&a(d.helper).css("zIndex",e._zIndex)}})})(jQuery);
(function(a,c){a.widget("ui.droppable",{version:"1.9.1",widgetEventPrefix:"drop",options:{accept:"*",activeClass:!1,addClasses:!0,greedy:!1,hoverClass:!1,scope:"default",tolerance:"intersect"},_create:function(){var b=this.options,d=b.accept;this.isover=0;this.isout=1;this.accept=a.isFunction(d)?d:function(a){return a.is(d)};this.proportions={width:this.element[0].offsetWidth,height:this.element[0].offsetHeight};a.ui.ddmanager.droppables[b.scope]=a.ui.ddmanager.droppables[b.scope]||[];a.ui.ddmanager.droppables[b.scope].push(this);
b.addClasses&&this.element.addClass("ui-droppable")},_destroy:function(){for(var b=a.ui.ddmanager.droppables[this.options.scope],d=0;d<b.length;d++)b[d]==this&&b.splice(d,1);this.element.removeClass("ui-droppable ui-droppable-disabled")},_setOption:function(b,d){"accept"==b&&(this.accept=a.isFunction(d)?d:function(a){return a.is(d)});a.Widget.prototype._setOption.apply(this,arguments)},_activate:function(b){var d=a.ui.ddmanager.current;this.options.activeClass&&this.element.addClass(this.options.activeClass);
d&&this._trigger("activate",b,this.ui(d))},_deactivate:function(b){var d=a.ui.ddmanager.current;this.options.activeClass&&this.element.removeClass(this.options.activeClass);d&&this._trigger("deactivate",b,this.ui(d))},_over:function(b){var d=a.ui.ddmanager.current;d&&(d.currentItem||d.element)[0]!=this.element[0]&&this.accept.call(this.element[0],d.currentItem||d.element)&&(this.options.hoverClass&&this.element.addClass(this.options.hoverClass),this._trigger("over",b,this.ui(d)))},_out:function(b){var d=
a.ui.ddmanager.current;d&&(d.currentItem||d.element)[0]!=this.element[0]&&this.accept.call(this.element[0],d.currentItem||d.element)&&(this.options.hoverClass&&this.element.removeClass(this.options.hoverClass),this._trigger("out",b,this.ui(d)))},_drop:function(b,d){var e=d||a.ui.ddmanager.current;if(!e||(e.currentItem||e.element)[0]==this.element[0])return!1;var c=!1;this.element.find(":data(droppable)").not(".ui-draggable-dragging").each(function(){var b=a.data(this,"droppable");if(b.options.greedy&&
!b.options.disabled&&b.options.scope==e.options.scope&&b.accept.call(b.element[0],e.currentItem||e.element)&&a.ui.intersect(e,a.extend(b,{offset:b.element.offset()}),b.options.tolerance))return c=!0,!1});return c?!1:this.accept.call(this.element[0],e.currentItem||e.element)?(this.options.activeClass&&this.element.removeClass(this.options.activeClass),this.options.hoverClass&&this.element.removeClass(this.options.hoverClass),this._trigger("drop",b,this.ui(e)),this.element):!1},ui:function(a){return{draggable:a.currentItem||
a.element,helper:a.helper,position:a.position,offset:a.positionAbs}}});a.ui.intersect=function(b,d,e){if(!d.offset)return!1;var c=(b.positionAbs||b.position.absolute).left,g=c+b.helperProportions.width,h=(b.positionAbs||b.position.absolute).top,l=h+b.helperProportions.height,m=d.offset.left,p=m+d.proportions.width,q=d.offset.top,t=q+d.proportions.height;switch(e){case "fit":return m<=c&&g<=p&&q<=h&&l<=t;case "intersect":return m<c+b.helperProportions.width/2&&g-b.helperProportions.width/2<p&&q<h+
b.helperProportions.height/2&&l-b.helperProportions.height/2<t;case "pointer":return a.ui.isOver((b.positionAbs||b.position.absolute).top+(b.clickOffset||b.offset.click).top,(b.positionAbs||b.position.absolute).left+(b.clickOffset||b.offset.click).left,q,m,d.proportions.height,d.proportions.width);case "touch":return(h>=q&&h<=t||l>=q&&l<=t||h<q&&l>t)&&(c>=m&&c<=p||g>=m&&g<=p||c<m&&g>p);default:return!1}};a.ui.ddmanager={current:null,droppables:{"default":[]},prepareOffsets:function(b,d){var e=a.ui.ddmanager.droppables[b.options.scope]||
[],c=d?d.type:null,g=(b.currentItem||b.element).find(":data(droppable)").andSelf(),h=0;a:for(;h<e.length;h++)if(!(e[h].options.disabled||b&&!e[h].accept.call(e[h].element[0],b.currentItem||b.element))){for(var l=0;l<g.length;l++)if(g[l]==e[h].element[0]){e[h].proportions.height=0;continue a}e[h].visible="none"!=e[h].element.css("display");e[h].visible&&("mousedown"==c&&e[h]._activate.call(e[h],d),e[h].offset=e[h].element.offset(),e[h].proportions={width:e[h].element[0].offsetWidth,height:e[h].element[0].offsetHeight})}},
drop:function(b,d){var e=!1;a.each(a.ui.ddmanager.droppables[b.options.scope]||[],function(){this.options&&(!this.options.disabled&&this.visible&&a.ui.intersect(b,this,this.options.tolerance)&&(e=this._drop.call(this,d)||e),!this.options.disabled&&this.visible&&this.accept.call(this.element[0],b.currentItem||b.element)&&(this.isout=1,this.isover=0,this._deactivate.call(this,d)))});return e},dragStart:function(b,d){b.element.parentsUntil("body").bind("scroll.droppable",function(){b.options.refreshPositions||
a.ui.ddmanager.prepareOffsets(b,d)})},drag:function(b,d){b.options.refreshPositions&&a.ui.ddmanager.prepareOffsets(b,d);a.each(a.ui.ddmanager.droppables[b.options.scope]||[],function(){if(!this.options.disabled&&!this.greedyChild&&this.visible){var e=a.ui.intersect(b,this,this.options.tolerance);if(e=e||1!=this.isover?e&&0==this.isover?"isover":null:"isout"){var c;if(this.options.greedy){var g=this.options.scope,h=this.element.parents(":data(droppable)").filter(function(){return a.data(this,"droppable").options.scope===
g});h.length&&(c=a.data(h[0],"droppable"),c.greedyChild="isover"==e?1:0)}c&&"isover"==e&&(c.isover=0,c.isout=1,c._out.call(c,d));this[e]=1;this["isout"==e?"isover":"isout"]=0;this["isover"==e?"_over":"_out"].call(this,d);c&&"isout"==e&&(c.isout=0,c.isover=1,c._over.call(c,d))}}})},dragStop:function(b,d){b.element.parentsUntil("body").unbind("scroll.droppable");b.options.refreshPositions||a.ui.ddmanager.prepareOffsets(b,d)}}})(jQuery);
(function(a,c){a.widget("ui.resizable",a.ui.mouse,{version:"1.9.1",widgetEventPrefix:"resize",options:{alsoResize:!1,animate:!1,animateDuration:"slow",animateEasing:"swing",aspectRatio:!1,autoHide:!1,containment:!1,ghost:!1,grid:!1,handles:"e,s,se",helper:!1,maxHeight:null,maxWidth:null,minHeight:10,minWidth:10,zIndex:1E3},_create:function(){var b=this,d=this.options;this.element.addClass("ui-resizable");a.extend(this,{_aspectRatio:!!d.aspectRatio,aspectRatio:d.aspectRatio,originalElement:this.element,
_proportionallyResizeElements:[],_helper:d.helper||d.ghost||d.animate?d.helper||"ui-resizable-helper":null});this.element[0].nodeName.match(/canvas|textarea|input|select|button|img/i)&&(this.element.wrap(a('<div class="ui-wrapper" style="overflow: hidden;"></div>').css({position:this.element.css("position"),width:this.element.outerWidth(),height:this.element.outerHeight(),top:this.element.css("top"),left:this.element.css("left")})),this.element=this.element.parent().data("resizable",this.element.data("resizable")),
this.elementIsWrapper=!0,this.element.css({marginLeft:this.originalElement.css("marginLeft"),marginTop:this.originalElement.css("marginTop"),marginRight:this.originalElement.css("marginRight"),marginBottom:this.originalElement.css("marginBottom")}),this.originalElement.css({marginLeft:0,marginTop:0,marginRight:0,marginBottom:0}),this.originalResizeStyle=this.originalElement.css("resize"),this.originalElement.css("resize","none"),this._proportionallyResizeElements.push(this.originalElement.css({position:"static",
zoom:1,display:"block"})),this.originalElement.css({margin:this.originalElement.css("margin")}),this._proportionallyResize());this.handles=d.handles||(a(".ui-resizable-handle",this.element).length?{n:".ui-resizable-n",e:".ui-resizable-e",s:".ui-resizable-s",w:".ui-resizable-w",se:".ui-resizable-se",sw:".ui-resizable-sw",ne:".ui-resizable-ne",nw:".ui-resizable-nw"}:"e,s,se");if(this.handles.constructor==String){"all"==this.handles&&(this.handles="n,e,s,w,se,sw,ne,nw");var c=this.handles.split(",");
this.handles={};for(var h=0;h<c.length;h++){var l=a.trim(c[h]),m=a('<div class="ui-resizable-handle ui-resizable-'+l+'"></div>');m.css({zIndex:d.zIndex});"se"==l&&m.addClass("ui-icon ui-icon-gripsmall-diagonal-se");this.handles[l]=".ui-resizable-"+l;this.element.append(m)}}this._renderAxis=function(b){b=b||this.element;for(var d in this.handles){this.handles[d].constructor==String&&(this.handles[d]=a(this.handles[d],this.element).show());if(this.elementIsWrapper&&this.originalElement[0].nodeName.match(/textarea|input|select|button/i)){var e=
a(this.handles[d],this.element),c=0,c=/sw|ne|nw|se|n|s/.test(d)?e.outerHeight():e.outerWidth(),e=["padding",/ne|nw|n/.test(d)?"Top":/se|sw|s/.test(d)?"Bottom":/^e$/.test(d)?"Right":"Left"].join("");b.css(e,c);this._proportionallyResize()}a(this.handles[d])}};this._renderAxis(this.element);this._handles=a(".ui-resizable-handle",this.element).disableSelection();this._handles.mouseover(function(){if(!b.resizing){if(this.className)var a=this.className.match(/ui-resizable-(se|sw|ne|nw|n|e|s|w)/i);b.axis=
a&&a[1]?a[1]:"se"}});d.autoHide&&(this._handles.hide(),a(this.element).addClass("ui-resizable-autohide").mouseenter(function(){d.disabled||(a(this).removeClass("ui-resizable-autohide"),b._handles.show())}).mouseleave(function(){d.disabled||b.resizing||(a(this).addClass("ui-resizable-autohide"),b._handles.hide())}));this._mouseInit()},_destroy:function(){this._mouseDestroy();var b=function(b){a(b).removeClass("ui-resizable ui-resizable-disabled ui-resizable-resizing").removeData("resizable").removeData("ui-resizable").unbind(".resizable").find(".ui-resizable-handle").remove()};
if(this.elementIsWrapper){b(this.element);var d=this.element;this.originalElement.css({position:d.css("position"),width:d.outerWidth(),height:d.outerHeight(),top:d.css("top"),left:d.css("left")}).insertAfter(d);d.remove()}this.originalElement.css("resize",this.originalResizeStyle);b(this.originalElement);return this},_mouseCapture:function(b){var d=!1,c;for(c in this.handles)a(this.handles[c])[0]==b.target&&(d=!0);return!this.options.disabled&&d},_mouseStart:function(d){var c=this.options,g=this.element.position(),
h=this.element;this.resizing=!0;this.documentScroll={top:a(document).scrollTop(),left:a(document).scrollLeft()};(h.is(".ui-draggable")||/absolute/.test(h.css("position")))&&h.css({position:"absolute",top:g.top,left:g.left});this._renderProxy();var g=b(this.helper.css("left")),l=b(this.helper.css("top"));c.containment&&(g+=a(c.containment).scrollLeft()||0,l+=a(c.containment).scrollTop()||0);this.offset=this.helper.offset();this.position={left:g,top:l};this.size=this._helper?{width:h.outerWidth(),height:h.outerHeight()}:
{width:h.width(),height:h.height()};this.originalSize=this._helper?{width:h.outerWidth(),height:h.outerHeight()}:{width:h.width(),height:h.height()};this.originalPosition={left:g,top:l};this.sizeDiff={width:h.outerWidth()-h.width(),height:h.outerHeight()-h.height()};this.originalMousePosition={left:d.pageX,top:d.pageY};this.aspectRatio="number"==typeof c.aspectRatio?c.aspectRatio:this.originalSize.width/this.originalSize.height||1;c=a(".ui-resizable-"+this.axis).css("cursor");a("body").css("cursor",
"auto"==c?this.axis+"-resize":c);h.addClass("ui-resizable-resizing");this._propagate("start",d);return!0},_mouseDrag:function(a){var b=this.helper,d=this.originalMousePosition,c=this._change[this.axis];if(!c)return!1;d=c.apply(this,[a,a.pageX-d.left||0,a.pageY-d.top||0]);this._updateVirtualBoundaries(a.shiftKey);if(this._aspectRatio||a.shiftKey)d=this._updateRatio(d,a);d=this._respectSize(d,a);this._propagate("resize",a);b.css({top:this.position.top+"px",left:this.position.left+"px",width:this.size.width+
"px",height:this.size.height+"px"});!this._helper&&this._proportionallyResizeElements.length&&this._proportionallyResize();this._updateCache(d);this._trigger("resize",a,this.ui());return!1},_mouseStop:function(b){this.resizing=!1;var d=this.options;if(this._helper){var c=this._proportionallyResizeElements,h=c.length&&/textarea/i.test(c[0].nodeName),c=h&&a.ui.hasScroll(c[0],"left")?0:this.sizeDiff.height,h=h?0:this.sizeDiff.width,h={width:this.helper.width()-h,height:this.helper.height()-c},c=parseInt(this.element.css("left"),
10)+(this.position.left-this.originalPosition.left)||null,l=parseInt(this.element.css("top"),10)+(this.position.top-this.originalPosition.top)||null;d.animate||this.element.css(a.extend(h,{top:l,left:c}));this.helper.height(this.size.height);this.helper.width(this.size.width);this._helper&&!d.animate&&this._proportionallyResize()}a("body").css("cursor","auto");this.element.removeClass("ui-resizable-resizing");this._propagate("stop",b);this._helper&&this.helper.remove();return!1},_updateVirtualBoundaries:function(a){var b=
this.options,c,h,l,b={minWidth:d(b.minWidth)?b.minWidth:0,maxWidth:d(b.maxWidth)?b.maxWidth:Infinity,minHeight:d(b.minHeight)?b.minHeight:0,maxHeight:d(b.maxHeight)?b.maxHeight:Infinity};if(this._aspectRatio||a)a=b.minHeight*this.aspectRatio,h=b.minWidth/this.aspectRatio,c=b.maxHeight*this.aspectRatio,l=b.maxWidth/this.aspectRatio,a>b.minWidth&&(b.minWidth=a),h>b.minHeight&&(b.minHeight=h),c<b.maxWidth&&(b.maxWidth=c),l<b.maxHeight&&(b.maxHeight=l);this._vBoundaries=b},_updateCache:function(a){this.offset=
this.helper.offset();d(a.left)&&(this.position.left=a.left);d(a.top)&&(this.position.top=a.top);d(a.height)&&(this.size.height=a.height);d(a.width)&&(this.size.width=a.width)},_updateRatio:function(a,b){var c=this.position,h=this.size,l=this.axis;d(a.height)?a.width=a.height*this.aspectRatio:d(a.width)&&(a.height=a.width/this.aspectRatio);"sw"==l&&(a.left=c.left+(h.width-a.width),a.top=null);"nw"==l&&(a.top=c.top+(h.height-a.height),a.left=c.left+(h.width-a.width));return a},_respectSize:function(a,
b){var c=this._vBoundaries,h=this.axis,l=d(a.width)&&c.maxWidth&&c.maxWidth<a.width,m=d(a.height)&&c.maxHeight&&c.maxHeight<a.height,p=d(a.width)&&c.minWidth&&c.minWidth>a.width,q=d(a.height)&&c.minHeight&&c.minHeight>a.height;p&&(a.width=c.minWidth);q&&(a.height=c.minHeight);l&&(a.width=c.maxWidth);m&&(a.height=c.maxHeight);var t=this.originalPosition.left+this.originalSize.width,y=this.position.top+this.size.height,u=/sw|nw|w/.test(h),h=/nw|ne|n/.test(h);p&&u&&(a.left=t-c.minWidth);l&&u&&(a.left=
t-c.maxWidth);q&&h&&(a.top=y-c.minHeight);m&&h&&(a.top=y-c.maxHeight);(c=!a.width&&!a.height)&&!a.left&&a.top?a.top=null:c&&!a.top&&a.left&&(a.left=null);return a},_proportionallyResize:function(){if(this._proportionallyResizeElements.length)for(var b=this.helper||this.element,d=0;d<this._proportionallyResizeElements.length;d++){var c=this._proportionallyResizeElements[d];if(!this.borderDif){var h=[c.css("borderTopWidth"),c.css("borderRightWidth"),c.css("borderBottomWidth"),c.css("borderLeftWidth")],
l=[c.css("paddingTop"),c.css("paddingRight"),c.css("paddingBottom"),c.css("paddingLeft")];this.borderDif=a.map(h,function(a,b){var d=parseInt(a,10)||0,e=parseInt(l[b],10)||0;return d+e})}c.css({height:b.height()-this.borderDif[0]-this.borderDif[2]||0,width:b.width()-this.borderDif[1]-this.borderDif[3]||0})}},_renderProxy:function(){var b=this.options;this.elementOffset=this.element.offset();if(this._helper){this.helper=this.helper||a('<div style="overflow:hidden;"></div>');var d=a.ui.ie6?1:0,c=a.ui.ie6?
2:-1;this.helper.addClass(this._helper).css({width:this.element.outerWidth()+c,height:this.element.outerHeight()+c,position:"absolute",left:this.elementOffset.left-d+"px",top:this.elementOffset.top-d+"px",zIndex:++b.zIndex});this.helper.appendTo("body").disableSelection()}else this.helper=this.element},_change:{e:function(a,b,d){return{width:this.originalSize.width+b}},w:function(a,b,d){return{left:this.originalPosition.left+b,width:this.originalSize.width-b}},n:function(a,b,d){return{top:this.originalPosition.top+
d,height:this.originalSize.height-d}},s:function(a,b,d){return{height:this.originalSize.height+d}},se:function(b,d,c){return a.extend(this._change.s.apply(this,arguments),this._change.e.apply(this,[b,d,c]))},sw:function(b,d,c){return a.extend(this._change.s.apply(this,arguments),this._change.w.apply(this,[b,d,c]))},ne:function(b,d,c){return a.extend(this._change.n.apply(this,arguments),this._change.e.apply(this,[b,d,c]))},nw:function(b,d,c){return a.extend(this._change.n.apply(this,arguments),this._change.w.apply(this,
[b,d,c]))}},_propagate:function(b,d){a.ui.plugin.call(this,b,[d,this.ui()]);"resize"!=b&&this._trigger(b,d,this.ui())},plugins:{},ui:function(){return{originalElement:this.originalElement,element:this.element,helper:this.helper,position:this.position,size:this.size,originalSize:this.originalSize,originalPosition:this.originalPosition}}});a.ui.plugin.add("resizable","alsoResize",{start:function(b,d){var c=a(this).data("resizable").options,h=function(b){a(b).each(function(){var b=a(this);b.data("resizable-alsoresize",
{width:parseInt(b.width(),10),height:parseInt(b.height(),10),left:parseInt(b.css("left"),10),top:parseInt(b.css("top"),10)})})};"object"!=typeof c.alsoResize||c.alsoResize.parentNode?h(c.alsoResize):c.alsoResize.length?(c.alsoResize=c.alsoResize[0],h(c.alsoResize)):a.each(c.alsoResize,function(a){h(a)})},resize:function(b,d){var c=a(this).data("resizable"),h=c.options,l=c.originalSize,m=c.originalPosition,p={height:c.size.height-l.height||0,width:c.size.width-l.width||0,top:c.position.top-m.top||
0,left:c.position.left-m.left||0},q=function(b,e){a(b).each(function(){var b=a(this),c=a(this).data("resizable-alsoresize"),h={},g=e&&e.length?e:b.parents(d.originalElement[0]).length?["width","height"]:["width","height","top","left"];a.each(g,function(a,b){var d=(c[b]||0)+(p[b]||0);d&&0<=d&&(h[b]=d||null)});b.css(h)})};"object"!=typeof h.alsoResize||h.alsoResize.nodeType?q(h.alsoResize):a.each(h.alsoResize,function(a,b){q(a,b)})},stop:function(b,d){a(this).removeData("resizable-alsoresize")}});a.ui.plugin.add("resizable",
"animate",{stop:function(b,d){var c=a(this).data("resizable"),h=c.options,l=c._proportionallyResizeElements,m=l.length&&/textarea/i.test(l[0].nodeName),p=m&&a.ui.hasScroll(l[0],"left")?0:c.sizeDiff.height,m={width:c.size.width-(m?0:c.sizeDiff.width),height:c.size.height-p},p=parseInt(c.element.css("left"),10)+(c.position.left-c.originalPosition.left)||null,q=parseInt(c.element.css("top"),10)+(c.position.top-c.originalPosition.top)||null;c.element.animate(a.extend(m,q&&p?{top:q,left:p}:{}),{duration:h.animateDuration,
easing:h.animateEasing,step:function(){var d={width:parseInt(c.element.css("width"),10),height:parseInt(c.element.css("height"),10),top:parseInt(c.element.css("top"),10),left:parseInt(c.element.css("left"),10)};l&&l.length&&a(l[0]).css({width:d.width,height:d.height});c._updateCache(d);c._propagate("resize",b)}})}});a.ui.plugin.add("resizable","containment",{start:function(d,c){var g=a(this).data("resizable"),h=g.element,l=g.options.containment;if(h=l instanceof a?l.get(0):/parent/.test(l)?h.parent().get(0):
l)if(g.containerElement=a(h),/document/.test(l)||l==document)g.containerOffset={left:0,top:0},g.containerPosition={left:0,top:0},g.parentData={element:a(document),left:0,top:0,width:a(document).width(),height:a(document).height()||document.body.parentNode.scrollHeight};else{var m=a(h),p=[];a(["Top","Right","Left","Bottom"]).each(function(a,d){p[a]=b(m.css("padding"+d))});g.containerOffset=m.offset();g.containerPosition=m.position();g.containerSize={height:m.innerHeight()-p[3],width:m.innerWidth()-
p[1]};var l=g.containerOffset,q=g.containerSize.height,t=g.containerSize.width,t=a.ui.hasScroll(h,"left")?h.scrollWidth:t,q=a.ui.hasScroll(h)?h.scrollHeight:q;g.parentData={element:h,left:l.left,top:l.top,width:t,height:q}}},resize:function(b,d){var c=a(this).data("resizable"),h=c.options,l=c.containerOffset,m=c.position,p=c._aspectRatio||b.shiftKey,q={top:0,left:0},t=c.containerElement;t[0]!=document&&/static/.test(t.css("position"))&&(q=l);m.left<(c._helper?l.left:0)&&(c.size.width+=c._helper?c.position.left-
l.left:c.position.left-q.left,p&&(c.size.height=c.size.width/c.aspectRatio),c.position.left=h.helper?l.left:0);m.top<(c._helper?l.top:0)&&(c.size.height+=c._helper?c.position.top-l.top:c.position.top,p&&(c.size.width=c.size.height*c.aspectRatio),c.position.top=c._helper?l.top:0);c.offset.left=c.parentData.left+c.position.left;c.offset.top=c.parentData.top+c.position.top;h=Math.abs(c.offset.left-q.left+c.sizeDiff.width);l=Math.abs((c._helper?c.offset.top-q.top:c.offset.top-l.top)+c.sizeDiff.height);
q=c.containerElement.get(0)==c.element.parent().get(0);m=/relative|absolute/.test(c.containerElement.css("position"));q&&m&&(h-=c.parentData.left);h+c.size.width>=c.parentData.width&&(c.size.width=c.parentData.width-h,p&&(c.size.height=c.size.width/c.aspectRatio));l+c.size.height>=c.parentData.height&&(c.size.height=c.parentData.height-l,p&&(c.size.width=c.size.height*c.aspectRatio))},stop:function(b,d){var c=a(this).data("resizable"),h=c.options,l=c.containerOffset,m=c.containerPosition,p=c.containerElement,
q=a(c.helper),t=q.offset(),y=q.outerWidth()-c.sizeDiff.width,q=q.outerHeight()-c.sizeDiff.height;c._helper&&!h.animate&&/relative/.test(p.css("position"))&&a(this).css({left:t.left-m.left-l.left,width:y,height:q});c._helper&&!h.animate&&/static/.test(p.css("position"))&&a(this).css({left:t.left-m.left-l.left,width:y,height:q})}});a.ui.plugin.add("resizable","ghost",{start:function(b,d){var c=a(this).data("resizable"),h=c.options,l=c.size;c.ghost=c.originalElement.clone();c.ghost.css({opacity:.25,
display:"block",position:"relative",height:l.height,width:l.width,margin:0,left:0,top:0}).addClass("ui-resizable-ghost").addClass("string"==typeof h.ghost?h.ghost:"");c.ghost.appendTo(c.helper)},resize:function(b,d){var c=a(this).data("resizable");c.ghost&&c.ghost.css({position:"relative",height:c.size.height,width:c.size.width})},stop:function(b,d){var c=a(this).data("resizable");c.ghost&&c.helper&&c.helper.get(0).removeChild(c.ghost.get(0))}});a.ui.plugin.add("resizable","grid",{resize:function(b,
d){var c=a(this).data("resizable"),h=c.options,l=c.size,m=c.originalSize,p=c.originalPosition,q=c.axis;h.grid="number"==typeof h.grid?[h.grid,h.grid]:h.grid;var t=Math.round((l.width-m.width)/(h.grid[0]||1))*(h.grid[0]||1),h=Math.round((l.height-m.height)/(h.grid[1]||1))*(h.grid[1]||1);/^(se|s|e)$/.test(q)?(c.size.width=m.width+t,c.size.height=m.height+h):/^(ne)$/.test(q)?(c.size.width=m.width+t,c.size.height=m.height+h,c.position.top=p.top-h):(/^(sw)$/.test(q)?(c.size.width=m.width+t,c.size.height=
m.height+h):(c.size.width=m.width+t,c.size.height=m.height+h,c.position.top=p.top-h),c.position.left=p.left-t)}});var b=function(a){return parseInt(a,10)||0},d=function(a){return!isNaN(parseInt(a,10))}})(jQuery);
(function(a,c){a.widget("ui.selectable",a.ui.mouse,{version:"1.9.1",options:{appendTo:"body",autoRefresh:!0,distance:0,filter:"*",tolerance:"touch"},_create:function(){var b=this;this.element.addClass("ui-selectable");this.dragged=!1;var d;this.refresh=function(){d=a(b.options.filter,b.element[0]);d.addClass("ui-selectee");d.each(function(){var b=a(this),d=b.offset();a.data(this,"selectable-item",{element:this,$element:b,left:d.left,top:d.top,right:d.left+b.outerWidth(),bottom:d.top+b.outerHeight(),
startselected:!1,selected:b.hasClass("ui-selected"),selecting:b.hasClass("ui-selecting"),unselecting:b.hasClass("ui-unselecting")})})};this.refresh();this.selectees=d.addClass("ui-selectee");this._mouseInit();this.helper=a("<div class='ui-selectable-helper'></div>")},_destroy:function(){this.selectees.removeClass("ui-selectee").removeData("selectable-item");this.element.removeClass("ui-selectable ui-selectable-disabled");this._mouseDestroy()},_mouseStart:function(b){var d=this;this.opos=[b.pageX,
b.pageY];if(!this.options.disabled){var c=this.options;this.selectees=a(c.filter,this.element[0]);this._trigger("start",b);a(c.appendTo).append(this.helper);this.helper.css({left:b.clientX,top:b.clientY,width:0,height:0});c.autoRefresh&&this.refresh();this.selectees.filter(".ui-selected").each(function(){var c=a.data(this,"selectable-item");c.startselected=!0;b.metaKey||b.ctrlKey||(c.$element.removeClass("ui-selected"),c.selected=!1,c.$element.addClass("ui-unselecting"),c.unselecting=!0,d._trigger("unselecting",
b,{unselecting:c.element}))});a(b.target).parents().andSelf().each(function(){var c=a.data(this,"selectable-item");if(c){var e=!b.metaKey&&!b.ctrlKey||!c.$element.hasClass("ui-selected");c.$element.removeClass(e?"ui-unselecting":"ui-selected").addClass(e?"ui-selecting":"ui-unselecting");c.unselecting=!e;c.selecting=e;(c.selected=e)?d._trigger("selecting",b,{selecting:c.element}):d._trigger("unselecting",b,{unselecting:c.element});return!1}})}},_mouseDrag:function(b){var d=this;this.dragged=!0;if(!this.options.disabled){var c=
this.options,f=this.opos[0],g=this.opos[1],h=b.pageX,l=b.pageY;if(f>h)var m=h,h=f,f=m;g>l&&(m=l,l=g,g=m);this.helper.css({left:f,top:g,width:h-f,height:l-g});this.selectees.each(function(){var m=a.data(this,"selectable-item");if(m&&m.element!=d.element[0]){var q=!1;"touch"==c.tolerance?q=!(m.left>h||m.right<f||m.top>l||m.bottom<g):"fit"==c.tolerance&&(q=m.left>f&&m.right<h&&m.top>g&&m.bottom<l);q?(m.selected&&(m.$element.removeClass("ui-selected"),m.selected=!1),m.unselecting&&(m.$element.removeClass("ui-unselecting"),
m.unselecting=!1),m.selecting||(m.$element.addClass("ui-selecting"),m.selecting=!0,d._trigger("selecting",b,{selecting:m.element}))):(m.selecting&&((b.metaKey||b.ctrlKey)&&m.startselected?(m.$element.removeClass("ui-selecting"),m.selecting=!1,m.$element.addClass("ui-selected"),m.selected=!0):(m.$element.removeClass("ui-selecting"),m.selecting=!1,m.startselected&&(m.$element.addClass("ui-unselecting"),m.unselecting=!0),d._trigger("unselecting",b,{unselecting:m.element}))),!m.selected||b.metaKey||b.ctrlKey||
m.startselected||(m.$element.removeClass("ui-selected"),m.selected=!1,m.$element.addClass("ui-unselecting"),m.unselecting=!0,d._trigger("unselecting",b,{unselecting:m.element})))}});return!1}},_mouseStop:function(b){var d=this;this.dragged=!1;a(".ui-unselecting",this.element[0]).each(function(){var c=a.data(this,"selectable-item");c.$element.removeClass("ui-unselecting");c.unselecting=!1;c.startselected=!1;d._trigger("unselected",b,{unselected:c.element})});a(".ui-selecting",this.element[0]).each(function(){var c=
a.data(this,"selectable-item");c.$element.removeClass("ui-selecting").addClass("ui-selected");c.selecting=!1;c.selected=!0;c.startselected=!0;d._trigger("selected",b,{selected:c.element})});this._trigger("stop",b);this.helper.remove();return!1}})})(jQuery);
(function(a,c){a.widget("ui.sortable",a.ui.mouse,{version:"1.9.1",widgetEventPrefix:"sort",ready:!1,options:{appendTo:"parent",axis:!1,connectWith:!1,containment:!1,cursor:"auto",cursorAt:!1,dropOnEmpty:!0,forcePlaceholderSize:!1,forceHelperSize:!1,grid:!1,handle:!1,helper:"original",items:"> *",opacity:!1,placeholder:!1,revert:!1,scroll:!0,scrollSensitivity:20,scrollSpeed:20,scope:"default",tolerance:"intersect",zIndex:1E3},_create:function(){var a=this.options;this.containerCache={};this.element.addClass("ui-sortable");
this.refresh();this.floating=this.items.length?"x"===a.axis||/left|right/.test(this.items[0].item.css("float"))||/inline|table-cell/.test(this.items[0].item.css("display")):!1;this.offset=this.element.offset();this._mouseInit();this.ready=!0},_destroy:function(){this.element.removeClass("ui-sortable ui-sortable-disabled");this._mouseDestroy();for(var a=this.items.length-1;0<=a;a--)this.items[a].item.removeData(this.widgetName+"-item");return this},_setOption:function(b,d){"disabled"===b?(this.options[b]=
d,this.widget().toggleClass("ui-sortable-disabled",!!d)):a.Widget.prototype._setOption.apply(this,arguments)},_mouseCapture:function(b,d){var c=this;if(this.reverting||this.options.disabled||"static"==this.options.type)return!1;this._refreshItems(b);var f=null;a(b.target).parents().each(function(){if(a.data(this,c.widgetName+"-item")==c)return f=a(this),!1});a.data(b.target,c.widgetName+"-item")==c&&(f=a(b.target));if(!f)return!1;if(this.options.handle&&!d){var g=!1;a(this.options.handle,f).find("*").andSelf().each(function(){this==
b.target&&(g=!0)});if(!g)return!1}this.currentItem=f;this._removeCurrentsFromItems();return!0},_mouseStart:function(b,d,c){d=this.options;this.currentContainer=this;this.refreshPositions();this.helper=this._createHelper(b);this._cacheHelperProportions();this._cacheMargins();this.scrollParent=this.helper.scrollParent();this.offset=this.currentItem.offset();this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left};a.extend(this.offset,{click:{left:b.pageX-this.offset.left,
top:b.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()});this.helper.css("position","absolute");this.cssPosition=this.helper.css("position");this.originalPosition=this._generatePosition(b);this.originalPageX=b.pageX;this.originalPageY=b.pageY;d.cursorAt&&this._adjustOffsetFromHelper(d.cursorAt);this.domPosition={prev:this.currentItem.prev()[0],parent:this.currentItem.parent()[0]};this.helper[0]!=this.currentItem[0]&&this.currentItem.hide();this._createPlaceholder();
d.containment&&this._setContainment();d.cursor&&(a("body").css("cursor")&&(this._storedCursor=a("body").css("cursor")),a("body").css("cursor",d.cursor));d.opacity&&(this.helper.css("opacity")&&(this._storedOpacity=this.helper.css("opacity")),this.helper.css("opacity",d.opacity));d.zIndex&&(this.helper.css("zIndex")&&(this._storedZIndex=this.helper.css("zIndex")),this.helper.css("zIndex",d.zIndex));this.scrollParent[0]!=document&&"HTML"!=this.scrollParent[0].tagName&&(this.overflowOffset=this.scrollParent.offset());
this._trigger("start",b,this._uiHash());this._preserveHelperProportions||this._cacheHelperProportions();if(!c)for(c=this.containers.length-1;0<=c;c--)this.containers[c]._trigger("activate",b,this._uiHash(this));a.ui.ddmanager&&(a.ui.ddmanager.current=this);a.ui.ddmanager&&!d.dropBehaviour&&a.ui.ddmanager.prepareOffsets(this,b);this.dragging=!0;this.helper.addClass("ui-sortable-helper");this._mouseDrag(b);return!0},_mouseDrag:function(b){this.position=this._generatePosition(b);this.positionAbs=this._convertPositionTo("absolute");
this.lastPositionAbs||(this.lastPositionAbs=this.positionAbs);if(this.options.scroll){var d=this.options,c=!1;this.scrollParent[0]!=document&&"HTML"!=this.scrollParent[0].tagName?(this.overflowOffset.top+this.scrollParent[0].offsetHeight-b.pageY<d.scrollSensitivity?this.scrollParent[0].scrollTop=c=this.scrollParent[0].scrollTop+d.scrollSpeed:b.pageY-this.overflowOffset.top<d.scrollSensitivity&&(this.scrollParent[0].scrollTop=c=this.scrollParent[0].scrollTop-d.scrollSpeed),this.overflowOffset.left+
this.scrollParent[0].offsetWidth-b.pageX<d.scrollSensitivity?this.scrollParent[0].scrollLeft=c=this.scrollParent[0].scrollLeft+d.scrollSpeed:b.pageX-this.overflowOffset.left<d.scrollSensitivity&&(this.scrollParent[0].scrollLeft=c=this.scrollParent[0].scrollLeft-d.scrollSpeed)):(b.pageY-a(document).scrollTop()<d.scrollSensitivity?c=a(document).scrollTop(a(document).scrollTop()-d.scrollSpeed):a(window).height()-(b.pageY-a(document).scrollTop())<d.scrollSensitivity&&(c=a(document).scrollTop(a(document).scrollTop()+
d.scrollSpeed)),b.pageX-a(document).scrollLeft()<d.scrollSensitivity?c=a(document).scrollLeft(a(document).scrollLeft()-d.scrollSpeed):a(window).width()-(b.pageX-a(document).scrollLeft())<d.scrollSensitivity&&(c=a(document).scrollLeft(a(document).scrollLeft()+d.scrollSpeed)));!1!==c&&a.ui.ddmanager&&!d.dropBehaviour&&a.ui.ddmanager.prepareOffsets(this,b)}this.positionAbs=this._convertPositionTo("absolute");this.options.axis&&"y"==this.options.axis||(this.helper[0].style.left=this.position.left+"px");
this.options.axis&&"x"==this.options.axis||(this.helper[0].style.top=this.position.top+"px");for(d=this.items.length-1;0<=d;d--){var c=this.items[d],f=c.item[0],g=this._intersectsWithPointer(c);if(g&&c.instance===this.currentContainer&&f!=this.currentItem[0]&&this.placeholder[1==g?"next":"prev"]()[0]!=f&&!a.contains(this.placeholder[0],f)&&("semi-dynamic"==this.options.type?!a.contains(this.element[0],f):1)){this.direction=1==g?"down":"up";if("pointer"==this.options.tolerance||this._intersectsWithSides(c))this._rearrange(b,
c);else break;this._trigger("change",b,this._uiHash());break}}this._contactContainers(b);a.ui.ddmanager&&a.ui.ddmanager.drag(this,b);this._trigger("sort",b,this._uiHash());this.lastPositionAbs=this.positionAbs;return!1},_mouseStop:function(b,d){if(b){a.ui.ddmanager&&!this.options.dropBehaviour&&a.ui.ddmanager.drop(this,b);if(this.options.revert){var c=this,f=this.placeholder.offset();this.reverting=!0;a(this.helper).animate({left:f.left-this.offset.parent.left-this.margins.left+(this.offsetParent[0]==
document.body?0:this.offsetParent[0].scrollLeft),top:f.top-this.offset.parent.top-this.margins.top+(this.offsetParent[0]==document.body?0:this.offsetParent[0].scrollTop)},parseInt(this.options.revert,10)||500,function(){c._clear(b)})}else this._clear(b,d);return!1}},cancel:function(){if(this.dragging){this._mouseUp({target:null});"original"==this.options.helper?this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper"):this.currentItem.show();for(var b=this.containers.length-1;0<=b;b--)this.containers[b]._trigger("deactivate",
null,this._uiHash(this)),this.containers[b].containerCache.over&&(this.containers[b]._trigger("out",null,this._uiHash(this)),this.containers[b].containerCache.over=0)}this.placeholder&&(this.placeholder[0].parentNode&&this.placeholder[0].parentNode.removeChild(this.placeholder[0]),"original"!=this.options.helper&&this.helper&&this.helper[0].parentNode&&this.helper.remove(),a.extend(this,{helper:null,dragging:!1,reverting:!1,_noFinalSort:null}),this.domPosition.prev?a(this.domPosition.prev).after(this.currentItem):
a(this.domPosition.parent).prepend(this.currentItem));return this},serialize:function(b){var d=this._getItemsAsjQuery(b&&b.connected),c=[];b=b||{};a(d).each(function(){var d=(a(b.item||this).attr(b.attribute||"id")||"").match(b.expression||/(.+)[-=_](.+)/);d&&c.push((b.key||d[1]+"[]")+"="+(b.key&&b.expression?d[1]:d[2]))});!c.length&&b.key&&c.push(b.key+"=");return c.join("&")},toArray:function(b){var d=this._getItemsAsjQuery(b&&b.connected),c=[];b=b||{};d.each(function(){c.push(a(b.item||this).attr(b.attribute||
"id")||"")});return c},_intersectsWith:function(a){var d=this.positionAbs.left,c=d+this.helperProportions.width,f=this.positionAbs.top,g=f+this.helperProportions.height,h=a.left,l=h+a.width,m=a.top,p=m+a.height,q=this.offset.click.top,t=this.offset.click.left;return"pointer"==this.options.tolerance||this.options.forcePointerForContainers||"pointer"!=this.options.tolerance&&this.helperProportions[this.floating?"width":"height"]>a[this.floating?"width":"height"]?f+q>m&&f+q<p&&d+t>h&&d+t<l:h<d+this.helperProportions.width/
2&&c-this.helperProportions.width/2<l&&m<f+this.helperProportions.height/2&&g-this.helperProportions.height/2<p},_intersectsWithPointer:function(b){var d="x"===this.options.axis||a.ui.isOverAxis(this.positionAbs.top+this.offset.click.top,b.top,b.height);b="y"===this.options.axis||a.ui.isOverAxis(this.positionAbs.left+this.offset.click.left,b.left,b.width);d=d&&b;b=this._getDragVerticalDirection();var c=this._getDragHorizontalDirection();return d?this.floating?c&&"right"==c||"down"==b?2:1:b&&("down"==
b?2:1):!1},_intersectsWithSides:function(b){var d=a.ui.isOverAxis(this.positionAbs.top+this.offset.click.top,b.top+b.height/2,b.height);b=a.ui.isOverAxis(this.positionAbs.left+this.offset.click.left,b.left+b.width/2,b.width);var c=this._getDragVerticalDirection(),f=this._getDragHorizontalDirection();return this.floating&&f?"right"==f&&b||"left"==f&&!b:c&&("down"==c&&d||"up"==c&&!d)},_getDragVerticalDirection:function(){var a=this.positionAbs.top-this.lastPositionAbs.top;return 0!=a&&(0<a?"down":"up")},
_getDragHorizontalDirection:function(){var a=this.positionAbs.left-this.lastPositionAbs.left;return 0!=a&&(0<a?"right":"left")},refresh:function(a){this._refreshItems(a);this.refreshPositions();return this},_connectWith:function(){var a=this.options;return a.connectWith.constructor==String?[a.connectWith]:a.connectWith},_getItemsAsjQuery:function(b){var d=[],c=[],f=this._connectWith();if(f&&b)for(b=f.length-1;0<=b;b--)for(var g=a(f[b]),h=g.length-1;0<=h;h--){var l=a.data(g[h],this.widgetName);l&&
l!=this&&!l.options.disabled&&c.push([a.isFunction(l.options.items)?l.options.items.call(l.element):a(l.options.items,l.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),l])}c.push([a.isFunction(this.options.items)?this.options.items.call(this.element,null,{options:this.options,item:this.currentItem}):a(this.options.items,this.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),this]);for(b=c.length-1;0<=b;b--)c[b][0].each(function(){d.push(this)});return a(d)},_removeCurrentsFromItems:function(){var b=
this.currentItem.find(":data("+this.widgetName+"-item)");this.items=a.grep(this.items,function(a){for(var c=0;c<b.length;c++)if(b[c]==a.item[0])return!1;return!0})},_refreshItems:function(b){this.items=[];this.containers=[this];var d=this.items,c=[[a.isFunction(this.options.items)?this.options.items.call(this.element[0],b,{item:this.currentItem}):a(this.options.items,this.element),this]],f=this._connectWith();if(f&&this.ready)for(var g=f.length-1;0<=g;g--)for(var h=a(f[g]),l=h.length-1;0<=l;l--){var m=
a.data(h[l],this.widgetName);m&&m!=this&&!m.options.disabled&&(c.push([a.isFunction(m.options.items)?m.options.items.call(m.element[0],b,{item:this.currentItem}):a(m.options.items,m.element),m]),this.containers.push(m))}for(g=c.length-1;0<=g;g--)for(b=c[g][1],f=c[g][0],l=0,h=f.length;l<h;l++)m=a(f[l]),m.data(this.widgetName+"-item",b),d.push({item:m,instance:b,width:0,height:0,left:0,top:0})},refreshPositions:function(b){this.offsetParent&&this.helper&&(this.offset.parent=this._getParentOffset());
for(var d=this.items.length-1;0<=d;d--){var c=this.items[d];if(c.instance==this.currentContainer||!this.currentContainer||c.item[0]==this.currentItem[0]){var f=this.options.toleranceElement?a(this.options.toleranceElement,c.item):c.item;b||(c.width=f.outerWidth(),c.height=f.outerHeight());f=f.offset();c.left=f.left;c.top=f.top}}if(this.options.custom&&this.options.custom.refreshContainers)this.options.custom.refreshContainers.call(this);else for(d=this.containers.length-1;0<=d;d--)f=this.containers[d].element.offset(),
this.containers[d].containerCache.left=f.left,this.containers[d].containerCache.top=f.top,this.containers[d].containerCache.width=this.containers[d].element.outerWidth(),this.containers[d].containerCache.height=this.containers[d].element.outerHeight();return this},_createPlaceholder:function(b){b=b||this;var d=b.options;if(!d.placeholder||d.placeholder.constructor==String){var c=d.placeholder;d.placeholder={element:function(){var d=a(document.createElement(b.currentItem[0].nodeName)).addClass(c||
b.currentItem[0].className+" ui-sortable-placeholder").removeClass("ui-sortable-helper")[0];c||(d.style.visibility="hidden");return d},update:function(a,g){if(!c||d.forcePlaceholderSize)g.height()||g.height(b.currentItem.innerHeight()-parseInt(b.currentItem.css("paddingTop")||0,10)-parseInt(b.currentItem.css("paddingBottom")||0,10)),g.width()||g.width(b.currentItem.innerWidth()-parseInt(b.currentItem.css("paddingLeft")||0,10)-parseInt(b.currentItem.css("paddingRight")||0,10))}}}b.placeholder=a(d.placeholder.element.call(b.element,
b.currentItem));b.currentItem.after(b.placeholder);d.placeholder.update(b,b.placeholder)},_contactContainers:function(b){for(var d=null,c=null,f=this.containers.length-1;0<=f;f--)a.contains(this.currentItem[0],this.containers[f].element[0])||(this._intersectsWith(this.containers[f].containerCache)?d&&a.contains(this.containers[f].element[0],d.element[0])||(d=this.containers[f],c=f):this.containers[f].containerCache.over&&(this.containers[f]._trigger("out",b,this._uiHash(this)),this.containers[f].containerCache.over=
0));if(d)if(1===this.containers.length)this.containers[c]._trigger("over",b,this._uiHash(this)),this.containers[c].containerCache.over=1;else{for(var d=1E4,f=null,g=this.containers[c].floating?"left":"top",h=this.containers[c].floating?"width":"height",l=this.positionAbs[g]+this.offset.click[g],m=this.items.length-1;0<=m;m--)if(a.contains(this.containers[c].element[0],this.items[m].item[0])&&this.items[m].item[0]!=this.currentItem[0]){var p=this.items[m].item.offset()[g],q=!1;Math.abs(p-l)>Math.abs(p+
this.items[m][h]-l)&&(q=!0,p+=this.items[m][h]);Math.abs(p-l)<d&&(d=Math.abs(p-l),f=this.items[m],this.direction=q?"up":"down")}if(f||this.options.dropOnEmpty)this.currentContainer=this.containers[c],f?this._rearrange(b,f,null,!0):this._rearrange(b,null,this.containers[c].element,!0),this._trigger("change",b,this._uiHash()),this.containers[c]._trigger("change",b,this._uiHash(this)),this.options.placeholder.update(this.currentContainer,this.placeholder),this.containers[c]._trigger("over",b,this._uiHash(this)),
this.containers[c].containerCache.over=1}},_createHelper:function(b){var d=this.options;b=a.isFunction(d.helper)?a(d.helper.apply(this.element[0],[b,this.currentItem])):"clone"==d.helper?this.currentItem.clone():this.currentItem;b.parents("body").length||a("parent"!=d.appendTo?d.appendTo:this.currentItem[0].parentNode)[0].appendChild(b[0]);b[0]==this.currentItem[0]&&(this._storedCSS={width:this.currentItem[0].style.width,height:this.currentItem[0].style.height,position:this.currentItem.css("position"),
top:this.currentItem.css("top"),left:this.currentItem.css("left")});(""==b[0].style.width||d.forceHelperSize)&&b.width(this.currentItem.width());(""==b[0].style.height||d.forceHelperSize)&&b.height(this.currentItem.height());return b},_adjustOffsetFromHelper:function(b){"string"==typeof b&&(b=b.split(" "));a.isArray(b)&&(b={left:+b[0],top:+b[1]||0});"left"in b&&(this.offset.click.left=b.left+this.margins.left);"right"in b&&(this.offset.click.left=this.helperProportions.width-b.right+this.margins.left);
"top"in b&&(this.offset.click.top=b.top+this.margins.top);"bottom"in b&&(this.offset.click.top=this.helperProportions.height-b.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var b=this.offsetParent.offset();"absolute"==this.cssPosition&&this.scrollParent[0]!=document&&a.contains(this.scrollParent[0],this.offsetParent[0])&&(b.left+=this.scrollParent.scrollLeft(),b.top+=this.scrollParent.scrollTop());if(this.offsetParent[0]==document.body||this.offsetParent[0].tagName&&
"html"==this.offsetParent[0].tagName.toLowerCase()&&a.ui.ie)b={top:0,left:0};return{top:b.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:b.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"==this.cssPosition){var a=this.currentItem.position();return{top:a.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:a.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,
left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.currentItem.css("marginLeft"),10)||0,top:parseInt(this.currentItem.css("marginTop"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var b=this.options;"parent"==b.containment&&(b.containment=this.helper[0].parentNode);if("document"==b.containment||"window"==b.containment)this.containment=[0-this.offset.relative.left-this.offset.parent.left,
0-this.offset.relative.top-this.offset.parent.top,a("document"==b.containment?document:window).width()-this.helperProportions.width-this.margins.left,(a("document"==b.containment?document:window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top];if(!/^(document|window|parent)$/.test(b.containment)){var d=a(b.containment)[0],b=a(b.containment).offset(),c="hidden"!=a(d).css("overflow");this.containment=[b.left+(parseInt(a(d).css("borderLeftWidth"),10)||
0)+(parseInt(a(d).css("paddingLeft"),10)||0)-this.margins.left,b.top+(parseInt(a(d).css("borderTopWidth"),10)||0)+(parseInt(a(d).css("paddingTop"),10)||0)-this.margins.top,b.left+(c?Math.max(d.scrollWidth,d.offsetWidth):d.offsetWidth)-(parseInt(a(d).css("borderLeftWidth"),10)||0)-(parseInt(a(d).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left,b.top+(c?Math.max(d.scrollHeight,d.offsetHeight):d.offsetHeight)-(parseInt(a(d).css("borderTopWidth"),10)||0)-(parseInt(a(d).css("paddingBottom"),
10)||0)-this.helperProportions.height-this.margins.top]}},_convertPositionTo:function(b,d){d||(d=this.position);var c="absolute"==b?1:-1,f="absolute"!=this.cssPosition||this.scrollParent[0]!=document&&a.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,g=/(html|body)/i.test(f[0].tagName);return{top:d.top+this.offset.relative.top*c+this.offset.parent.top*c-("fixed"==this.cssPosition?-this.scrollParent.scrollTop():g?0:f.scrollTop())*c,left:d.left+this.offset.relative.left*
c+this.offset.parent.left*c-("fixed"==this.cssPosition?-this.scrollParent.scrollLeft():g?0:f.scrollLeft())*c}},_generatePosition:function(b){var d=this.options,c="absolute"!=this.cssPosition||this.scrollParent[0]!=document&&a.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,f=/(html|body)/i.test(c[0].tagName);"relative"!=this.cssPosition||this.scrollParent[0]!=document&&this.scrollParent[0]!=this.offsetParent[0]||(this.offset.relative=this._getRelativeOffset());
var g=b.pageX,h=b.pageY;this.originalPosition&&(this.containment&&(b.pageX-this.offset.click.left<this.containment[0]&&(g=this.containment[0]+this.offset.click.left),b.pageY-this.offset.click.top<this.containment[1]&&(h=this.containment[1]+this.offset.click.top),b.pageX-this.offset.click.left>this.containment[2]&&(g=this.containment[2]+this.offset.click.left),b.pageY-this.offset.click.top>this.containment[3]&&(h=this.containment[3]+this.offset.click.top)),d.grid&&(h=this.originalPageY+Math.round((h-
this.originalPageY)/d.grid[1])*d.grid[1],h=this.containment?h-this.offset.click.top<this.containment[1]||h-this.offset.click.top>this.containment[3]?h-this.offset.click.top<this.containment[1]?h+d.grid[1]:h-d.grid[1]:h:h,g=this.originalPageX+Math.round((g-this.originalPageX)/d.grid[0])*d.grid[0],g=this.containment?g-this.offset.click.left<this.containment[0]||g-this.offset.click.left>this.containment[2]?g-this.offset.click.left<this.containment[0]?g+d.grid[0]:g-d.grid[0]:g:g));return{top:h-this.offset.click.top-
this.offset.relative.top-this.offset.parent.top+("fixed"==this.cssPosition?-this.scrollParent.scrollTop():f?0:c.scrollTop()),left:g-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"==this.cssPosition?-this.scrollParent.scrollLeft():f?0:c.scrollLeft())}},_rearrange:function(a,d,c,f){c?c[0].appendChild(this.placeholder[0]):d.item[0].parentNode.insertBefore(this.placeholder[0],"down"==this.direction?d.item[0]:d.item[0].nextSibling);var g=this.counter=this.counter?++this.counter:
1;this._delay(function(){g==this.counter&&this.refreshPositions(!f)})},_clear:function(b,d){this.reverting=!1;var c=[];!this._noFinalSort&&this.currentItem.parent().length&&this.placeholder.before(this.currentItem);this._noFinalSort=null;if(this.helper[0]==this.currentItem[0]){for(var f in this._storedCSS)if("auto"==this._storedCSS[f]||"static"==this._storedCSS[f])this._storedCSS[f]="";this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper")}else this.currentItem.show();this.fromOutside&&
!d&&c.push(function(a){this._trigger("receive",a,this._uiHash(this.fromOutside))});!this.fromOutside&&this.domPosition.prev==this.currentItem.prev().not(".ui-sortable-helper")[0]&&this.domPosition.parent==this.currentItem.parent()[0]||d||c.push(function(a){this._trigger("update",a,this._uiHash())});this===this.currentContainer||d||(c.push(function(a){this._trigger("remove",a,this._uiHash())}),c.push(function(a){return function(b){a._trigger("receive",b,this._uiHash(this))}}.call(this,this.currentContainer)),
c.push(function(a){return function(b){a._trigger("update",b,this._uiHash(this))}}.call(this,this.currentContainer)));for(f=this.containers.length-1;0<=f;f--)d||c.push(function(a){return function(b){a._trigger("deactivate",b,this._uiHash(this))}}.call(this,this.containers[f])),this.containers[f].containerCache.over&&(c.push(function(a){return function(b){a._trigger("out",b,this._uiHash(this))}}.call(this,this.containers[f])),this.containers[f].containerCache.over=0);this._storedCursor&&a("body").css("cursor",
this._storedCursor);this._storedOpacity&&this.helper.css("opacity",this._storedOpacity);this._storedZIndex&&this.helper.css("zIndex","auto"==this._storedZIndex?"":this._storedZIndex);this.dragging=!1;if(this.cancelHelperRemoval){if(!d){this._trigger("beforeStop",b,this._uiHash());for(f=0;f<c.length;f++)c[f].call(this,b);this._trigger("stop",b,this._uiHash())}return this.fromOutside=!1}d||this._trigger("beforeStop",b,this._uiHash());this.placeholder[0].parentNode.removeChild(this.placeholder[0]);this.helper[0]!=
this.currentItem[0]&&this.helper.remove();this.helper=null;if(!d){for(f=0;f<c.length;f++)c[f].call(this,b);this._trigger("stop",b,this._uiHash())}this.fromOutside=!1;return!0},_trigger:function(){!1===a.Widget.prototype._trigger.apply(this,arguments)&&this.cancel()},_uiHash:function(b){var d=b||this;return{helper:d.helper,placeholder:d.placeholder||a([]),position:d.position,originalPosition:d.originalPosition,offset:d.positionAbs,item:d.currentItem,sender:b?b.element:null}}})})(jQuery);
(function(a,c){var b=0,d={},e={};d.height=d.paddingTop=d.paddingBottom=d.borderTopWidth=d.borderBottomWidth="hide";e.height=e.paddingTop=e.paddingBottom=e.borderTopWidth=e.borderBottomWidth="show";a.widget("ui.accordion",{version:"1.9.1",options:{active:0,animate:{},collapsible:!1,event:"click",header:"> li > :first-child,> :not(li):even",heightStyle:"auto",icons:{activeHeader:"ui-icon-triangle-1-s",header:"ui-icon-triangle-1-e"},activate:null,beforeActivate:null},_create:function(){var d=this.accordionId=
"ui-accordion-"+(this.element.attr("id")||++b),c=this.options;this.prevShow=this.prevHide=a();this.element.addClass("ui-accordion ui-widget ui-helper-reset");this.headers=this.element.find(c.header).addClass("ui-accordion-header ui-helper-reset ui-state-default ui-corner-all");this._hoverable(this.headers);this._focusable(this.headers);this.headers.next().addClass("ui-accordion-content ui-helper-reset ui-widget-content ui-corner-bottom").hide();c.collapsible||!1!==c.active&&null!=c.active||(c.active=
0);0>c.active&&(c.active+=this.headers.length);this.active=this._findActive(c.active).addClass("ui-accordion-header-active ui-state-active").toggleClass("ui-corner-all ui-corner-top");this.active.next().addClass("ui-accordion-content-active").show();this._createIcons();this.refresh();this.element.attr("role","tablist");this.headers.attr("role","tab").each(function(b){var c=a(this),e=c.attr("id"),g=c.next(),q=g.attr("id");e||(e=d+"-header-"+b,c.attr("id",e));q||(q=d+"-panel-"+b,g.attr("id",q));c.attr("aria-controls",
q);g.attr("aria-labelledby",e)}).next().attr("role","tabpanel");this.headers.not(this.active).attr({"aria-selected":"false",tabIndex:-1}).next().attr({"aria-expanded":"false","aria-hidden":"true"}).hide();this.active.length?this.active.attr({"aria-selected":"true",tabIndex:0}).next().attr({"aria-expanded":"true","aria-hidden":"false"}):this.headers.eq(0).attr("tabIndex",0);this._on(this.headers,{keydown:"_keydown"});this._on(this.headers.next(),{keydown:"_panelKeyDown"});this._setupEvents(c.event)},
_getCreateEventData:function(){return{header:this.active,content:this.active.length?this.active.next():a()}},_createIcons:function(){var b=this.options.icons;b&&(a("<span>").addClass("ui-accordion-header-icon ui-icon "+b.header).prependTo(this.headers),this.active.children(".ui-accordion-header-icon").removeClass(b.header).addClass(b.activeHeader),this.headers.addClass("ui-accordion-icons"))},_destroyIcons:function(){this.headers.removeClass("ui-accordion-icons").children(".ui-accordion-header-icon").remove()},
_destroy:function(){var a;this.element.removeClass("ui-accordion ui-widget ui-helper-reset").removeAttr("role");this.headers.removeClass("ui-accordion-header ui-accordion-header-active ui-helper-reset ui-state-default ui-corner-all ui-state-active ui-state-disabled ui-corner-top").removeAttr("role").removeAttr("aria-selected").removeAttr("aria-controls").removeAttr("tabIndex").each(function(){/^ui-accordion/.test(this.id)&&this.removeAttribute("id")});this._destroyIcons();a=this.headers.next().css("display",
"").removeAttr("role").removeAttr("aria-expanded").removeAttr("aria-hidden").removeAttr("aria-labelledby").removeClass("ui-helper-reset ui-widget-content ui-corner-bottom ui-accordion-content ui-accordion-content-active ui-state-disabled").each(function(){/^ui-accordion/.test(this.id)&&this.removeAttribute("id")});"content"!==this.options.heightStyle&&a.css("height","")},_setOption:function(a,b){"active"===a?this._activate(b):("event"===a&&(this.options.event&&this._off(this.headers,this.options.event),
this._setupEvents(b)),this._super(a,b),"collapsible"!==a||b||!1!==this.options.active||this._activate(0),"icons"===a&&(this._destroyIcons(),b&&this._createIcons()),"disabled"===a&&this.headers.add(this.headers.next()).toggleClass("ui-state-disabled",!!b))},_keydown:function(b){if(!b.altKey&&!b.ctrlKey){var d=a.ui.keyCode,c=this.headers.length,e=this.headers.index(b.target),m=!1;switch(b.keyCode){case d.RIGHT:case d.DOWN:m=this.headers[(e+1)%c];break;case d.LEFT:case d.UP:m=this.headers[(e-1+c)%c];
break;case d.SPACE:case d.ENTER:this._eventHandler(b);break;case d.HOME:m=this.headers[0];break;case d.END:m=this.headers[c-1]}m&&(a(b.target).attr("tabIndex",-1),a(m).attr("tabIndex",0),m.focus(),b.preventDefault())}},_panelKeyDown:function(b){b.keyCode===a.ui.keyCode.UP&&b.ctrlKey&&a(b.currentTarget).prev().focus()},refresh:function(){var b,d,c=this.options.heightStyle,e=this.element.parent();"fill"===c?(a.support.minHeight||(d=e.css("overflow"),e.css("overflow","hidden")),b=e.height(),this.element.siblings(":visible").each(function(){var d=
a(this),c=d.css("position");"absolute"!==c&&"fixed"!==c&&(b-=d.outerHeight(!0))}),d&&e.css("overflow",d),this.headers.each(function(){b-=a(this).outerHeight(!0)}),this.headers.next().each(function(){a(this).height(Math.max(0,b-a(this).innerHeight()+a(this).height()))}).css("overflow","auto")):"auto"===c&&(b=0,this.headers.next().each(function(){b=Math.max(b,a(this).height("").height())}).height(b))},_activate:function(b){b=this._findActive(b)[0];b!==this.active[0]&&(b=b||this.active[0],this._eventHandler({target:b,
currentTarget:b,preventDefault:a.noop}))},_findActive:function(b){return"number"===typeof b?this.headers.eq(b):a()},_setupEvents:function(b){var d={};b&&(a.each(b.split(" "),function(a,b){d[b]="_eventHandler"}),this._on(this.headers,d))},_eventHandler:function(b){var d=this.options,c=this.active,e=a(b.currentTarget),m=e[0]===c[0],p=m&&d.collapsible,q=p?a():e.next(),t=c.next(),q={oldHeader:c,oldPanel:t,newHeader:p?a():e,newPanel:q};b.preventDefault();m&&!d.collapsible||!1===this._trigger("beforeActivate",
b,q)||(d.active=p?!1:this.headers.index(e),this.active=m?a():e,this._toggle(q),c.removeClass("ui-accordion-header-active ui-state-active"),d.icons&&c.children(".ui-accordion-header-icon").removeClass(d.icons.activeHeader).addClass(d.icons.header),m||(e.removeClass("ui-corner-all").addClass("ui-accordion-header-active ui-state-active ui-corner-top"),d.icons&&e.children(".ui-accordion-header-icon").removeClass(d.icons.header).addClass(d.icons.activeHeader),e.next().addClass("ui-accordion-content-active")))},
_toggle:function(b){var d=b.newPanel,c=this.prevShow.length?this.prevShow:b.oldPanel;this.prevShow.add(this.prevHide).stop(!0,!0);this.prevShow=d;this.prevHide=c;this.options.animate?this._animate(d,c,b):(c.hide(),d.show(),this._toggleComplete(b));c.attr({"aria-expanded":"false","aria-hidden":"true"});c.prev().attr("aria-selected","false");d.length&&c.length?c.prev().attr("tabIndex",-1):d.length&&this.headers.filter(function(){return 0===a(this).attr("tabIndex")}).attr("tabIndex",-1);d.attr({"aria-expanded":"true",
"aria-hidden":"false"}).prev().attr({"aria-selected":"true",tabIndex:0})},_animate:function(a,b,c){var l,m,p,q=this,t=0,y=a.length&&(!b.length||a.index()<b.index()),u=this.options.animate||{},y=y&&u.down||u,C=function(){q._toggleComplete(c)};"number"===typeof y&&(p=y);"string"===typeof y&&(m=y);m=m||y.easing||u.easing;p=p||y.duration||u.duration;if(!b.length)return a.animate(e,p,m,C);if(!a.length)return b.animate(d,p,m,C);l=a.show().outerHeight();b.animate(d,{duration:p,easing:m,step:function(a,b){b.now=
Math.round(a)}});a.hide().animate(e,{duration:p,easing:m,complete:C,step:function(a,d){d.now=Math.round(a);"height"!==d.prop?t+=d.now:"content"!==q.options.heightStyle&&(d.now=Math.round(l-b.outerHeight()-t),t=0)}})},_toggleComplete:function(a){var b=a.oldPanel;b.removeClass("ui-accordion-content-active").prev().removeClass("ui-corner-top").addClass("ui-corner-all");b.length&&(b.parent()[0].className=b.parent()[0].className);this._trigger("activate",null,a)}});!1!==a.uiBackCompat&&(function(a,b){a.extend(b.options,
{navigation:!1,navigationFilter:function(){return this.href.toLowerCase()===location.href.toLowerCase()}});var d=b._create;b._create=function(){if(this.options.navigation){var b=this,c=this.element.find(this.options.header),e=c.next(),g=c.add(e).find("a").filter(this.options.navigationFilter)[0];g&&c.add(e).each(function(d){if(a.contains(this,g))return b.options.active=Math.floor(d/2),!1})}d.call(this)}}(jQuery,jQuery.ui.accordion.prototype),function(a,b){a.extend(b.options,{heightStyle:null,autoHeight:!0,
clearStyle:!1,fillSpace:!1});var d=b._create,c=b._setOption;a.extend(b,{_create:function(){this.options.heightStyle=this.options.heightStyle||this._mergeHeightStyle();d.call(this)},_setOption:function(a){if("autoHeight"===a||"clearStyle"===a||"fillSpace"===a)this.options.heightStyle=this._mergeHeightStyle();c.apply(this,arguments)},_mergeHeightStyle:function(){var a=this.options;if(a.fillSpace)return"fill";if(a.clearStyle)return"content";if(a.autoHeight)return"auto"}})}(jQuery,jQuery.ui.accordion.prototype),
function(a,b){a.extend(b.options.icons,{activeHeader:null,headerSelected:"ui-icon-triangle-1-s"});var d=b._createIcons;b._createIcons=function(){this.options.icons&&(this.options.icons.activeHeader=this.options.icons.activeHeader||this.options.icons.headerSelected);d.call(this)}}(jQuery,jQuery.ui.accordion.prototype),function(a,b){b.activate=b._activate;var d=b._findActive;b._findActive=function(a){-1===a&&(a=!1);a&&"number"!==typeof a&&(a=this.headers.index(this.headers.filter(a)),-1===a&&(a=!1));
return d.call(this,a)}}(jQuery,jQuery.ui.accordion.prototype),jQuery.ui.accordion.prototype.resize=jQuery.ui.accordion.prototype.refresh,function(a,b){a.extend(b.options,{change:null,changestart:null});var d=b._trigger;b._trigger=function(a,b,c){var e=d.apply(this,arguments);if(!e)return!1;"beforeActivate"===a?e=d.call(this,"changestart",b,{oldHeader:c.oldHeader,oldContent:c.oldPanel,newHeader:c.newHeader,newContent:c.newPanel}):"activate"===a&&(e=d.call(this,"change",b,{oldHeader:c.oldHeader,oldContent:c.oldPanel,
newHeader:c.newHeader,newContent:c.newPanel}));return e}}(jQuery,jQuery.ui.accordion.prototype),function(a,b){a.extend(b.options,{animate:null,animated:"slide"});var d=b._create;b._create=function(){var a=this.options;null===a.animate&&(a.animate=a.animated?"slide"===a.animated?300:"bounceslide"===a.animated?{duration:200,down:{easing:"easeOutBounce",duration:1E3}}:a.animated:!1);d.call(this)}}(jQuery,jQuery.ui.accordion.prototype))})(jQuery);
(function(a,c){var b=0;a.widget("ui.autocomplete",{version:"1.9.1",defaultElement:"<input>",options:{appendTo:"body",autoFocus:!1,delay:300,minLength:1,position:{my:"left top",at:"left bottom",collision:"none"},source:null,change:null,close:null,focus:null,open:null,response:null,search:null,select:null},pending:0,_create:function(){var b,c,f;this.isMultiLine=this._isMultiLine();this.valueMethod=this.element[this.element.is("input,textarea")?"val":"text"];this.isNewMenu=!0;this.element.addClass("ui-autocomplete-input").attr("autocomplete",
"off");this._on(this.element,{keydown:function(g){if(this.element.prop("readOnly"))c=f=b=!0;else{c=f=b=!1;var h=a.ui.keyCode;switch(g.keyCode){case h.PAGE_UP:b=!0;this._move("previousPage",g);break;case h.PAGE_DOWN:b=!0;this._move("nextPage",g);break;case h.UP:b=!0;this._keyEvent("previous",g);break;case h.DOWN:b=!0;this._keyEvent("next",g);break;case h.ENTER:case h.NUMPAD_ENTER:this.menu.active&&(b=!0,g.preventDefault(),this.menu.select(g));break;case h.TAB:this.menu.active&&this.menu.select(g);
break;case h.ESCAPE:this.menu.element.is(":visible")&&(this._value(this.term),this.close(g),g.preventDefault());break;default:c=!0,this._searchTimeout(g)}}},keypress:function(f){if(b)b=!1,f.preventDefault();else if(!c){var h=a.ui.keyCode;switch(f.keyCode){case h.PAGE_UP:this._move("previousPage",f);break;case h.PAGE_DOWN:this._move("nextPage",f);break;case h.UP:this._keyEvent("previous",f);break;case h.DOWN:this._keyEvent("next",f)}}},input:function(a){f?(f=!1,a.preventDefault()):this._searchTimeout(a)},
focus:function(){this.selectedItem=null;this.previous=this._value()},blur:function(a){this.cancelBlur?delete this.cancelBlur:(clearTimeout(this.searching),this.close(a),this._change(a))}});this._initSource();this.menu=a("<ul>").addClass("ui-autocomplete").appendTo(this.document.find(this.options.appendTo||"body")[0]).menu({input:a(),role:null}).zIndex(this.element.zIndex()+1).hide().data("menu");this._on(this.menu.element,{mousedown:function(b){b.preventDefault();this.cancelBlur=!0;this._delay(function(){delete this.cancelBlur});
var d=this.menu.element[0];a(b.target).closest(".ui-menu-item").length||this._delay(function(){var b=this;this.document.one("mousedown",function(c){c.target===b.element[0]||c.target===d||a.contains(d,c.target)||b.close()})})},menufocus:function(b,d){if(this.isNewMenu&&(this.isNewMenu=!1,b.originalEvent&&/^mouse/.test(b.originalEvent.type))){this.menu.blur();this.document.one("mousemove",function(){a(b.target).trigger(b.originalEvent)});return}var c=d.item.data("ui-autocomplete-item")||d.item.data("item.autocomplete");
!1!==this._trigger("focus",b,{item:c})?b.originalEvent&&/^key/.test(b.originalEvent.type)&&this._value(c.value):this.liveRegion.text(c.value)},menuselect:function(a,b){var d=b.item.data("ui-autocomplete-item")||b.item.data("item.autocomplete"),c=this.previous;this.element[0]!==this.document[0].activeElement&&(this.element.focus(),this.previous=c,this._delay(function(){this.previous=c;this.selectedItem=d}));!1!==this._trigger("select",a,{item:d})&&this._value(d.value);this.term=this._value();this.close(a);
this.selectedItem=d}});this.liveRegion=a("<span>",{role:"status","aria-live":"polite"}).addClass("ui-helper-hidden-accessible").insertAfter(this.element);a.fn.bgiframe&&this.menu.element.bgiframe();this._on(this.window,{beforeunload:function(){this.element.removeAttr("autocomplete")}})},_destroy:function(){clearTimeout(this.searching);this.element.removeClass("ui-autocomplete-input").removeAttr("autocomplete");this.menu.element.remove();this.liveRegion.remove()},_setOption:function(a,b){this._super(a,
b);"source"===a&&this._initSource();"appendTo"===a&&this.menu.element.appendTo(this.document.find(b||"body")[0]);"disabled"===a&&b&&this.xhr&&this.xhr.abort()},_isMultiLine:function(){return this.element.is("textarea")?!0:this.element.is("input")?!1:this.element.prop("isContentEditable")},_initSource:function(){var b,c,f=this;a.isArray(this.options.source)?(b=this.options.source,this.source=function(c,e){e(a.ui.autocomplete.filter(b,c.term))}):"string"===typeof this.options.source?(c=this.options.source,
this.source=function(b,d){f.xhr&&f.xhr.abort();f.xhr=a.ajax({url:c,data:b,dataType:"json",success:function(a){d(a)},error:function(){d([])}})}):this.source=this.options.source},_searchTimeout:function(a){clearTimeout(this.searching);this.searching=this._delay(function(){this.term!==this._value()&&(this.selectedItem=null,this.search(null,a))},this.options.delay)},search:function(a,b){a=null!=a?a:this._value();this.term=this._value();if(a.length<this.options.minLength)return this.close(b);if(!1!==this._trigger("search",
b))return this._search(a)},_search:function(a){this.pending++;this.element.addClass("ui-autocomplete-loading");this.cancelSearch=!1;this.source({term:a},this._response())},_response:function(){var a=this,c=++b;return function(f){c===b&&a.__response(f);a.pending--;a.pending||a.element.removeClass("ui-autocomplete-loading")}},__response:function(a){a&&(a=this._normalize(a));this._trigger("response",null,{content:a});!this.options.disabled&&a&&a.length&&!this.cancelSearch?(this._suggest(a),this._trigger("open")):
this._close()},close:function(a){this.cancelSearch=!0;this._close(a)},_close:function(a){this.menu.element.is(":visible")&&(this.menu.element.hide(),this.menu.blur(),this.isNewMenu=!0,this._trigger("close",a))},_change:function(a){this.previous!==this._value()&&this._trigger("change",a,{item:this.selectedItem})},_normalize:function(b){return b.length&&b[0].label&&b[0].value?b:a.map(b,function(b){return"string"===typeof b?{label:b,value:b}:a.extend({label:b.label||b.value,value:b.value||b.label},b)})},
_suggest:function(b){var c=this.menu.element.empty().zIndex(this.element.zIndex()+1);this._renderMenu(c,b);this.menu.refresh();c.show();this._resizeMenu();c.position(a.extend({of:this.element},this.options.position));this.options.autoFocus&&this.menu.next()},_resizeMenu:function(){var a=this.menu.element;a.outerWidth(Math.max(a.width("").outerWidth()+1,this.element.outerWidth()))},_renderMenu:function(b,c){var f=this;a.each(c,function(a,c){f._renderItemData(b,c)})},_renderItemData:function(a,b){return this._renderItem(a,
b).data("ui-autocomplete-item",b)},_renderItem:function(b,c){return a("<li>").append(a("<a>").text(c.label)).appendTo(b)},_move:function(a,b){if(this.menu.element.is(":visible"))if(this.menu.isFirstItem()&&/^previous/.test(a)||this.menu.isLastItem()&&/^next/.test(a))this._value(this.term),this.menu.blur();else this.menu[a](b);else this.search(null,b)},widget:function(){return this.menu.element},_value:function(){return this.valueMethod.apply(this.element,arguments)},_keyEvent:function(a,b){if(!this.isMultiLine||
this.menu.element.is(":visible"))this._move(a,b),b.preventDefault()}});a.extend(a.ui.autocomplete,{escapeRegex:function(a){return a.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")},filter:function(b,c){var f=new RegExp(a.ui.autocomplete.escapeRegex(c),"i");return a.grep(b,function(a){return f.test(a.label||a.value||a)})}});a.widget("ui.autocomplete",a.ui.autocomplete,{options:{messages:{noResults:"No search results.",results:function(a){return a+(1<a?" results are":" result is")+" available, use up and down arrow keys to navigate."}}},
__response:function(a){var b;this._superApply(arguments);this.options.disabled||this.cancelSearch||(b=a&&a.length?this.options.messages.results(a.length):this.options.messages.noResults,this.liveRegion.text(b))}})})(jQuery);
(function(a,c){var b,d,e,f,g=function(){var b=a(this).find(":ui-button");setTimeout(function(){b.button("refresh")},1)},h=function(b){var d=b.name,c=b.form,e=a([]);d&&(e=c?a(c).find("[name='"+d+"']"):a("[name='"+d+"']",b.ownerDocument).filter(function(){return!this.form}));return e};a.widget("ui.button",{version:"1.9.1",defaultElement:"<button>",options:{disabled:null,text:!0,label:null,icons:{primary:null,secondary:null}},_create:function(){this.element.closest("form").unbind("reset"+this.eventNamespace).bind("reset"+
this.eventNamespace,g);"boolean"!==typeof this.options.disabled?this.options.disabled=!!this.element.prop("disabled"):this.element.prop("disabled",this.options.disabled);this._determineButtonType();this.hasTitle=!!this.buttonElement.attr("title");var c=this,m=this.options,p="checkbox"===this.type||"radio"===this.type,q="ui-state-hover"+(p?"":" ui-state-active");null===m.label&&(m.label="input"===this.type?this.buttonElement.val():this.buttonElement.html());this.buttonElement.addClass("ui-button ui-widget ui-state-default ui-corner-all").attr("role",
"button").bind("mouseenter"+this.eventNamespace,function(){m.disabled||(a(this).addClass("ui-state-hover"),this===b&&a(this).addClass("ui-state-active"))}).bind("mouseleave"+this.eventNamespace,function(){m.disabled||a(this).removeClass(q)}).bind("click"+this.eventNamespace,function(a){m.disabled&&(a.preventDefault(),a.stopImmediatePropagation())});this.element.bind("focus"+this.eventNamespace,function(){c.buttonElement.addClass("ui-state-focus")}).bind("blur"+this.eventNamespace,function(){c.buttonElement.removeClass("ui-state-focus")});
p&&(this.element.bind("change"+this.eventNamespace,function(){f||c.refresh()}),this.buttonElement.bind("mousedown"+this.eventNamespace,function(a){m.disabled||(f=!1,d=a.pageX,e=a.pageY)}).bind("mouseup"+this.eventNamespace,function(a){m.disabled||d===a.pageX&&e===a.pageY||(f=!0)}));"checkbox"===this.type?this.buttonElement.bind("click"+this.eventNamespace,function(){if(m.disabled||f)return!1;a(this).toggleClass("ui-state-active");c.buttonElement.attr("aria-pressed",c.element[0].checked)}):"radio"===
this.type?this.buttonElement.bind("click"+this.eventNamespace,function(){if(m.disabled||f)return!1;a(this).addClass("ui-state-active");c.buttonElement.attr("aria-pressed","true");var b=c.element[0];h(b).not(b).map(function(){return a(this).button("widget")[0]}).removeClass("ui-state-active").attr("aria-pressed","false")}):(this.buttonElement.bind("mousedown"+this.eventNamespace,function(){if(m.disabled)return!1;a(this).addClass("ui-state-active");b=this;c.document.one("mouseup",function(){b=null})}).bind("mouseup"+
this.eventNamespace,function(){if(m.disabled)return!1;a(this).removeClass("ui-state-active")}).bind("keydown"+this.eventNamespace,function(b){if(m.disabled)return!1;b.keyCode!==a.ui.keyCode.SPACE&&b.keyCode!==a.ui.keyCode.ENTER||a(this).addClass("ui-state-active")}).bind("keyup"+this.eventNamespace,function(){a(this).removeClass("ui-state-active")}),this.buttonElement.is("a")&&this.buttonElement.keyup(function(b){b.keyCode===a.ui.keyCode.SPACE&&a(this).click()}));this._setOption("disabled",m.disabled);
this._resetButton()},_determineButtonType:function(){var a,b;this.element.is("[type=checkbox]")?this.type="checkbox":this.element.is("[type=radio]")?this.type="radio":this.element.is("input")?this.type="input":this.type="button";"checkbox"===this.type||"radio"===this.type?(a=this.element.parents().last(),b="label[for='"+this.element.attr("id")+"']",this.buttonElement=a.find(b),this.buttonElement.length||(a=a.length?a.siblings():this.element.siblings(),this.buttonElement=a.filter(b),this.buttonElement.length||
(this.buttonElement=a.find(b))),this.element.addClass("ui-helper-hidden-accessible"),(a=this.element.is(":checked"))&&this.buttonElement.addClass("ui-state-active"),this.buttonElement.prop("aria-pressed",a)):this.buttonElement=this.element},widget:function(){return this.buttonElement},_destroy:function(){this.element.removeClass("ui-helper-hidden-accessible");this.buttonElement.removeClass("ui-button ui-widget ui-state-default ui-corner-all ui-state-hover ui-state-active  ui-button-icons-only ui-button-icon-only ui-button-text-icons ui-button-text-icon-primary ui-button-text-icon-secondary ui-button-text-only").removeAttr("role").removeAttr("aria-pressed").html(this.buttonElement.find(".ui-button-text").html());
this.hasTitle||this.buttonElement.removeAttr("title")},_setOption:function(a,b){this._super(a,b);"disabled"===a?b?this.element.prop("disabled",!0):this.element.prop("disabled",!1):this._resetButton()},refresh:function(){var b=this.element.is(":disabled")||this.element.hasClass("ui-button-disabled");b!==this.options.disabled&&this._setOption("disabled",b);"radio"===this.type?h(this.element[0]).each(function(){a(this).is(":checked")?a(this).button("widget").addClass("ui-state-active").attr("aria-pressed",
"true"):a(this).button("widget").removeClass("ui-state-active").attr("aria-pressed","false")}):"checkbox"===this.type&&(this.element.is(":checked")?this.buttonElement.addClass("ui-state-active").attr("aria-pressed","true"):this.buttonElement.removeClass("ui-state-active").attr("aria-pressed","false"))},_resetButton:function(){if("input"===this.type)this.options.label&&this.element.val(this.options.label);else{var b=this.buttonElement.removeClass("ui-button-icons-only ui-button-icon-only ui-button-text-icons ui-button-text-icon-primary ui-button-text-icon-secondary ui-button-text-only"),
d=a("<span></span>",this.document[0]).addClass("ui-button-text").html(this.options.label).appendTo(b.empty()).text(),c=this.options.icons,e=c.primary&&c.secondary,f=[];c.primary||c.secondary?(this.options.text&&f.push("ui-button-text-icon"+(e?"s":c.primary?"-primary":"-secondary")),c.primary&&b.prepend("<span class='ui-button-icon-primary ui-icon "+c.primary+"'></span>"),c.secondary&&b.append("<span class='ui-button-icon-secondary ui-icon "+c.secondary+"'></span>"),this.options.text||(f.push(e?"ui-button-icons-only":
"ui-button-icon-only"),this.hasTitle||b.attr("title",a.trim(d)))):f.push("ui-button-text-only");b.addClass(f.join(" "))}}});a.widget("ui.buttonset",{version:"1.9.1",options:{items:"button, input[type=button], input[type=submit], input[type=reset], input[type=checkbox], input[type=radio], a, :data(button)"},_create:function(){this.element.addClass("ui-buttonset")},_init:function(){this.refresh()},_setOption:function(a,b){"disabled"===a&&this.buttons.button("option",a,b);this._super(a,b)},refresh:function(){var b=
"rtl"===this.element.css("direction");this.buttons=this.element.find(this.options.items).filter(":ui-button").button("refresh").end().not(":ui-button").button().end().map(function(){return a(this).button("widget")[0]}).removeClass("ui-corner-all ui-corner-left ui-corner-right").filter(":first").addClass(b?"ui-corner-right":"ui-corner-left").end().filter(":last").addClass(b?"ui-corner-left":"ui-corner-right").end().end()},_destroy:function(){this.element.removeClass("ui-buttonset");this.buttons.map(function(){return a(this).button("widget")[0]}).removeClass("ui-corner-left ui-corner-right").end().button("destroy")}})})(jQuery);
(function(a,c){function b(){this.debug=!1;this._curInst=null;this._keyEvent=!1;this._disabledInputs=[];this._inDialog=this._datepickerShowing=!1;this._mainDivId="ui-datepicker-div";this._inlineClass="ui-datepicker-inline";this._appendClass="ui-datepicker-append";this._triggerClass="ui-datepicker-trigger";this._dialogClass="ui-datepicker-dialog";this._disableClass="ui-datepicker-disabled";this._unselectableClass="ui-datepicker-unselectable";this._currentClass="ui-datepicker-current-day";this._dayOverClass=
"ui-datepicker-days-cell-over";this.regional=[];this.regional[""]={closeText:"Done",prevText:"Prev",nextText:"Next",currentText:"Today",monthNames:"January February March April May June July August September October November December".split(" "),monthNamesShort:"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),dayNames:"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),dayNamesShort:"Sun Mon Tue Wed Thu Fri Sat".split(" "),dayNamesMin:"Su Mo Tu We Th Fr Sa".split(" "),
weekHeader:"Wk",dateFormat:"mm/dd/yy",firstDay:0,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""};this._defaults={showOn:"focus",showAnim:"fadeIn",showOptions:{},defaultDate:null,appendText:"",buttonText:"...",buttonImage:"",buttonImageOnly:!1,hideIfNoPrevNext:!1,navigationAsDateFormat:!1,gotoCurrent:!1,changeMonth:!1,changeYear:!1,yearRange:"c-10:c+10",showOtherMonths:!1,selectOtherMonths:!1,showWeek:!1,calculateWeek:this.iso8601Week,shortYearCutoff:"+10",minDate:null,maxDate:null,duration:"fast",beforeShowDay:null,
beforeShow:null,onSelect:null,onChangeMonthYear:null,onClose:null,numberOfMonths:1,showCurrentAtPos:0,stepMonths:1,stepBigMonths:12,altField:"",altFormat:"",constrainInput:!0,showButtonPanel:!1,autoSize:!1,disabled:!1};a.extend(this._defaults,this.regional[""]);this.dpDiv=d(a('<div id="'+this._mainDivId+'" class="ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all"></div>'))}function d(b){return b.delegate("button, .ui-datepicker-prev, .ui-datepicker-next, .ui-datepicker-calendar td a",
"mouseout",function(){a(this).removeClass("ui-state-hover");-1!=this.className.indexOf("ui-datepicker-prev")&&a(this).removeClass("ui-datepicker-prev-hover");-1!=this.className.indexOf("ui-datepicker-next")&&a(this).removeClass("ui-datepicker-next-hover")}).delegate("button, .ui-datepicker-prev, .ui-datepicker-next, .ui-datepicker-calendar td a","mouseover",function(){a.datepicker._isDisabledDatepicker(g.inline?b.parent()[0]:g.input[0])||(a(this).parents(".ui-datepicker-calendar").find("a").removeClass("ui-state-hover"),
a(this).addClass("ui-state-hover"),-1!=this.className.indexOf("ui-datepicker-prev")&&a(this).addClass("ui-datepicker-prev-hover"),-1!=this.className.indexOf("ui-datepicker-next")&&a(this).addClass("ui-datepicker-next-hover"))})}function e(b,d){a.extend(b,d);for(var e in d)if(null==d[e]||d[e]==c)b[e]=d[e];return b}a.extend(a.ui,{datepicker:{version:"1.9.1"}});var f=(new Date).getTime(),g;a.extend(b.prototype,{markerClassName:"hasDatepicker",maxRows:4,log:function(){this.debug&&console.log.apply("",
arguments)},_widgetDatepicker:function(){return this.dpDiv},setDefaults:function(a){e(this._defaults,a||{});return this},_attachDatepicker:function(b,d){var c=null,e;for(e in this._defaults){var f=b.getAttribute("date:"+e);if(f){c=c||{};try{c[e]=eval(f)}catch(g){c[e]=f}}}e=b.nodeName.toLowerCase();f="div"==e||"span"==e;b.id||(this.uuid+=1,b.id="dp"+this.uuid);var y=this._newInst(a(b),f);y.settings=a.extend({},d||{},c||{});"input"==e?this._connectDatepicker(b,y):f&&this._inlineDatepicker(b,y)},_newInst:function(b,
c){return{id:b[0].id.replace(/([^A-Za-z0-9_-])/g,"\\\\$1"),input:b,selectedDay:0,selectedMonth:0,selectedYear:0,drawMonth:0,drawYear:0,inline:c,dpDiv:c?d(a('<div class="'+this._inlineClass+' ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all"></div>')):this.dpDiv}},_connectDatepicker:function(b,d){var c=a(b);d.append=a([]);d.trigger=a([]);c.hasClass(this.markerClassName)||(this._attachments(c,d),c.addClass(this.markerClassName).keydown(this._doKeyDown).keypress(this._doKeyPress).keyup(this._doKeyUp).bind("setData.datepicker",
function(a,b,c){d.settings[b]=c}).bind("getData.datepicker",function(a,b){return this._get(d,b)}),this._autoSize(d),a.data(b,"datepicker",d),d.settings.disabled&&this._disableDatepicker(b))},_attachments:function(b,d){var c=this._get(d,"appendText"),e=this._get(d,"isRTL");d.append&&d.append.remove();c&&(d.append=a('<span class="'+this._appendClass+'">'+c+"</span>"),b[e?"before":"after"](d.append));b.unbind("focus",this._showDatepicker);d.trigger&&d.trigger.remove();c=this._get(d,"showOn");"focus"!=
c&&"both"!=c||b.focus(this._showDatepicker);if("button"==c||"both"==c){var c=this._get(d,"buttonText"),f=this._get(d,"buttonImage");d.trigger=a(this._get(d,"buttonImageOnly")?a("<img/>").addClass(this._triggerClass).attr({src:f,alt:c,title:c}):a('<button type="button"></button>').addClass(this._triggerClass).html(""==f?c:a("<img/>").attr({src:f,alt:c,title:c})));b[e?"before":"after"](d.trigger);d.trigger.click(function(){a.datepicker._datepickerShowing&&a.datepicker._lastInput==b[0]?a.datepicker._hideDatepicker():
(a.datepicker._datepickerShowing&&a.datepicker._lastInput!=b[0]&&a.datepicker._hideDatepicker(),a.datepicker._showDatepicker(b[0]));return!1})}},_autoSize:function(a){if(this._get(a,"autoSize")&&!a.inline){var b=new Date(2009,11,20),d=this._get(a,"dateFormat");if(d.match(/[DM]/)){var c=function(a){for(var b=0,d=0,c=0;c<a.length;c++)a[c].length>b&&(b=a[c].length,d=c);return d};b.setMonth(c(this._get(a,d.match(/MM/)?"monthNames":"monthNamesShort")));b.setDate(c(this._get(a,d.match(/DD/)?"dayNames":
"dayNamesShort"))+20-b.getDay())}a.input.attr("size",this._formatDate(a,b).length)}},_inlineDatepicker:function(b,d){var c=a(b);c.hasClass(this.markerClassName)||(c.addClass(this.markerClassName).append(d.dpDiv).bind("setData.datepicker",function(a,b,c){d.settings[b]=c}).bind("getData.datepicker",function(a,b){return this._get(d,b)}),a.data(b,"datepicker",d),this._setDate(d,this._getDefaultDate(d),!0),this._updateDatepicker(d),this._updateAlternate(d),d.settings.disabled&&this._disableDatepicker(b),
d.dpDiv.css("display","block"))},_dialogDatepicker:function(b,d,c,f,g){b=this._dialogInst;b||(this.uuid+=1,this._dialogInput=a('<input type="text" id="dp'+this.uuid+'" style="position: absolute; top: -100px; width: 0px;"/>'),this._dialogInput.keydown(this._doKeyDown),a("body").append(this._dialogInput),b=this._dialogInst=this._newInst(this._dialogInput,!1),b.settings={},a.data(this._dialogInput[0],"datepicker",b));e(b.settings,f||{});d=d&&d.constructor==Date?this._formatDate(b,d):d;this._dialogInput.val(d);
this._pos=g?g.length?g:[g.pageX,g.pageY]:null;this._pos||(this._pos=[document.documentElement.clientWidth/2-100+(document.documentElement.scrollLeft||document.body.scrollLeft),document.documentElement.clientHeight/2-150+(document.documentElement.scrollTop||document.body.scrollTop)]);this._dialogInput.css("left",this._pos[0]+20+"px").css("top",this._pos[1]+"px");b.settings.onSelect=c;this._inDialog=!0;this.dpDiv.addClass(this._dialogClass);this._showDatepicker(this._dialogInput[0]);a.blockUI&&a.blockUI(this.dpDiv);
a.data(this._dialogInput[0],"datepicker",b);return this},_destroyDatepicker:function(b){var d=a(b),c=a.data(b,"datepicker");if(d.hasClass(this.markerClassName)){var e=b.nodeName.toLowerCase();a.removeData(b,"datepicker");"input"==e?(c.append.remove(),c.trigger.remove(),d.removeClass(this.markerClassName).unbind("focus",this._showDatepicker).unbind("keydown",this._doKeyDown).unbind("keypress",this._doKeyPress).unbind("keyup",this._doKeyUp)):"div"!=e&&"span"!=e||d.removeClass(this.markerClassName).empty()}},
_enableDatepicker:function(b){var d=a(b),c=a.data(b,"datepicker");if(d.hasClass(this.markerClassName)){var e=b.nodeName.toLowerCase();if("input"==e)b.disabled=!1,c.trigger.filter("button").each(function(){this.disabled=!1}).end().filter("img").css({opacity:"1.0",cursor:""});else if("div"==e||"span"==e)d=d.children("."+this._inlineClass),d.children().removeClass("ui-state-disabled"),d.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",!1);this._disabledInputs=a.map(this._disabledInputs,
function(a){return a==b?null:a})}},_disableDatepicker:function(b){var d=a(b),c=a.data(b,"datepicker");if(d.hasClass(this.markerClassName)){var e=b.nodeName.toLowerCase();if("input"==e)b.disabled=!0,c.trigger.filter("button").each(function(){this.disabled=!0}).end().filter("img").css({opacity:"0.5",cursor:"default"});else if("div"==e||"span"==e)d=d.children("."+this._inlineClass),d.children().addClass("ui-state-disabled"),d.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",
!0);this._disabledInputs=a.map(this._disabledInputs,function(a){return a==b?null:a});this._disabledInputs[this._disabledInputs.length]=b}},_isDisabledDatepicker:function(a){if(!a)return!1;for(var b=0;b<this._disabledInputs.length;b++)if(this._disabledInputs[b]==a)return!0;return!1},_getInst:function(b){try{return a.data(b,"datepicker")}catch(d){throw"Missing instance data for this datepicker";}},_optionDatepicker:function(b,d,f){var g=this._getInst(b);if(2==arguments.length&&"string"==typeof d)return"defaults"==
d?a.extend({},a.datepicker._defaults):g?"all"==d?a.extend({},g.settings):this._get(g,d):null;var q=d||{};"string"==typeof d&&(q={},q[d]=f);if(g){this._curInst==g&&this._hideDatepicker();var t=this._getDateDatepicker(b,!0),y=this._getMinMaxDate(g,"min"),u=this._getMinMaxDate(g,"max");e(g.settings,q);null!==y&&q.dateFormat!==c&&q.minDate===c&&(g.settings.minDate=this._formatDate(g,y));null!==u&&q.dateFormat!==c&&q.maxDate===c&&(g.settings.maxDate=this._formatDate(g,u));this._attachments(a(b),g);this._autoSize(g);
this._setDate(g,t);this._updateAlternate(g);this._updateDatepicker(g)}},_changeDatepicker:function(a,b,d){this._optionDatepicker(a,b,d)},_refreshDatepicker:function(a){(a=this._getInst(a))&&this._updateDatepicker(a)},_setDateDatepicker:function(a,b){var d=this._getInst(a);d&&(this._setDate(d,b),this._updateDatepicker(d),this._updateAlternate(d))},_getDateDatepicker:function(a,b){var d=this._getInst(a);d&&!d.inline&&this._setDateFromField(d,b);return d?this._getDate(d):null},_doKeyDown:function(b){var d=
a.datepicker._getInst(b.target),c=!0,e=d.dpDiv.is(".ui-datepicker-rtl");d._keyEvent=!0;if(a.datepicker._datepickerShowing)switch(b.keyCode){case 9:a.datepicker._hideDatepicker();c=!1;break;case 13:return c=a("td."+a.datepicker._dayOverClass+":not(."+a.datepicker._currentClass+")",d.dpDiv),c[0]&&a.datepicker._selectDay(b.target,d.selectedMonth,d.selectedYear,c[0]),(b=a.datepicker._get(d,"onSelect"))?(c=a.datepicker._formatDate(d),b.apply(d.input?d.input[0]:null,[c,d])):a.datepicker._hideDatepicker(),
!1;case 27:a.datepicker._hideDatepicker();break;case 33:a.datepicker._adjustDate(b.target,b.ctrlKey?-a.datepicker._get(d,"stepBigMonths"):-a.datepicker._get(d,"stepMonths"),"M");break;case 34:a.datepicker._adjustDate(b.target,b.ctrlKey?+a.datepicker._get(d,"stepBigMonths"):+a.datepicker._get(d,"stepMonths"),"M");break;case 35:(b.ctrlKey||b.metaKey)&&a.datepicker._clearDate(b.target);c=b.ctrlKey||b.metaKey;break;case 36:(b.ctrlKey||b.metaKey)&&a.datepicker._gotoToday(b.target);c=b.ctrlKey||b.metaKey;
break;case 37:(b.ctrlKey||b.metaKey)&&a.datepicker._adjustDate(b.target,e?1:-1,"D");c=b.ctrlKey||b.metaKey;b.originalEvent.altKey&&a.datepicker._adjustDate(b.target,b.ctrlKey?-a.datepicker._get(d,"stepBigMonths"):-a.datepicker._get(d,"stepMonths"),"M");break;case 38:(b.ctrlKey||b.metaKey)&&a.datepicker._adjustDate(b.target,-7,"D");c=b.ctrlKey||b.metaKey;break;case 39:(b.ctrlKey||b.metaKey)&&a.datepicker._adjustDate(b.target,e?-1:1,"D");c=b.ctrlKey||b.metaKey;b.originalEvent.altKey&&a.datepicker._adjustDate(b.target,
b.ctrlKey?+a.datepicker._get(d,"stepBigMonths"):+a.datepicker._get(d,"stepMonths"),"M");break;case 40:(b.ctrlKey||b.metaKey)&&a.datepicker._adjustDate(b.target,7,"D");c=b.ctrlKey||b.metaKey;break;default:c=!1}else 36==b.keyCode&&b.ctrlKey?a.datepicker._showDatepicker(this):c=!1;c&&(b.preventDefault(),b.stopPropagation())},_doKeyPress:function(b){var d=a.datepicker._getInst(b.target);if(a.datepicker._get(d,"constrainInput")){var d=a.datepicker._possibleChars(a.datepicker._get(d,"dateFormat")),e=String.fromCharCode(b.charCode==
c?b.keyCode:b.charCode);return b.ctrlKey||b.metaKey||" ">e||!d||-1<d.indexOf(e)}},_doKeyUp:function(b){b=a.datepicker._getInst(b.target);if(b.input.val()!=b.lastVal)try{a.datepicker.parseDate(a.datepicker._get(b,"dateFormat"),b.input?b.input.val():null,a.datepicker._getFormatConfig(b))&&(a.datepicker._setDateFromField(b),a.datepicker._updateAlternate(b),a.datepicker._updateDatepicker(b))}catch(d){a.datepicker.log(d)}return!0},_showDatepicker:function(b){b=b.target||b;"input"!=b.nodeName.toLowerCase()&&
(b=a("input",b.parentNode)[0]);if(!a.datepicker._isDisabledDatepicker(b)&&a.datepicker._lastInput!=b){var d=a.datepicker._getInst(b);a.datepicker._curInst&&a.datepicker._curInst!=d&&(a.datepicker._curInst.dpDiv.stop(!0,!0),d&&a.datepicker._datepickerShowing&&a.datepicker._hideDatepicker(a.datepicker._curInst.input[0]));var c=a.datepicker._get(d,"beforeShow"),c=c?c.apply(b,[b,d]):{};if(!1!==c){e(d.settings,c);d.lastVal=null;a.datepicker._lastInput=b;a.datepicker._setDateFromField(d);a.datepicker._inDialog&&
(b.value="");a.datepicker._pos||(a.datepicker._pos=a.datepicker._findPos(b),a.datepicker._pos[1]+=b.offsetHeight);var f=!1;a(b).parents().each(function(){f|="fixed"==a(this).css("position");return!f});c={left:a.datepicker._pos[0],top:a.datepicker._pos[1]};a.datepicker._pos=null;d.dpDiv.empty();d.dpDiv.css({position:"absolute",display:"block",top:"-1000px"});a.datepicker._updateDatepicker(d);c=a.datepicker._checkOffset(d,c,f);d.dpDiv.css({position:a.datepicker._inDialog&&a.blockUI?"static":f?"fixed":
"absolute",display:"none",left:c.left+"px",top:c.top+"px"});if(!d.inline){var c=a.datepicker._get(d,"showAnim"),g=a.datepicker._get(d,"duration"),t=function(){var b=d.dpDiv.find("iframe.ui-datepicker-cover");if(b.length){var c=a.datepicker._getBorders(d.dpDiv);b.css({left:-c[0],top:-c[1],width:d.dpDiv.outerWidth(),height:d.dpDiv.outerHeight()})}};d.dpDiv.zIndex(a(b).zIndex()+1);a.datepicker._datepickerShowing=!0;if(a.effects&&(a.effects.effect[c]||a.effects[c]))d.dpDiv.show(c,a.datepicker._get(d,
"showOptions"),g,t);else d.dpDiv[c||"show"](c?g:null,t);c&&g||t();d.input.is(":visible")&&!d.input.is(":disabled")&&d.input.focus();a.datepicker._curInst=d}}}},_updateDatepicker:function(b){this.maxRows=4;var d=a.datepicker._getBorders(b.dpDiv);g=b;b.dpDiv.empty().append(this._generateHTML(b));this._attachHandlers(b);var c=b.dpDiv.find("iframe.ui-datepicker-cover");c.length&&c.css({left:-d[0],top:-d[1],width:b.dpDiv.outerWidth(),height:b.dpDiv.outerHeight()});b.dpDiv.find("."+this._dayOverClass+" a").mouseover();
d=this._getNumberOfMonths(b);c=d[1];b.dpDiv.removeClass("ui-datepicker-multi-2 ui-datepicker-multi-3 ui-datepicker-multi-4").width("");1<c&&b.dpDiv.addClass("ui-datepicker-multi-"+c).css("width",17*c+"em");b.dpDiv[(1!=d[0]||1!=d[1]?"add":"remove")+"Class"]("ui-datepicker-multi");b.dpDiv[(this._get(b,"isRTL")?"add":"remove")+"Class"]("ui-datepicker-rtl");b==a.datepicker._curInst&&a.datepicker._datepickerShowing&&b.input&&b.input.is(":visible")&&!b.input.is(":disabled")&&b.input[0]!=document.activeElement&&
b.input.focus();if(b.yearshtml){var e=b.yearshtml;setTimeout(function(){e===b.yearshtml&&b.yearshtml&&b.dpDiv.find("select.ui-datepicker-year:first").replaceWith(b.yearshtml);e=b.yearshtml=null},0)}},_getBorders:function(a){var b=function(a){return{thin:1,medium:2,thick:3}[a]||a};return[parseFloat(b(a.css("border-left-width"))),parseFloat(b(a.css("border-top-width")))]},_checkOffset:function(b,d,c){var e=b.dpDiv.outerWidth(),f=b.dpDiv.outerHeight(),g=b.input?b.input.outerWidth():0,y=b.input?b.input.outerHeight():
0,u=document.documentElement.clientWidth+(c?0:a(document).scrollLeft()),C=document.documentElement.clientHeight+(c?0:a(document).scrollTop());d.left-=this._get(b,"isRTL")?e-g:0;d.left-=c&&d.left==b.input.offset().left?a(document).scrollLeft():0;d.top-=c&&d.top==b.input.offset().top+y?a(document).scrollTop():0;d.left-=Math.min(d.left,d.left+e>u&&u>e?Math.abs(d.left+e-u):0);d.top-=Math.min(d.top,d.top+f>C&&C>f?Math.abs(f+y):0);return d},_findPos:function(b){for(var d=this._getInst(b),d=this._get(d,
"isRTL");b&&("hidden"==b.type||1!=b.nodeType||a.expr.filters.hidden(b));)b=b[d?"previousSibling":"nextSibling"];b=a(b).offset();return[b.left,b.top]},_hideDatepicker:function(b){var d=this._curInst;if(d&&(!b||d==a.data(b,"datepicker"))&&this._datepickerShowing){b=this._get(d,"showAnim");var c=this._get(d,"duration"),e=function(){a.datepicker._tidyDialog(d)};if(a.effects&&(a.effects.effect[b]||a.effects[b]))d.dpDiv.hide(b,a.datepicker._get(d,"showOptions"),c,e);else d.dpDiv["slideDown"==b?"slideUp":
"fadeIn"==b?"fadeOut":"hide"](b?c:null,e);b||e();this._datepickerShowing=!1;(b=this._get(d,"onClose"))&&b.apply(d.input?d.input[0]:null,[d.input?d.input.val():"",d]);this._lastInput=null;this._inDialog&&(this._dialogInput.css({position:"absolute",left:"0",top:"-100px"}),a.blockUI&&(a.unblockUI(),a("body").append(this.dpDiv)));this._inDialog=!1}},_tidyDialog:function(a){a.dpDiv.removeClass(this._dialogClass).unbind(".ui-datepicker-calendar")},_checkExternalClick:function(b){if(a.datepicker._curInst){b=
a(b.target);var d=a.datepicker._getInst(b[0]);(!(b[0].id==a.datepicker._mainDivId||0!=b.parents("#"+a.datepicker._mainDivId).length||b.hasClass(a.datepicker.markerClassName)||b.closest("."+a.datepicker._triggerClass).length||!a.datepicker._datepickerShowing||a.datepicker._inDialog&&a.blockUI)||b.hasClass(a.datepicker.markerClassName)&&a.datepicker._curInst!=d)&&a.datepicker._hideDatepicker()}},_adjustDate:function(b,d,c){b=a(b);var e=this._getInst(b[0]);this._isDisabledDatepicker(b[0])||(this._adjustInstDate(e,
d+("M"==c?this._get(e,"showCurrentAtPos"):0),c),this._updateDatepicker(e))},_gotoToday:function(b){b=a(b);var d=this._getInst(b[0]);if(this._get(d,"gotoCurrent")&&d.currentDay)d.selectedDay=d.currentDay,d.drawMonth=d.selectedMonth=d.currentMonth,d.drawYear=d.selectedYear=d.currentYear;else{var c=new Date;d.selectedDay=c.getDate();d.drawMonth=d.selectedMonth=c.getMonth();d.drawYear=d.selectedYear=c.getFullYear()}this._notifyChange(d);this._adjustDate(b)},_selectMonthYear:function(b,d,c){b=a(b);var e=
this._getInst(b[0]);e["selected"+("M"==c?"Month":"Year")]=e["draw"+("M"==c?"Month":"Year")]=parseInt(d.options[d.selectedIndex].value,10);this._notifyChange(e);this._adjustDate(b)},_selectDay:function(b,d,c,e){var f=a(b);a(e).hasClass(this._unselectableClass)||this._isDisabledDatepicker(f[0])||(f=this._getInst(f[0]),f.selectedDay=f.currentDay=a("a",e).html(),f.selectedMonth=f.currentMonth=d,f.selectedYear=f.currentYear=c,this._selectDate(b,this._formatDate(f,f.currentDay,f.currentMonth,f.currentYear)))},
_clearDate:function(b){b=a(b);this._getInst(b[0]);this._selectDate(b,"")},_selectDate:function(b,d){var c=a(b),c=this._getInst(c[0]);d=null!=d?d:this._formatDate(c);c.input&&c.input.val(d);this._updateAlternate(c);var e=this._get(c,"onSelect");e?e.apply(c.input?c.input[0]:null,[d,c]):c.input&&c.input.trigger("change");c.inline?this._updateDatepicker(c):(this._hideDatepicker(),this._lastInput=c.input[0],"object"!=typeof c.input[0]&&c.input.focus(),this._lastInput=null)},_updateAlternate:function(b){var d=
this._get(b,"altField");if(d){var c=this._get(b,"altFormat")||this._get(b,"dateFormat"),e=this._getDate(b),f=this.formatDate(c,e,this._getFormatConfig(b));a(d).each(function(){a(this).val(f)})}},noWeekends:function(a){a=a.getDay();return[0<a&&6>a,""]},iso8601Week:function(a){a=new Date(a.getTime());a.setDate(a.getDate()+4-(a.getDay()||7));var b=a.getTime();a.setMonth(0);a.setDate(1);return Math.floor(Math.round((b-a)/864E5)/7)+1},parseDate:function(b,d,c){if(null==b||null==d)throw"Invalid arguments";
d="object"==typeof d?d.toString():d+"";if(""==d)return null;for(var e=(c?c.shortYearCutoff:null)||this._defaults.shortYearCutoff,e="string"!=typeof e?e:(new Date).getFullYear()%100+parseInt(e,10),f=(c?c.dayNamesShort:null)||this._defaults.dayNamesShort,g=(c?c.dayNames:null)||this._defaults.dayNames,y=(c?c.monthNamesShort:null)||this._defaults.monthNamesShort,u=(c?c.monthNames:null)||this._defaults.monthNames,C=c=-1,B=-1,I=-1,F=!1,A=function(a){(a=O+1<b.length&&b.charAt(O+1)==a)&&O++;return a},r=function(a){var b=
A(a);a=new RegExp("^\\d{1,"+("@"==a?14:"!"==a?20:"y"==a&&b?4:"o"==a?3:2)+"}");a=d.substring(H).match(a);if(!a)throw"Missing number at position "+H;H+=a[0].length;return parseInt(a[0],10)},v=function(b,c,e){b=a.map(A(b)?e:c,function(a,b){return[[b,a]]}).sort(function(a,b){return-(a[1].length-b[1].length)});var f=-1;a.each(b,function(a,b){var c=b[1];if(d.substr(H,c.length).toLowerCase()==c.toLowerCase())return f=b[0],H+=c.length,!1});if(-1!=f)return f+1;throw"Unknown name at position "+H;},z=function(){if(d.charAt(H)!=
b.charAt(O))throw"Unexpected literal at position "+H;H++},H=0,O=0;O<b.length;O++)if(F)"'"!=b.charAt(O)||A("'")?z():F=!1;else switch(b.charAt(O)){case "d":B=r("d");break;case "D":v("D",f,g);break;case "o":I=r("o");break;case "m":C=r("m");break;case "M":C=v("M",y,u);break;case "y":c=r("y");break;case "@":var T=new Date(r("@"));c=T.getFullYear();C=T.getMonth()+1;B=T.getDate();break;case "!":T=new Date((r("!")-this._ticksTo1970)/1E4);c=T.getFullYear();C=T.getMonth()+1;B=T.getDate();break;case "'":A("'")?
z():F=!0;break;default:z()}if(H<d.length&&(f=d.substr(H),!/^\s+/.test(f)))throw"Extra/unparsed characters found in date: "+f;-1==c?c=(new Date).getFullYear():100>c&&(c+=(new Date).getFullYear()-(new Date).getFullYear()%100+(c<=e?0:-100));if(-1<I){C=1;B=I;do{e=this._getDaysInMonth(c,C-1);if(B<=e)break;C++;B-=e}while(1)}T=this._daylightSavingAdjust(new Date(c,C-1,B));if(T.getFullYear()!=c||T.getMonth()+1!=C||T.getDate()!=B)throw"Invalid date";return T},ATOM:"yy-mm-dd",COOKIE:"D, dd M yy",ISO_8601:"yy-mm-dd",
RFC_822:"D, d M y",RFC_850:"DD, dd-M-y",RFC_1036:"D, d M y",RFC_1123:"D, d M yy",RFC_2822:"D, d M yy",RSS:"D, d M y",TICKS:"!",TIMESTAMP:"@",W3C:"yy-mm-dd",_ticksTo1970:864E9*(718685+Math.floor(492.5)-Math.floor(19.7)+Math.floor(4.925)),formatDate:function(a,b,d){if(!b)return"";var c=(d?d.dayNamesShort:null)||this._defaults.dayNamesShort,e=(d?d.dayNames:null)||this._defaults.dayNames,f=(d?d.monthNamesShort:null)||this._defaults.monthNamesShort;d=(d?d.monthNames:null)||this._defaults.monthNames;var g=
function(b){(b=F+1<a.length&&a.charAt(F+1)==b)&&F++;return b},u=function(a,b,d){b=""+b;if(g(a))for(;b.length<d;)b="0"+b;return b},C=function(a,b,d,c){return g(a)?c[b]:d[b]},B="",I=!1;if(b)for(var F=0;F<a.length;F++)if(I)"'"!=a.charAt(F)||g("'")?B+=a.charAt(F):I=!1;else switch(a.charAt(F)){case "d":B+=u("d",b.getDate(),2);break;case "D":B+=C("D",b.getDay(),c,e);break;case "o":B+=u("o",Math.round(((new Date(b.getFullYear(),b.getMonth(),b.getDate())).getTime()-(new Date(b.getFullYear(),0,0)).getTime())/
864E5),3);break;case "m":B+=u("m",b.getMonth()+1,2);break;case "M":B+=C("M",b.getMonth(),f,d);break;case "y":B+=g("y")?b.getFullYear():(10>b.getYear()%100?"0":"")+b.getYear()%100;break;case "@":B+=b.getTime();break;case "!":B+=1E4*b.getTime()+this._ticksTo1970;break;case "'":g("'")?B+="'":I=!0;break;default:B+=a.charAt(F)}return B},_possibleChars:function(a){for(var b="",d=!1,c=function(b){(b=e+1<a.length&&a.charAt(e+1)==b)&&e++;return b},e=0;e<a.length;e++)if(d)"'"!=a.charAt(e)||c("'")?b+=a.charAt(e):
d=!1;else switch(a.charAt(e)){case "d":case "m":case "y":case "@":b+="0123456789";break;case "D":case "M":return null;case "'":c("'")?b+="'":d=!0;break;default:b+=a.charAt(e)}return b},_get:function(a,b){return a.settings[b]!==c?a.settings[b]:this._defaults[b]},_setDateFromField:function(a,b){if(a.input.val()!=a.lastVal){var d=this._get(a,"dateFormat"),c=a.lastVal=a.input?a.input.val():null,e,f;e=f=this._getDefaultDate(a);var g=this._getFormatConfig(a);try{e=this.parseDate(d,c,g)||f}catch(u){this.log(u),
c=b?"":c}a.selectedDay=e.getDate();a.drawMonth=a.selectedMonth=e.getMonth();a.drawYear=a.selectedYear=e.getFullYear();a.currentDay=c?e.getDate():0;a.currentMonth=c?e.getMonth():0;a.currentYear=c?e.getFullYear():0;this._adjustInstDate(a)}},_getDefaultDate:function(a){return this._restrictMinMax(a,this._determineDate(a,this._get(a,"defaultDate"),new Date))},_determineDate:function(b,d,c){var e=function(a){var b=new Date;b.setDate(b.getDate()+a);return b},f=function(d){try{return a.datepicker.parseDate(a.datepicker._get(b,
"dateFormat"),d,a.datepicker._getFormatConfig(b))}catch(c){}for(var e=(d.toLowerCase().match(/^c/)?a.datepicker._getDate(b):null)||new Date,f=e.getFullYear(),g=e.getMonth(),e=e.getDate(),l=/([+-]?[0-9]+)\s*(d|D|w|W|m|M|y|Y)?/g,m=l.exec(d);m;){switch(m[2]||"d"){case "d":case "D":e+=parseInt(m[1],10);break;case "w":case "W":e+=7*parseInt(m[1],10);break;case "m":case "M":g+=parseInt(m[1],10);e=Math.min(e,a.datepicker._getDaysInMonth(f,g));break;case "y":case "Y":f+=parseInt(m[1],10),e=Math.min(e,a.datepicker._getDaysInMonth(f,
g))}m=l.exec(d)}return new Date(f,g,e)};if(d=(d=null==d||""===d?c:"string"==typeof d?f(d):"number"==typeof d?isNaN(d)?c:e(d):new Date(d.getTime()))&&"Invalid Date"==d.toString()?c:d)d.setHours(0),d.setMinutes(0),d.setSeconds(0),d.setMilliseconds(0);return this._daylightSavingAdjust(d)},_daylightSavingAdjust:function(a){if(!a)return null;a.setHours(12<a.getHours()?a.getHours()+2:0);return a},_setDate:function(a,b,d){var c=!b,e=a.selectedMonth,f=a.selectedYear;b=this._restrictMinMax(a,this._determineDate(a,
b,new Date));a.selectedDay=a.currentDay=b.getDate();a.drawMonth=a.selectedMonth=a.currentMonth=b.getMonth();a.drawYear=a.selectedYear=a.currentYear=b.getFullYear();e==a.selectedMonth&&f==a.selectedYear||d||this._notifyChange(a);this._adjustInstDate(a);a.input&&a.input.val(c?"":this._formatDate(a))},_getDate:function(a){return!a.currentYear||a.input&&""==a.input.val()?null:this._daylightSavingAdjust(new Date(a.currentYear,a.currentMonth,a.currentDay))},_attachHandlers:function(b){var d=this._get(b,
"stepMonths"),c="#"+b.id.replace(/\\\\/g,"\\");b.dpDiv.find("[data-handler]").map(function(){a(this).bind(this.getAttribute("data-event"),{prev:function(){window["DP_jQuery_"+f].datepicker._adjustDate(c,-d,"M")},next:function(){window["DP_jQuery_"+f].datepicker._adjustDate(c,+d,"M")},hide:function(){window["DP_jQuery_"+f].datepicker._hideDatepicker()},today:function(){window["DP_jQuery_"+f].datepicker._gotoToday(c)},selectDay:function(){window["DP_jQuery_"+f].datepicker._selectDay(c,+this.getAttribute("data-month"),
+this.getAttribute("data-year"),this);return!1},selectMonth:function(){window["DP_jQuery_"+f].datepicker._selectMonthYear(c,this,"M");return!1},selectYear:function(){window["DP_jQuery_"+f].datepicker._selectMonthYear(c,this,"Y");return!1}}[this.getAttribute("data-handler")])})},_generateHTML:function(b){var d=new Date,d=this._daylightSavingAdjust(new Date(d.getFullYear(),d.getMonth(),d.getDate())),c=this._get(b,"isRTL"),e=this._get(b,"showButtonPanel"),f=this._get(b,"hideIfNoPrevNext"),g=this._get(b,
"navigationAsDateFormat"),y=this._getNumberOfMonths(b),u=this._get(b,"showCurrentAtPos"),C=this._get(b,"stepMonths"),B=1!=y[0]||1!=y[1],I=this._daylightSavingAdjust(b.currentDay?new Date(b.currentYear,b.currentMonth,b.currentDay):new Date(9999,9,9)),F=this._getMinMaxDate(b,"min"),A=this._getMinMaxDate(b,"max"),u=b.drawMonth-u,r=b.drawYear;0>u&&(u+=12,r--);if(A)for(var v=this._daylightSavingAdjust(new Date(A.getFullYear(),A.getMonth()-y[0]*y[1]+1,A.getDate())),v=F&&v<F?F:v;this._daylightSavingAdjust(new Date(r,
u,1))>v;)u--,0>u&&(u=11,r--);b.drawMonth=u;b.drawYear=r;var v=this._get(b,"prevText"),v=g?this.formatDate(v,this._daylightSavingAdjust(new Date(r,u-C,1)),this._getFormatConfig(b)):v,v=this._canAdjustMonth(b,-1,r,u)?'<a class="ui-datepicker-prev ui-corner-all" data-handler="prev" data-event="click" title="'+v+'"><span class="ui-icon ui-icon-circle-triangle-'+(c?"e":"w")+'">'+v+"</span></a>":f?"":'<a class="ui-datepicker-prev ui-corner-all ui-state-disabled" title="'+v+'"><span class="ui-icon ui-icon-circle-triangle-'+
(c?"e":"w")+'">'+v+"</span></a>",z=this._get(b,"nextText"),z=g?this.formatDate(z,this._daylightSavingAdjust(new Date(r,u+C,1)),this._getFormatConfig(b)):z,f=this._canAdjustMonth(b,1,r,u)?'<a class="ui-datepicker-next ui-corner-all" data-handler="next" data-event="click" title="'+z+'"><span class="ui-icon ui-icon-circle-triangle-'+(c?"w":"e")+'">'+z+"</span></a>":f?"":'<a class="ui-datepicker-next ui-corner-all ui-state-disabled" title="'+z+'"><span class="ui-icon ui-icon-circle-triangle-'+(c?"w":
"e")+'">'+z+"</span></a>",C=this._get(b,"currentText"),z=this._get(b,"gotoCurrent")&&b.currentDay?I:d,C=g?this.formatDate(C,z,this._getFormatConfig(b)):C,g=b.inline?"":'<button type="button" class="ui-datepicker-close ui-state-default ui-priority-primary ui-corner-all" data-handler="hide" data-event="click">'+this._get(b,"closeText")+"</button>",e=e?'<div class="ui-datepicker-buttonpane ui-widget-content">'+(c?g:"")+(this._isInRange(b,z)?'<button type="button" class="ui-datepicker-current ui-state-default ui-priority-secondary ui-corner-all" data-handler="today" data-event="click">'+
C+"</button>":"")+(c?"":g)+"</div>":"",g=parseInt(this._get(b,"firstDay"),10),g=isNaN(g)?0:g,C=this._get(b,"showWeek"),z=this._get(b,"dayNames");this._get(b,"dayNamesShort");var H=this._get(b,"dayNamesMin"),O=this._get(b,"monthNames"),T=this._get(b,"monthNamesShort"),J=this._get(b,"beforeShowDay"),Z=this._get(b,"showOtherMonths"),na=this._get(b,"selectOtherMonths");this._get(b,"calculateWeek");for(var sa=this._getDefaultDate(b),ia="",aa=0;aa<y[0];aa++){var ja="";this.maxRows=4;for(var ca=0;ca<y[1];ca++){var fa=
this._daylightSavingAdjust(new Date(r,u,b.selectedDay)),ba=" ui-corner-all",la="";if(B){la+='<div class="ui-datepicker-group';if(1<y[1])switch(ca){case 0:la+=" ui-datepicker-group-first";ba=" ui-corner-"+(c?"right":"left");break;case y[1]-1:la+=" ui-datepicker-group-last";ba=" ui-corner-"+(c?"left":"right");break;default:la+=" ui-datepicker-group-middle",ba=""}la+='">'}for(var la=la+('<div class="ui-datepicker-header ui-widget-header ui-helper-clearfix'+ba+'">'+(/all|left/.test(ba)&&0==aa?c?f:v:"")+
(/all|right/.test(ba)&&0==aa?c?v:f:"")+this._generateMonthYearHeader(b,u,r,F,A,0<aa||0<ca,O,T)+'</div><table class="ui-datepicker-calendar"><thead><tr>'),L=C?'<th class="ui-datepicker-week-col">'+this._get(b,"weekHeader")+"</th>":"",ba=0;7>ba;ba++)var R=(ba+g)%7,L=L+("<th"+(5<=(ba+g+6)%7?' class="ui-datepicker-week-end"':"")+'><span title="'+z[R]+'">'+H[R]+"</span></th>");la+=L+"</tr></thead><tbody>";L=this._getDaysInMonth(r,u);r==b.selectedYear&&u==b.selectedMonth&&(b.selectedDay=Math.min(b.selectedDay,
L));ba=(this._getFirstDayOfMonth(r,u)-g+7)%7;L=Math.ceil((ba+L)/7);this.maxRows=L=B?this.maxRows>L?this.maxRows:L:L;for(var R=this._daylightSavingAdjust(new Date(r,u,1-ba)),Xa=0;Xa<L;Xa++){for(var la=la+"<tr>",Ya=C?'<td class="ui-datepicker-week-col">'+this._get(b,"calculateWeek")(R)+"</td>":"",ba=0;7>ba;ba++){var Oa=J?J.apply(b.input?b.input[0]:null,[R]):[!0,""],Ia=R.getMonth()!=u,za=Ia&&!na||!Oa[0]||F&&R<F||A&&R>A,Ya=Ya+('<td class="'+(5<=(ba+g+6)%7?" ui-datepicker-week-end":"")+(Ia?" ui-datepicker-other-month":
"")+(R.getTime()==fa.getTime()&&u==b.selectedMonth&&b._keyEvent||sa.getTime()==R.getTime()&&sa.getTime()==fa.getTime()?" "+this._dayOverClass:"")+(za?" "+this._unselectableClass+" ui-state-disabled":"")+(Ia&&!Z?"":" "+Oa[1]+(R.getTime()==I.getTime()?" "+this._currentClass:"")+(R.getTime()==d.getTime()?" ui-datepicker-today":""))+'"'+(Ia&&!Z||!Oa[2]?"":' title="'+Oa[2]+'"')+(za?"":' data-handler="selectDay" data-event="click" data-month="'+R.getMonth()+'" data-year="'+R.getFullYear()+'"')+">"+(Ia&&
!Z?"&#xa0;":za?'<span class="ui-state-default">'+R.getDate()+"</span>":'<a class="ui-state-default'+(R.getTime()==d.getTime()?" ui-state-highlight":"")+(R.getTime()==I.getTime()?" ui-state-active":"")+(Ia?" ui-priority-secondary":"")+'" href="#">'+R.getDate()+"</a>")+"</td>");R.setDate(R.getDate()+1);R=this._daylightSavingAdjust(R)}la+=Ya+"</tr>"}u++;11<u&&(u=0,r++);la+="</tbody></table>"+(B?"</div>"+(0<y[0]&&ca==y[1]-1?'<div class="ui-datepicker-row-break"></div>':""):"");ja+=la}ia+=ja}ia+=e+(a.ui.ie6&&
!b.inline?'<iframe src="javascript:false;" class="ui-datepicker-cover" frameborder="0"></iframe>':"");b._keyEvent=!1;return ia},_generateMonthYearHeader:function(a,b,d,c,e,f,g,u){var C=this._get(a,"changeMonth"),B=this._get(a,"changeYear"),I=this._get(a,"showMonthAfterYear"),F='<div class="ui-datepicker-title">',A="";if(f||!C)A+='<span class="ui-datepicker-month">'+g[b]+"</span>";else{g=c&&c.getFullYear()==d;for(var r=e&&e.getFullYear()==d,A=A+'<select class="ui-datepicker-month" data-handler="selectMonth" data-event="change">',
v=0;12>v;v++)(!g||v>=c.getMonth())&&(!r||v<=e.getMonth())&&(A+='<option value="'+v+'"'+(v==b?' selected="selected"':"")+">"+u[v]+"</option>");A+="</select>"}I||(F+=A+(!f&&C&&B?"":"&#xa0;"));if(!a.yearshtml)if(a.yearshtml="",f||!B)F+='<span class="ui-datepicker-year">'+d+"</span>";else{u=this._get(a,"yearRange").split(":");var z=(new Date).getFullYear();g=function(a){a=a.match(/c[+-].*/)?d+parseInt(a.substring(1),10):a.match(/[+-].*/)?z+parseInt(a,10):parseInt(a,10);return isNaN(a)?z:a};b=g(u[0]);
u=Math.max(b,g(u[1]||""));b=c?Math.max(b,c.getFullYear()):b;u=e?Math.min(u,e.getFullYear()):u;for(a.yearshtml+='<select class="ui-datepicker-year" data-handler="selectYear" data-event="change">';b<=u;b++)a.yearshtml+='<option value="'+b+'"'+(b==d?' selected="selected"':"")+">"+b+"</option>";a.yearshtml+="</select>";F+=a.yearshtml;a.yearshtml=null}F+=this._get(a,"yearSuffix");I&&(F+=(!f&&C&&B?"":"&#xa0;")+A);return F+"</div>"},_adjustInstDate:function(a,b,d){var c=a.drawYear+("Y"==d?b:0),e=a.drawMonth+
("M"==d?b:0);b=Math.min(a.selectedDay,this._getDaysInMonth(c,e))+("D"==d?b:0);c=this._restrictMinMax(a,this._daylightSavingAdjust(new Date(c,e,b)));a.selectedDay=c.getDate();a.drawMonth=a.selectedMonth=c.getMonth();a.drawYear=a.selectedYear=c.getFullYear();"M"!=d&&"Y"!=d||this._notifyChange(a)},_restrictMinMax:function(a,b){var d=this._getMinMaxDate(a,"min"),c=this._getMinMaxDate(a,"max"),d=d&&b<d?d:b;return c&&d>c?c:d},_notifyChange:function(a){var b=this._get(a,"onChangeMonthYear");b&&b.apply(a.input?
a.input[0]:null,[a.selectedYear,a.selectedMonth+1,a])},_getNumberOfMonths:function(a){a=this._get(a,"numberOfMonths");return null==a?[1,1]:"number"==typeof a?[1,a]:a},_getMinMaxDate:function(a,b){return this._determineDate(a,this._get(a,b+"Date"),null)},_getDaysInMonth:function(a,b){return 32-this._daylightSavingAdjust(new Date(a,b,32)).getDate()},_getFirstDayOfMonth:function(a,b){return(new Date(a,b,1)).getDay()},_canAdjustMonth:function(a,b,d,c){var e=this._getNumberOfMonths(a);d=this._daylightSavingAdjust(new Date(d,
c+(0>b?b:e[0]*e[1]),1));0>b&&d.setDate(this._getDaysInMonth(d.getFullYear(),d.getMonth()));return this._isInRange(a,d)},_isInRange:function(a,b){var d=this._getMinMaxDate(a,"min"),c=this._getMinMaxDate(a,"max");return(!d||b.getTime()>=d.getTime())&&(!c||b.getTime()<=c.getTime())},_getFormatConfig:function(a){var b=this._get(a,"shortYearCutoff"),b="string"!=typeof b?b:(new Date).getFullYear()%100+parseInt(b,10);return{shortYearCutoff:b,dayNamesShort:this._get(a,"dayNamesShort"),dayNames:this._get(a,
"dayNames"),monthNamesShort:this._get(a,"monthNamesShort"),monthNames:this._get(a,"monthNames")}},_formatDate:function(a,b,d,c){b||(a.currentDay=a.selectedDay,a.currentMonth=a.selectedMonth,a.currentYear=a.selectedYear);b=b?"object"==typeof b?b:this._daylightSavingAdjust(new Date(c,d,b)):this._daylightSavingAdjust(new Date(a.currentYear,a.currentMonth,a.currentDay));return this.formatDate(this._get(a,"dateFormat"),b,this._getFormatConfig(a))}});a.fn.datepicker=function(b){if(!this.length)return this;
a.datepicker.initialized||(a(document).mousedown(a.datepicker._checkExternalClick).find(document.body).append(a.datepicker.dpDiv),a.datepicker.initialized=!0);var d=Array.prototype.slice.call(arguments,1);return"string"==typeof b&&("isDisabled"==b||"getDate"==b||"widget"==b)||"option"==b&&2==arguments.length&&"string"==typeof arguments[1]?a.datepicker["_"+b+"Datepicker"].apply(a.datepicker,[this[0]].concat(d)):this.each(function(){"string"==typeof b?a.datepicker["_"+b+"Datepicker"].apply(a.datepicker,
[this].concat(d)):a.datepicker._attachDatepicker(this,b)})};a.datepicker=new b;a.datepicker.initialized=!1;a.datepicker.uuid=(new Date).getTime();a.datepicker.version="1.9.1";window["DP_jQuery_"+f]=a})(jQuery);
(function(a,c){var b={buttons:!0,height:!0,maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0,width:!0},d={maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0};a.widget("ui.dialog",{version:"1.9.1",options:{autoOpen:!0,buttons:{},closeOnEscape:!0,closeText:"close",dialogClass:"",draggable:!0,hide:null,height:"auto",maxHeight:!1,maxWidth:!1,minHeight:150,minWidth:150,modal:!1,position:{my:"center",at:"center",of:window,collision:"fit",using:function(b){var d=a(this).css(b).offset().top;0>d&&a(this).css("top",
b.top-d)}},resizable:!0,show:null,stack:!0,title:"",width:300,zIndex:1E3},_create:function(){this.originalTitle=this.element.attr("title");"string"!==typeof this.originalTitle&&(this.originalTitle="");this.oldPosition={parent:this.element.parent(),index:this.element.parent().children().index(this.element)};this.options.title=this.options.title||this.originalTitle;var b=this,d=this.options,c=d.title||"&#160;",h,l,m,p;h=(this.uiDialog=a("<div>")).addClass("ui-dialog ui-widget ui-widget-content ui-corner-all "+
d.dialogClass).css({display:"none",outline:0,zIndex:d.zIndex}).attr("tabIndex",-1).keydown(function(c){d.closeOnEscape&&!c.isDefaultPrevented()&&c.keyCode&&c.keyCode===a.ui.keyCode.ESCAPE&&(b.close(c),c.preventDefault())}).mousedown(function(a){b.moveToTop(!1,a)}).appendTo("body");this.element.show().removeAttr("title").addClass("ui-dialog-content ui-widget-content").appendTo(h);l=(this.uiDialogTitlebar=a("<div>")).addClass("ui-dialog-titlebar  ui-widget-header  ui-corner-all  ui-helper-clearfix").bind("mousedown",
function(){h.focus()}).prependTo(h);m=a("<a href='#'></a>").addClass("ui-dialog-titlebar-close  ui-corner-all").attr("role","button").click(function(a){a.preventDefault();b.close(a)}).appendTo(l);(this.uiDialogTitlebarCloseText=a("<span>")).addClass("ui-icon ui-icon-closethick").text(d.closeText).appendTo(m);c=a("<span>").uniqueId().addClass("ui-dialog-title").html(c).prependTo(l);p=(this.uiDialogButtonPane=a("<div>")).addClass("ui-dialog-buttonpane ui-widget-content ui-helper-clearfix");(this.uiButtonSet=
a("<div>")).addClass("ui-dialog-buttonset").appendTo(p);h.attr({role:"dialog","aria-labelledby":c.attr("id")});l.find("*").add(l).disableSelection();this._hoverable(m);this._focusable(m);d.draggable&&a.fn.draggable&&this._makeDraggable();d.resizable&&a.fn.resizable&&this._makeResizable();this._createButtons(d.buttons);this._isOpen=!1;a.fn.bgiframe&&h.bgiframe();this._on(h,{keydown:function(b){if(d.modal&&b.keyCode===a.ui.keyCode.TAB){var c=a(":tabbable",h),e=c.filter(":first"),c=c.filter(":last");
if(b.target===c[0]&&!b.shiftKey)return e.focus(1),!1;if(b.target===e[0]&&b.shiftKey)return c.focus(1),!1}}})},_init:function(){this.options.autoOpen&&this.open()},_destroy:function(){var a,b=this.oldPosition;this.overlay&&this.overlay.destroy();this.uiDialog.hide();this.element.removeClass("ui-dialog-content ui-widget-content").hide().appendTo("body");this.uiDialog.remove();this.originalTitle&&this.element.attr("title",this.originalTitle);a=b.parent.children().eq(b.index);a.length&&a[0]!==this.element[0]?
a.before(this.element):b.parent.append(this.element)},widget:function(){return this.uiDialog},close:function(b){var d=this,c,h;if(this._isOpen&&!1!==this._trigger("beforeClose",b))return this._isOpen=!1,this.overlay&&this.overlay.destroy(),this.options.hide?this._hide(this.uiDialog,this.options.hide,function(){d._trigger("close",b)}):(this.uiDialog.hide(),this._trigger("close",b)),a.ui.dialog.overlay.resize(),this.options.modal&&(c=0,a(".ui-dialog").each(function(){this!==d.uiDialog[0]&&(h=a(this).css("z-index"),
isNaN(h)||(c=Math.max(c,h)))}),a.ui.dialog.maxZ=c),this},isOpen:function(){return this._isOpen},moveToTop:function(b,d){var c=this.options;if(c.modal&&!b||!c.stack&&!c.modal)return this._trigger("focus",d);c.zIndex>a.ui.dialog.maxZ&&(a.ui.dialog.maxZ=c.zIndex);this.overlay&&(a.ui.dialog.maxZ+=1,a.ui.dialog.overlay.maxZ=a.ui.dialog.maxZ,this.overlay.$el.css("z-index",a.ui.dialog.overlay.maxZ));c={scrollTop:this.element.scrollTop(),scrollLeft:this.element.scrollLeft()};a.ui.dialog.maxZ+=1;this.uiDialog.css("z-index",
a.ui.dialog.maxZ);this.element.attr(c);this._trigger("focus",d);return this},open:function(){if(!this._isOpen){var b;b=this.options;var d=this.uiDialog;this._size();this._position(b.position);d.show(b.show);this.overlay=b.modal?new a.ui.dialog.overlay(this):null;this.moveToTop(!0);b=this.element.find(":tabbable");b.length||(b=this.uiDialogButtonPane.find(":tabbable"),b.length||(b=d));b.eq(0).focus();this._isOpen=!0;this._trigger("open");return this}},_createButtons:function(b){var d=this,c=!1;this.uiDialogButtonPane.remove();
this.uiButtonSet.empty();"object"===typeof b&&null!==b&&a.each(b,function(){return!(c=!0)});c?(a.each(b,function(b,c){c=a.isFunction(c)?{click:c,text:b}:c;var e=a("<button type='button'></button>").attr(c,!0).unbind("click").click(function(){c.click.apply(d.element[0],arguments)}).appendTo(d.uiButtonSet);a.fn.button&&e.button()}),this.uiDialog.addClass("ui-dialog-buttons"),this.uiDialogButtonPane.appendTo(this.uiDialog)):this.uiDialog.removeClass("ui-dialog-buttons")},_makeDraggable:function(){function b(a){return{position:a.position,
offset:a.offset}}var d=this,c=this.options;this.uiDialog.draggable({cancel:".ui-dialog-content, .ui-dialog-titlebar-close",handle:".ui-dialog-titlebar",containment:"document",start:function(c,g){a(this).addClass("ui-dialog-dragging");d._trigger("dragStart",c,b(g))},drag:function(a,c){d._trigger("drag",a,b(c))},stop:function(h,l){c.position=[l.position.left-d.document.scrollLeft(),l.position.top-d.document.scrollTop()];a(this).removeClass("ui-dialog-dragging");d._trigger("dragStop",h,b(l));a.ui.dialog.overlay.resize()}})},
_makeResizable:function(b){function d(a){return{originalPosition:a.originalPosition,originalSize:a.originalSize,position:a.position,size:a.size}}b=b===c?this.options.resizable:b;var g=this,h=this.options,l=this.uiDialog.css("position");b="string"===typeof b?b:"n,e,s,w,se,sw,ne,nw";this.uiDialog.resizable({cancel:".ui-dialog-content",containment:"document",alsoResize:this.element,maxWidth:h.maxWidth,maxHeight:h.maxHeight,minWidth:h.minWidth,minHeight:this._minHeight(),handles:b,start:function(b,c){a(this).addClass("ui-dialog-resizing");
g._trigger("resizeStart",b,d(c))},resize:function(a,b){g._trigger("resize",a,d(b))},stop:function(b,c){a(this).removeClass("ui-dialog-resizing");h.height=a(this).height();h.width=a(this).width();g._trigger("resizeStop",b,d(c));a.ui.dialog.overlay.resize()}}).css("position",l).find(".ui-resizable-se").addClass("ui-icon ui-icon-grip-diagonal-se")},_minHeight:function(){var a=this.options;return"auto"===a.height?a.minHeight:Math.min(a.minHeight,a.height)},_position:function(b){var d=[],c=[0,0],h;if(b){if("string"===
typeof b||"object"===typeof b&&"0"in b)d=b.split?b.split(" "):[b[0],b[1]],1===d.length&&(d[1]=d[0]),a.each(["left","top"],function(a,b){+d[a]===d[a]&&(c[a]=d[a],d[a]=b)}),b={my:d[0]+(0>c[0]?c[0]:"+"+c[0])+" "+d[1]+(0>c[1]?c[1]:"+"+c[1]),at:d.join(" ")};b=a.extend({},a.ui.dialog.prototype.options.position,b)}else b=a.ui.dialog.prototype.options.position;(h=this.uiDialog.is(":visible"))||this.uiDialog.show();this.uiDialog.position(b);h||this.uiDialog.hide()},_setOptions:function(c){var f=this,g={},
h=!1;a.each(c,function(a,c){f._setOption(a,c);a in b&&(h=!0);a in d&&(g[a]=c)});h&&this._size();this.uiDialog.is(":data(resizable)")&&this.uiDialog.resizable("option",g)},_setOption:function(b,d){var c,h=this.uiDialog;switch(b){case "buttons":this._createButtons(d);break;case "closeText":this.uiDialogTitlebarCloseText.text(""+d);break;case "dialogClass":h.removeClass(this.options.dialogClass).addClass("ui-dialog ui-widget ui-widget-content ui-corner-all "+d);break;case "disabled":d?h.addClass("ui-dialog-disabled"):
h.removeClass("ui-dialog-disabled");break;case "draggable":(c=h.is(":data(draggable)"))&&!d&&h.draggable("destroy");!c&&d&&this._makeDraggable();break;case "position":this._position(d);break;case "resizable":(c=h.is(":data(resizable)"))&&!d&&h.resizable("destroy");c&&"string"===typeof d&&h.resizable("option","handles",d);c||!1===d||this._makeResizable(d);break;case "title":a(".ui-dialog-title",this.uiDialogTitlebar).html(""+(d||"&#160;"))}this._super(b,d)},_size:function(){var b,d,c=this.options,
h=this.uiDialog.is(":visible");this.element.show().css({width:"auto",minHeight:0,height:0});c.minWidth>c.width&&(c.width=c.minWidth);b=this.uiDialog.css({height:"auto",width:c.width}).outerHeight();d=Math.max(0,c.minHeight-b);"auto"===c.height?a.support.minHeight?this.element.css({minHeight:d,height:"auto"}):(this.uiDialog.show(),b=this.element.css("height","auto").height(),h||this.uiDialog.hide(),this.element.height(Math.max(b,d))):this.element.height(Math.max(c.height-b,0));this.uiDialog.is(":data(resizable)")&&
this.uiDialog.resizable("option","minHeight",this._minHeight())}});a.extend(a.ui.dialog,{uuid:0,maxZ:0,getTitleId:function(a){a=a.attr("id");a||(a=this.uuid+=1);return"ui-dialog-title-"+a},overlay:function(b){this.$el=a.ui.dialog.overlay.create(b)}});a.extend(a.ui.dialog.overlay,{instances:[],oldInstances:[],maxZ:0,events:a.map("focus mousedown mouseup keydown keypress click".split(" "),function(a){return a+".dialog-overlay"}).join(" "),create:function(b){0===this.instances.length&&(setTimeout(function(){a.ui.dialog.overlay.instances.length&&
a(document).bind(a.ui.dialog.overlay.events,function(b){if(a(b.target).zIndex()<a.ui.dialog.overlay.maxZ)return!1})},1),a(window).bind("resize.dialog-overlay",a.ui.dialog.overlay.resize));var d=this.oldInstances.pop()||a("<div>").addClass("ui-widget-overlay");a(document).bind("keydown.dialog-overlay",function(c){var h=a.ui.dialog.overlay.instances;0!==h.length&&h[h.length-1]===d&&b.options.closeOnEscape&&!c.isDefaultPrevented()&&c.keyCode&&c.keyCode===a.ui.keyCode.ESCAPE&&(b.close(c),c.preventDefault())});
d.appendTo(document.body).css({width:this.width(),height:this.height()});a.fn.bgiframe&&d.bgiframe();this.instances.push(d);return d},destroy:function(b){var d=a.inArray(b,this.instances),c=0;-1!==d&&this.oldInstances.push(this.instances.splice(d,1)[0]);0===this.instances.length&&a([document,window]).unbind(".dialog-overlay");b.height(0).width(0).remove();a.each(this.instances,function(){c=Math.max(c,this.css("z-index"))});this.maxZ=c},height:function(){var b,d;return a.ui.ie?(b=Math.max(document.documentElement.scrollHeight,
document.body.scrollHeight),d=Math.max(document.documentElement.offsetHeight,document.body.offsetHeight),b<d?a(window).height()+"px":b+"px"):a(document).height()+"px"},width:function(){var b,d;return a.ui.ie?(b=Math.max(document.documentElement.scrollWidth,document.body.scrollWidth),d=Math.max(document.documentElement.offsetWidth,document.body.offsetWidth),b<d?a(window).width()+"px":b+"px"):a(document).width()+"px"},resize:function(){var b=a([]);a.each(a.ui.dialog.overlay.instances,function(){b=b.add(this)});
b.css({width:0,height:0}).css({width:a.ui.dialog.overlay.width(),height:a.ui.dialog.overlay.height()})}});a.extend(a.ui.dialog.overlay.prototype,{destroy:function(){a.ui.dialog.overlay.destroy(this.$el)}})})(jQuery);
(function(a,c){var b=!1;a.widget("ui.menu",{version:"1.9.1",defaultElement:"<ul>",delay:300,options:{icons:{submenu:"ui-icon-carat-1-e"},menus:"ul",position:{my:"left top",at:"right top"},role:"menu",blur:null,focus:null,select:null},_create:function(){this.activeMenu=this.element;this.element.uniqueId().addClass("ui-menu ui-widget ui-widget-content ui-corner-all").toggleClass("ui-menu-icons",!!this.element.find(".ui-icon").length).attr({role:this.options.role,tabIndex:0}).bind("click"+this.eventNamespace,
a.proxy(function(a){this.options.disabled&&a.preventDefault()},this));this.options.disabled&&this.element.addClass("ui-state-disabled").attr("aria-disabled","true");this._on({"mousedown .ui-menu-item > a":function(a){a.preventDefault()},"click .ui-state-disabled > a":function(a){a.preventDefault()},"click .ui-menu-item:has(a)":function(d){var c=a(d.target).closest(".ui-menu-item");!b&&c.not(".ui-state-disabled").length&&(b=!0,this.select(d),c.has(".ui-menu").length?this.expand(d):this.element.is(":focus")||
(this.element.trigger("focus",[!0]),this.active&&1===this.active.parents(".ui-menu").length&&clearTimeout(this.timer)))},"mouseenter .ui-menu-item":function(b){var c=a(b.currentTarget);c.siblings().children(".ui-state-active").removeClass("ui-state-active");this.focus(b,c)},mouseleave:"collapseAll","mouseleave .ui-menu":"collapseAll",focus:function(a,b){var c=this.active||this.element.children(".ui-menu-item").eq(0);b||this.focus(a,c)},blur:function(b){this._delay(function(){a.contains(this.element[0],
this.document[0].activeElement)||this.collapseAll(b)})},keydown:"_keydown"});this.refresh();this._on(this.document,{click:function(d){a(d.target).closest(".ui-menu").length||this.collapseAll(d);b=!1}})},_destroy:function(){this.element.removeAttr("aria-activedescendant").find(".ui-menu").andSelf().removeClass("ui-menu ui-widget ui-widget-content ui-corner-all ui-menu-icons").removeAttr("role").removeAttr("tabIndex").removeAttr("aria-labelledby").removeAttr("aria-expanded").removeAttr("aria-hidden").removeAttr("aria-disabled").removeUniqueId().show();
this.element.find(".ui-menu-item").removeClass("ui-menu-item").removeAttr("role").removeAttr("aria-disabled").children("a").removeUniqueId().removeClass("ui-corner-all ui-state-hover").removeAttr("tabIndex").removeAttr("role").removeAttr("aria-haspopup").children().each(function(){var b=a(this);b.data("ui-menu-submenu-carat")&&b.remove()});this.element.find(".ui-menu-divider").removeClass("ui-menu-divider ui-widget-content")},_keydown:function(b){function c(a){return a.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,
"\\$&")}var f,g,h,l,m=!0;switch(b.keyCode){case a.ui.keyCode.PAGE_UP:this.previousPage(b);break;case a.ui.keyCode.PAGE_DOWN:this.nextPage(b);break;case a.ui.keyCode.HOME:this._move("first","first",b);break;case a.ui.keyCode.END:this._move("last","last",b);break;case a.ui.keyCode.UP:this.previous(b);break;case a.ui.keyCode.DOWN:this.next(b);break;case a.ui.keyCode.LEFT:this.collapse(b);break;case a.ui.keyCode.RIGHT:this.active&&!this.active.is(".ui-state-disabled")&&this.expand(b);break;case a.ui.keyCode.ENTER:case a.ui.keyCode.SPACE:this._activate(b);
break;case a.ui.keyCode.ESCAPE:this.collapse(b);break;default:m=!1,f=this.previousFilter||"",g=String.fromCharCode(b.keyCode),h=!1,clearTimeout(this.filterTimer),g===f?h=!0:g=f+g,l=new RegExp("^"+c(g),"i"),f=this.activeMenu.children(".ui-menu-item").filter(function(){return l.test(a(this).children("a").text())}),f=h&&-1!==f.index(this.active.next())?this.active.nextAll(".ui-menu-item"):f,f.length||(g=String.fromCharCode(b.keyCode),l=new RegExp("^"+c(g),"i"),f=this.activeMenu.children(".ui-menu-item").filter(function(){return l.test(a(this).children("a").text())})),
f.length?(this.focus(b,f),1<f.length?(this.previousFilter=g,this.filterTimer=this._delay(function(){delete this.previousFilter},1E3)):delete this.previousFilter):delete this.previousFilter}m&&b.preventDefault()},_activate:function(a){this.active.is(".ui-state-disabled")||(this.active.children("a[aria-haspopup='true']").length?this.expand(a):this.select(a))},refresh:function(){var b,c=this.options.icons.submenu,f=this.element.find(this.options.menus+":not(.ui-menu)").addClass("ui-menu ui-widget ui-widget-content ui-corner-all").hide().attr({role:this.options.role,
"aria-hidden":"true","aria-expanded":"false"});b=f.add(this.element);b.children(":not(.ui-menu-item):has(a)").addClass("ui-menu-item").attr("role","presentation").children("a").uniqueId().addClass("ui-corner-all").attr({tabIndex:-1,role:this._itemRole()});b.children(":not(.ui-menu-item)").each(function(){var b=a(this);/[^\-\u2014\u2013\s]/.test(b.text())||b.addClass("ui-widget-content ui-menu-divider")});b.children(".ui-state-disabled").attr("aria-disabled","true");f.each(function(){var b=a(this),
d=b.prev("a"),f=a("<span>").addClass("ui-menu-icon ui-icon "+c).data("ui-menu-submenu-carat",!0);d.attr("aria-haspopup","true").prepend(f);b.attr("aria-labelledby",d.attr("id"))});this.active&&!a.contains(this.element[0],this.active[0])&&this.blur()},_itemRole:function(){return{menu:"menuitem",listbox:"option"}[this.options.role]},focus:function(a,b){var c;this.blur(a,a&&"focus"===a.type);this._scrollIntoView(b);this.active=b.first();c=this.active.children("a").addClass("ui-state-focus");this.options.role&&
this.element.attr("aria-activedescendant",c.attr("id"));this.active.parent().closest(".ui-menu-item").children("a:first").addClass("ui-state-active");a&&"keydown"===a.type?this._close():this.timer=this._delay(function(){this._close()},this.delay);c=b.children(".ui-menu");c.length&&/^mouse/.test(a.type)&&this._startOpening(c);this.activeMenu=b.parent();this._trigger("focus",a,{item:b})},_scrollIntoView:function(b){var c,f,g;this._hasScroll()&&(c=parseFloat(a.css(this.activeMenu[0],"borderTopWidth"))||
0,f=parseFloat(a.css(this.activeMenu[0],"paddingTop"))||0,c=b.offset().top-this.activeMenu.offset().top-c-f,f=this.activeMenu.scrollTop(),g=this.activeMenu.height(),b=b.height(),0>c?this.activeMenu.scrollTop(f+c):c+b>g&&this.activeMenu.scrollTop(f+c-g+b))},blur:function(a,b){b||clearTimeout(this.timer);this.active&&(this.active.children("a").removeClass("ui-state-focus"),this.active=null,this._trigger("blur",a,{item:this.active}))},_startOpening:function(a){clearTimeout(this.timer);"true"===a.attr("aria-hidden")&&
(this.timer=this._delay(function(){this._close();this._open(a)},this.delay))},_open:function(b){var c=a.extend({of:this.active},this.options.position);clearTimeout(this.timer);this.element.find(".ui-menu").not(b.parents(".ui-menu")).hide().attr("aria-hidden","true");b.show().removeAttr("aria-hidden").attr("aria-expanded","true").position(c)},collapseAll:function(b,c){clearTimeout(this.timer);this.timer=this._delay(function(){var f=c?this.element:a(b&&b.target).closest(this.element.find(".ui-menu"));
f.length||(f=this.element);this._close(f);this.blur(b);this.activeMenu=f},this.delay)},_close:function(a){a||(a=this.active?this.active.parent():this.element);a.find(".ui-menu").hide().attr("aria-hidden","true").attr("aria-expanded","false").end().find("a.ui-state-active").removeClass("ui-state-active")},collapse:function(a){var b=this.active&&this.active.parent().closest(".ui-menu-item",this.element);b&&b.length&&(this._close(),this.focus(a,b))},expand:function(a){var b=this.active&&this.active.children(".ui-menu ").children(".ui-menu-item").first();
b&&b.length&&(this._open(b.parent()),this._delay(function(){this.focus(a,b)}))},next:function(a){this._move("next","first",a)},previous:function(a){this._move("prev","last",a)},isFirstItem:function(){return this.active&&!this.active.prevAll(".ui-menu-item").length},isLastItem:function(){return this.active&&!this.active.nextAll(".ui-menu-item").length},_move:function(a,b,c){var g;this.active&&(g="first"===a||"last"===a?this.active["first"===a?"prevAll":"nextAll"](".ui-menu-item").eq(-1):this.active[a+
"All"](".ui-menu-item").eq(0));g&&g.length&&this.active||(g=this.activeMenu.children(".ui-menu-item")[b]());this.focus(c,g)},nextPage:function(b){var c,f,g;this.active?this.isLastItem()||(this._hasScroll()?(f=this.active.offset().top,g=this.element.height(),this.active.nextAll(".ui-menu-item").each(function(){c=a(this);return 0>c.offset().top-f-g}),this.focus(b,c)):this.focus(b,this.activeMenu.children(".ui-menu-item")[this.active?"last":"first"]())):this.next(b)},previousPage:function(b){var c,f,
g;this.active?this.isFirstItem()||(this._hasScroll()?(f=this.active.offset().top,g=this.element.height(),this.active.prevAll(".ui-menu-item").each(function(){c=a(this);return 0<c.offset().top-f+g}),this.focus(b,c)):this.focus(b,this.activeMenu.children(".ui-menu-item").first())):this.next(b)},_hasScroll:function(){return this.element.outerHeight()<this.element.prop("scrollHeight")},select:function(b){this.active=this.active||a(b.target).closest(".ui-menu-item");var c={item:this.active};this.active.has(".ui-menu").length||
this.collapseAll(b,!0);this._trigger("select",b,c)}})})(jQuery);
(function(a,c){a.widget("ui.progressbar",{version:"1.9.1",options:{value:0,max:100},min:0,_create:function(){this.element.addClass("ui-progressbar ui-widget ui-widget-content ui-corner-all").attr({role:"progressbar","aria-valuemin":this.min,"aria-valuemax":this.options.max,"aria-valuenow":this._value()});this.valueDiv=a("<div class='ui-progressbar-value ui-widget-header ui-corner-left'></div>").appendTo(this.element);this.oldValue=this._value();this._refreshValue()},_destroy:function(){this.element.removeClass("ui-progressbar ui-widget ui-widget-content ui-corner-all").removeAttr("role").removeAttr("aria-valuemin").removeAttr("aria-valuemax").removeAttr("aria-valuenow");
this.valueDiv.remove()},value:function(a){if(a===c)return this._value();this._setOption("value",a);return this},_setOption:function(a,d){"value"===a&&(this.options.value=d,this._refreshValue(),this._value()===this.options.max&&this._trigger("complete"));this._super(a,d)},_value:function(){var a=this.options.value;"number"!==typeof a&&(a=0);return Math.min(this.options.max,Math.max(this.min,a))},_percentage:function(){return 100*this._value()/this.options.max},_refreshValue:function(){var a=this.value(),
d=this._percentage();this.oldValue!==a&&(this.oldValue=a,this._trigger("change"));this.valueDiv.toggle(a>this.min).toggleClass("ui-corner-right",a===this.options.max).width(d.toFixed(0)+"%");this.element.attr("aria-valuenow",a)}})})(jQuery);
(function(a,c){a.widget("ui.slider",a.ui.mouse,{version:"1.9.1",widgetEventPrefix:"slide",options:{animate:!1,distance:0,max:100,min:0,orientation:"horizontal",range:!1,step:1,value:0,values:null},_create:function(){var b,d,c=this.options,f=this.element.find(".ui-slider-handle").addClass("ui-state-default ui-corner-all"),g=[];this._mouseSliding=this._keySliding=!1;this._animateOff=!0;this._handleIndex=null;this._detectOrientation();this._mouseInit();this.element.addClass("ui-slider ui-slider-"+this.orientation+
" ui-widget ui-widget-content ui-corner-all"+(c.disabled?" ui-slider-disabled ui-disabled":""));this.range=a([]);c.range&&(!0===c.range&&(c.values||(c.values=[this._valueMin(),this._valueMin()]),c.values.length&&2!==c.values.length&&(c.values=[c.values[0],c.values[0]])),this.range=a("<div></div>").appendTo(this.element).addClass("ui-slider-range ui-widget-header"+("min"===c.range||"max"===c.range?" ui-slider-range-"+c.range:"")));d=c.values&&c.values.length||1;for(b=f.length;b<d;b++)g.push("<a class='ui-slider-handle ui-state-default ui-corner-all' href='#'></a>");
this.handles=f.add(a(g.join("")).appendTo(this.element));this.handle=this.handles.eq(0);this.handles.add(this.range).filter("a").click(function(a){a.preventDefault()}).mouseenter(function(){c.disabled||a(this).addClass("ui-state-hover")}).mouseleave(function(){a(this).removeClass("ui-state-hover")}).focus(function(){c.disabled?a(this).blur():(a(".ui-slider .ui-state-focus").removeClass("ui-state-focus"),a(this).addClass("ui-state-focus"))}).blur(function(){a(this).removeClass("ui-state-focus")});
this.handles.each(function(b){a(this).data("ui-slider-handle-index",b)});this._on(this.handles,{keydown:function(b){var d,c,e,f=a(b.target).data("ui-slider-handle-index");switch(b.keyCode){case a.ui.keyCode.HOME:case a.ui.keyCode.END:case a.ui.keyCode.PAGE_UP:case a.ui.keyCode.PAGE_DOWN:case a.ui.keyCode.UP:case a.ui.keyCode.RIGHT:case a.ui.keyCode.DOWN:case a.ui.keyCode.LEFT:if(b.preventDefault(),!this._keySliding&&(this._keySliding=!0,a(b.target).addClass("ui-state-active"),d=this._start(b,f),!1===
d))return}e=this.options.step;d=this.options.values&&this.options.values.length?c=this.values(f):c=this.value();switch(b.keyCode){case a.ui.keyCode.HOME:c=this._valueMin();break;case a.ui.keyCode.END:c=this._valueMax();break;case a.ui.keyCode.PAGE_UP:c=this._trimAlignValue(d+(this._valueMax()-this._valueMin())/5);break;case a.ui.keyCode.PAGE_DOWN:c=this._trimAlignValue(d-(this._valueMax()-this._valueMin())/5);break;case a.ui.keyCode.UP:case a.ui.keyCode.RIGHT:if(d===this._valueMax())return;c=this._trimAlignValue(d+
e);break;case a.ui.keyCode.DOWN:case a.ui.keyCode.LEFT:if(d===this._valueMin())return;c=this._trimAlignValue(d-e)}this._slide(b,f,c)},keyup:function(b){var d=a(b.target).data("ui-slider-handle-index");this._keySliding&&(this._keySliding=!1,this._stop(b,d),this._change(b,d),a(b.target).removeClass("ui-state-active"))}});this._refreshValue();this._animateOff=!1},_destroy:function(){this.handles.remove();this.range.remove();this.element.removeClass("ui-slider ui-slider-horizontal ui-slider-vertical ui-slider-disabled ui-widget ui-widget-content ui-corner-all");
this._mouseDestroy()},_mouseCapture:function(b){var d,c,f,g,h,l=this;h=this.options;if(h.disabled)return!1;this.elementSize={width:this.element.outerWidth(),height:this.element.outerHeight()};this.elementOffset=this.element.offset();d=this._normValueFromMouse({x:b.pageX,y:b.pageY});c=this._valueMax()-this._valueMin()+1;this.handles.each(function(b){var h=Math.abs(d-l.values(b));c>h&&(c=h,f=a(this),g=b)});!0===h.range&&this.values(1)===h.min&&(g+=1,f=a(this.handles[g]));if(!1===this._start(b,g))return!1;
this._mouseSliding=!0;this._handleIndex=g;f.addClass("ui-state-active").focus();h=f.offset();this._clickOffset=a(b.target).parents().andSelf().is(".ui-slider-handle")?{left:b.pageX-h.left-f.width()/2,top:b.pageY-h.top-f.height()/2-(parseInt(f.css("borderTopWidth"),10)||0)-(parseInt(f.css("borderBottomWidth"),10)||0)+(parseInt(f.css("marginTop"),10)||0)}:{left:0,top:0};this.handles.hasClass("ui-state-hover")||this._slide(b,g,d);return this._animateOff=!0},_mouseStart:function(){return!0},_mouseDrag:function(a){var d=
this._normValueFromMouse({x:a.pageX,y:a.pageY});this._slide(a,this._handleIndex,d);return!1},_mouseStop:function(a){this.handles.removeClass("ui-state-active");this._mouseSliding=!1;this._stop(a,this._handleIndex);this._change(a,this._handleIndex);this._clickOffset=this._handleIndex=null;return this._animateOff=!1},_detectOrientation:function(){this.orientation="vertical"===this.options.orientation?"vertical":"horizontal"},_normValueFromMouse:function(a){var d;"horizontal"===this.orientation?(d=this.elementSize.width,
a=a.x-this.elementOffset.left-(this._clickOffset?this._clickOffset.left:0)):(d=this.elementSize.height,a=a.y-this.elementOffset.top-(this._clickOffset?this._clickOffset.top:0));d=a/d;1<d&&(d=1);0>d&&(d=0);"vertical"===this.orientation&&(d=1-d);a=this._valueMax()-this._valueMin();d=this._valueMin()+d*a;return this._trimAlignValue(d)},_start:function(a,d){var c={handle:this.handles[d],value:this.value()};this.options.values&&this.options.values.length&&(c.value=this.values(d),c.values=this.values());
return this._trigger("start",a,c)},_slide:function(a,d,c){var f;this.options.values&&this.options.values.length?(f=this.values(d?0:1),2===this.options.values.length&&!0===this.options.range&&(0===d&&c>f||1===d&&c<f)&&(c=f),c!==this.values(d)&&(f=this.values(),f[d]=c,a=this._trigger("slide",a,{handle:this.handles[d],value:c,values:f}),this.values(d?0:1),!1!==a&&this.values(d,c,!0))):c!==this.value()&&(a=this._trigger("slide",a,{handle:this.handles[d],value:c}),!1!==a&&this.value(c))},_stop:function(a,
d){var c={handle:this.handles[d],value:this.value()};this.options.values&&this.options.values.length&&(c.value=this.values(d),c.values=this.values());this._trigger("stop",a,c)},_change:function(a,d){if(!this._keySliding&&!this._mouseSliding){var c={handle:this.handles[d],value:this.value()};this.options.values&&this.options.values.length&&(c.value=this.values(d),c.values=this.values());this._trigger("change",a,c)}},value:function(a){if(arguments.length)this.options.value=this._trimAlignValue(a),this._refreshValue(),
this._change(null,0);else return this._value()},values:function(b,d){var c,f,g;if(1<arguments.length)this.options.values[b]=this._trimAlignValue(d),this._refreshValue(),this._change(null,b);else if(arguments.length)if(a.isArray(arguments[0])){c=this.options.values;f=arguments[0];for(g=0;g<c.length;g+=1)c[g]=this._trimAlignValue(f[g]),this._change(null,g);this._refreshValue()}else return this.options.values&&this.options.values.length?this._values(b):this.value();else return this._values()},_setOption:function(b,
d){var c,f=0;a.isArray(this.options.values)&&(f=this.options.values.length);a.Widget.prototype._setOption.apply(this,arguments);switch(b){case "disabled":d?(this.handles.filter(".ui-state-focus").blur(),this.handles.removeClass("ui-state-hover"),this.handles.prop("disabled",!0),this.element.addClass("ui-disabled")):(this.handles.prop("disabled",!1),this.element.removeClass("ui-disabled"));break;case "orientation":this._detectOrientation();this.element.removeClass("ui-slider-horizontal ui-slider-vertical").addClass("ui-slider-"+
this.orientation);this._refreshValue();break;case "value":this._animateOff=!0;this._refreshValue();this._change(null,0);this._animateOff=!1;break;case "values":this._animateOff=!0;this._refreshValue();for(c=0;c<f;c+=1)this._change(null,c);this._animateOff=!1;break;case "min":case "max":this._animateOff=!0,this._refreshValue(),this._animateOff=!1}},_value:function(){var a=this.options.value;return a=this._trimAlignValue(a)},_values:function(a){var d,c;if(arguments.length)return d=this.options.values[a],
d=this._trimAlignValue(d);d=this.options.values.slice();for(c=0;c<d.length;c+=1)d[c]=this._trimAlignValue(d[c]);return d},_trimAlignValue:function(a){if(a<=this._valueMin())return this._valueMin();if(a>=this._valueMax())return this._valueMax();var d=0<this.options.step?this.options.step:1,c=(a-this._valueMin())%d;a-=c;2*Math.abs(c)>=d&&(a+=0<c?d:-d);return parseFloat(a.toFixed(5))},_valueMin:function(){return this.options.min},_valueMax:function(){return this.options.max},_refreshValue:function(){var b,
d,c,f,g,h=this.options.range,l=this.options,m=this,p=this._animateOff?!1:l.animate,q={};if(this.options.values&&this.options.values.length)this.handles.each(function(c){d=(m.values(c)-m._valueMin())/(m._valueMax()-m._valueMin())*100;q["horizontal"===m.orientation?"left":"bottom"]=d+"%";a(this).stop(1,1)[p?"animate":"css"](q,l.animate);if(!0===m.options.range)if("horizontal"===m.orientation){if(0===c)m.range.stop(1,1)[p?"animate":"css"]({left:d+"%"},l.animate);if(1===c)m.range[p?"animate":"css"]({width:d-
b+"%"},{queue:!1,duration:l.animate})}else{if(0===c)m.range.stop(1,1)[p?"animate":"css"]({bottom:d+"%"},l.animate);if(1===c)m.range[p?"animate":"css"]({height:d-b+"%"},{queue:!1,duration:l.animate})}b=d});else{c=this.value();f=this._valueMin();g=this._valueMax();d=g!==f?(c-f)/(g-f)*100:0;q["horizontal"===this.orientation?"left":"bottom"]=d+"%";this.handle.stop(1,1)[p?"animate":"css"](q,l.animate);if("min"===h&&"horizontal"===this.orientation)this.range.stop(1,1)[p?"animate":"css"]({width:d+"%"},l.animate);
if("max"===h&&"horizontal"===this.orientation)this.range[p?"animate":"css"]({width:100-d+"%"},{queue:!1,duration:l.animate});if("min"===h&&"vertical"===this.orientation)this.range.stop(1,1)[p?"animate":"css"]({height:d+"%"},l.animate);if("max"===h&&"vertical"===this.orientation)this.range[p?"animate":"css"]({height:100-d+"%"},{queue:!1,duration:l.animate})}}})})(jQuery);
(function(a){function c(a){return function(){var d=this.element.val();a.apply(this,arguments);this._refresh();d!==this.element.val()&&this._trigger("change")}}a.widget("ui.spinner",{version:"1.9.1",defaultElement:"<input>",widgetEventPrefix:"spin",options:{culture:null,icons:{down:"ui-icon-triangle-1-s",up:"ui-icon-triangle-1-n"},incremental:!0,max:null,min:null,numberFormat:null,page:10,step:1,change:null,spin:null,start:null,stop:null},_create:function(){this._setOption("max",this.options.max);
this._setOption("min",this.options.min);this._setOption("step",this.options.step);this._value(this.element.val(),!0);this._draw();this._on(this._events);this._refresh();this._on(this.window,{beforeunload:function(){this.element.removeAttr("autocomplete")}})},_getCreateOptions:function(){var b={},d=this.element;a.each(["min","max","step"],function(a,c){var g=d.attr(c);void 0!==g&&g.length&&(b[c]=g)});return b},_events:{keydown:function(a){this._start(a)&&this._keydown(a)&&a.preventDefault()},keyup:"_stop",
focus:function(){this.previous=this.element.val()},blur:function(a){this.cancelBlur?delete this.cancelBlur:(this._refresh(),this.previous!==this.element.val()&&this._trigger("change",a))},mousewheel:function(a,d){if(d){if(!this.spinning&&!this._start(a))return!1;this._spin((0<d?1:-1)*this.options.step,a);clearTimeout(this.mousewheelTimer);this.mousewheelTimer=this._delay(function(){this.spinning&&this._stop(a)},100);a.preventDefault()}},"mousedown .ui-spinner-button":function(b){function d(){this.element[0]!==
this.document[0].activeElement&&(this.element.focus(),this.previous=c,this._delay(function(){this.previous=c}))}var c;c=this.element[0]===this.document[0].activeElement?this.previous:this.element.val();b.preventDefault();d.call(this);this.cancelBlur=!0;this._delay(function(){delete this.cancelBlur;d.call(this)});!1!==this._start(b)&&this._repeat(null,a(b.currentTarget).hasClass("ui-spinner-up")?1:-1,b)},"mouseup .ui-spinner-button":"_stop","mouseenter .ui-spinner-button":function(b){if(a(b.currentTarget).hasClass("ui-state-active")){if(!1===
this._start(b))return!1;this._repeat(null,a(b.currentTarget).hasClass("ui-spinner-up")?1:-1,b)}},"mouseleave .ui-spinner-button":"_stop"},_draw:function(){var a=this.uiSpinner=this.element.addClass("ui-spinner-input").attr("autocomplete","off").wrap(this._uiSpinnerHtml()).parent().append(this._buttonHtml());this.element.attr("role","spinbutton");this.buttons=a.find(".ui-spinner-button").attr("tabIndex",-1).button().removeClass("ui-corner-all");this.buttons.height()>Math.ceil(.5*a.height())&&0<a.height()&&
a.height(a.height());this.options.disabled&&this.disable()},_keydown:function(b){var d=this.options,c=a.ui.keyCode;switch(b.keyCode){case c.UP:return this._repeat(null,1,b),!0;case c.DOWN:return this._repeat(null,-1,b),!0;case c.PAGE_UP:return this._repeat(null,d.page,b),!0;case c.PAGE_DOWN:return this._repeat(null,-d.page,b),!0}return!1},_uiSpinnerHtml:function(){return"<span class='ui-spinner ui-widget ui-widget-content ui-corner-all'></span>"},_buttonHtml:function(){return"<a class='ui-spinner-button ui-spinner-up ui-corner-tr'><span class='ui-icon "+
this.options.icons.up+"'>&#9650;</span></a><a class='ui-spinner-button ui-spinner-down ui-corner-br'><span class='ui-icon "+this.options.icons.down+"'>&#9660;</span></a>"},_start:function(a){if(!this.spinning&&!1===this._trigger("start",a))return!1;this.counter||(this.counter=1);return this.spinning=!0},_repeat:function(a,d,c){a=a||500;clearTimeout(this.timer);this.timer=this._delay(function(){this._repeat(40,d,c)},a);this._spin(d*this.options.step,c)},_spin:function(a,d){var c=this.value()||0;this.counter||
(this.counter=1);c=this._adjustValue(c+a*this._increment(this.counter));this.spinning&&!1===this._trigger("spin",d,{value:c})||(this._value(c),this.counter++)},_increment:function(b){var d=this.options.incremental;return d?a.isFunction(d)?d(b):Math.floor(b*b*b/5E4-b*b/500+17*b/200+1):1},_precision:function(){var a=this._precisionOf(this.options.step);null!==this.options.min&&(a=Math.max(a,this._precisionOf(this.options.min)));return a},_precisionOf:function(a){a=a.toString();var d=a.indexOf(".");
return-1===d?0:a.length-d-1},_adjustValue:function(a){var d,c=this.options;d=null!==c.min?c.min:0;a=Math.round((a-d)/c.step)*c.step;a=d+a;a=parseFloat(a.toFixed(this._precision()));return null!==c.max&&a>c.max?c.max:null!==c.min&&a<c.min?c.min:a},_stop:function(a){this.spinning&&(clearTimeout(this.timer),clearTimeout(this.mousewheelTimer),this.counter=0,this.spinning=!1,this._trigger("stop",a))},_setOption:function(a,d){if("culture"===a||"numberFormat"===a){var c=this._parse(this.element.val());this.options[a]=
d;this.element.val(this._format(c))}else"max"!==a&&"min"!==a&&"step"!==a||"string"!==typeof d||(d=this._parse(d)),this._super(a,d),"disabled"===a&&(d?(this.element.prop("disabled",!0),this.buttons.button("disable")):(this.element.prop("disabled",!1),this.buttons.button("enable")))},_setOptions:c(function(a){this._super(a);this._value(this.element.val())}),_parse:function(a){"string"===typeof a&&""!==a&&(a=window.Globalize&&this.options.numberFormat?Globalize.parseFloat(a,10,this.options.culture):
+a);return""===a||isNaN(a)?null:a},_format:function(a){return""===a?"":window.Globalize&&this.options.numberFormat?Globalize.format(a,this.options.numberFormat,this.options.culture):a},_refresh:function(){this.element.attr({"aria-valuemin":this.options.min,"aria-valuemax":this.options.max,"aria-valuenow":this._parse(this.element.val())})},_value:function(a,d){var c;""!==a&&(c=this._parse(a),null!==c&&(d||(c=this._adjustValue(c)),a=this._format(c)));this.element.val(a);this._refresh()},_destroy:function(){this.element.removeClass("ui-spinner-input").prop("disabled",
!1).removeAttr("autocomplete").removeAttr("role").removeAttr("aria-valuemin").removeAttr("aria-valuemax").removeAttr("aria-valuenow");this.uiSpinner.replaceWith(this.element)},stepUp:c(function(a){this._stepUp(a)}),_stepUp:function(a){this._spin((a||1)*this.options.step)},stepDown:c(function(a){this._stepDown(a)}),_stepDown:function(a){this._spin((a||1)*-this.options.step)},pageUp:c(function(a){this._stepUp((a||1)*this.options.page)}),pageDown:c(function(a){this._stepDown((a||1)*this.options.page)}),
value:function(a){if(!arguments.length)return this._parse(this.element.val());c(this._value).call(this,a)},widget:function(){return this.uiSpinner}})})(jQuery);
(function(a,c){function b(a){return 1<a.hash.length&&a.href.replace(e,"")===location.href.replace(e,"")}var d=0,e=/#.*$/;a.widget("ui.tabs",{version:"1.9.1",delay:300,options:{active:null,collapsible:!1,event:"click",heightStyle:"content",hide:null,show:null,activate:null,beforeActivate:null,beforeLoad:null,load:null},_create:function(){var b=this,d=this.options,c=d.active,e=location.hash.substring(1);this.running=!1;this.element.addClass("ui-tabs ui-widget ui-widget-content ui-corner-all").toggleClass("ui-tabs-collapsible",
d.collapsible).delegate(".ui-tabs-nav > li","mousedown"+this.eventNamespace,function(b){a(this).is(".ui-state-disabled")&&b.preventDefault()}).delegate(".ui-tabs-anchor","focus"+this.eventNamespace,function(){a(this).closest("li").is(".ui-state-disabled")&&this.blur()});this._processTabs();null===c&&(e&&this.tabs.each(function(b,d){if(a(d).attr("aria-controls")===e)return c=b,!1}),null===c&&(c=this.tabs.index(this.tabs.filter(".ui-tabs-active"))),null===c||-1===c)&&(c=this.tabs.length?0:!1);!1!==
c&&(c=this.tabs.index(this.tabs.eq(c)),-1===c&&(c=d.collapsible?!1:0));d.active=c;!d.collapsible&&!1===d.active&&this.anchors.length&&(d.active=0);a.isArray(d.disabled)&&(d.disabled=a.unique(d.disabled.concat(a.map(this.tabs.filter(".ui-state-disabled"),function(a){return b.tabs.index(a)}))).sort());this.active=!1!==this.options.active&&this.anchors.length?this._findActive(this.options.active):a();this._refresh();this.active.length&&this.load(d.active)},_getCreateEventData:function(){return{tab:this.active,
panel:this.active.length?this._getPanelForTab(this.active):a()}},_tabKeydown:function(b){var d=a(this.document[0].activeElement).closest("li"),c=this.tabs.index(d),e=!0;if(!this._handlePageNav(b)){switch(b.keyCode){case a.ui.keyCode.RIGHT:case a.ui.keyCode.DOWN:c++;break;case a.ui.keyCode.UP:case a.ui.keyCode.LEFT:e=!1;c--;break;case a.ui.keyCode.END:c=this.anchors.length-1;break;case a.ui.keyCode.HOME:c=0;break;case a.ui.keyCode.SPACE:b.preventDefault();clearTimeout(this.activating);this._activate(c);
return;case a.ui.keyCode.ENTER:b.preventDefault();clearTimeout(this.activating);this._activate(c===this.options.active?!1:c);return;default:return}b.preventDefault();clearTimeout(this.activating);c=this._focusNextTab(c,e);b.ctrlKey||(d.attr("aria-selected","false"),this.tabs.eq(c).attr("aria-selected","true"),this.activating=this._delay(function(){this.option("active",c)},this.delay))}},_panelKeydown:function(b){!this._handlePageNav(b)&&b.ctrlKey&&b.keyCode===a.ui.keyCode.UP&&(b.preventDefault(),
this.active.focus())},_handlePageNav:function(b){if(b.altKey&&b.keyCode===a.ui.keyCode.PAGE_UP)return this._activate(this._focusNextTab(this.options.active-1,!1)),!0;if(b.altKey&&b.keyCode===a.ui.keyCode.PAGE_DOWN)return this._activate(this._focusNextTab(this.options.active+1,!0)),!0},_findNextTab:function(b,d){function c(){b>e&&(b=0);0>b&&(b=e);return b}for(var e=this.tabs.length-1;-1!==a.inArray(c(),this.options.disabled);)b=d?b+1:b-1;return b},_focusNextTab:function(a,b){a=this._findNextTab(a,
b);this.tabs.eq(a).focus();return a},_setOption:function(a,b){"active"===a?this._activate(b):"disabled"===a?this._setupDisabled(b):(this._super(a,b),"collapsible"===a&&(this.element.toggleClass("ui-tabs-collapsible",b),b||!1!==this.options.active||this._activate(0)),"event"===a&&this._setupEvents(b),"heightStyle"===a&&this._setupHeightStyle(b))},_tabId:function(a){return a.attr("aria-controls")||"ui-tabs-"+ ++d},_sanitizeSelector:function(a){return a?a.replace(/[!"$%&'()*+,.\/:;<=>?@\[\]\^`{|}~]/g,
"\\$&"):""},refresh:function(){var b=this.options,d=this.tablist.children(":has(a[href])");b.disabled=a.map(d.filter(".ui-state-disabled"),function(a){return d.index(a)});this._processTabs();!1!==b.active&&this.anchors.length?this.active.length&&!a.contains(this.tablist[0],this.active[0])?this.tabs.length===b.disabled.length?(b.active=!1,this.active=a()):this._activate(this._findNextTab(Math.max(0,b.active-1),!1)):b.active=this.tabs.index(this.active):(b.active=!1,this.active=a());this._refresh()},
_refresh:function(){this._setupDisabled(this.options.disabled);this._setupEvents(this.options.event);this._setupHeightStyle(this.options.heightStyle);this.tabs.not(this.active).attr({"aria-selected":"false",tabIndex:-1});this.panels.not(this._getPanelForTab(this.active)).hide().attr({"aria-expanded":"false","aria-hidden":"true"});this.active.length?(this.active.addClass("ui-tabs-active ui-state-active").attr({"aria-selected":"true",tabIndex:0}),this._getPanelForTab(this.active).show().attr({"aria-expanded":"true",
"aria-hidden":"false"})):this.tabs.eq(0).attr("tabIndex",0)},_processTabs:function(){var d=this;this.tablist=this._getList().addClass("ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all").attr("role","tablist");this.tabs=this.tablist.find("> li:has(a[href])").addClass("ui-state-default ui-corner-top").attr({role:"tab",tabIndex:-1});this.anchors=this.tabs.map(function(){return a("a",this)[0]}).addClass("ui-tabs-anchor").attr({role:"presentation",tabIndex:-1});this.panels=
a();this.anchors.each(function(c,e){var l,m,p,q=a(e).uniqueId().attr("id"),t=a(e).closest("li"),y=t.attr("aria-controls");b(e)?(l=e.hash,m=d.element.find(d._sanitizeSelector(l))):(p=d._tabId(t),l="#"+p,m=d.element.find(l),m.length||(m=d._createPanel(p),m.insertAfter(d.panels[c-1]||d.tablist)),m.attr("aria-live","polite"));m.length&&(d.panels=d.panels.add(m));y&&t.data("ui-tabs-aria-controls",y);t.attr({"aria-controls":l.substring(1),"aria-labelledby":q});m.attr("aria-labelledby",q)});this.panels.addClass("ui-tabs-panel ui-widget-content ui-corner-bottom").attr("role",
"tabpanel")},_getList:function(){return this.element.find("ol,ul").eq(0)},_createPanel:function(b){return a("<div>").attr("id",b).addClass("ui-tabs-panel ui-widget-content ui-corner-bottom").data("ui-tabs-destroy",!0)},_setupDisabled:function(b){a.isArray(b)&&(b.length?b.length===this.anchors.length&&(b=!0):b=!1);for(var d=0,c;c=this.tabs[d];d++)!0===b||-1!==a.inArray(d,b)?a(c).addClass("ui-state-disabled").attr("aria-disabled","true"):a(c).removeClass("ui-state-disabled").removeAttr("aria-disabled");
this.options.disabled=b},_setupEvents:function(b){var d={click:function(a){a.preventDefault()}};b&&a.each(b.split(" "),function(a,b){d[b]="_eventHandler"});this._off(this.anchors.add(this.tabs).add(this.panels));this._on(this.anchors,d);this._on(this.tabs,{keydown:"_tabKeydown"});this._on(this.panels,{keydown:"_panelKeydown"});this._focusable(this.tabs);this._hoverable(this.tabs)},_setupHeightStyle:function(b){var d,c,e=this.element.parent();"fill"===b?(a.support.minHeight||(c=e.css("overflow"),e.css("overflow",
"hidden")),d=e.height(),this.element.siblings(":visible").each(function(){var b=a(this),c=b.css("position");"absolute"!==c&&"fixed"!==c&&(d-=b.outerHeight(!0))}),c&&e.css("overflow",c),this.element.children().not(this.panels).each(function(){d-=a(this).outerHeight(!0)}),this.panels.each(function(){a(this).height(Math.max(0,d-a(this).innerHeight()+a(this).height()))}).css("overflow","auto")):"auto"===b&&(d=0,this.panels.each(function(){d=Math.max(d,a(this).height("").height())}).height(d))},_eventHandler:function(b){var d=
this.options,c=this.active,e=a(b.currentTarget).closest("li"),m=e[0]===c[0],p=m&&d.collapsible,q=p?a():this._getPanelForTab(e),t=c.length?this._getPanelForTab(c):a(),c={oldTab:c,oldPanel:t,newTab:p?a():e,newPanel:q};b.preventDefault();e.hasClass("ui-state-disabled")||e.hasClass("ui-tabs-loading")||this.running||m&&!d.collapsible||!1===this._trigger("beforeActivate",b,c)||(d.active=p?!1:this.tabs.index(e),this.active=m?a():e,this.xhr&&this.xhr.abort(),t.length||q.length||a.error("jQuery UI Tabs: Mismatching fragment identifier."),
q.length&&this.load(this.tabs.index(e),b),this._toggle(b,c))},_toggle:function(b,d){function c(){m.running=!1;m._trigger("activate",b,d)}function e(){d.newTab.closest("li").addClass("ui-tabs-active ui-state-active");p.length&&m.options.show?m._show(p,m.options.show,c):(p.show(),c())}var m=this,p=d.newPanel,q=d.oldPanel;this.running=!0;q.length&&this.options.hide?this._hide(q,this.options.hide,function(){d.oldTab.closest("li").removeClass("ui-tabs-active ui-state-active");e()}):(d.oldTab.closest("li").removeClass("ui-tabs-active ui-state-active"),
q.hide(),e());q.attr({"aria-expanded":"false","aria-hidden":"true"});d.oldTab.attr("aria-selected","false");p.length&&q.length?d.oldTab.attr("tabIndex",-1):p.length&&this.tabs.filter(function(){return 0===a(this).attr("tabIndex")}).attr("tabIndex",-1);p.attr({"aria-expanded":"true","aria-hidden":"false"});d.newTab.attr({"aria-selected":"true",tabIndex:0})},_activate:function(b){b=this._findActive(b);b[0]!==this.active[0]&&(b.length||(b=this.active),b=b.find(".ui-tabs-anchor")[0],this._eventHandler({target:b,
currentTarget:b,preventDefault:a.noop}))},_findActive:function(b){return!1===b?a():this.tabs.eq(b)},_getIndex:function(a){"string"===typeof a&&(a=this.anchors.index(this.anchors.filter("[href$='"+a+"']")));return a},_destroy:function(){this.xhr&&this.xhr.abort();this.element.removeClass("ui-tabs ui-widget ui-widget-content ui-corner-all ui-tabs-collapsible");this.tablist.removeClass("ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all").removeAttr("role");this.anchors.removeClass("ui-tabs-anchor").removeAttr("role").removeAttr("tabIndex").removeData("href.tabs").removeData("load.tabs").removeUniqueId();
this.tabs.add(this.panels).each(function(){a.data(this,"ui-tabs-destroy")?a(this).remove():a(this).removeClass("ui-state-default ui-state-active ui-state-disabled ui-corner-top ui-corner-bottom ui-widget-content ui-tabs-active ui-tabs-panel").removeAttr("tabIndex").removeAttr("aria-live").removeAttr("aria-busy").removeAttr("aria-selected").removeAttr("aria-labelledby").removeAttr("aria-hidden").removeAttr("aria-expanded").removeAttr("role")});this.tabs.each(function(){var b=a(this),d=b.data("ui-tabs-aria-controls");
d?b.attr("aria-controls",d):b.removeAttr("aria-controls")});"content"!==this.options.heightStyle&&this.panels.css("height","")},enable:function(b){var d=this.options.disabled;!1!==d&&(b===c?d=!1:(b=this._getIndex(b),d=a.isArray(d)?a.map(d,function(a){return a!==b?a:null}):a.map(this.tabs,function(a,d){return d!==b?d:null})),this._setupDisabled(d))},disable:function(b){var d=this.options.disabled;if(!0!==d){if(b===c)d=!0;else{b=this._getIndex(b);if(-1!==a.inArray(b,d))return;d=a.isArray(d)?a.merge([b],
d).sort():[b]}this._setupDisabled(d)}},load:function(d,c){d=this._getIndex(d);var e=this,l=this.tabs.eq(d),m=l.find(".ui-tabs-anchor"),p=this._getPanelForTab(l),q={tab:l,panel:p};b(m[0])||(this.xhr=a.ajax(this._ajaxSettings(m,c,q)))&&"canceled"!==this.xhr.statusText&&(l.addClass("ui-tabs-loading"),p.attr("aria-busy","true"),this.xhr.success(function(a){setTimeout(function(){p.html(a);e._trigger("load",c,q)},1)}).complete(function(a,b){setTimeout(function(){"abort"===b&&e.panels.stop(!1,!0);l.removeClass("ui-tabs-loading");
p.removeAttr("aria-busy");a===e.xhr&&delete e.xhr},1)}))},_ajaxSettings:function(b,d,c){var e=this;return{url:b.attr("href"),beforeSend:function(b,f){return e._trigger("beforeLoad",d,a.extend({jqXHR:b,ajaxSettings:f},c))}}},_getPanelForTab:function(b){b=a(b).attr("aria-controls");return this.element.find(this._sanitizeSelector("#"+b))}});!1!==a.uiBackCompat&&(a.ui.tabs.prototype._ui=function(a,b){return{tab:a,panel:b,index:this.anchors.index(a)}},a.widget("ui.tabs",a.ui.tabs,{url:function(a,b){this.anchors.eq(a).attr("href",
b)}}),a.widget("ui.tabs",a.ui.tabs,{options:{ajaxOptions:null,cache:!1},_create:function(){this._super();var b=this;this._on({tabsbeforeload:function(d,c){a.data(c.tab[0],"cache.tabs")?d.preventDefault():c.jqXHR.success(function(){b.options.cache&&a.data(c.tab[0],"cache.tabs",!0)})}})},_ajaxSettings:function(b,d,c){var e=this.options.ajaxOptions;return a.extend({},e,{error:function(a,b){try{e.error(a,b,c.tab.closest("li").index(),c.tab[0])}catch(d){}}},this._superApply(arguments))},_setOption:function(a,
b){"cache"===a&&!1===b&&this.anchors.removeData("cache.tabs");this._super(a,b)},_destroy:function(){this.anchors.removeData("cache.tabs");this._super()},url:function(a){this.anchors.eq(a).removeData("cache.tabs");this._superApply(arguments)}}),a.widget("ui.tabs",a.ui.tabs,{abort:function(){this.xhr&&this.xhr.abort()}}),a.widget("ui.tabs",a.ui.tabs,{options:{spinner:"<em>Loading&#8230;</em>"},_create:function(){this._super();this._on({tabsbeforeload:function(a,b){if(a.target===this.element[0]&&this.options.spinner){var d=
b.tab.find("span"),c=d.html();d.html(this.options.spinner);b.jqXHR.complete(function(){d.html(c)})}}})}}),a.widget("ui.tabs",a.ui.tabs,{options:{enable:null,disable:null},enable:function(b){var d=this.options,c;if(b&&!0===d.disabled||a.isArray(d.disabled)&&-1!==a.inArray(b,d.disabled))c=!0;this._superApply(arguments);c&&this._trigger("enable",null,this._ui(this.anchors[b],this.panels[b]))},disable:function(b){var d=this.options,c;if(b&&!1===d.disabled||a.isArray(d.disabled)&&-1===a.inArray(b,d.disabled))c=
!0;this._superApply(arguments);c&&this._trigger("disable",null,this._ui(this.anchors[b],this.panels[b]))}}),a.widget("ui.tabs",a.ui.tabs,{options:{add:null,remove:null,tabTemplate:"<li><a href='#{href}'><span>#{label}</span></a></li>"},add:function(b,d,e){e===c&&(e=this.anchors.length);var l,m=this.options;d=a(m.tabTemplate.replace(/#\{href\}/g,b).replace(/#\{label\}/g,d));var p=b.indexOf("#")?this._tabId(d):b.replace("#","");d.addClass("ui-state-default ui-corner-top").data("ui-tabs-destroy",!0);
d.attr("aria-controls",p);b=e>=this.tabs.length;l=this.element.find("#"+p);l.length||(l=this._createPanel(p),b?0<e?l.insertAfter(this.panels.eq(-1)):l.appendTo(this.element):l.insertBefore(this.panels[e]));l.addClass("ui-tabs-panel ui-widget-content ui-corner-bottom").hide();b?d.appendTo(this.tablist):d.insertBefore(this.tabs[e]);m.disabled=a.map(m.disabled,function(a){return a>=e?++a:a});this.refresh();1===this.tabs.length&&!1===m.active&&this.option("active",0);this._trigger("add",null,this._ui(this.anchors[e],
this.panels[e]));return this},remove:function(b){b=this._getIndex(b);var d=this.options,c=this.tabs.eq(b).remove(),e=this._getPanelForTab(c).remove();c.hasClass("ui-tabs-active")&&2<this.anchors.length&&this._activate(b+(b+1<this.anchors.length?1:-1));d.disabled=a.map(a.grep(d.disabled,function(a){return a!==b}),function(a){return a>=b?--a:a});this.refresh();this._trigger("remove",null,this._ui(c.find("a")[0],e[0]));return this}}),a.widget("ui.tabs",a.ui.tabs,{length:function(){return this.anchors.length}}),
a.widget("ui.tabs",a.ui.tabs,{options:{idPrefix:"ui-tabs-"},_tabId:function(b){b=b.is("li")?b.find("a[href]"):b;b=b[0];return a(b).closest("li").attr("aria-controls")||b.title&&b.title.replace(/\s/g,"_").replace(/[^\w\u00c0-\uFFFF\-]/g,"")||this.options.idPrefix+ ++d}}),a.widget("ui.tabs",a.ui.tabs,{options:{panelTemplate:"<div></div>"},_createPanel:function(b){return a(this.options.panelTemplate).attr("id",b).addClass("ui-tabs-panel ui-widget-content ui-corner-bottom").data("ui-tabs-destroy",!0)}}),
a.widget("ui.tabs",a.ui.tabs,{_create:function(){var a=this.options;null===a.active&&a.selected!==c&&(a.active=-1===a.selected?!1:a.selected);this._super();a.selected=a.active;!1===a.selected&&(a.selected=-1)},_setOption:function(a,b){if("selected"!==a)return this._super(a,b);var d=this.options;this._super("active",-1===b?!1:b);d.selected=d.active;!1===d.selected&&(d.selected=-1)},_eventHandler:function(){this._superApply(arguments);this.options.selected=this.options.active;!1===this.options.selected&&
(this.options.selected=-1)}}),a.widget("ui.tabs",a.ui.tabs,{options:{show:null,select:null},_create:function(){this._super();!1!==this.options.active&&this._trigger("show",null,this._ui(this.active.find(".ui-tabs-anchor")[0],this._getPanelForTab(this.active)[0]))},_trigger:function(a,b,d){var c=this._superApply(arguments);if(!c)return!1;"beforeActivate"===a&&d.newTab.length?c=this._super("select",b,{tab:d.newTab.find(".ui-tabs-anchor")[0],panel:d.newPanel[0],index:d.newTab.closest("li").index()}):
"activate"===a&&d.newTab.length&&(c=this._super("show",b,{tab:d.newTab.find(".ui-tabs-anchor")[0],panel:d.newPanel[0],index:d.newTab.closest("li").index()}));return c}}),a.widget("ui.tabs",a.ui.tabs,{select:function(a){a=this._getIndex(a);if(-1===a)if(this.options.collapsible&&-1!==this.options.selected)a=this.options.selected;else return;this.anchors.eq(a).trigger(this.options.event+this.eventNamespace)}}),function(){var b=0;a.widget("ui.tabs",a.ui.tabs,{options:{cookie:null},_create:function(){var a=
this.options,b;null==a.active&&a.cookie&&(b=parseInt(this._cookie(),10),-1===b&&(b=!1),a.active=b);this._super()},_cookie:function(d){var c=[this.cookie||(this.cookie=this.options.cookie.name||"ui-tabs-"+ ++b)];arguments.length&&(c.push(!1===d?-1:d),c.push(this.options.cookie));return a.cookie.apply(null,c)},_refresh:function(){this._super();this.options.cookie&&this._cookie(this.options.active,this.options.cookie)},_eventHandler:function(){this._superApply(arguments);this.options.cookie&&this._cookie(this.options.active,
this.options.cookie)},_destroy:function(){this._super();this.options.cookie&&this._cookie(null,this.options.cookie)}})}(),a.widget("ui.tabs",a.ui.tabs,{_trigger:function(b,d,c){c=a.extend({},c);"load"===b&&(c.panel=c.panel[0],c.tab=c.tab.find(".ui-tabs-anchor")[0]);return this._super(b,d,c)}}),a.widget("ui.tabs",a.ui.tabs,{options:{fx:null},_getFx:function(){var b,d,c=this.options.fx;c&&(a.isArray(c)?(b=c[0],d=c[1]):b=d=c);return c?{show:d,hide:b}:null},_toggle:function(a,b){function d(){e.running=
!1;e._trigger("activate",a,b)}function c(){b.newTab.closest("li").addClass("ui-tabs-active ui-state-active");p.length&&t.show?p.animate(t.show,t.show.duration,function(){d()}):(p.show(),d())}var e=this,p=b.newPanel,q=b.oldPanel,t=this._getFx();if(!t)return this._super(a,b);e.running=!0;q.length&&t.hide?q.animate(t.hide,t.hide.duration,function(){b.oldTab.closest("li").removeClass("ui-tabs-active ui-state-active");c()}):(b.oldTab.closest("li").removeClass("ui-tabs-active ui-state-active"),q.hide(),
c())}}))})(jQuery);
(function(a){function c(b,d){var c=(b.attr("aria-describedby")||"").split(/\s+/);c.push(d);b.data("ui-tooltip-id",d).attr("aria-describedby",a.trim(c.join(" ")))}function b(b){var d=b.data("ui-tooltip-id"),c=(b.attr("aria-describedby")||"").split(/\s+/),d=a.inArray(d,c);-1!==d&&c.splice(d,1);b.removeData("ui-tooltip-id");(c=a.trim(c.join(" ")))?b.attr("aria-describedby",c):b.removeAttr("aria-describedby")}var d=0;a.widget("ui.tooltip",{version:"1.9.1",options:{content:function(){return a(this).attr("title")},hide:!0,
items:"[title]:not([disabled])",position:{my:"left top+15",at:"left bottom",collision:"flipfit flipfit"},show:!0,tooltipClass:null,track:!1,close:null,open:null},_create:function(){this._on({mouseover:"open",focusin:"open"});this.tooltips={};this.parents={};this.options.disabled&&this._disable()},_setOption:function(b,d){var c=this;"disabled"===b?(this[d?"_disable":"_enable"](),this.options[b]=d):(this._super(b,d),"content"===b&&a.each(this.tooltips,function(a,b){c._updateContent(b)}))},_disable:function(){var b=
this;a.each(this.tooltips,function(d,c){var h=a.Event("blur");h.target=h.currentTarget=c[0];b.close(h,!0)});this.element.find(this.options.items).andSelf().each(function(){var b=a(this);b.is("[title]")&&b.data("ui-tooltip-title",b.attr("title")).attr("title","")})},_enable:function(){this.element.find(this.options.items).andSelf().each(function(){var b=a(this);b.data("ui-tooltip-title")&&b.attr("title",b.data("ui-tooltip-title"))})},open:function(b){var d=this,c=a(b?b.target:this.element).closest(this.options.items);
c.length&&(this.options.track&&c.data("ui-tooltip-id")?(this._find(c).position(a.extend({of:c},this.options.position)),this._off(this.document,"mousemove")):(c.attr("title")&&c.data("ui-tooltip-title",c.attr("title")),c.data("tooltip-open",!0),b&&"mouseover"===b.type&&c.parents().each(function(){var b;a(this).data("tooltip-open")&&(b=a.Event("blur"),b.target=b.currentTarget=this,d.close(b,!0));this.title&&(a(this).uniqueId(),d.parents[this.id]={element:this,title:this.title},this.title="")}),this._updateContent(c,
b)))},_updateContent:function(a,b){var d;d=this.options.content;var c=this;if("string"===typeof d)return this._open(b,a,d);(d=d.call(a[0],function(d){a.data("tooltip-open")&&c._delay(function(){this._open(b,a,d)})}))&&this._open(b,a,d)},_open:function(b,d,g){function h(a){p.of=a;l.is(":hidden")||l.position(p)}var l,m,p=a.extend({},this.options.position);g&&(l=this._find(d),l.length?l.find(".ui-tooltip-content").html(g):(d.is("[title]")&&(b&&"mouseover"===b.type?d.attr("title",""):d.removeAttr("title")),
l=this._tooltip(d),c(d,l.attr("id")),l.find(".ui-tooltip-content").html(g),this.options.track&&b&&/^mouse/.test(b.originalEvent.type)?(this._on(this.document,{mousemove:h}),h(b)):l.position(a.extend({of:d},this.options.position)),l.hide(),this._show(l,this.options.show),this.options.show&&this.options.show.delay&&(m=setInterval(function(){l.is(":visible")&&(h(p.of),clearInterval(m))},a.fx.interval)),this._trigger("open",b,{tooltip:l}),g={keyup:function(b){b.keyCode===a.ui.keyCode.ESCAPE&&(b=a.Event(b),
b.currentTarget=d[0],this.close(b,!0))},remove:function(){this._removeTooltip(l)}},b&&"mouseover"!==b.type||(g.mouseleave="close"),b&&"focusin"!==b.type||(g.focusout="close"),this._on(d,g)))},close:function(d){var c=this,g=a(d?d.currentTarget:this.element),h=this._find(g);this.closing||(g.data("ui-tooltip-title")&&g.attr("title",g.data("ui-tooltip-title")),b(g),h.stop(!0),this._hide(h,this.options.hide,function(){c._removeTooltip(a(this))}),g.removeData("tooltip-open"),this._off(g,"mouseleave focusout keyup"),
g[0]!==this.element[0]&&this._off(g,"remove"),this._off(this.document,"mousemove"),d&&"mouseleave"===d.type&&a.each(this.parents,function(a,b){b.element.title=b.title;delete c.parents[a]}),this.closing=!0,this._trigger("close",d,{tooltip:h}),this.closing=!1)},_tooltip:function(b){var c="ui-tooltip-"+d++,g=a("<div>").attr({id:c,role:"tooltip"}).addClass("ui-tooltip ui-widget ui-corner-all ui-widget-content "+(this.options.tooltipClass||""));a("<div>").addClass("ui-tooltip-content").appendTo(g);g.appendTo(this.document[0].body);
a.fn.bgiframe&&g.bgiframe();this.tooltips[c]=b;return g},_find:function(b){return(b=b.data("ui-tooltip-id"))?a("#"+b):a()},_removeTooltip:function(a){a.remove();delete this.tooltips[a.attr("id")]},_destroy:function(){var b=this;a.each(this.tooltips,function(d,c){var h=a.Event("blur");h.target=h.currentTarget=c[0];b.close(h,!0);a("#"+d).remove();c.data("ui-tooltip-title")&&(c.attr("title",c.data("ui-tooltip-title")),c.removeData("ui-tooltip-title"))})}})})(jQuery);
jQuery.effects||function(a,c){var b=!1!==a.uiBackCompat;a.effects={effect:{}};(function(b,c){function f(a,b,d){var c=t[b.type]||{};if(null==a)return d||!b.def?null:b.def;a=c.floor?~~a:parseFloat(a);return isNaN(a)?b.def:c.mod?(a+c.mod)%c.mod:0>a?0:c.max<a?c.max:a}function g(a){var c=p(),e=c._rgba=[];a=a.toLowerCase();B(m,function(b,d){var f,g=d.re.exec(a);f=g&&d.parse(g);g=d.space||"rgba";if(f)return f=c[g](f),c[q[g].cache]=f[q[g].cache],e=c._rgba=f._rgba,!1});return e.length?("0,0,0,0"===e.join()&&
b.extend(e,C.transparent),c):C[a]}function h(a,b,d){d=(d+1)%1;return 1>6*d?a+(b-a)*d*6:1>2*d?b:2>3*d?a+(b-a)*(2/3-d)*6:a}var l=/^([\-+])=\s*(\d+\.?\d*)/,m=[{re:/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(?:,\s*(\d+(?:\.\d+)?)\s*)?\)/,parse:function(a){return[a[1],a[2],a[3],a[4]]}},{re:/rgba?\(\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d+(?:\.\d+)?)\s*)?\)/,parse:function(a){return[2.55*a[1],2.55*a[2],2.55*a[3],a[4]]}},{re:/#([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})/,
parse:function(a){return[parseInt(a[1],16),parseInt(a[2],16),parseInt(a[3],16)]}},{re:/#([a-f0-9])([a-f0-9])([a-f0-9])/,parse:function(a){return[parseInt(a[1]+a[1],16),parseInt(a[2]+a[2],16),parseInt(a[3]+a[3],16)]}},{re:/hsla?\(\s*(\d+(?:\.\d+)?)\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d+(?:\.\d+)?)\s*)?\)/,space:"hsla",parse:function(a){return[a[1],a[2]/100,a[3]/100,a[4]]}}],p=b.Color=function(a,c,e,f){return new b.Color.fn.parse(a,c,e,f)},q={rgba:{props:{red:{idx:0,type:"byte"},
green:{idx:1,type:"byte"},blue:{idx:2,type:"byte"}}},hsla:{props:{hue:{idx:0,type:"degrees"},saturation:{idx:1,type:"percent"},lightness:{idx:2,type:"percent"}}}},t={"byte":{floor:!0,max:255},percent:{max:1},degrees:{mod:360,floor:!0}},y=p.support={},u=b("<p>")[0],C,B=b.each;u.style.cssText="background-color:rgba(1,1,1,.5)";y.rgba=-1<u.style.backgroundColor.indexOf("rgba");B(q,function(a,b){b.cache="_"+a;b.props.alpha={idx:3,type:"percent",def:1}});p.fn=b.extend(p.prototype,{parse:function(h,l,m,
r){if(h===c)return this._rgba=[null,null,null,null],this;if(h.jquery||h.nodeType)h=b(h).css(l),l=c;var v=this,z=b.type(h),t=this._rgba=[];l!==c&&(h=[h,l,m,r],z="array");if("string"===z)return this.parse(g(h)||C._default);if("array"===z)return B(q.rgba.props,function(a,b){t[b.idx]=f(h[b.idx],b)}),this;if("object"===z)return h instanceof p?B(q,function(a,b){h[b.cache]&&(v[b.cache]=h[b.cache].slice())}):B(q,function(b,d){var c=d.cache;B(d.props,function(a,b){if(!v[c]&&d.to){if("alpha"===a||null==h[a])return;
v[c]=d.to(v._rgba)}v[c][b.idx]=f(h[a],b,!0)});v[c]&&0>a.inArray(null,v[c].slice(0,3))&&(v[c][3]=1,d.from&&(v._rgba=d.from(v[c])))}),this},is:function(a){var b=p(a),d=!0,c=this;B(q,function(a,e){var f,g=b[e.cache];g&&(f=c[e.cache]||e.to&&e.to(c._rgba)||[],B(e.props,function(a,b){if(null!=g[b.idx])return d=g[b.idx]===f[b.idx]}));return d});return d},_space:function(){var a=[],b=this;B(q,function(d,c){b[c.cache]&&a.push(d)});return a.pop()},transition:function(a,b){var d=p(a),c=d._space(),e=q[c],g=0===
this.alpha()?p("transparent"):this,h=g[e.cache]||e.to(g._rgba),l=h.slice(),d=d[e.cache];B(e.props,function(a,c){var e=c.idx,g=h[e],m=d[e],p=t[c.type]||{};null!==m&&(null===g?l[e]=m:(p.mod&&(m-g>p.mod/2?g+=p.mod:g-m>p.mod/2&&(g-=p.mod)),l[e]=f((m-g)*b+g,c)))});return this[c](l)},blend:function(a){if(1===this._rgba[3])return this;var c=this._rgba.slice(),e=c.pop(),f=p(a)._rgba;return p(b.map(c,function(a,b){return(1-e)*f[b]+e*a}))},toRgbaString:function(){var a="rgba(",c=b.map(this._rgba,function(a,
b){return null==a?2<b?1:0:a});1===c[3]&&(c.pop(),a="rgb(");return a+c.join()+")"},toHslaString:function(){var a="hsla(",c=b.map(this.hsla(),function(a,b){null==a&&(a=2<b?1:0);b&&3>b&&(a=Math.round(100*a)+"%");return a});1===c[3]&&(c.pop(),a="hsl(");return a+c.join()+")"},toHexString:function(a){var c=this._rgba.slice(),e=c.pop();a&&c.push(~~(255*e));return"#"+b.map(c,function(a){a=(a||0).toString(16);return 1===a.length?"0"+a:a}).join("")},toString:function(){return 0===this._rgba[3]?"transparent":
this.toRgbaString()}});p.fn.parse.prototype=p.fn;q.hsla.to=function(a){if(null==a[0]||null==a[1]||null==a[2])return[null,null,null,a[3]];var b=a[0]/255,d=a[1]/255,c=a[2]/255;a=a[3];var e=Math.max(b,d,c),f=Math.min(b,d,c),g=e-f,h=e+f,l=.5*h,h=0===l||1===l?l:.5>=l?g/h:g/(2-h);return[Math.round(f===e?0:b===e?60*(d-c)/g+360:d===e?60*(c-b)/g+120:60*(b-d)/g+240)%360,h,l,null==a?1:a]};q.hsla.from=function(a){if(null==a[0]||null==a[1]||null==a[2])return[null,null,null,a[3]];var b=a[0]/360,d=a[1],c=a[2];a=
a[3];d=.5>=c?c*(1+d):c+d-c*d;c=2*c-d;return[Math.round(255*h(c,d,b+1/3)),Math.round(255*h(c,d,b)),Math.round(255*h(c,d,b-1/3)),a]};B(q,function(a,g){var h=g.props,m=g.cache,q=g.to,t=g.from;p.fn[a]=function(a){q&&!this[m]&&(this[m]=q(this._rgba));if(a===c)return this[m].slice();var g,l=b.type(a),y="array"===l||"object"===l?a:arguments,u=this[m].slice();B(h,function(a,b){var d=y["object"===l?a:b.idx];null==d&&(d=u[b.idx]);u[b.idx]=f(d,b)});return t?(g=p(t(u)),g[m]=u,g):p(u)};B(h,function(c,e){p.fn[c]||
(p.fn[c]=function(f){var g=b.type(f),h="alpha"===c?this._hsla?"hsla":"rgba":a,m=this[h](),p=m[e.idx];if("undefined"===g)return p;"function"===g&&(f=f.call(this,p),g=b.type(f));if(null==f&&e.empty)return this;"string"===g&&(g=l.exec(f))&&(f=p+parseFloat(g[2])*("+"===g[1]?1:-1));m[e.idx]=f;return this[h](m)})})});B("backgroundColor borderBottomColor borderLeftColor borderRightColor borderTopColor color columnRuleColor outlineColor textDecorationColor textEmphasisColor".split(" "),function(a,c){b.cssHooks[c]=
{set:function(a,e){var f,h="";if("string"!==b.type(e)||(f=g(e))){e=p(f||e);if(!y.rgba&&1!==e._rgba[3]){for(f="backgroundColor"===c?a.parentNode:a;(""===h||"transparent"===h)&&f&&f.style;)try{h=b.css(f,"backgroundColor"),f=f.parentNode}catch(l){}e=e.blend(h&&"transparent"!==h?h:"_default")}e=e.toRgbaString()}try{a.style[c]=e}catch(m){}}};b.fx.step[c]=function(a){a.colorInit||(a.start=p(a.elem,c),a.end=p(a.end),a.colorInit=!0);b.cssHooks[c].set(a.elem,a.start.transition(a.end,a.pos))}});b.cssHooks.borderColor=
{expand:function(a){var b={};B(["Top","Right","Bottom","Left"],function(d,c){b["border"+c+"Color"]=a});return b}};C=b.Color.names={aqua:"#00ffff",black:"#000000",blue:"#0000ff",fuchsia:"#ff00ff",gray:"#808080",green:"#008000",lime:"#00ff00",maroon:"#800000",navy:"#000080",olive:"#808000",purple:"#800080",red:"#ff0000",silver:"#c0c0c0",teal:"#008080",white:"#ffffff",yellow:"#ffff00",transparent:[null,null,null,0],_default:"#ffffff"}})(jQuery);(function(){function b(){var d=this.ownerDocument.defaultView?
this.ownerDocument.defaultView.getComputedStyle(this,null):this.currentStyle,c={},e,f;if(d&&d.length&&d[0]&&d[d[0]])for(f=d.length;f--;)e=d[f],"string"===typeof d[e]&&(c[a.camelCase(e)]=d[e]);else for(e in d)"string"===typeof d[e]&&(c[e]=d[e]);return c}var e=["add","remove","toggle"],f={border:1,borderBottom:1,borderColor:1,borderLeft:1,borderRight:1,borderTop:1,borderWidth:1,margin:1,padding:1};a.each(["borderLeftStyle","borderRightStyle","borderBottomStyle","borderTopStyle"],function(b,d){a.fx.step[d]=
function(a){if("none"!==a.end&&!a.setAttr||1===a.pos&&!a.setAttr)jQuery.style(a.elem,d,a.end),a.setAttr=!0}});a.effects.animateClass=function(c,h,l,m){var p=a.speed(h,l,m);return this.queue(function(){var h=a(this),m=h.attr("class")||"",l,u=p.children?h.find("*").andSelf():h,u=u.map(function(){return{el:a(this),start:b.call(this)}});l=function(){a.each(e,function(a,b){if(c[b])h[b+"Class"](c[b])})};l();u=u.map(function(){this.end=b.call(this.el[0]);var c=this.start,e=this.end,g={},h,l;for(h in e)l=
e[h],c[h]===l||f[h]||!a.fx.step[h]&&isNaN(parseFloat(l))||(g[h]=l);this.diff=g;return this});h.attr("class",m);u=u.map(function(){var b=this,d=a.Deferred(),c=jQuery.extend({},p,{queue:!1,complete:function(){d.resolve(b)}});this.el.animate(this.diff,c);return d.promise()});a.when.apply(a,u.get()).done(function(){l();a.each(arguments,function(){var b=this.el;a.each(this.diff,function(a){b.css(a,"")})});p.complete.call(h[0])})})};a.fn.extend({_addClass:a.fn.addClass,addClass:function(b,d,c,e){return d?
a.effects.animateClass.call(this,{add:b},d,c,e):this._addClass(b)},_removeClass:a.fn.removeClass,removeClass:function(b,d,c,e){return d?a.effects.animateClass.call(this,{remove:b},d,c,e):this._removeClass(b)},_toggleClass:a.fn.toggleClass,toggleClass:function(b,d,e,f,p){return"boolean"===typeof d||d===c?e?a.effects.animateClass.call(this,d?{add:b}:{remove:b},e,f,p):this._toggleClass(b,d):a.effects.animateClass.call(this,{toggle:b},d,e,f)},switchClass:function(b,d,c,e,f){return a.effects.animateClass.call(this,
{add:d,remove:b},c,e,f)}})})();(function(){function d(b,d,c,e){a.isPlainObject(b)&&(d=b,b=b.effect);b={effect:b};null==d&&(d={});a.isFunction(d)&&(e=d,c=null,d={});if("number"===typeof d||a.fx.speeds[d])e=c,c=d,d={};a.isFunction(c)&&(e=c,c=null);d&&a.extend(b,d);c=c||d.duration;b.duration=a.fx.off?0:"number"===typeof c?c:c in a.fx.speeds?a.fx.speeds[c]:a.fx.speeds._default;b.complete=e||d.complete;return b}function e(d){return!d||"number"===typeof d||a.fx.speeds[d]?!0:"string"!==typeof d||a.effects.effect[d]?
!1:b&&a.effects[d]?!1:!0}a.extend(a.effects,{version:"1.9.1",save:function(a,b){for(var d=0;d<b.length;d++)null!==b[d]&&a.data("ui-effects-"+b[d],a[0].style[b[d]])},restore:function(a,b){var d,e;for(e=0;e<b.length;e++)null!==b[e]&&(d=a.data("ui-effects-"+b[e]),d===c&&(d=""),a.css(b[e],d))},setMode:function(a,b){"toggle"===b&&(b=a.is(":hidden")?"show":"hide");return b},getBaseline:function(a,b){var d,c;switch(a[0]){case "top":d=0;break;case "middle":d=.5;break;case "bottom":d=1;break;default:d=a[0]/
b.height}switch(a[1]){case "left":c=0;break;case "center":c=.5;break;case "right":c=1;break;default:c=a[1]/b.width}return{x:c,y:d}},createWrapper:function(b){if(b.parent().is(".ui-effects-wrapper"))return b.parent();var d={width:b.outerWidth(!0),height:b.outerHeight(!0),"float":b.css("float")},c=a("<div></div>").addClass("ui-effects-wrapper").css({fontSize:"100%",background:"transparent",border:"none",margin:0,padding:0}),e={width:b.width(),height:b.height()},m=document.activeElement;try{m.id}catch(p){m=
document.body}b.wrap(c);(b[0]===m||a.contains(b[0],m))&&a(m).focus();c=b.parent();"static"===b.css("position")?(c.css({position:"relative"}),b.css({position:"relative"})):(a.extend(d,{position:b.css("position"),zIndex:b.css("z-index")}),a.each(["top","left","bottom","right"],function(a,c){d[c]=b.css(c);isNaN(parseInt(d[c],10))&&(d[c]="auto")}),b.css({position:"relative",top:0,left:0,right:"auto",bottom:"auto"}));b.css(e);return c.css(d).show()},removeWrapper:function(b){var d=document.activeElement;
b.parent().is(".ui-effects-wrapper")&&(b.parent().replaceWith(b),(b[0]===d||a.contains(b[0],d))&&a(d).focus());return b},setTransition:function(b,d,c,e){e=e||{};a.each(d,function(a,d){var g=b.cssUnit(d);0<g[0]&&(e[d]=g[0]*c+g[1])});return e}});a.fn.extend({effect:function(){function c(b){function d(){a.isFunction(h)&&h.call(f[0]);a.isFunction(b)&&b()}var f=a(this),h=e.complete,l=e.mode;(f.is(":hidden")?"hide"===l:"show"===l)?d():m.call(f[0],e,d)}var e=d.apply(this,arguments),h=e.mode,l=e.queue,m=
a.effects.effect[e.effect],p=!m&&b&&a.effects[e.effect];return a.fx.off||!m&&!p?h?this[h](e.duration,e.complete):this.each(function(){e.complete&&e.complete.call(this)}):m?!1===l?this.each(c):this.queue(l||"fx",c):p.call(this,{options:e,duration:e.duration,callback:e.complete,mode:e.mode})},_show:a.fn.show,show:function(a){if(e(a))return this._show.apply(this,arguments);var b=d.apply(this,arguments);b.mode="show";return this.effect.call(this,b)},_hide:a.fn.hide,hide:function(a){if(e(a))return this._hide.apply(this,
arguments);var b=d.apply(this,arguments);b.mode="hide";return this.effect.call(this,b)},__toggle:a.fn.toggle,toggle:function(b){if(e(b)||"boolean"===typeof b||a.isFunction(b))return this.__toggle.apply(this,arguments);var c=d.apply(this,arguments);c.mode="toggle";return this.effect.call(this,c)},cssUnit:function(b){var d=this.css(b),c=[];a.each(["em","px","%","pt"],function(a,b){0<d.indexOf(b)&&(c=[parseFloat(d),b])});return c}})})();(function(){var b={};a.each(["Quad","Cubic","Quart","Quint","Expo"],
function(a,c){b[c]=function(b){return Math.pow(b,a+2)}});a.extend(b,{Sine:function(a){return 1-Math.cos(a*Math.PI/2)},Circ:function(a){return 1-Math.sqrt(1-a*a)},Elastic:function(a){return 0===a||1===a?a:-Math.pow(2,8*(a-1))*Math.sin((80*(a-1)-7.5)*Math.PI/15)},Back:function(a){return a*a*(3*a-2)},Bounce:function(a){for(var b,d=4;a<((b=Math.pow(2,--d))-1)/11;);return 1/Math.pow(4,3-d)-7.5625*Math.pow((3*b-2)/22-a,2)}});a.each(b,function(b,d){a.easing["easeIn"+b]=d;a.easing["easeOut"+b]=function(a){return 1-
d(1-a)};a.easing["easeInOut"+b]=function(a){return.5>a?d(2*a)/2:1-d(-2*a+2)/2}})})()}(jQuery);
(function(a,c){var b=/up|down|vertical/,d=/up|left|vertical|horizontal/;a.effects.effect.blind=function(c,f){var g=a(this),h="position top bottom left right height width".split(" "),l=a.effects.setMode(g,c.mode||"hide"),m=c.direction||"up",p=b.test(m),q=p?"height":"width",t=p?"top":"left",m=d.test(m),y={},u="show"===l,C,B,I;g.parent().is(".ui-effects-wrapper")?a.effects.save(g.parent(),h):a.effects.save(g,h);g.show();C=a.effects.createWrapper(g).css({overflow:"hidden"});B=C[q]();I=parseFloat(C.css(t))||
0;y[q]=u?B:0;m||(g.css(p?"bottom":"right",0).css(p?"top":"left","auto").css({position:"absolute"}),y[t]=u?I:B+I);u&&(C.css(q,0),m||C.css(t,I+B));C.animate(y,{duration:c.duration,easing:c.easing,queue:!1,complete:function(){"hide"===l&&g.hide();a.effects.restore(g,h);a.effects.removeWrapper(g);f()}})}})(jQuery);
(function(a,c){a.effects.effect.bounce=function(b,d){var c=a(this),f="position top bottom left right height width".split(" "),g=a.effects.setMode(c,b.mode||"effect"),h="hide"===g,l="show"===g,m=b.direction||"up",g=b.distance,p=b.times||5,q=2*p+(l||h?1:0),t=b.duration/q,y=b.easing,u="up"===m||"down"===m?"top":"left",m="up"===m||"left"===m,C,B,I=c.queue(),F=I.length;(l||h)&&f.push("opacity");a.effects.save(c,f);c.show();a.effects.createWrapper(c);g||(g=c["top"===u?"outerHeight":"outerWidth"]()/3);l&&
(B={opacity:1},B[u]=0,c.css("opacity",0).css(u,m?2*-g:2*g).animate(B,t,y));h&&(g/=Math.pow(2,p-1));B={};for(l=B[u]=0;l<p;l++)C={},C[u]=(m?"-=":"+=")+g,c.animate(C,t,y).animate(B,t,y),g=h?2*g:g/2;h&&(C={opacity:0},C[u]=(m?"-=":"+=")+g,c.animate(C,t,y));c.queue(function(){h&&c.hide();a.effects.restore(c,f);a.effects.removeWrapper(c);d()});1<F&&I.splice.apply(I,[1,0].concat(I.splice(F,q+1)));c.dequeue()}})(jQuery);
(function(a,c){a.effects.effect.clip=function(b,d){var c=a(this),f="position top bottom left right height width".split(" "),g="show"===a.effects.setMode(c,b.mode||"hide"),h="vertical"===(b.direction||"vertical"),l=h?"height":"width",h=h?"top":"left",m={},p,q;a.effects.save(c,f);c.show();p=a.effects.createWrapper(c).css({overflow:"hidden"});p="IMG"===c[0].tagName?p:c;q=p[l]();g&&(p.css(l,0),p.css(h,q/2));m[l]=g?q:0;m[h]=g?0:q/2;p.animate(m,{queue:!1,duration:b.duration,easing:b.easing,complete:function(){g||
c.hide();a.effects.restore(c,f);a.effects.removeWrapper(c);d()}})}})(jQuery);
(function(a,c){a.effects.effect.drop=function(b,d){var c=a(this),f="position top bottom left right opacity height width".split(" "),g=a.effects.setMode(c,b.mode||"hide"),h="show"===g,l=b.direction||"left",m="up"===l||"down"===l?"top":"left",l="up"===l||"left"===l?"pos":"neg",p={opacity:h?1:0},q;a.effects.save(c,f);c.show();a.effects.createWrapper(c);q=b.distance||c["top"===m?"outerHeight":"outerWidth"](!0)/2;h&&c.css("opacity",0).css(m,"pos"===l?-q:q);p[m]=(h?"pos"===l?"+=":"-=":"pos"===l?"-=":"+=")+
q;c.animate(p,{queue:!1,duration:b.duration,easing:b.easing,complete:function(){"hide"===g&&c.hide();a.effects.restore(c,f);a.effects.removeWrapper(c);d()}})}})(jQuery);
(function(a,c){a.effects.effect.explode=function(b,d){function c(){t.push(this);t.length===f*g&&(h.css({visibility:"visible"}),a(t).remove(),l||h.hide(),d())}var f=b.pieces?Math.round(Math.sqrt(b.pieces)):3,g=f,h=a(this),l="show"===a.effects.setMode(h,b.mode||"hide"),m=h.show().css("visibility","hidden").offset(),p=Math.ceil(h.outerWidth()/g),q=Math.ceil(h.outerHeight()/f),t=[],y,u,C,B,I,F;for(y=0;y<f;y++)for(B=m.top+y*q,F=y-(f-1)/2,u=0;u<g;u++)C=m.left+u*p,I=u-(g-1)/2,h.clone().appendTo("body").wrap("<div></div>").css({position:"absolute",
visibility:"visible",left:-u*p,top:-y*q}).parent().addClass("ui-effects-explode").css({position:"absolute",overflow:"hidden",width:p,height:q,left:C+(l?I*p:0),top:B+(l?F*q:0),opacity:l?0:1}).animate({left:C+(l?0:I*p),top:B+(l?0:F*q),opacity:l?1:0},b.duration||500,b.easing,c)}})(jQuery);(function(a,c){a.effects.effect.fade=function(b,d){var c=a(this),f=a.effects.setMode(c,b.mode||"toggle");c.animate({opacity:f},{queue:!1,duration:b.duration,easing:b.easing,complete:d})}})(jQuery);
(function(a,c){a.effects.effect.fold=function(b,d){var c=a(this),f="position top bottom left right height width".split(" "),g=a.effects.setMode(c,b.mode||"hide"),h="show"===g,l="hide"===g,g=b.size||15,m=/([0-9]+)%/.exec(g),p=!!b.horizFirst,q=h!==p,t=q?["width","height"]:["height","width"],y=b.duration/2,u,C={},B={};a.effects.save(c,f);c.show();u=a.effects.createWrapper(c).css({overflow:"hidden"});q=q?[u.width(),u.height()]:[u.height(),u.width()];m&&(g=parseInt(m[1],10)/100*q[l?0:1]);h&&u.css(p?{height:0,
width:g}:{height:g,width:0});C[t[0]]=h?q[0]:g;B[t[1]]=h?q[1]:0;u.animate(C,y,b.easing).animate(B,y,b.easing,function(){l&&c.hide();a.effects.restore(c,f);a.effects.removeWrapper(c);d()})}})(jQuery);
(function(a,c){a.effects.effect.highlight=function(b,d){var c=a(this),f=["backgroundImage","backgroundColor","opacity"],g=a.effects.setMode(c,b.mode||"show"),h={backgroundColor:c.css("backgroundColor")};"hide"===g&&(h.opacity=0);a.effects.save(c,f);c.show().css({backgroundImage:"none",backgroundColor:b.color||"#ffff99"}).animate(h,{queue:!1,duration:b.duration,easing:b.easing,complete:function(){"hide"===g&&c.hide();a.effects.restore(c,f);d()}})}})(jQuery);
(function(a,c){a.effects.effect.pulsate=function(b,d){var c=a(this),f=a.effects.setMode(c,b.mode||"show"),g="show"===f,h="hide"===f,f=2*(b.times||5)+(g||"hide"===f?1:0),l=b.duration/f,m=0,p=c.queue(),q=p.length;if(g||!c.is(":visible"))c.css("opacity",0).show(),m=1;for(g=1;g<f;g++)c.animate({opacity:m},l,b.easing),m=1-m;c.animate({opacity:m},l,b.easing);c.queue(function(){h&&c.hide();d()});1<q&&p.splice.apply(p,[1,0].concat(p.splice(q,f+1)));c.dequeue()}})(jQuery);
(function(a,c){a.effects.effect.puff=function(b,d){var c=a(this),f=a.effects.setMode(c,b.mode||"hide"),g="hide"===f,h=parseInt(b.percent,10)||150,l=h/100,m={height:c.height(),width:c.width()};a.extend(b,{effect:"scale",queue:!1,fade:!0,mode:f,complete:d,percent:g?h:100,from:g?m:{height:m.height*l,width:m.width*l}});c.effect(b)};a.effects.effect.scale=function(b,d){var c=a(this),f=a.extend(!0,{},b),g=a.effects.setMode(c,b.mode||"effect"),h=parseInt(b.percent,10)||(0===parseInt(b.percent,10)?0:"hide"===
g?0:100),l=b.direction||"both",m=b.origin,p={height:c.height(),width:c.width(),outerHeight:c.outerHeight(),outerWidth:c.outerWidth()},q="horizontal"!==l?h/100:1,h="vertical"!==l?h/100:1;f.effect="size";f.queue=!1;f.complete=d;"effect"!==g&&(f.origin=m||["middle","center"],f.restore=!0);f.from=b.from||("show"===g?{height:0,width:0}:p);f.to={height:p.height*q,width:p.width*h,outerHeight:p.outerHeight*q,outerWidth:p.outerWidth*h};f.fade&&("show"===g&&(f.from.opacity=0,f.to.opacity=1),"hide"===g&&(f.from.opacity=
1,f.to.opacity=0));c.effect(f)};a.effects.effect.size=function(b,d){var c,f,g,h,l,m,p=a(this),q="position top bottom left right width height overflow opacity".split(" ");l="position top bottom left right overflow opacity".split(" ");var t=["width","height","overflow"],y=["fontSize"],u=["borderTopWidth","borderBottomWidth","paddingTop","paddingBottom"],C=["borderLeftWidth","borderRightWidth","paddingLeft","paddingRight"],B=a.effects.setMode(p,b.mode||"effect"),I=b.restore||"effect"!==B,F=b.scale||
"both";m=b.origin||["middle","center"];var A=p.css("position"),r=I?q:l,v={height:0,width:0};"show"===B&&p.show();l={height:p.height(),width:p.width(),outerHeight:p.outerHeight(),outerWidth:p.outerWidth()};"toggle"===b.mode&&"show"===B?(p.from=b.to||v,p.to=b.from||l):(p.from=b.from||("show"===B?v:l),p.to=b.to||("hide"===B?v:l));g=p.from.height/l.height;h=p.from.width/l.width;c=p.to.height/l.height;f=p.to.width/l.width;if("box"===F||"both"===F)g!==c&&(r=r.concat(u),p.from=a.effects.setTransition(p,
u,g,p.from),p.to=a.effects.setTransition(p,u,c,p.to)),h!==f&&(r=r.concat(C),p.from=a.effects.setTransition(p,C,h,p.from),p.to=a.effects.setTransition(p,C,f,p.to));"content"!==F&&"both"!==F||g===c||(r=r.concat(y).concat(t),p.from=a.effects.setTransition(p,y,g,p.from),p.to=a.effects.setTransition(p,y,c,p.to));a.effects.save(p,r);p.show();a.effects.createWrapper(p);p.css("overflow","hidden").css(p.from);m&&(m=a.effects.getBaseline(m,l),p.from.top=(l.outerHeight-p.outerHeight())*m.y,p.from.left=(l.outerWidth-
p.outerWidth())*m.x,p.to.top=(l.outerHeight-p.to.outerHeight)*m.y,p.to.left=(l.outerWidth-p.to.outerWidth)*m.x);p.css(p.from);if("content"===F||"both"===F)u=u.concat(["marginTop","marginBottom"]).concat(y),C=C.concat(["marginLeft","marginRight"]),t=q.concat(u).concat(C),p.find("*[width]").each(function(){var d=a(this),m=d.height(),l=d.width();I&&a.effects.save(d,t);d.from={height:m*g,width:l*h};d.to={height:m*c,width:l*f};g!==c&&(d.from=a.effects.setTransition(d,u,g,d.from),d.to=a.effects.setTransition(d,
u,c,d.to));h!==f&&(d.from=a.effects.setTransition(d,C,h,d.from),d.to=a.effects.setTransition(d,C,f,d.to));d.css(d.from);d.animate(d.to,b.duration,b.easing,function(){I&&a.effects.restore(d,t)})});p.animate(p.to,{queue:!1,duration:b.duration,easing:b.easing,complete:function(){0===p.to.opacity&&p.css("opacity",p.from.opacity);"hide"===B&&p.hide();a.effects.restore(p,r);I||("static"===A?p.css({position:"relative",top:p.to.top,left:p.to.left}):a.each(["top","left"],function(a,b){p.css(b,function(b,d){var c=
parseInt(d,10),e=a?p.to.left:p.to.top;return"auto"===d?e+"px":c+e+"px"})}));a.effects.removeWrapper(p);d()}})}})(jQuery);
(function(a,c){a.effects.effect.shake=function(b,d){var c=a(this),f="position top bottom left right height width".split(" "),g=a.effects.setMode(c,b.mode||"effect"),h=b.direction||"left",l=b.distance||20,m=b.times||3,p=2*m+1,q=Math.round(b.duration/p),t="up"===h||"down"===h?"top":"left",y="up"===h||"left"===h,h={},u={},C={},B=c.queue(),I=B.length;a.effects.save(c,f);c.show();a.effects.createWrapper(c);h[t]=(y?"-=":"+=")+l;u[t]=(y?"+=":"-=")+2*l;C[t]=(y?"-=":"+=")+2*l;c.animate(h,q,b.easing);for(l=
1;l<m;l++)c.animate(u,q,b.easing).animate(C,q,b.easing);c.animate(u,q,b.easing).animate(h,q/2,b.easing).queue(function(){"hide"===g&&c.hide();a.effects.restore(c,f);a.effects.removeWrapper(c);d()});1<I&&B.splice.apply(B,[1,0].concat(B.splice(I,p+1)));c.dequeue()}})(jQuery);
(function(a,c){a.effects.effect.slide=function(b,d){var c=a(this),f="position top bottom left right width height".split(" "),g=a.effects.setMode(c,b.mode||"show"),h="show"===g,l=b.direction||"left",m="up"===l||"down"===l?"top":"left",l="up"===l||"left"===l,p,q={};a.effects.save(c,f);c.show();p=b.distance||c["top"===m?"outerHeight":"outerWidth"](!0);a.effects.createWrapper(c).css({overflow:"hidden"});h&&c.css(m,l?isNaN(p)?"-"+p:-p:p);q[m]=(h?l?"+=":"-=":l?"-=":"+=")+p;c.animate(q,{queue:!1,duration:b.duration,
easing:b.easing,complete:function(){"hide"===g&&c.hide();a.effects.restore(c,f);a.effects.removeWrapper(c);d()}})}})(jQuery);
(function(a,c){a.effects.effect.transfer=function(b,d){var c=a(this),f=a(b.to),g="fixed"===f.css("position"),h=a("body"),l=g?h.scrollTop():0,h=g?h.scrollLeft():0,m=f.offset(),f={top:m.top-l,left:m.left-h,height:f.innerHeight(),width:f.innerWidth()},m=c.offset(),p=a('<div class="ui-effects-transfer"></div>').appendTo(document.body).addClass(b.className).css({top:m.top-l,left:m.left-h,height:c.innerHeight(),width:c.innerWidth(),position:g?"fixed":"absolute"}).animate(f,b.duration,b.easing,function(){p.remove();
d()})}})(jQuery);
(function(a){a.widget("ui.multiAccordion",{options:{active:0,showAll:null,hideAll:null,_classes:{accordion:"ui-accordion ui-widget ui-helper-reset ui-accordion-icons",h3:"ui-accordion-header ui-helper-reset ui-state-default ui-corner-all",div:"ui-accordion-content ui-helper-reset ui-widget-content ui-corner-bottom",divActive:"ui-accordion-content-active",span:"ui-icon ui-icon-triangle-1-e",stateDefault:"ui-state-default",stateHover:"ui-state-hover"}},_create:function(){var c=this,b=c.options,d=c.element,
e=d.children("h3");d.children("div");d.addClass(b._classes.accordion);e.each(function(d){var e=a(this);e.addClass(b._classes.h3).prepend('<span class="{class}"></span>'.replace(/\{class}/,b._classes.span));c._isActive(d)&&c._showTab(e)});d.children("div").each(function(d){a(this).addClass(b._classes.div)});e.bind("click",function(d){d.preventDefault();d=a(this);var e={tab:d,content:d.next("div")};c._trigger("click",null,e);d.hasClass(b._classes.stateDefault)?c._showTab(d):c._hideTab(d)});e.bind("mouseover",
function(){a(this).addClass(b._classes.stateHover)});e.bind("mouseout",function(){a(this).removeClass(b._classes.stateHover)});c._trigger("init",null,d)},destroy:function(){var a=this.element,b=a.children("h3"),d=a.children("div");a.children("span").remove();var e=this.options;a.children("h3").unbind("click mouseover mouseout");a.removeClass(e._classes.accordion);b.removeClass(e._classes.h3).removeClass("ui-state-default ui-corner-all ui-state-active ui-corner-top").children("span").remove();d.removeClass(e._classes.div+
" "+e._classes.divActive).show()},_showTab:function(a){var b=a.children("span.ui-icon"),d=a.next(),e=this.options;a.removeClass("ui-state-default ui-corner-all").addClass("ui-state-active ui-corner-top");b.removeClass("ui-icon-triangle-1-e").addClass("ui-icon-triangle-1-s");d.slideDown("fast",function(){d.addClass(e._classes.divActive)});a={tab:a,content:a.next("div")};this._trigger("tabShown",null,a)},_hideTab:function(a){var b=a.children("span.ui-icon"),d=a.next(),e=this.options;a.removeClass("ui-state-active ui-corner-top").addClass("ui-state-default ui-corner-all");
b.removeClass("ui-icon-triangle-1-s").addClass("ui-icon-triangle-1-e");d.slideUp("fast",function(){d.removeClass(e._classes.divActive)});a={tab:a,content:a.next("div")};this._trigger("tabHidden",null,a)},_isActive:function(a){var b=this.options;if("boolean"!=typeof b.active||b.active)if(void 0!=b.active.length)for(var d=0;d<b.active.length;d++){if(b.active[d]==a)return!0}else return b.active==a;return!1},_getActiveTabs:function(){var c=[];this.element.children("div").each(function(b){var d=a(this);
d.is(":visible")&&c.push({index:b,tab:d.prev("h3"),content:d})});return 0==c.length?void 0:c},getActiveTabs:function(){var c=[];this.element.children("div").each(function(b){a(this).is(":visible")&&c.push(b)});return 0==c.length?[-1]:c},_setActiveTabs:function(c){var b=this,d=this.element;"undefined"!=typeof c&&d.children("div").each(function(d){var f=a(this).prev("h3");c.hasObject(d)?b._showTab(f):b._hideTab(f)})},_generateTabsArrayFromOptions:function(c){var b=[],d=this.element,e=d.children("h3").size();
if("array"===a.type(c))return c;if("number"===a.type(c))return[c];if("string"===a.type(c))switch(c.toLowerCase()){case "all":e=d.children("h3").size();for(c=0;c<e;c++)b.push(c);return b;case "none":return b=[-1]}},_setOption:function(c,b){a.Widget.prototype._setOption.apply(this,arguments);var d=this.element;switch(c){case "active":this._setActiveTabs(this._generateTabsArrayFromOptions(b));break;case "getActiveTabs":var d=this.element,e;d.children("div").each(function(b){a(this).is(":visible")&&(e=
e?e:[],e.push(b))});return 0==e.length?[-1]:e}}});Array.prototype.hasObject=Array.indexOf?function(a){return-1!==this.indexOf(a)}:function(a){for(var b=this.length+1;b-=1;)if(this[b-1]===a)return!0;return!1}})(jQuery);
(function(a){a.widget("ui.selectmenu",{options:{appendTo:"body",typeAhead:1E3,style:"dropdown",positionOptions:{my:"left top",at:"left bottom",offset:null},width:null,menuWidth:null,handleWidth:26,maxHeight:null,icons:null,format:null,escapeHtml:!1,bgImage:function(){}},_create:function(){var c=this,b=this.options,d=(this.element.attr("id")||"ui-selectmenu-"+Math.random().toString(16).slice(2,10)).replace(/(:|\.)/g,"");this.ids=[d,d+"-button",d+"-menu"];this._safemouseup=!0;this.isOpen=!1;this.newelement=
a("<a />",{"class":this.widgetBaseClass+" ui-widget ui-state-default ui-corner-all",id:this.ids[1],role:"button",href:"#nogo",tabindex:this.element.attr("disabled")?1:0,"aria-haspopup":!0,"aria-owns":this.ids[2]});this.newelementWrap=a("<span />").append(this.newelement).insertAfter(this.element);(d=this.element.attr("tabindex"))&&this.newelement.attr("tabindex",d);this.newelement.data("selectelement",this.element);this.selectmenuIcon=a('<span class="'+this.widgetBaseClass+'-icon ui-icon"></span>').prependTo(this.newelement);
this.newelement.prepend('<span class="'+c.widgetBaseClass+'-status" />');this.element.bind({"click.selectmenu":function(a){c.newelement.focus();a.preventDefault()}});this.newelement.bind("mousedown.selectmenu",function(a){c._toggle(a,!0);"popup"==b.style&&(c._safemouseup=!1,setTimeout(function(){c._safemouseup=!0},300));return!1}).bind("click.selectmenu",function(){return!1}).bind("keydown.selectmenu",function(b){var d=!1;switch(b.keyCode){case a.ui.keyCode.ENTER:d=!0;break;case a.ui.keyCode.SPACE:c._toggle(b);
break;case a.ui.keyCode.UP:b.altKey?c.open(b):c._moveSelection(-1);break;case a.ui.keyCode.DOWN:b.altKey?c.open(b):c._moveSelection(1);break;case a.ui.keyCode.LEFT:c._moveSelection(-1);break;case a.ui.keyCode.RIGHT:c._moveSelection(1);break;case a.ui.keyCode.TAB:d=!0;break;case a.ui.keyCode.PAGE_UP:case a.ui.keyCode.HOME:c.index(0);break;case a.ui.keyCode.PAGE_DOWN:case a.ui.keyCode.END:c.index(c._optionLis.length);break;default:d=!0}return d}).bind("keypress.selectmenu",function(a){0<a.which&&c._typeAhead(a.which,
"mouseup");return!0}).bind("mouseover.selectmenu",function(){b.disabled||a(this).addClass("ui-state-hover")}).bind("mouseout.selectmenu",function(){b.disabled||a(this).removeClass("ui-state-hover")}).bind("focus.selectmenu",function(){b.disabled||a(this).addClass("ui-state-focus")}).bind("blur.selectmenu",function(){b.disabled||a(this).removeClass("ui-state-focus")});a(document).bind("mousedown.selectmenu-"+this.ids[0],function(a){c.isOpen&&c.close(a)});this.element.bind("click.selectmenu",function(){c._refreshValue()}).bind("focus.selectmenu",
function(){c.newelement&&c.newelement[0].focus()});b.width||(b.width=this.element.outerWidth());this.newelement.width(b.width);this.element.hide();this.list=a("<ul />",{"class":"ui-widget ui-widget-content","aria-hidden":!0,role:"listbox","aria-labelledby":this.ids[1],id:this.ids[2]});this.listWrap=a("<div />",{"class":c.widgetBaseClass+"-menu"}).append(this.list).appendTo(b.appendTo);this.list.bind("keydown.selectmenu",function(b){var d=!1;switch(b.keyCode){case a.ui.keyCode.UP:b.altKey?c.close(b,
!0):c._moveFocus(-1);break;case a.ui.keyCode.DOWN:b.altKey?c.close(b,!0):c._moveFocus(1);break;case a.ui.keyCode.LEFT:c._moveFocus(-1);break;case a.ui.keyCode.RIGHT:c._moveFocus(1);break;case a.ui.keyCode.HOME:c._moveFocus(":first");break;case a.ui.keyCode.PAGE_UP:c._scrollPage("up");break;case a.ui.keyCode.PAGE_DOWN:c._scrollPage("down");break;case a.ui.keyCode.END:c._moveFocus(":last");break;case a.ui.keyCode.ENTER:case a.ui.keyCode.SPACE:c.close(b,!0);a(b.target).parents("li:eq(0)").trigger("mouseup");
break;case a.ui.keyCode.TAB:d=!0;c.close(b,!0);a(b.target).parents("li:eq(0)").trigger("mouseup");break;case a.ui.keyCode.ESCAPE:c.close(b,!0);break;default:d=!0}return d}).bind("keypress.selectmenu",function(a){0<a.which&&c._typeAhead(a.which,"focus");return!0}).bind("mousedown.selectmenu mouseup.selectmenu",function(){return!1});a(window).bind("resize.selectmenu-"+this.ids[0],a.proxy(c.close,this))},_init:function(){var c=this,b=this.options,d=[];this.element.find("option").each(function(){var e=
a(this);d.push({value:e.attr("value"),text:c._formatText(e.text(),e),selected:e.attr("selected"),disabled:e.attr("disabled"),classes:e.attr("class"),typeahead:e.attr("typeahead"),parentOptGroup:e.parent("optgroup"),bgImage:b.bgImage.call(e)})});var e="popup"==c.options.style?" ui-state-active":"";this.list.html("");if(d.length)for(var f=0;f<d.length;f++){var g={role:"presentation"};d[f].disabled&&(g["class"]=this.namespace+"-state-disabled");var h={html:d[f].text||"&nbsp;",href:"#nogo",tabindex:-1,
role:"option","aria-selected":!1};d[f].disabled&&(h["aria-disabled"]=d[f].disabled);d[f].typeahead&&(h.typeahead=d[f].typeahead);h=a("<a/>",h).bind("focus.selectmenu",function(){a(this).parent().mouseover()}).bind("blur.selectmenu",function(){a(this).parent().mouseout()});g=a("<li/>",g).append(h).data("index",f).addClass(d[f].classes).data("optionClasses",d[f].classes||"").bind("mouseup.selectmenu",function(b){!c._safemouseup||c._disabled(b.currentTarget)||c._disabled(a(b.currentTarget).parents("ul>li."+
c.widgetBaseClass+"-group "))||(c.index(a(this).data("index")),c.select(b),c.close(b,!0));return!1}).bind("click.selectmenu",function(){return!1}).bind("mouseover.selectmenu",function(){a(this).hasClass(c.namespace+"-state-disabled")||a(this).parent("ul").parent("li").hasClass(c.namespace+"-state-disabled")||(c._selectedOptionLi().addClass(e),c._focusedOptionLi().removeClass(c.widgetBaseClass+"-item-focus ui-state-hover"),a(this).removeClass("ui-state-active").addClass(c.widgetBaseClass+"-item-focus ui-state-hover"))}).bind("mouseout.selectmenu",
function(){a(this).is(c._selectedOptionLi())&&a(this).addClass(e);a(this).removeClass(c.widgetBaseClass+"-item-focus ui-state-hover")});d[f].parentOptGroup.length?(h=c.widgetBaseClass+"-group-"+this.element.find("optgroup").index(d[f].parentOptGroup),this.list.find("li."+h).length?this.list.find("li."+h+":last ul").append(g):a(' <li role="presentation" class="'+c.widgetBaseClass+"-group "+h+(d[f].parentOptGroup.attr("disabled")?" "+this.namespace+'-state-disabled" aria-disabled="true"':'"')+'><span class="'+
c.widgetBaseClass+'-group-label">'+d[f].parentOptGroup.attr("label")+"</span><ul></ul></li> ").appendTo(this.list).find("ul").append(g)):g.appendTo(this.list);if(b.icons)for(var l in b.icons)g.is(b.icons[l].find)&&(g.data("optionClasses",d[f].classes+" "+c.widgetBaseClass+"-hasIcon").addClass(c.widgetBaseClass+"-hasIcon"),h=b.icons[l].icon||"",g.find("a:eq(0)").prepend('<span class="'+c.widgetBaseClass+"-item-icon ui-icon "+h+'"></span>'),d[f].bgImage&&g.find("span").css("background-image",d[f].bgImage))}else a('<li role="presentation"><a href="#nogo" tabindex="-1" role="option"></a></li>').appendTo(this.list);
f="dropdown"==b.style;this.newelement.toggleClass(c.widgetBaseClass+"-dropdown",f).toggleClass(c.widgetBaseClass+"-popup",!f);this.list.toggleClass(c.widgetBaseClass+"-menu-dropdown ui-corner-bottom",f).toggleClass(c.widgetBaseClass+"-menu-popup ui-corner-all",!f).find("li:first").toggleClass("ui-corner-top",!f).end().find("li:last").addClass("ui-corner-bottom");this.selectmenuIcon.toggleClass("ui-icon-triangle-1-s",f).toggleClass("ui-icon-triangle-2-n-s",!f);"dropdown"==b.style?this.list.width(b.menuWidth?
b.menuWidth:b.width):this.list.width(b.menuWidth?b.menuWidth:b.width-b.handleWidth);this.list.css("height","auto");f=this.listWrap.height();l=a(window).height();l=b.maxHeight?Math.min(b.maxHeight,l):l/3;f>l&&this.list.height(l);this._optionLis=this.list.find("li:not(."+c.widgetBaseClass+"-group)");this.element.attr("disabled")?this.disable():this.enable();this._refreshValue();this._selectedOptionLi().addClass(this.widgetBaseClass+"-item-focus");clearTimeout(this.refreshTimeout);this.refreshTimeout=
window.setTimeout(function(){c._refreshPosition()},200)},destroy:function(){this.element.removeData(this.widgetName).removeClass(this.widgetBaseClass+"-disabled "+this.namespace+"-state-disabled").removeAttr("aria-disabled").unbind(".selectmenu");a(window).unbind(".selectmenu-"+this.ids[0]);a(document).unbind(".selectmenu-"+this.ids[0]);this.newelementWrap.remove();this.listWrap.remove();this.element.unbind(".selectmenu").show();a.Widget.prototype.destroy.apply(this,arguments)},_typeAhead:function(a,
b){var d=this,e=String.fromCharCode(a).toLowerCase(),f=null,g=null;d._typeAhead_timer&&(window.clearTimeout(d._typeAhead_timer),d._typeAhead_timer=void 0);d._typeAhead_chars=(void 0===d._typeAhead_chars?"":d._typeAhead_chars).concat(e);2>d._typeAhead_chars.length||d._typeAhead_chars.substr(-2,1)===e&&d._typeAhead_cycling?(d._typeAhead_cycling=!0,f=e):(d._typeAhead_cycling=!1,f=d._typeAhead_chars);for(var e=("focus"!==b?this._selectedOptionLi().data("index"):this._focusedOptionLi().data("index"))||
0,h=0;h<this._optionLis.length;h++)if(this._optionLis.eq(h).text().substr(0,f.length).toLowerCase()===f)if(d._typeAhead_cycling){if(null===g&&(g=h),h>e){g=h;break}}else g=h;null!==g&&this._optionLis.eq(g).find("a").trigger(b);d._typeAhead_timer=window.setTimeout(function(){d._typeAhead_timer=void 0;d._typeAhead_chars=void 0;d._typeAhead_cycling=void 0},d.options.typeAhead)},_uiHash:function(){var c=this.index();return{index:c,option:a("option",this.element).get(c),value:this.element[0].value}},open:function(a){var b=
this.options;if("true"!=this.newelement.attr("aria-disabled")){this._closeOthers(a);this.newelement.addClass("ui-state-active");this.list.attr("aria-hidden",!1);this.listWrap.addClass(this.widgetBaseClass+"-open");var d=this._selectedOptionLi();"dropdown"==b.style?this.newelement.removeClass("ui-corner-all").addClass("ui-corner-top"):this.list.css("left",-5E3).scrollTop(this.list.scrollTop()+d.position().top-this.list.outerHeight()/2+d.outerHeight()/2).css("left","auto");this._refreshPosition();b=
d.find("a");b.length&&b[0].focus();this.isOpen=!0;this._trigger("open",a,this._uiHash())}},close:function(a,b){this.newelement.is(".ui-state-active")&&(this.newelement.removeClass("ui-state-active"),this.listWrap.removeClass(this.widgetBaseClass+"-open"),this.list.attr("aria-hidden",!0),"dropdown"==this.options.style&&this.newelement.removeClass("ui-corner-top").addClass("ui-corner-all"),b&&this.newelement.focus(),this.isOpen=!1,this._trigger("close",a,this._uiHash()))},change:function(a){this.element.trigger("change");
this._trigger("change",a,this._uiHash())},select:function(a){if(this._disabled(a.currentTarget))return!1;this._trigger("select",a,this._uiHash())},widget:function(){return this.listWrap.add(this.newelementWrap)},_closeOthers:function(c){a("."+this.widgetBaseClass+".ui-state-active").not(this.newelement).each(function(){a(this).data("selectelement").selectmenu("close",c)});a("."+this.widgetBaseClass+".ui-state-hover").trigger("mouseout")},_toggle:function(a,b){this.isOpen?this.close(a,b):this.open(a)},
_formatText:function(c,b){this.options.format?c=this.options.format(c,b):this.options.escapeHtml&&(c=a("<div />").text(c).html());return c},_selectedIndex:function(){return this.element[0].selectedIndex},_selectedOptionLi:function(){return this._optionLis.eq(this._selectedIndex())},_focusedOptionLi:function(){return this.list.find("."+this.widgetBaseClass+"-item-focus")},_moveSelection:function(a,b){if(!this.options.disabled){var d=parseInt(this._selectedOptionLi().data("index")||0,10)+a;0>d&&(d=
0);d>this._optionLis.size()-1&&(d=this._optionLis.size()-1);if(d===b)return!1;this._optionLis.eq(d).hasClass(this.namespace+"-state-disabled")?(0<a?++a:--a,this._moveSelection(a,d)):this._optionLis.eq(d).trigger("mouseover").trigger("mouseup")}},_moveFocus:function(a,b){var d=isNaN(a)?parseInt(this._optionLis.filter(a).data("index"),10):parseInt(this._focusedOptionLi().data("index")||0,10)+a;0>d&&(d=0);d>this._optionLis.size()-1&&(d=this._optionLis.size()-1);if(d===b)return!1;var e=this.widgetBaseClass+
"-item-"+Math.round(1E3*Math.random());this._focusedOptionLi().find("a:eq(0)").attr("id","");this._optionLis.eq(d).hasClass(this.namespace+"-state-disabled")?(0<a?++a:--a,this._moveFocus(a,d)):this._optionLis.eq(d).find("a:eq(0)").attr("id",e).focus();this.list.attr("aria-activedescendant",e)},_scrollPage:function(a){var b=Math.floor(this.list.outerHeight()/this._optionLis.first().outerHeight());this._moveFocus("up"==a?-b:b)},_setOption:function(a,b){this.options[a]=b;"disabled"==a&&(b&&this.close(),
this.element.add(this.newelement).add(this.list)[b?"addClass":"removeClass"](this.widgetBaseClass+"-disabled "+this.namespace+"-state-disabled").attr("aria-disabled",b))},disable:function(a,b){"undefined"==typeof a?this._setOption("disabled",!0):"optgroup"==b?this._disableOptgroup(a):this._disableOption(a)},enable:function(a,b){"undefined"==typeof a?this._setOption("disabled",!1):"optgroup"==b?this._enableOptgroup(a):this._enableOption(a)},_disabled:function(c){return a(c).hasClass(this.namespace+
"-state-disabled")},_disableOption:function(a){var b=this._optionLis.eq(a);b&&(b.addClass(this.namespace+"-state-disabled").find("a").attr("aria-disabled",!0),this.element.find("option").eq(a).attr("disabled","disabled"))},_enableOption:function(a){var b=this._optionLis.eq(a);b&&(b.removeClass(this.namespace+"-state-disabled").find("a").attr("aria-disabled",!1),this.element.find("option").eq(a).removeAttr("disabled"))},_disableOptgroup:function(a){var b=this.list.find("li."+this.widgetBaseClass+"-group-"+
a);b&&(b.addClass(this.namespace+"-state-disabled").attr("aria-disabled",!0),this.element.find("optgroup").eq(a).attr("disabled","disabled"))},_enableOptgroup:function(a){var b=this.list.find("li."+this.widgetBaseClass+"-group-"+a);b&&(b.removeClass(this.namespace+"-state-disabled").attr("aria-disabled",!1),this.element.find("optgroup").eq(a).removeAttr("disabled"))},index:function(c){if(arguments.length){if(this._disabled(a(this._optionLis[c]))||c==this._selectedIndex())return!1;this.element[0].selectedIndex=
c;this._refreshValue();this.change()}else return this._selectedIndex()},value:function(a){if(arguments.length&&a!=this.element[0].value)this.element[0].value=a,this._refreshValue(),this.change();else return this.element[0].value},_refreshValue:function(){var a="popup"==this.options.style?" ui-state-active":"",b=this.widgetBaseClass+"-item-"+Math.round(1E3*Math.random());this.list.find("."+this.widgetBaseClass+"-item-selected").removeClass(this.widgetBaseClass+"-item-selected"+a).find("a").attr("aria-selected",
"false").attr("id","");this._selectedOptionLi().addClass(this.widgetBaseClass+"-item-selected"+a).find("a").attr("aria-selected","true").attr("id",b);var a=this.newelement.data("optionClasses")?this.newelement.data("optionClasses"):"",d=this._selectedOptionLi().data("optionClasses")?this._selectedOptionLi().data("optionClasses"):"";this.newelement.removeClass(a).data("optionClasses",d).addClass(d).find("."+this.widgetBaseClass+"-status").html(this._selectedOptionLi().find("a:eq(0)").html());this.list.attr("aria-activedescendant",
b)},_refreshPosition:function(){var a=this.options;if("popup"==a.style&&!a.positionOptions.offset)var b=this._selectedOptionLi(),b="0 "+(this.list.offset().top-b.offset().top-(this.newelement.outerHeight()+b.outerHeight())/2);this.listWrap.removeAttr("style").zIndex(this.element.zIndex()+1).position({of:a.positionOptions.of||this.newelement,my:a.positionOptions.my,at:a.positionOptions.at,offset:a.positionOptions.offset||b,collision:a.positionOptions.collision||("popup"==a.style?"fit":"flip")})}})})(jQuery);
(function(a){a.widget("ui.panel",{options:{event:"click",collapsible:!0,collapseType:"default",collapsed:!1,accordion:!1,collapseSpeed:"fast",draggable:!1,trueVerticalText:!0,vHeight:"220px",stackable:!0,width:"auto",controls:!1,cookie:null,widgetClass:"ui-helper-reset ui-widget ui-panel",headerClass:"ui-helper-reset ui-widget-header ui-panel-header ui-corner-top",contentClass:"ui-helper-reset ui-widget-content ui-panel-content ui-corner-bottom",contentTextClass:"ui-panel-content-text",rightboxClass:"ui-panel-rightbox",
controlsClass:"ui-panel-controls",titleClass:"ui-panel-title",titleTextClass:"ui-panel-title-text",iconClass:"ui-icon",hoverClass:"ui-state-disabled",collapsePnlClass:"ui-panel-clps-pnl",headerIconClpsd:"ui-icon-triangle-1-e",headerIcon:"ui-icon-triangle-1-s",slideRIconClpsd:"ui-icon-arrowthickstop-1-w",slideRIcon:"ui-icon-arrowthickstop-1-e",slideLIconClpsd:"ui-icon-arrowthickstop-1-e",slideLIcon:"ui-icon-arrowthickstop-1-w"},_init:function(){this._panelize()},_panelize:function(){if(this.element.is("div")){var c=
this,b=this.options;this.panelBox=this.element;"auto"==b.width?b.width=this.panelBox.css("width"):this.panelBox.css("width",b.width);this.panelBox.attr("role","panel");b.id=this.panelBox.attr("id");this.headerBox=this.element.children(":first");this.contentBox=this.element.children().eq(1);b.content=this.contentBox.html();this.contentBox.wrapInner("<div/>");this.contentTextBox=this.contentBox.children(":first").addClass(b.contentTextClass);this.headerBox.wrapInner("<div><span/></div>");this.titleBox=
this.headerBox.children(":first");this.titleTextBox=this.titleBox.children(":first");this.titleText=this.titleTextBox.html();this.headerBox.prepend("<span/>");this.rightBox=this.headerBox.children(":first").addClass(b.rightboxClass);0!=b.controls?(this.rightBox.append("<span/>"),this.controlsBox=this.rightBox.children(":first").addClass(b.controlsClass).html(b.controls)):this.controlsBox=null;this.panelBox.addClass(b.widgetClass);this.headerBox.addClass(b.headerClass);this.titleBox.addClass(b.titleClass);
this.titleTextBox.addClass(b.titleTextClass);this.contentBox.addClass(b.contentClass);if(b.collapsible){switch(b.collapseType){case "slide-right":var d=0;b.controls&&(d=1);this.rightBox.append("<span><span/></span>");this.collapsePanel=this.rightBox.children().eq(d).addClass(b.collapsePnlClass);this.collapseButton=this.collapsePanel.children(":first").addClass(b.slideRIcon);this.iconBtnClpsd=b.slideRIconClpsd;this.iconBtn=b.slideRIcon;this.ctrlBox=this.controlsBox;break;case "slide-left":this.headerBox.prepend("<span><span/></span>");
this.collapsePanel=this.headerBox.children(":first").addClass(b.collapsePnlClass);this.collapseButton=this.collapsePanel.children(":first").addClass(b.slideLIcon);this.iconBtnClpsd=b.slideLIconClpsd;this.iconBtn=b.slideLIcon;this.ctrlBox=this.rightBox;break;default:this.headerBox.prepend("<span><span/></span>"),this.collapseButton=this.headerBox.children(":first").addClass(b.headerIcon),this.iconBtnClpsd=b.headerIconClpsd,this.iconBtn=b.headerIcon,this.ctrlBox=this.controlsBox}this._buttonHover(this.collapseButton);
this.collapseButton.addClass(b.iconClass);b.event&&(this.collapseButton.bind(b.event+".panel",function(a){return c._clickHandler.call(c,a,this)}),this.titleTextBox.bind(b.event+".panel",function(a){return c._clickHandler.call(c,a,this)}));b.accordion&&(b.collapsed=!0,b.trueVerticalText=!1);b.cookie&&(0==c._cookie()?b.collapsed=!1:b.collapsed=!0);this.panelBox.data("collapsed",b.collapsed);b.stackable&&-1<a.inArray(b.collapseType,["slide-right","slide-left"])&&(this.panelDock=this.panelBox.siblings("div[role=panelDock]:first"),
this.panelFrame=this.panelBox.siblings("div[role=panelFrame]:first"),0==this.panelDock.length&&(this.panelDock=this.panelBox.parent(0).prepend("<div>").children(":first"),this.panelFrame=this.panelDock.after("<div>").next(":first"),this.panelDock.attr("role","panelDock").css("float","slide-left"==b.collapseType?"left":"right"),this.panelFrame.attr("role","panelFrame").css({"float":"slide-left"==b.collapseType?"left":"right",overflow:"hidden"})),b.collapsed?this.panelDock.append(this.panelBox):this.panelFrame.append(this.panelBox));
b.collapsed&&c.toggle(0,!0)}else this.titleTextBox.css("cursor","default");!b.accordion&&b.draggable&&a.fn.draggable&&this._makeDraggable();this.panelBox.show()}},_cookie:function(){var c=this.cookie||(this.cookie=this.options.cookie.name||"ui-panel-"+this.options.id);return a.cookie.apply(null,[c].concat(a.makeArray(arguments)))},_makeDraggable:function(){this.panelBox.draggable({containment:"document",handle:".ui-panel-header",cancel:".ui-panel-content",cursor:"move"})},_clickHandler:function(a,
b){var d=this.options;if(d.disabled)return!1;this.toggle(d.collapseSpeed);return!1},toggle:function(c,b){var d=this.options,e=this.panelBox,f=this.contentBox,g=this.headerBox,h=this.titleTextBox,l=this.titleText,m=this.ctrlBox,p=this.panelDock,q="";jQuery.support.leadingWhitespace||(q="-ie");"none"==f.css("display")?this._trigger("unfold"):this._trigger("fold");m&&m.toggle(0);"default"==d.collapseType?0==c?(m&&m.hide(),f.hide()):f.slideToggle(c):(0==c?(d.collapsed=!1,m&&m.hide(),f.hide()):f.toggle(),
0==d.collapsed?(d.trueVerticalText?(g.toggleClass("ui-panel-vtitle").css("height",d.vHeight),""==q&&(f="height:"+(parseInt(d.vHeight)-50)+"px;width:100%;position:absolute;bottom:0;left:0;",h.empty().append('<div style="'+f+'z-index:3;"></div><object style="'+f+'z-index:2;" type="image/svg+xml" data="data:image/svg+xml;charset=utf-8,<svg xmlns=\'http://www.w3.org/2000/svg\'><text x=\'-'+(parseInt(d.vHeight)-60)+"px' y='16px' style='font-weight:"+h.css("font-weight")+";font-family:"+h.css("font-family").replace(/"/g,
"")+";font-size:"+h.css("font-size")+";fill:"+h.css("color")+";' transform='rotate(-90)' text-rendering='optimizeSpeed'>"+l+'</text></svg>"></object>').css("height",d.vHeight)),h.toggleClass("ui-panel-vtext"+q)):(g.attr("align","center"),h.html(h.text().replace(/(.)/g,"$1<BR>"))),d.stackable&&(b?p.append(e):p.prepend(e))):(d.stackable&&this.panelFrame.append(e),d.trueVerticalText?(g.toggleClass("ui-panel-vtitle").css("height","auto"),h.empty().append(l),h.toggleClass("ui-panel-vtext"+q)):(g.attr("align",
"left"),h.html(h.text().replace(/<BR>/g," ")))));if((0!=c||d.trueVerticalText)&&null==d.cookie||!b&&null!=d.cookie)d.collapsed=!d.collapsed;this.panelBox.data("collapsed",d.collapsed);b||(d.cookie&&this._cookie(Number(d.collapsed),d.cookie),d.accordion&&a("."+d.accordion+"[role='panel'][id!='"+d.id+"']:not(:data(collapsed))").panel("toggle",c,!0));this.collapseButton.toggleClass(this.iconBtnClpsd).toggleClass(this.iconBtn);g.toggleClass("ui-corner-all")},content:function(a){this.contentTextBox.html(a)},
destroy:function(){var c=this.options;this.headerBox.html(this.titleText).removeAttr("align").removeAttr("style").removeClass("ui-panel-vtitle ui-corner-all "+c.headerClass);this.contentBox.removeClass(c.contentClass).removeAttr("style").html(c.content);this.panelBox.removeAttr("role").removeAttr("style").removeData("collapsed").unbind(".panel").removeClass(c.widgetClass);c.stackable&&-1<a.inArray(c.collapseType,["slide-right","slide-left"])&&(this.panelDock.before(this.panelBox),0==this.panelDock.children("div[role=panel]").length&&
0==this.panelFrame.children("div[role=panel]").length&&(this.panelDock.remove(),this.panelFrame.remove()));c.cookie&&this._cookie(null,c.cookie);return this},_buttonHover:function(c){var b=this.options;c.bind({mouseover:function(){a(this).addClass(b.hoverClass)},mouseout:function(){a(this).removeClass(b.hoverClass)}})}});a.extend(a.ui.panel,{version:"0.6"})})(jQuery);
(function(a){a.widget("ui.multiselect",{options:{sortable:!0,searchable:!0,doubleClickable:!0,animated:"fast",show:"slideDown",hide:"slideUp",dividerLocation:.6,availableFirst:!1,nodeComparator:function(a,b){var d=a.text(),e=b.text();return d==e?0:d<e?-1:1}},_create:function(){this.element.hide();this.id=this.element.attr("id");this.container=a('<div class="ui-multiselect ui-helper-clearfix ui-widget"></div>').insertAfter(this.element);this.count=0;this.selectedContainer=a('<div class="selected"></div>').appendTo(this.container);
this.availableContainer=a('<div class="available"></div>')[this.options.availableFirst?"prependTo":"appendTo"](this.container);this.selectedActions=a('<div class="actions ui-widget-header ui-helper-clearfix"><span class="count">0 '+a.ui.multiselect.locale.itemsCount+'</span><a href="#" class="remove-all">'+a.ui.multiselect.locale.removeAll+"</a></div>").appendTo(this.selectedContainer);this.availableActions=a('<div class="actions ui-widget-header ui-helper-clearfix"><input type="text" class="search empty ui-widget-content ui-corner-all"/><a href="#" class="add-all">'+
a.ui.multiselect.locale.addAll+"</a></div>").appendTo(this.availableContainer);this.selectedList=a('<ul class="selected connected-list"><li class="ui-helper-hidden-accessible"></li></ul>').bind("selectstart",function(){return!1}).appendTo(this.selectedContainer);this.availableList=a('<ul class="available connected-list"><li class="ui-helper-hidden-accessible"></li></ul>').bind("selectstart",function(){return!1}).appendTo(this.availableContainer);var c=this;this.container.width(this.element.width()+
1);this.selectedContainer.width(Math.floor(this.element.width()*this.options.dividerLocation));this.availableContainer.width(Math.floor(this.element.width()*(1-this.options.dividerLocation)));this.selectedList.height(Math.max(this.element.height()-this.selectedActions.height(),1));this.availableList.height(Math.max(this.element.height()-this.availableActions.height(),1));this.options.animated||(this.options.show="show",this.options.hide="hide");this._populateLists(this.element.find("option"));this.options.sortable&&
this.selectedList.sortable({placeholder:"ui-state-highlight",axis:"y",update:function(b,d){c.selectedList.find("li").each(function(){a(this).data("optionLink")&&a(this).data("optionLink").remove().appendTo(c.element)})},receive:function(b,d){d.item.data("optionLink").attr("selected",!0);c.count+=1;c._updateCount();c.selectedList.children(".ui-draggable").each(function(){a(this).removeClass("ui-draggable");a(this).data("optionLink",d.item.data("optionLink"));a(this).data("idx",d.item.data("idx"));
c._applyItemState(a(this),!0)});setTimeout(function(){d.item.remove()},1)}});this.options.searchable?this._registerSearchEvents(this.availableContainer.find("input.search")):a(".search").hide();this.container.find(".remove-all").click(function(){c._populateLists(c.element.find("option").removeAttr("selected"));return!1});this.container.find(".add-all").click(function(){var b=c.element.find("option").not(":selected");1<c.availableList.children("li:hidden").length?c.availableList.children("li").each(function(d){a(this).is(":visible")&&
a(b[d-1]).attr("selected","selected")}):b.attr("selected","selected");c._populateLists(c.element.find("option"));return!1})},destroy:function(){this.element.show();this.container.remove();a.Widget.prototype.destroy.apply(this,arguments)},_populateLists:function(c){this.selectedList.children(".ui-element").remove();this.availableList.children(".ui-element").remove();this.count=0;var b=this;a(c.map(function(a){var c=b._getOptionNode(this).appendTo(this.selected?b.selectedList:b.availableList).show();
this.selected&&(b.count+=1);b._applyItemState(c,this.selected);c.data("idx",a);return c[0]}));this._updateCount();b._filter.apply(this.availableContainer.find("input.search"),[b.availableList])},_updateCount:function(){this.element.trigger("change");this.selectedContainer.find("span.count").text(this.count+" "+a.ui.multiselect.locale.itemsCount)},_getOptionNode:function(c){c=a(c);var b=a('<li class="ui-state-default ui-element" title="'+c.text()+'"><span class="ui-icon"/>'+c.text()+'<a href="#" class="action"><span class="ui-corner-all ui-icon"/></a></li>').hide();
b.data("optionLink",c);return b},_cloneWithData:function(a){var b=a.clone(!1,!1);b.data("optionLink",a.data("optionLink"));b.data("idx",a.data("idx"));return b},_setSelected:function(c,b){c.data("optionLink").attr("selected",b);if(b){var d=this._cloneWithData(c);c[this.options.hide](this.options.animated,function(){a(this).remove()});d.appendTo(this.selectedList).hide()[this.options.show](this.options.animated);this._applyItemState(d,!0);return d}var e=this.availableList.find("li"),f=this.options.nodeComparator,
d=null,g=c.data("idx"),h=f(c,a(e[g]));if(h)for(;0<=g&&g<e.length;){if(0<h?g++:g--,h!=f(c,a(e[g]))){d=e[0<h?g:g+1];break}}else d=e[g];e=this._cloneWithData(c);d?e.insertBefore(a(d)):e.appendTo(this.availableList);c[this.options.hide](this.options.animated,function(){a(this).remove()});e.hide()[this.options.show](this.options.animated);this._applyItemState(e,!1);return e},_applyItemState:function(a,b){b?(this.options.sortable?a.children("span").addClass("ui-icon-arrowthick-2-n-s").removeClass("ui-helper-hidden").addClass("ui-icon"):
a.children("span").removeClass("ui-icon-arrowthick-2-n-s").addClass("ui-helper-hidden").removeClass("ui-icon"),a.find("a.action span").addClass("ui-icon-minus").removeClass("ui-icon-plus"),this._registerRemoveEvents(a.find("a.action"))):(a.children("span").removeClass("ui-icon-arrowthick-2-n-s").addClass("ui-helper-hidden").removeClass("ui-icon"),a.find("a.action span").addClass("ui-icon-plus").removeClass("ui-icon-minus"),this._registerAddEvents(a.find("a.action")));this._registerDoubleClickEvents(a);
this._registerHoverEvents(a)},_filter:function(c){var b=a(this),d=c.children("li");c=d.map(function(){return a(this).text().toLowerCase()});var e=a.trim(b.val().toLowerCase()),f=[];e?(d.hide(),c.each(function(a){-1<this.indexOf(e)&&f.push(a)}),a.each(f,function(){a(d[this]).show()})):d.show()},_registerDoubleClickEvents:function(c){this.options.doubleClickable&&c.dblclick(function(b){0===a(b.target).closest(".action").length&&c.find("a.action").click()})},_registerHoverEvents:function(c){c.removeClass("ui-state-hover");
c.mouseover(function(){a(this).addClass("ui-state-hover")});c.mouseout(function(){a(this).removeClass("ui-state-hover")})},_registerAddEvents:function(c){var b=this;c.click(function(){b._setSelected(a(this).parent(),!0);b.count+=1;b._updateCount();return!1});this.options.sortable&&c.each(function(){a(this).parent().draggable({connectToSortable:b.selectedList,helper:function(){var d=b._cloneWithData(a(this)).width(a(this).width()-50);d.width(a(this).width());return d},appendTo:b.container,containment:b.container,
revert:"invalid"})})},_registerRemoveEvents:function(c){var b=this;c.click(function(){b._setSelected(a(this).parent(),!1);b.count-=1;b._updateCount();return!1})},_registerSearchEvents:function(c){var b=this;c.focus(function(){a(this).addClass("ui-state-active")}).blur(function(){a(this).removeClass("ui-state-active")}).keypress(function(a){if(13==a.keyCode)return!1}).keyup(function(){b._filter.apply(this,[b.availableList])})},selectedValues:function(){var c=[];this.selectedList.find("li").each(function(b,
d){var e=a(d).data("optionLink");e&&c.push(e.val())});return c}});a.extend(a.ui.multiselect,{locale:{addAll:"Add all",removeAll:"Remove all",itemsCount:"items selected"}})})(jQuery);
(function(a,c,b){var d=/\r/g,e=/^(button|checkbox|hidden|image|radio|range|reset|submit)$/i,f=["Page_ClientValidate"],g=!1,h="placeholder"in document.createElement("input");a.watermark=a.watermark||{version:"3.1.4",runOnce:!0,options:{className:"watermark",useNative:!0,hideBeforeUnload:!0},hide:function(b){a(b).filter("input:data(watermark),textarea:data(watermark)").each(function(){a.watermark._hide(a(this))})},_hide:function(a,b){var e=a[0],f=(e.value||"").replace(d,""),g=a.data("watermarkText")||
"",h=a.data("watermarkMaxLength")||0,u=a.data("watermarkClass"),C,B;g.length&&f==g&&(e.value="",a.data("watermarkPassword")&&"text"===(a.attr("type")||"")&&(C=a.data("watermarkPassword")||[],B=a.parent()||[],C.length&&B.length&&(B[0].removeChild(a[0]),B[0].appendChild(C[0]),a=C)),h&&(a.attr("maxLength",h),a.removeData("watermarkMaxLength")),b&&(a.attr("autocomplete","off"),c.setTimeout(function(){a.select()},1)));u&&a.removeClass(u)},show:function(b){a(b).filter("input:data(watermark),textarea:data(watermark)").each(function(){a.watermark._show(a(this))})},
_show:function(b){var c=b[0],e=(c.value||"").replace(d,""),f=b.data("watermarkText")||"",h=b.attr("type")||"",y=b.data("watermarkClass"),u,C,B;0!=e.length&&e!=f||b.data("watermarkFocus")?a.watermark._hide(b):(g=!0,b.data("watermarkPassword")&&"password"===h&&(u=b.data("watermarkPassword")||[],C=b.parent()||[],u.length&&C.length&&(C[0].removeChild(b[0]),C[0].appendChild(u[0]),b=u,b.attr("maxLength",f.length),c=b[0])),("text"===h||"search"===h)&&(B=b.attr("maxLength")||0,0<B&&f.length>B&&(b.data("watermarkMaxLength",
B),b.attr("maxLength",f.length))),y&&b.addClass(y),c.value=f)},hideAll:function(){g&&(a.watermark.hide(":watermarkable"),g=!1)},showAll:function(){a.watermark.show(":watermarkable")}};a.fn.watermark=a.fn.watermark||function(b,e){if(!this.length)return this;var f=!1,g="string"==typeof b;return g&&(b=b.replace(d,"")),"object"==typeof e?(f="string"==typeof e.className,e=a.extend({},a.watermark.options,e)):"string"==typeof e?(f=!0,e=a.extend({},a.watermark.options,{className:e})):e=a.watermark.options,
"function"!=typeof e.useNative&&(e.useNative=e.useNative?function(){return!0}:function(){return!1}),this.each(function(){var t=a(this),y,u,C,B;if(t.is(":watermarkable")){if(t.data("watermark"))(g||f)&&(a.watermark._hide(t),g&&t.data("watermarkText",b),f&&t.data("watermarkClass",e.className));else{if(h&&e.useNative.call(this,t)&&"TEXTAREA"!==(t.attr("tagName")||"")){g&&t.attr("placeholder",b);return}t.data("watermarkText",g?b:"");t.data("watermarkClass",e.className);t.data("watermark",1);"password"===
(t.attr("type")||"")?(y=t.wrap("<span>").parent(),u=a(y.html().replace(/type=["']?password["']?/i,'type="text"')),u.data("watermarkText",t.data("watermarkText")),u.data("watermarkClass",t.data("watermarkClass")),u.data("watermark",1),u.attr("maxLength",b.length),u.focus(function(){a.watermark._hide(u,!0)}).bind("dragenter",function(){a.watermark._hide(u)}).bind("dragend",function(){c.setTimeout(function(){u.blur()},1)}),t.blur(function(){a.watermark._show(t)}).bind("dragleave",function(){a.watermark._show(t)}),
u.data("watermarkPassword",t),t.data("watermarkPassword",u)):t.focus(function(){t.data("watermarkFocus",1);a.watermark._hide(t,!0)}).blur(function(){t.data("watermarkFocus",0);a.watermark._show(t)}).bind("dragenter",function(){a.watermark._hide(t)}).bind("dragleave",function(){a.watermark._show(t)}).bind("dragend",function(){c.setTimeout(function(){a.watermark._show(t)},1)}).bind("drop",function(a){var b=t[0];a=a.originalEvent.dataTransfer.getData("Text");(b.value||"").replace(d,"").replace(a,"")===
t.data("watermarkText")&&(b.value=a);t.focus()});this.form&&(C=this.form,B=a(C),B.data("watermarkSubmit")||(B.submit(a.watermark.hideAll),C.submit?(B.data("watermarkSubmit",C.submit),C.submit=function(b,d){return function(){var c=d.data("watermarkSubmit");a.watermark.hideAll();c.apply?c.apply(b,Array.prototype.slice.call(arguments)):c()}}(C,B)):(B.data("watermarkSubmit",1),C.submit=function(b){return function(){a.watermark.hideAll();delete b.submit;b.submit()}}(C))))}a.watermark._show(t)}})};a.watermark.runOnce&&
(a.watermark.runOnce=!1,a.extend(a.expr[":"],{data:a.expr.createPseudo?a.expr.createPseudo(function(b){return function(d){return!!a.data(d,b)}}):function(b,d,c){return!!a.data(b,c[3])},watermarkable:function(a){var b,d=a.nodeName;return"TEXTAREA"===d?!0:"INPUT"!==d?!1:(b=a.getAttribute("type"),!b||!e.test(b))}}),function(c){a.fn.val=function(){var e=Array.prototype.slice.call(arguments),f;return this.length?e.length?(c.apply(this,e),a.watermark.show(this),this):this.data("watermark")?(f=(this[0].value||
"").replace(d,""),f===(this.data("watermarkText")||"")?"":f):c.apply(this):e.length?this:b}}(a.fn.val),f.length&&a(function(){for(var b,d,e=f.length-1;0<=e;e--)b=f[e],d=c[b],"function"==typeof d&&(c[b]=function(b){return function(){return a.watermark.hideAll(),b.apply(null,Array.prototype.slice.call(arguments))}}(d))}),a(c).bind("beforeunload",function(){a.watermark.options.hideBeforeUnload&&a.watermark.hideAll()}))})(jQuery,window);
(function(a){var c=Math.min,b=Math.max,d=Math.floor,e=function(b){return"string"===a.type(b)},f=function(b,d){if(a.isArray(d))for(var c=0,f=d.length;c<f;c++){var g=d[c];try{e(g)&&(g=eval(g)),a.isFunction(g)&&g(b)}catch(h){}}};a.layout={version:"1.3.rc30.79",revision:.033007,browser:{},effects:{slide:{all:{duration:"fast"},north:{direction:"up"},south:{direction:"down"},east:{direction:"right"},west:{direction:"left"}},drop:{all:{duration:"slow"},north:{direction:"up"},south:{direction:"down"},east:{direction:"right"},
west:{direction:"left"}},scale:{all:{duration:"fast"}},blind:{},clip:{},explode:{},fade:{},fold:{},puff:{},size:{all:{easing:"swing"}}},config:{optionRootKeys:"effects panes north south west east center".split(" "),allPanes:["north","south","west","east","center"],borderPanes:["north","south","west","east"],oppositeEdge:{north:"south",south:"north",east:"west",west:"east"},offscreenCSS:{left:"-99999px",right:"auto"},offscreenReset:"offscreenReset",hidden:{visibility:"hidden"},visible:{visibility:"visible"},
resizers:{cssReq:{position:"absolute",padding:0,margin:0,fontSize:"1px",textAlign:"left",overflow:"hidden"},cssDemo:{background:"#DDD",border:"none"}},togglers:{cssReq:{position:"absolute",display:"block",padding:0,margin:0,overflow:"hidden",textAlign:"center",fontSize:"1px",cursor:"pointer",zIndex:1},cssDemo:{background:"#AAA"}},content:{cssReq:{position:"relative"},cssDemo:{overflow:"auto",padding:"10px"},cssDemoPane:{overflow:"hidden",padding:0}},panes:{cssReq:{position:"absolute",margin:0},cssDemo:{padding:"10px",
background:"#FFF",border:"1px solid #BBB",overflow:"auto"}},north:{side:"top",sizeType:"Height",dir:"horz",cssReq:{top:0,bottom:"auto",left:0,right:0,width:"auto"}},south:{side:"bottom",sizeType:"Height",dir:"horz",cssReq:{top:"auto",bottom:0,left:0,right:0,width:"auto"}},east:{side:"right",sizeType:"Width",dir:"vert",cssReq:{left:"auto",right:0,top:"auto",bottom:"auto",height:"auto"}},west:{side:"left",sizeType:"Width",dir:"vert",cssReq:{left:0,right:"auto",top:"auto",bottom:"auto",height:"auto"}},
center:{dir:"center",cssReq:{left:"auto",right:"auto",top:"auto",bottom:"auto",height:"auto",width:"auto"}}},callbacks:{},getParentPaneElem:function(b){b=a(b);if(b=b.data("layout")||b.data("parentLayout")){b=b.container;if(b.data("layoutPane"))return b;b=b.closest("."+a.layout.defaults.panes.paneClass);if(b.data("layoutPane"))return b}return null},getParentPaneInstance:function(b){return(b=a.layout.getParentPaneElem(b))?b.data("layoutPane"):null},getParentLayoutInstance:function(b){return(b=a.layout.getParentPaneElem(b))?
b.data("parentLayout"):null},getEventObject:function(a){return"object"===typeof a&&a.stopPropagation?a:null},parsePaneName:function(b){var d=a.layout.getEventObject(b);d&&(d.stopPropagation(),b=a(this).data("layoutEdge"));b&&!/^(west|east|north|south|center)$/.test(b)&&(a.layout.msg('LAYOUT ERROR - Invalid pane-name: "'+b+'"'),b="error");return b},plugins:{draggable:!!a.fn.draggable,effects:{core:!!a.effects,slide:a.effects&&(a.effects.slide||a.effects.effect&&a.effects.effect.slide)}},onCreate:[],
onLoad:[],onReady:[],onDestroy:[],onUnload:[],afterOpen:[],afterClose:[],scrollbarWidth:function(){return window.scrollbarWidth||a.layout.getScrollbarSize("width")},scrollbarHeight:function(){return window.scrollbarHeight||a.layout.getScrollbarSize("height")},getScrollbarSize:function(b){var d=a('<div style="position: absolute; top: -10000px; left: -10000px; width: 100px; height: 100px; overflow: scroll;"></div>').appendTo("body"),c={width:d.css("width")-d[0].clientWidth,height:d.height()-d[0].clientHeight};
d.remove();window.scrollbarWidth=c.width;window.scrollbarHeight=c.height;return b.match(/^(width|height)$/)?c[b]:c},showInvisibly:function(a,b){if(a&&a.length&&(b||"none"===a.css("display"))){var d=a[0].style,d={display:d.display||"",visibility:d.visibility||""};a.css({display:"block",visibility:"hidden"});return d}return{}},getElementDimensions:function(d,c){var e={css:{},inset:{}},f=e.css,g={bottom:0},h=a.layout.cssNum,l=d.offset(),B,I,F;e.offsetLeft=l.left;e.offsetTop=l.top;c||(c={});a.each(["Left",
"Right","Top","Bottom"],function(b,h){B=f["border"+h]=a.layout.borderWidth(d,h);I=f["padding"+h]=a.layout.cssNum(d,"padding"+h);F=h.toLowerCase();e.inset[F]=0<=c[F]?c[F]:I;g[F]=e.inset[F]+B});f.width=d.width();f.height=d.height();f.top=h(d,"top",!0);f.bottom=h(d,"bottom",!0);f.left=h(d,"left",!0);f.right=h(d,"right",!0);e.outerWidth=d.outerWidth();e.outerHeight=d.outerHeight();e.innerWidth=b(0,e.outerWidth-g.left-g.right);e.innerHeight=b(0,e.outerHeight-g.top-g.bottom);e.layoutWidth=d.innerWidth();
e.layoutHeight=d.innerHeight();return e},getElementStyles:function(a,b){var d={},c=a[0].style,e=b.split(","),f=["Top","Bottom","Left","Right"],g=["Color","Style","Width"],h,l,F,A,r,v;for(A=0;A<e.length;A++)if(h=e[A],h.match(/(border|padding|margin)$/))for(r=0;4>r;r++)if(l=f[r],"border"===h)for(v=0;3>v;v++)F=g[v],d[h+l+F]=c[h+l+F];else d[h+l]=c[h+l];else d[h]=c[h];return d},cssWidth:function(d,c){if(0>=c)return 0;var e=a.layout.browser.boxModel?a.support.boxSizing?d.css("boxSizing"):"content-box":
"border-box",f=a.layout.borderWidth,g=a.layout.cssNum,h=c;"border-box"!==e&&(h-=f(d,"Left")+f(d,"Right"));"content-box"===e&&(h-=g(d,"paddingLeft")+g(d,"paddingRight"));return b(0,h)},cssHeight:function(d,c){if(0>=c)return 0;var e=a.layout.browser.boxModel?a.support.boxSizing?d.css("boxSizing"):"content-box":"border-box",f=a.layout.borderWidth,g=a.layout.cssNum,h=c;"border-box"!==e&&(h-=f(d,"Top")+f(d,"Bottom"));"content-box"===e&&(h-=g(d,"paddingTop")+g(d,"paddingBottom"));return b(0,h)},cssNum:function(b,
d,c){b.jquery||(b=a(b));var e=a.layout.showInvisibly(b);d=a.css(b[0],d,!0);c=c&&"auto"==d?d:Math.round(parseFloat(d)||0);b.css(e);return c},borderWidth:function(b,d){b.jquery&&(b=b[0]);var c="border"+d.substr(0,1).toUpperCase()+d.substr(1);return"none"===a.css(b,c+"Style",!0)?0:Math.round(parseFloat(a.css(b,c+"Width",!0))||0)},isMouseOverElem:function(b,d){var c=a(d||this),e=c.offset(),f=e.top,e=e.left,g=e+c.outerWidth(),c=f+c.outerHeight(),h=b.pageX,l=b.pageY;return a.layout.browser.msie&&0>h&&0>
l||h>=e&&h<=g&&l>=f&&l<=c},msg:function(b,d,c,e){a.isPlainObject(b)&&window.debugData?("string"===typeof d?(e=c,c=d):"object"===typeof c&&(e=c,c=null),c=c||"log( <object> )",e=a.extend({sort:!1,returnHTML:!1,display:!1},e),!0===d||e.display?debugData(b,c,e):window.console&&console.log(debugData(b,c,e))):d?alert(b):window.console?console.log(b):(d=a("#layoutLogger"),d.length||(d=a('<div id="layoutLogger" style="position: '+(a.support.fixedPosition?"fixed":"absolute")+'; top: 5px; z-index: 999999; max-width: 25%; overflow: hidden; border: 1px solid #000; border-radius: 5px; background: #FBFBFB; box-shadow: 0 2px 10px rgba(0,0,0,0.3);"><div style="font-size: 13px; font-weight: bold; padding: 5px 10px; background: #F6F6F6; border-radius: 5px 5px 0 0; cursor: move;"><span style="float: right; padding-left: 7px; cursor: pointer;" title="Remove Console" onclick="$(this).closest(\'#layoutLogger\').remove()">X</span>Layout console.log</div><ul style="font-size: 13px; font-weight: none; list-style: none; margin: 0; padding: 0 0 2px;"></ul></div>').appendTo("body"),
d.css("left",a(window).width()-d.outerWidth()-5),a.ui.draggable&&d.draggable({handle:":first-child"})),d.children("ul").append('<li style="padding: 4px 10px; margin: 0; border-top: 1px solid #CCC;">'+b.replace(/\</g,"&lt;").replace(/\>/g,"&gt;")+"</li>"))}};var g=navigator.userAgent.toLowerCase(),h=/(chrome)[ \/]([\w.]+)/.exec(g)||/(webkit)[ \/]([\w.]+)/.exec(g)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(g)||/(msie) ([\w.]+)/.exec(g)||0>g.indexOf("compatible")&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(g)||
[],g=h[1]||"",h=h[2]||0,l="msie"===g;a.layout.browser={version:h,safari:"webkit"===g,webkit:"chrome"===g,msie:l,isIE6:l&&6==h,boxModel:!l||!1!==a.support.boxModel};g&&(a.layout.browser[g]=!0);l&&a(function(){a.layout.browser.boxModel=a.support.boxModel});a.layout.defaults={name:"",containerClass:"ui-layout-container",inset:null,scrollToBookmarkOnLoad:!0,resizeWithWindow:!0,resizeWithWindowDelay:200,resizeWithWindowMaxDelay:0,maskPanesEarly:!1,onresizeall_start:null,onresizeall_end:null,onload_start:null,
onload_end:null,onunload_start:null,onunload_end:null,initPanes:!0,showErrorMessages:!0,showDebugMessages:!1,zIndex:null,zIndexes:{pane_normal:0,content_mask:1,resizer_normal:0,pane_sliding:100,pane_animate:1E3,resizer_drag:1E4},errors:{pane:"pane",selector:"selector",addButtonError:"Error Adding Button\nInvalid ",containerMissing:"UI Layout Initialization Error\nThe specified layout-container does not exist.",centerPaneMissing:"UI Layout Initialization Error\nThe center-pane element does not exist.\nThe center-pane is a required element.",
noContainerHeight:"UI Layout Initialization Warning\nThe layout-container \"CONTAINER\" has no height.\nTherefore the layout is 0-height and hence 'invisible'!",callbackError:"UI Layout Callback Error\nThe EVENT callback is not a valid function."},panes:{applyDemoStyles:!1,closable:!0,resizable:!0,slidable:!0,initClosed:!1,initHidden:!1,contentSelector:".ui-layout-content",contentIgnoreSelector:".ui-layout-ignore",findNestedContent:!1,paneClass:"ui-layout-pane",resizerClass:"ui-layout-resizer",togglerClass:"ui-layout-toggler",
buttonClass:"ui-layout-button",minSize:0,maxSize:0,spacing_open:6,spacing_closed:6,togglerLength_open:50,togglerLength_closed:50,togglerAlign_open:"center",togglerAlign_closed:"center",togglerContent_open:"",togglerContent_closed:"",resizerDblClickToggle:!0,autoResize:!0,autoReopen:!0,resizerDragOpacity:1,maskContents:!1,maskObjects:!1,maskZindex:null,resizingGrid:!1,livePaneResizing:!1,liveContentResizing:!1,liveResizingTolerance:1,sliderCursor:"pointer",slideTrigger_open:"click",slideTrigger_close:"mouseleave",
slideDelay_open:300,slideDelay_close:300,hideTogglerOnSlide:!1,preventQuickSlideClose:a.layout.browser.webkit,preventPrematureSlideClose:!1,tips:{Open:"Open",Close:"Close",Resize:"Resize",Slide:"Slide Open",Pin:"Pin",Unpin:"Un-Pin",noRoomToOpen:"Not enough room to show this panel.",minSizeWarning:"Panel has reached its minimum size",maxSizeWarning:"Panel has reached its maximum size"},showOverflowOnHover:!1,enableCursorHotkey:!0,customHotkeyModifier:"SHIFT",fxName:"slide",fxSpeed:null,fxSettings:{},
fxOpacityFix:!0,animatePaneSizing:!1,children:null,containerSelector:"",initChildren:!0,destroyChildren:!0,resizeChildren:!0,triggerEventsOnLoad:!1,triggerEventsDuringLiveResize:!0,onshow_start:null,onshow_end:null,onhide_start:null,onhide_end:null,onopen_start:null,onopen_end:null,onclose_start:null,onclose_end:null,onresize_start:null,onresize_end:null,onsizecontent_start:null,onsizecontent_end:null,onswap_start:null,onswap_end:null,ondrag_start:null,ondrag_end:null},north:{paneSelector:".ui-layout-north",
size:"auto",resizerCursor:"n-resize",customHotkey:""},south:{paneSelector:".ui-layout-south",size:"auto",resizerCursor:"s-resize",customHotkey:""},east:{paneSelector:".ui-layout-east",size:200,resizerCursor:"e-resize",customHotkey:""},west:{paneSelector:".ui-layout-west",size:200,resizerCursor:"w-resize",customHotkey:""},center:{paneSelector:".ui-layout-center",minWidth:0,minHeight:0}};a.layout.optionsMap={layout:"name instanceKey stateManagement effects inset zIndexes errors zIndex scrollToBookmarkOnLoad showErrorMessages maskPanesEarly outset resizeWithWindow resizeWithWindowDelay resizeWithWindowMaxDelay onresizeall onresizeall_start onresizeall_end onload onload_start onload_end onunload onunload_start onunload_end".split(" "),
center:"paneClass contentSelector contentIgnoreSelector findNestedContent applyDemoStyles triggerEventsOnLoad showOverflowOnHover maskContents maskObjects liveContentResizing containerSelector children initChildren resizeChildren destroyChildren onresize onresize_start onresize_end onsizecontent onsizecontent_start onsizecontent_end".split(" "),noDefault:["paneSelector","resizerCursor","customHotkey"]};a.layout.transformData=function(b,d){var c=d?{panes:{},center:{}}:{},e,f,g,h,l,I,F;if("object"!==
typeof b)return c;for(f in b)for(e=c,l=b[f],g=f.split("__"),F=g.length-1,I=0;I<=F;I++)h=g[I],I===F?a.isPlainObject(l)?e[h]=a.layout.transformData(l):e[h]=l:(e[h]||(e[h]={}),e=e[h]);return c};a.layout.backwardCompatibility={map:{applyDefaultStyles:"applyDemoStyles",childOptions:"children",initChildLayout:"initChildren",destroyChildLayout:"destroyChildren",resizeChildLayout:"resizeChildren",resizeNestedLayout:"resizeChildren",resizeWhileDragging:"livePaneResizing",resizeContentWhileDragging:"liveContentResizing",
triggerEventsWhileDragging:"triggerEventsDuringLiveResize",maskIframesOnResize:"maskContents",useStateCookie:"stateManagement.enabled","cookie.autoLoad":"stateManagement.autoLoad","cookie.autoSave":"stateManagement.autoSave","cookie.keys":"stateManagement.stateKeys","cookie.name":"stateManagement.cookie.name","cookie.domain":"stateManagement.cookie.domain","cookie.path":"stateManagement.cookie.path","cookie.expires":"stateManagement.cookie.expires","cookie.secure":"stateManagement.cookie.secure",
noRoomToOpenTip:"tips.noRoomToOpen",togglerTip_open:"tips.Close",togglerTip_closed:"tips.Open",resizerTip:"tips.Resize",sliderTip:"tips.Slide"},renameOptions:function(b){function d(a,c){for(var e=a.split("."),f=e.length-1,g={branch:b,key:e[f]},h=0,l;h<f;h++)l=e[h],g.branch=void 0==g.branch[l]?c?g.branch[l]={}:{}:g.branch[l];return g}var c=a.layout.backwardCompatibility.map,e,f,g,h;for(h in c)e=d(h),g=e.branch[e.key],void 0!==g&&(f=d(c[h],!0),f.branch[f.key]=g,delete e.branch[e.key])},renameAllOptions:function(b){var d=
a.layout.backwardCompatibility.renameOptions;d(b);b.defaults&&("object"!==typeof b.panes&&(b.panes={}),a.extend(!0,b.panes,b.defaults),delete b.defaults);b.panes&&d(b.panes);a.each(a.layout.config.allPanes,function(a,c){b[c]&&d(b[c])});return b}};a.fn.layout=function(g){function h(b){if(!b)return!0;var d=b.keyCode;if(33>d)return!0;var c={38:"north",40:"south",37:"west",39:"east"},e=b.shiftKey,f=b.ctrlKey,g,x,l,m;f&&37<=d&&40>=d&&v[c[d]].enableCursorHotkey?m=c[d]:(f||e)&&a.each(u.borderPanes,function(a,
b){g=v[b];x=g.customHotkey;l=g.customHotkeyModifier;if((e&&"SHIFT"==l||f&&"CTRL"==l||f&&e)&&x&&d===(isNaN(x)||9>=x?x.toUpperCase().charCodeAt(0):x))return m=b,!1});if(!m||!K[m]||!v[m].closable||z[m].isHidden)return!0;ab(m);b.stopPropagation();return b.returnValue=!1}function l(b){if(R()){this&&this.tagName&&(b=this);var d;e(b)?d=K[b]:a(b).data("layoutRole")?d=a(b):a(b).parents().each(function(){if(a(this).data("layoutRole"))return d=a(this),!1});if(d&&d.length){var c=d.data("layoutEdge");b=z[c];b.cssSaved&&
t(c);if(b.isSliding||b.isResizing||b.isClosed)b.cssSaved=!1;else{var f={zIndex:v.zIndexes.resizer_normal+1},g={},h=d.css("overflow"),x=d.css("overflowX"),m=d.css("overflowY");"visible"!=h&&(g.overflow=h,f.overflow="visible");x&&!x.match(/(visible|auto)/)&&(g.overflowX=x,f.overflowX="visible");m&&!m.match(/(visible|auto)/)&&(g.overflowY=x,f.overflowY="visible");b.cssSaved=g;d.css(f);a.each(u.allPanes,function(a,b){b!=c&&t(b)})}}}}function t(b){if(R()){this&&this.tagName&&(b=this);var d;e(b)?d=K[b]:
a(b).data("layoutRole")?d=a(b):a(b).parents().each(function(){if(a(this).data("layoutRole"))return d=a(this),!1});if(d&&d.length){b=d.data("layoutEdge");b=z[b];var c=b.cssSaved||{};b.isSliding||b.isResizing||d.css("zIndex",v.zIndexes.pane_normal);d.css(c);b.cssSaved=!1}}}var y=a.layout.browser,u=a.layout.config,C=a.layout.cssWidth,B=a.layout.cssHeight,I=a.layout.getElementDimensions,F=a.layout.getElementStyles,A=a.layout.getEventObject,r=a.layout.parsePaneName,v=a.extend(!0,{},a.layout.defaults);
v.effects=a.extend(!0,{},a.layout.effects);var z={id:"layout"+a.now(),initialized:!1,paneResizing:!1,panesSliding:{},container:{innerWidth:0,innerHeight:0,outerWidth:0,outerHeight:0,layoutWidth:0,layoutHeight:0},north:{childIdx:0},south:{childIdx:0},east:{childIdx:0},west:{childIdx:0},center:{childIdx:0}},H={north:null,south:null,east:null,west:null,center:null},O={data:{},set:function(a,b,d){O.clear(a);O.data[a]=setTimeout(b,d)},clear:function(a){var b=O.data;b[a]&&(clearTimeout(b[a]),delete b[a])}},
T=function(b,d,c){var e=v;(e.showErrorMessages&&!c||c&&e.showDebugMessages)&&a.layout.msg(e.name+" / "+b,!1!==d);return!1},J=function(b,d,c){var f=d&&e(d),g=f?z[d]:z,h=f?v[d]:v,l=v.name,m=b+(b.match(/_/)?"":"_end"),n=m.match(/_end$/)?m.substr(0,m.length-4):"",p=h[m]||h[n],q="NC",r=[];f||"boolean"!==a.type(d)||(c=d,d="");if(p)try{e(p)&&(p.match(/,/)?(r=p.split(","),p=eval(r[0])):p=eval(p)),a.isFunction(p)&&(q=r.length?p(r[1]):f?p(d,K[d],g,h,l):p(x,g,h,l))}catch(A){T(v.errors.callbackError.replace(/EVENT/,
a.trim((d||"")+" "+m)),!1),"string"===a.type(A)&&string.length&&T("Exception:  "+A,!1)}c||!1===q||(f?(c=K[d],h=v[d],g=z[d],c.triggerHandler("layoutpane"+m,[d,c,g,h,l]),n&&c.triggerHandler("layoutpane"+n,[d,c,g,h,l])):(M.triggerHandler("layout"+m,[x,g,h,l]),n&&M.triggerHandler("layout"+n,[x,g,h,l])));f&&"onresize_end"===b&&kb(d+"",!0);return q},Z=function(a){if(!y.mozilla){var b=K[a];"IFRAME"===z[a].tagName?b.css(u.hidden).css(u.visible):b.find("IFRAME").css(u.hidden).css(u.visible)}},na=function(a){var b=
K[a];a=u[a].dir;b={minWidth:1001-C(b,1E3),minHeight:1001-B(b,1E3)};"horz"===a&&(b.minSize=b.minHeight);"vert"===a&&(b.minSize=b.minWidth);return b},sa=function(b,d,c){var f=b;e(b)?f=K[b]:b.jquery||(f=a(b));b=B(f,d);f.css({height:b,visibility:"visible"});0<b&&0<f.innerWidth()?c&&f.data("autoHidden")&&(f.show().data("autoHidden",!1),y.mozilla||f.css(u.hidden).css(u.visible)):c&&!f.data("autoHidden")&&f.hide().data("autoHidden",!0)},ia=function(b,c,f){f||(f=u[b].dir);e(c)&&c.match(/%/)&&(c="100%"===
c?-1:parseInt(c,10)/100);if(0===c)return 0;if(1<=c)return parseInt(c,10);var g=v,h=0;"horz"==f?h=Q.innerHeight-(K.north?g.north.spacing_open:0)-(K.south?g.south.spacing_open:0):"vert"==f&&(h=Q.innerWidth-(K.west?g.west.spacing_open:0)-(K.east?g.east.spacing_open:0));if(-1===c)return h;if(0<c)return d(h*c);if("center"==b)return 0;f="horz"===f?"height":"width";g=K[b];b="height"===f?Ra[b]:!1;var h=a.layout.showInvisibly(g),x=g.css(f),l=b?b.css(f):0;g.css(f,"auto");b&&b.css(f,"auto");c="height"===f?g.outerHeight():
g.outerWidth();g.css(f,x).css(h);b&&b.css(f,l);return c},aa=function(a,b){var d=K[a],c=v[a],e=z[a],f=b?c.spacing_open:0,c=b?c.spacing_closed:0;return!d||e.isHidden?0:e.isClosed||e.isSliding&&b?c:"horz"===u[a].dir?d.outerHeight()+f:d.outerWidth()+f},ja=function(a,d){if(R()){var e=v[a],f=z[a],g=u[a],h=g.dir;g.sizeType.toLowerCase();var g=void 0!=d?d:f.isSliding,x=e.spacing_open,l=u.oppositeEdge[a],m=z[l],n=K[l],p=!n||!1===m.isVisible||m.isSliding?0:"horz"==h?n.outerHeight():n.outerWidth(),l=(!n||m.isHidden?
0:v[l][!1!==m.isClosed?"spacing_closed":"spacing_open"])||0,m="horz"==h?Q.innerHeight:Q.innerWidth,n=na("center"),n="horz"==h?b(v.center.minHeight,n.minHeight):b(v.center.minWidth,n.minWidth),g=m-x-(g?0:ia("center",n,h)+p+l),h=f.minSize=b(ia(a,e.minSize),na(a).minSize),g=f.maxSize=c(e.maxSize?ia(a,e.maxSize):1E5,g),f=f.resizerPosition={},x=Q.inset.top,p=Q.inset.left,l=Q.innerWidth,m=Q.innerHeight,e=e.spacing_open;switch(a){case "north":f.min=x+h;f.max=x+g;break;case "west":f.min=p+h;f.max=p+g;break;
case "south":f.min=x+m-g-e;f.max=x+m-h-e;break;case "east":f.min=p+l-g-e,f.max=p+l-h-e}}},ca=function(b,d){var c=a(b),e=c.data("layoutRole"),f=c.data("layoutEdge"),g=v[f][e+"Class"],f="-"+f,h=c.hasClass(g+"-closed")?"-closed":"-open",x="-closed"===h?"-open":"-closed",h=g+"-hover "+(g+f+"-hover ")+(g+h+"-hover ")+(g+f+h+"-hover ");d&&(h+=g+x+"-hover "+(g+f+x+"-hover "));"resizer"==e&&c.hasClass(g+"-sliding")&&(h+=g+"-sliding-hover "+(g+f+"-sliding-hover "));return a.trim(h)},fa=function(b,d){var c=
a(d||this);b&&"toggler"===c.data("layoutRole")&&b.stopPropagation();c.addClass(ca(c))},ba=function(b,d){var c=a(d||this);c.removeClass(ca(c,!0))},la=function(b){b=a(this).data("layoutEdge");var d=z[b];d.isClosed||d.isResizing||z.paneResizing||(a.fn.disableSelection&&a("body").disableSelection(),v.maskPanesEarly&&db(b,{resizing:!0}))},L=function(b,d){var c=d||this,e=a(c).data("layoutEdge"),f=e+"ResizerLeave";O.clear(e+"_openSlider");O.clear(f);d?z.paneResizing||(a.fn.enableSelection&&a("body").enableSelection(),
v.maskPanesEarly&&hb()):O.set(f,function(){L(b,c)},200)},R=function(){return z.initialized||z.creatingLayout?!0:Xa()},Xa=function(b){var d=v;if(!M.is(":visible"))return!b&&y.webkit&&"BODY"===M[0].tagName&&setTimeout(function(){Xa(!0)},50),!1;if(!n("center").length)return T(d.errors.centerPaneMissing);z.creatingLayout=!0;a.extend(Q,I(M,d.inset));cb();d.scrollToBookmarkOnLoad&&(b=self.location,b.hash&&b.replace(b.hash));x.hasParentLayout?d.resizeWithWindow=!1:d.resizeWithWindow&&a(window).bind("resize."+
va,za);delete z.creatingLayout;z.initialized=!0;f(x,a.layout.onReady);J("onload_end");return!0},Ya=function(b,d){var c=r.call(this,b),e=K[c];if(e){var f=Ra[c],g=z[c],h=v[c],x=v.stateManagement||{},h=d?h.children=d:h.children;if(a.isPlainObject(h))h=[h];else if(!h||!a.isArray(h))return;a.each(h,function(b,d){a.isPlainObject(d)&&(d.containerSelector?e.find(d.containerSelector):f||e).each(function(){var b=a(this),e=b.data("layout");if(!e){Oa({container:b,options:d},g);if(x.includeChildren&&z.stateData[c]){var e=
(z.stateData[c].children||{})[d.instanceKey],f=d.stateManagement||(d.stateManagement={autoLoad:!0});!0===f.autoLoad&&e&&(f.autoSave=!1,f.includeChildren=!0,f.autoLoad=a.extend(!0,{},e))}(e=b.layout(d))&&Ia(c,e)}})})}},Oa=function(a,b){var d=a.container,c=a.options,e=c.stateManagement,f=c.instanceKey||d.data("layoutInstanceKey");f||(f=(e&&e.cookie?e.cookie.name:"")||c.name);f=f?f.replace(/[^\w-]/gi,"_").replace(/_{2,}/g,"_"):"layout"+ ++b.childIdx;c.instanceKey=f;d.data("layoutInstanceKey",f);return f},
Ia=function(b,d){var c=K[b],e=H[b],f=z[b];a.isPlainObject(e)&&(a.each(e,function(a,b){b.destroyed&&delete e[a]}),a.isEmptyObject(e)&&(e=H[b]=null));d||e||(d=c.data("layout"));d&&(d.hasParentLayout=!0,c=d.options,Oa(d,f),e||(e=H[b]={}),e[c.instanceKey]=d.container.data("layout"));x[b].children=H[b];d||Ya(b)},za=function(){var a=v,b=Number(a.resizeWithWindowDelay);10>b&&(b=100);O.clear("winResize");O.set("winResize",function(){O.clear("winResize");O.clear("winResizeRepeater");var b=I(M,a.inset);b.innerWidth===
Q.innerWidth&&b.innerHeight===Q.innerHeight||Qa()},b);O.data.winResizeRepeater||bb()},bb=function(){var a=Number(v.resizeWithWindowMaxDelay);0<a&&O.set("winResizeRepeater",function(){bb();Qa()},a)},gb=function(){J("onunload_start");f(x,a.layout.onUnload);J("onunload_end")},rb=function(b){b=b?b.split(","):u.borderPanes;a.each(b,function(b,d){var c=v[d];if(c.enableCursorHotkey||c.customHotkey)return a(document).bind("keydown."+va,h),!1})},sb=function(){function d(b){var c=v[b],e=v.panes;c.fxSettings||
(c.fxSettings={});e.fxSettings||(e.fxSettings={});a.each(["_open","_close","_size"],function(d,f){var g="fxName"+f,h="fxSpeed"+f,x="fxSettings"+f,l=c[g]=c[g]||e[g]||c.fxName||e.fxName||"none",D=a.effects&&(a.effects[l]||a.effects.effect&&a.effects.effect[l]);"none"!==l&&v.effects[l]&&D||(l=c[g]="none");l=v.effects[l]||{};g=l.all||null;l=l[b]||null;c[h]=c[h]||e[h]||c.fxSpeed||e.fxSpeed||null;c[x]=a.extend(!0,{},g,l,e.fxSettings,c.fxSettings,e[x],c[x])});delete c.fxName;delete c.fxSpeed;delete c.fxSettings}
var c,e,f,h,x,l;g=a.layout.transformData(g,!0);g=a.layout.backwardCompatibility.renameAllOptions(g);if(!a.isEmptyObject(g.panes)){c=a.layout.optionsMap.noDefault;h=0;for(x=c.length;h<x;h++)f=c[h],delete g.panes[f];c=a.layout.optionsMap.layout;h=0;for(x=c.length;h<x;h++)f=c[h],delete g.panes[f]}c=a.layout.optionsMap.layout;var n=a.layout.config.optionRootKeys;for(f in g)h=g[f],0>a.inArray(f,n)&&0>a.inArray(f,c)&&(g.panes[f]||(g.panes[f]=a.isPlainObject(h)?a.extend(!0,{},h):h),delete g[f]);a.extend(!0,
v,g);a.each(u.allPanes,function(b,h){u[h]=a.extend(!0,{},u.panes,u[h]);e=v.panes;l=v[h];if("center"===h)for(c=a.layout.optionsMap.center,b=0,x=c.length;b<x;b++)f=c[b],g.center[f]||!g.panes[f]&&l[f]||(l[f]=e[f]);else l=v[h]=a.extend(!0,{},e,l),d(h),l.resizerClass||(l.resizerClass="ui-layout-resizer"),l.togglerClass||(l.togglerClass="ui-layout-toggler");l.paneClass||(l.paneClass="ui-layout-pane")});h=g.zIndex;n=v.zIndexes;0<h&&(n.pane_normal=h,n.content_mask=b(h+1,n.content_mask),n.resizer_normal=b(h+
2,n.resizer_normal));delete v.panes},n=function(a){a=v[a].paneSelector;if("#"===a.substr(0,1))return M.find(a).eq(0);var b=M.children(a).eq(0);return b.length?b:M.children("form:first").children(a).eq(0)},cb=function(b){r(b);a.each(u.allPanes,function(a,b){Ib(b,!0)});Jb();a.each(u.borderPanes,function(a,b){K[b]&&z[b].isVisible&&(ja(b),Ka(b))});ka("center");a.each(u.allPanes,function(a,b){Fa(b)})},Ib=function(a,d){if(d||R()){var e=v[a],f=z[a],g=u[a],h=g.dir,m="center"===a,p={},r=K[a],A,y;r?Bb(a,!1,
!0,!1):Ra[a]=!1;r=K[a]=n(a);if(r.length){r.data("layoutCSS")||r.data("layoutCSS",F(r,"position,top,left,bottom,right,width,height,overflow,zIndex,display,backgroundColor,padding,margin,border"));x[a]={name:a,pane:K[a],content:Ra[a],options:v[a],state:z[a],children:H[a]};r.data({parentLayout:x,layoutPane:x[a],layoutEdge:a,layoutRole:"pane"}).css(g.cssReq).css("zIndex",v.zIndexes.pane_normal).css(e.applyDemoStyles?g.cssDemo:{}).addClass(e.paneClass+" "+e.paneClass+"-"+a).bind("mouseenter."+va,fa).bind("mouseleave."+
va,ba);g={hide:"",show:"",toggle:"",close:"",open:"",slideOpen:"",slideClose:"",slideToggle:"",size:"sizePane",sizePane:"sizePane",sizeContent:"",sizeHandles:"",enableClosable:"",disableClosable:"",enableSlideable:"",disableSlideable:"",enableResizable:"",disableResizable:"",swapPanes:"swapPanes",swap:"swapPanes",move:"swapPanes",removePane:"removePane",remove:"removePane",createChildren:"",resizeChildren:"",resizeAll:"resizeAll",resizeLayout:"resizeAll"};for(y in g)r.bind("layoutpane"+y.toLowerCase()+
"."+va,x[g[y]||y]);tb(a,!1);m||(A=f.size=ia(a,e.size),m=ia(a,e.minSize)||1,y=ia(a,e.maxSize)||1E5,0<A&&(A=b(c(A,y),m)),f.autoResize=e.autoResize,f.isClosed=!1,f.isSliding=!1,f.isResizing=!1,f.isHidden=!1,f.pins||(f.pins=[]));f.tagName=r[0].tagName;f.edge=a;f.noRoom=!1;f.isVisible=!0;zb(a);"horz"===h?p.height=B(r,A):"vert"===h&&(p.width=C(r,A));r.css(p);"horz"!=h&&ka(a,!0);z.initialized&&(Jb(a),rb(a));e.initClosed&&e.closable&&!e.initHidden?da(a,!0,!0):e.initHidden||e.initClosed?Ja(a):f.noRoom||r.css("display",
"block");r.css("visibility","visible");e.showOverflowOnHover&&r.hover(l,t);z.initialized&&Fa(a)}else K[a]=!1}},Fa=function(a){var b=K[a],d=z[a],c=v[a];b&&(b.data("layout")&&Ia(a,b.data("layout")),d.isVisible&&(z.initialized?Qa():oa(a),c.triggerEventsOnLoad?J("onresize_end",a):kb(a,!0)),c.initChildren&&c.children&&Ya(a))},zb=function(b){b=b?b.split(","):u.borderPanes;a.each(b,function(a,b){var d=K[b],c=qa[b],e=z[b],f=u[b].side,g={};if(d){switch(b){case "north":g.top=Q.inset.top;g.left=Q.inset.left;
g.right=Q.inset.right;break;case "south":g.bottom=Q.inset.bottom;g.left=Q.inset.left;g.right=Q.inset.right;break;case "west":g.left=Q.inset.left;break;case "east":g.right=Q.inset.right}d.css(g);c&&e.isClosed?c.css(f,Q.inset[f]):c&&!e.isHidden&&c.css(f,Q.inset[f]+aa(b))}})},Jb=function(b){b=b?b.split(","):u.borderPanes;a.each(b,function(b,d){var c=K[d];qa[d]=!1;Aa[d]=!1;if(c){var c=v[d],e=z[d],f="#"===c.paneSelector.substr(0,1)?c.paneSelector.substr(1):"",g=c.resizerClass,h=c.togglerClass,l="-"+d,
D=x[d],m=D.resizer=qa[d]=a("<div></div>"),D=D.toggler=c.closable?Aa[d]=a("<div></div>"):!1;!e.isVisible&&c.slidable&&m.attr("title",c.tips.Slide).css("cursor",c.sliderCursor);m.attr("id",f?f+"-resizer":"").data({parentLayout:x,layoutPane:x[d],layoutEdge:d,layoutRole:"resizer"}).css(u.resizers.cssReq).css("zIndex",v.zIndexes.resizer_normal).css(c.applyDemoStyles?u.resizers.cssDemo:{}).addClass(g+" "+g+l).hover(fa,ba).hover(la,L).appendTo(M);c.resizerDblClickToggle&&m.bind("dblclick."+va,ab);D&&(D.attr("id",
f?f+"-toggler":"").data({parentLayout:x,layoutPane:x[d],layoutEdge:d,layoutRole:"toggler"}).css(u.togglers.cssReq).css(c.applyDemoStyles?u.togglers.cssDemo:{}).addClass(h+" "+h+l).hover(fa,ba).bind("mouseenter",la).appendTo(m),c.togglerContent_open&&a("<span>"+c.togglerContent_open+"</span>").data({layoutEdge:d,layoutRole:"togglerContent"}).data("layoutRole","togglerContent").data("layoutEdge",d).addClass("content content-open").css("display","none").appendTo(D),c.togglerContent_closed&&a("<span>"+
c.togglerContent_closed+"</span>").data({layoutEdge:d,layoutRole:"togglerContent"}).addClass("content content-closed").css("display","none").appendTo(D),Db(d));Ab(d);e.isVisible?ib(d):(ta(d),Pa(d,!0))}});S()},tb=function(a,b){if(R()){var d=v[a],c=d.contentSelector,e=x[a],f=K[a],g;c&&(g=e.content=Ra[a]=d.findNestedContent?f.find(c).eq(0):f.children(c).eq(0));g&&g.length?(g.data("layoutRole","content"),g.data("layoutCSS")||g.data("layoutCSS",F(g,"height")),g.css(u.content.cssReq),d.applyDemoStyles&&
(g.css(u.content.cssDemo),f.css(u.content.cssDemoPane)),f.css("overflowX").match(/(scroll|auto)/)&&f.css("overflow","hidden"),z[a].content={},!1!==b&&oa(a)):e.content=Ra[a]=!1}},Ab=function(b){var d=a.layout.plugins.draggable;b=b?b.split(","):u.borderPanes;a.each(b,function(b,e){var f=v[e];if(!d||!K[e]||!f.resizable)return f.resizable=!1,!0;var g=z[e],h=v.zIndexes,x=u[e],l="horz"==x.dir?"top":"left",m=qa[e],D=f.resizerClass,n=0,p,r,q=D+"-drag",A=D+"-"+e+"-drag",t=D+"-dragging",y=D+"-"+e+"-dragging",
B=D+"-dragging-limit",C=D+"-"+e+"-dragging-limit",H=!1;g.isClosed||m.attr("title",f.tips.Resize).css("cursor",f.resizerCursor);m.draggable({containment:M[0],axis:"horz"==x.dir?"y":"x",delay:0,distance:1,grid:f.resizingGrid,helper:"clone",opacity:f.resizerDragOpacity,addClasses:!1,zIndex:h.resizer_drag,start:function(b,d){f=v[e];g=z[e];r=f.livePaneResizing;if(!1===J("ondrag_start",e))return!1;g.isResizing=!0;z.paneResizing=e;O.clear(e+"_closeSlider");ja(e);p=g.resizerPosition;n=d.position[l];m.addClass(q+
" "+A);H=!1;a("body").disableSelection();db(e,{resizing:!0})},drag:function(a,b){H||(b.helper.addClass(t+" "+y).css({right:"auto",bottom:"auto"}).children().css("visibility","hidden"),H=!0,g.isSliding&&K[e].css("zIndex",h.pane_sliding));var d=0;b.position[l]<p.min?(b.position[l]=p.min,d=-1):b.position[l]>p.max&&(b.position[l]=p.max,d=1);d?(b.helper.addClass(B+" "+C),window.defaultStatus=0<d&&e.match(/(north|west)/)||0>d&&e.match(/(south|east)/)?f.tips.maxSizeWarning:f.tips.minSizeWarning):(b.helper.removeClass(B+
" "+C),window.defaultStatus="");r&&Math.abs(b.position[l]-n)>=f.liveResizingTolerance&&(n=b.position[l],c(a,b,e))},stop:function(b,d){a("body").enableSelection();window.defaultStatus="";m.removeClass(q+" "+A);g.isResizing=!1;z.paneResizing=!1;c(b,d,e,!0)}})});var c=function(a,b,d,c){var e=b.position,f=u[d];a=v[d];b=z[d];var g;switch(d){case "north":g=e.top;break;case "west":g=e.left;break;case "south":g=Q.layoutHeight-e.top-a.spacing_open;break;case "east":g=Q.layoutWidth-e.left-a.spacing_open}g-=
Q.inset[f.side];c?(!1!==J("ondrag_end",d)&&jb(d,g,!1,!0),hb(!0),b.isSliding&&db(d,{resizing:!0})):Math.abs(g-b.size)<a.liveResizingTolerance||(jb(d,g,!1,!0),Sa.each(ub))}},ub=function(){var b=a(this),d=b.data("layoutMask"),d=z[d];"IFRAME"==d.tagName&&d.isVisible&&b.css({top:d.offsetTop,left:d.offsetLeft,width:d.outerWidth,height:d.outerHeight})},db=function(b,d){var c=u[b],e=["center"],f=v.zIndexes,g=a.extend({objectsOnly:!1,animation:!1,resizing:!0,sliding:z[b].isSliding},d),h,x;g.resizing&&e.push(b);
g.sliding&&e.push(u.oppositeEdge[b]);"horz"===c.dir&&(e.push("west"),e.push("east"));a.each(e,function(a,b){x=z[b];h=v[b];x.isVisible&&(h.maskObjects||!g.objectsOnly&&h.maskContents)&&ua(b).each(function(){ub.call(this);this.style.zIndex=x.isSliding?f.pane_sliding+1:f.pane_normal+1;this.style.display="block"})})},hb=function(b){if(b||!z.paneResizing)Sa.hide();else if(!b&&!a.isEmptyObject(z.panesSliding)){b=Sa.length-1;for(var d,c;0<=b;b--)c=Sa.eq(b),d=c.data("layoutMask"),v[d].maskObjects||c.hide()}},
ua=function(b){for(var d=a([]),c,e=0,f=Sa.length;e<f;e++)c=Sa.eq(e),c.data("layoutMask")===b&&(d=d.add(c));if(d.length)return d;d=K[b];c=z[b];var e=v[b],f=v.zIndexes,g=a([]),h,x,l,m,n;if(e.maskContents||e.maskObjects)for(n=0;n<(e.maskObjects?2:1);n++)h=e.maskObjects&&0==n,x=document.createElement(h?"iframe":"div"),l=a(x).data("layoutMask",b),x.className="ui-layout-mask ui-layout-mask-"+b,m=x.style,m.display="block",m.position="absolute",m.background="#FFF",h&&(x.frameborder=0,x.src="about:blank",
m.opacity=0,m.filter="Alpha(Opacity='0')",m.border=0),"IFRAME"==c.tagName?(m.zIndex=f.pane_normal+1,M.append(x)):(l.addClass("ui-layout-mask-inside-pane"),m.zIndex=e.maskZindex||f.content_mask,m.top=0,m.left=0,m.width="100%",m.height="100%",d.append(x)),g=g.add(x),Sa=Sa.add(x);return g},Bb=function(b,d,c,e){if(R()){b=r.call(this,b);var f=K[b],g=Ra[b],h=qa[b],l=Aa[b];f&&a.isEmptyObject(f.data())&&(f=!1);g&&a.isEmptyObject(g.data())&&(g=!1);h&&a.isEmptyObject(h.data())&&(h=!1);l&&a.isEmptyObject(l.data())&&
(l=!1);f&&f.stop(!0,!0);var m=v[b],n=H[b],p=a.isPlainObject(n)&&!a.isEmptyObject(n);e=void 0!==e?e:m.destroyChildren;p&&e&&(a.each(n,function(a,b){b.destroyed||b.destroy(!0);b.destroyed&&delete n[a]}),a.isEmptyObject(n)&&(n=H[b]=null,p=!1));f&&d&&!p?f.remove():f&&f[0]&&(d=m.paneClass,e=d+"-"+b,d=[d,d+"-open",d+"-closed",d+"-sliding",e,e+"-open",e+"-closed",e+"-sliding"],a.merge(d,ca(f,!0)),f.removeClass(d.join(" ")).removeData("parentLayout").removeData("layoutPane").removeData("layoutRole").removeData("layoutEdge").removeData("autoHidden").unbind("."+
va),p&&g?(g.width(g.width()),a.each(n,function(a,b){b.resizeAll()})):g&&g.css(g.data("layoutCSS")).removeData("layoutCSS").removeData("layoutRole"),f.data("layout")||f.css(f.data("layoutCSS")).removeData("layoutCSS"));l&&l.remove();h&&h.remove();x[b]=K[b]=Ra[b]=qa[b]=Aa[b]=!1;c||Qa()}},Ta=function(a){var b=K[a],d=b[0].style;v[a].useOffscreenClose?(b.data(u.offscreenReset)||b.data(u.offscreenReset,{left:d.left,right:d.right}),b.css(u.offscreenCSS)):b.hide().removeData(u.offscreenReset)},vb=function(a){var b=
K[a];a=v[a];var d=u.offscreenCSS,c=b.data(u.offscreenReset),e=b[0].style;b.show().removeData(u.offscreenReset);a.useOffscreenClose&&c&&(e.left==d.left&&(e.left=c.left),e.right==d.right&&(e.right=c.right))},Ja=function(a,b){if(R()){var d=r.call(this,a),c=v[d],e=z[d],f=qa[d];!K[d]||e.isHidden||z.initialized&&!1===J("onhide_start",d)||(e.isSliding=!1,delete z.panesSliding[d],f&&f.hide(),!z.initialized||e.isClosed?(e.isClosed=!0,e.isHidden=!0,e.isVisible=!1,z.initialized||Ta(d),ka("horz"===u[d].dir?"":
"center"),(z.initialized||c.triggerEventsOnLoad)&&J("onhide_end",d)):(e.isHiding=!0,da(d,!1,b)))}},pb=function(a,b,d,c){if(R()){a=r.call(this,a);var e=z[a];K[a]&&e.isHidden&&!1!==J("onshow_start",a)&&(e.isShowing=!0,e.isSliding=!1,delete z.panesSliding[a],!1===b?da(a,!0):Za(a,!1,d,c))}},ab=function(a,b){if(R()){var d=A(a),c=r.call(this,a),e=z[c];d&&d.stopImmediatePropagation();e.isHidden?pb(c):e.isClosed?Za(c,!!b):da(c)}},Na=function(a,b){var d=z[a];Ta(a);d.isClosed=!0;d.isVisible=!1;b&&ta(a)},da=
function(a,b,d,c){function e(){x.isMoving=!1;Pa(f,!0);var a=u.oppositeEdge[f];z[a].noRoom&&(ja(a),Ka(a));c||!z.initialized&&!h.triggerEventsOnLoad||(m||J("onclose_end",f),m&&J("onshow_end",f),n&&J("onhide_end",f))}var f=r.call(this,a);if(!z.initialized&&K[f])Na(f,!0);else if(R()){var g=K[f],h=v[f],x=z[f],l,m,n;M.queue(function(a){if(!g||!h.closable&&!x.isShowing&&!x.isHiding||!b&&x.isClosed&&!x.isShowing)return a();var c=!x.isShowing&&!1===J("onclose_start",f);m=x.isShowing;n=x.isHiding;delete x.isShowing;
delete x.isHiding;if(c)return a();l=!d&&!x.isClosed&&"none"!=h.fxName_close;x.isMoving=!0;x.isClosed=!0;x.isVisible=!1;n?x.isHidden=!0:m&&(x.isHidden=!1);x.isSliding?$a(f,!1):ka("horz"===u[f].dir?"":"center",!1);ta(f);l?(Cb(f,!0),g.hide(h.fxName_close,h.fxSettings_close,h.fxSpeed_close,function(){Cb(f,!1);x.isClosed&&e();a()})):(Ta(f),e(),a())})}},ta=function(b){if(qa[b]){var d=qa[b],c=Aa[b],e=v[b],f=u[b].side,g=e.resizerClass,h=e.togglerClass,x="-"+b;d.css(f,Q.inset[f]).removeClass(g+"-open "+g+
x+"-open").removeClass(g+"-sliding "+g+x+"-sliding").addClass(g+"-closed "+g+x+"-closed");e.resizable&&a.layout.plugins.draggable&&d.draggable("disable").removeClass("ui-state-disabled").css("cursor","default").attr("title","");c&&(c.removeClass(h+"-open "+h+x+"-open").addClass(h+"-closed "+h+x+"-closed").attr("title",e.tips.Open),c.children(".content-open").hide(),c.children(".content-closed").css("display","block"));Ob(b,!1);z.initialized&&S()}},Za=function(a,b,d,c){function e(){x.isMoving=!1;Z(f);
x.isSliding||ka("vert"==u[f].dir?"center":"",!1);ib(f)}if(R()){var f=r.call(this,a),g=K[f],h=v[f],x=z[f],l,m;M.queue(function(a){if(!g||!h.resizable&&!h.closable&&!x.isShowing||x.isVisible&&!x.isSliding)return a();if(x.isHidden&&!x.isShowing)a(),pb(f,!0);else{x.autoResize&&x.size!=h.size?Ba(f,h.size,!0,!0,!0):ja(f,b);var D=J("onopen_start",f);if("abort"===D)return a();"NC"!==D&&ja(f,b);if(x.minSize>x.maxSize)return Ob(f,!1),!c&&h.tips.noRoomToOpen&&alert(h.tips.noRoomToOpen),a();b?$a(f,!0):x.isSliding?
$a(f,!1):h.slidable&&Pa(f,!1);x.noRoom=!1;Ka(f);m=x.isShowing;delete x.isShowing;l=!d&&x.isClosed&&"none"!=h.fxName_open;x.isMoving=!0;x.isVisible=!0;x.isClosed=!1;m&&(x.isHidden=!1);l?(Cb(f,!0),g.show(h.fxName_open,h.fxSettings_open,h.fxSpeed_open,function(){Cb(f,!1);x.isVisible&&e();a()})):(vb(f),e(),a())}})}},ib=function(b,d){var c=K[b],e=qa[b],f=Aa[b],g=v[b],h=z[b],x=u[b].side,l=g.resizerClass,m=g.togglerClass,n="-"+b;e.css(x,Q.inset[x]+aa(b)).removeClass(l+"-closed "+l+n+"-closed").addClass(l+
"-open "+l+n+"-open");h.isSliding?e.addClass(l+"-sliding "+l+n+"-sliding"):e.removeClass(l+"-sliding "+l+n+"-sliding");ba(0,e);g.resizable&&a.layout.plugins.draggable?e.draggable("enable").css("cursor",g.resizerCursor).attr("title",g.tips.Resize):h.isSliding||e.css("cursor","default");f&&(f.removeClass(m+"-closed "+m+n+"-closed").addClass(m+"-open "+m+n+"-open").attr("title",g.tips.Close),ba(0,f),f.children(".content-closed").hide(),f.children(".content-open").css("display","block"));Ob(b,!h.isSliding);
a.extend(h,I(c));z.initialized&&(S(),oa(b,!0));!d&&(z.initialized||g.triggerEventsOnLoad)&&c.is(":visible")&&(J("onopen_end",b),h.isShowing&&J("onshow_end",b),z.initialized&&J("onresize_end",b))},Wb=function(a){function b(){e.isClosed?e.isMoving||Za(c,!0):$a(c,!0)}if(R()){var d=A(a),c=r.call(this,a),e=z[c];a=v[c].slideDelay_open;d&&d.stopImmediatePropagation();e.isClosed&&d&&"mouseenter"===d.type&&0<a?O.set(c+"_openSlider",b,a):b()}},W=function(d){function c(){g.isClosed?$a(f,!1):g.isMoving||da(f)}
if(R()){var e=A(d),f=r.call(this,d);d=v[f];var g=z[f],h=g.isMoving?1E3:300;g.isClosed||g.isResizing||("click"===d.slideTrigger_close?c():d.preventQuickSlideClose&&g.isMoving||d.preventPrematureSlideClose&&e&&a.layout.isMouseOverElem(e,K[f])||(e?O.set(f+"_closeSlider",c,b(d.slideDelay_close,h)):c()))}},Cb=function(a,b){var d=K[a],c=z[a],e=v[a],f=v.zIndexes;b?(db(a,{animation:!0,objectsOnly:!0}),d.css({zIndex:f.pane_animate}),"south"==a?d.css({top:Q.inset.top+Q.innerHeight-d.outerHeight()}):"east"==
a&&d.css({left:Q.inset.left+Q.innerWidth-d.outerWidth()})):(hb(),d.css({zIndex:c.isSliding?f.pane_sliding:f.pane_normal}),"south"==a?d.css({top:"auto"}):"east"!=a||d.css("left").match(/\-99999/)||d.css({left:"auto"}),y.msie&&e.fxOpacityFix&&"slide"!=e.fxName_open&&d.css("filter")&&1==d.css("opacity")&&d[0].style.removeAttribute("filter"))},Pa=function(a,b){var d=v[a],c=qa[a],e=d.slideTrigger_open.toLowerCase();if(c&&(!b||d.slidable)){e.match(/mouseover/)?e=d.slideTrigger_open="mouseenter":e.match(/(click|dblclick|mouseenter)/)||
(e=d.slideTrigger_open="click");if(d.resizerDblClickToggle&&e.match(/click/))c[b?"unbind":"bind"]("dblclick."+va,ab);c[b?"bind":"unbind"](e+"."+va,Wb).css("cursor",b?d.sliderCursor:"default").attr("title",b?d.tips.Slide:"")}},$a=function(a,b){function d(b){O.clear(a+"_closeSlider");b.stopPropagation()}var c=v[a],e=z[a],f=v.zIndexes,g=c.slideTrigger_close.toLowerCase(),h=b?"bind":"unbind",x=K[a],l=qa[a];O.clear(a+"_closeSlider");b?(e.isSliding=!0,z.panesSliding[a]=!0,Pa(a,!1)):(e.isSliding=!1,delete z.panesSliding[a]);
x.css("zIndex",b?f.pane_sliding:f.pane_normal);l.css("zIndex",b?f.pane_sliding+2:f.resizer_normal);g.match(/(click|mouseleave)/)||(g=c.slideTrigger_close="mouseleave");l[h](g,W);"mouseleave"===g&&(x[h]("mouseleave."+va,W),l[h]("mouseenter."+va,d),x[h]("mouseenter."+va,d));b?"click"!==g||c.resizable||(l.css("cursor",b?c.sliderCursor:"default"),l.attr("title",b?c.tips.Close:"")):O.clear(a+"_closeSlider")},Ka=function(b,d,c,e){d=v[b];var f=z[b],g=u[b],h=K[b],x=qa[b],l="vert"===g.dir,m=!1;if("center"===
b||l&&f.noVerticalRoom)(m=0<=f.maxHeight)&&f.noRoom?(vb(b),x&&x.show(),f.isVisible=!0,f.noRoom=!1,l&&(f.noVerticalRoom=!1),Z(b)):m||f.noRoom||(Ta(b),x&&x.hide(),f.isVisible=!1,f.noRoom=!0);"center"!==b&&(f.minSize<=f.maxSize?(f.size>f.maxSize?Ba(b,f.maxSize,c,!0,e):f.size<f.minSize?Ba(b,f.minSize,c,!0,e):x&&f.isVisible&&h.is(":visible")&&(c=f.size+Q.inset[g.side],a.layout.cssNum(x,g.side)!=c&&x.css(g.side,c)),f.noRoom&&(f.wasOpen&&d.closable?d.autoReopen?Za(b,!1,!0,!0):f.noRoom=!1:pb(b,f.wasOpen,
!0,!0))):f.noRoom||(f.noRoom=!0,f.wasOpen=!f.isClosed&&!f.isSliding,f.isClosed||(d.closable?da(b,!0,!0):Ja(b,!0))))},jb=function(a,b,d,c,e){if(R()){a=r.call(this,a);var f=v[a],g=z[a];e=e||f.livePaneResizing&&!g.isResizing;g.autoResize=!1;Ba(a,b,d,c,e)}},Ba=function(d,e,f,g,h){function x(){for(var d="width"===t?p.outerWidth():p.outerHeight(),d=[{pane:l,count:1,target:e,actual:d,correct:e===d,attempt:e,cssSize:Z}],c=d[0],g={},m="Inaccurate size after resizing the "+l+"-pane.";!c.correct;){g={pane:l,
count:c.count+1,target:e};g.attempt=c.actual>e?b(0,c.attempt-(c.actual-e)):b(0,c.attempt+(e-c.actual));g.cssSize=("horz"==u[l].dir?B:C)(K[l],g.attempt);p.css(t,g.cssSize);g.actual="width"==t?p.outerWidth():p.outerHeight();g.correct=e===g.actual;1===d.length&&(T(m,!1,!0),T(c,!1,!0));T(g,!1,!0);if(3<d.length)break;d.push(g);c=d[d.length-1]}n.size=e;a.extend(n,I(p));n.isVisible&&p.is(":visible")&&(q&&q.css(A,e+Q.inset[A]),oa(l));!f&&!y&&z.initialized&&n.isVisible&&J("onresize_end",l);f||(n.isSliding||
ka("horz"==u[l].dir?"":"center",y,h),S());c=u.oppositeEdge[l];e<F&&z[c].noRoom&&(ja(c),Ka(c,!1,f));1<d.length&&T(m+"\nSee the Error Console for details.",!0,!0)}if(R()){var l=r.call(this,d),m=v[l],n=z[l],p=K[l],q=qa[l],A=u[l].side,t=u[l].sizeType.toLowerCase(),y=n.isResizing&&!m.triggerEventsDuringLiveResize,H=!0!==g&&m.animatePaneSizing,F,Z;M.queue(function(d){ja(l);F=n.size;e=ia(l,e);e=b(e,ia(l,m.minSize));e=c(e,n.maxSize);if(e<n.minSize)d(),Ka(l,!1,f);else{if(!h&&e===F)return d();n.newSize=e;!f&&
z.initialized&&n.isVisible&&J("onresize_start",l);Z=("horz"==u[l].dir?B:C)(K[l],e);if(H&&p.is(":visible")){var g=a.layout.effects.size[l]||a.layout.effects.size.all,g=m.fxSettings_size.easing||g.easing,D=v.zIndexes,q={};q[t]=Z+"px";n.isMoving=!0;p.css({zIndex:D.pane_animate}).show().animate(q,m.fxSpeed_size,g,function(){p.css({zIndex:n.isSliding?D.pane_sliding:D.pane_normal});n.isMoving=!1;delete n.newSize;x();d()})}else p.css(t,Z),delete n.newSize,p.is(":visible")?x():(n.size=e,a.extend(n,I(p))),
d()}})}},ka=function(d,c,e){d=(d?d:"east,west,center").split(",");a.each(d,function(d,f){if(K[f]){var g=v[f],h=z[f],x=K[f],l=!0,m={},n=a.layout.showInvisibly(x),D={top:aa("north",!0),bottom:aa("south",!0),left:aa("west",!0),right:aa("east",!0),width:0,height:0};D.width=Q.innerWidth-D.left-D.right;D.height=Q.innerHeight-D.bottom-D.top;D.top+=Q.inset.top;D.bottom+=Q.inset.bottom;D.left+=Q.inset.left;D.right+=Q.inset.right;a.extend(h,I(x));if("center"===f){if(!e&&h.isVisible&&D.width===h.outerWidth&&
D.height===h.outerHeight)return x.css(n),!0;a.extend(h,na(f),{maxWidth:D.width,maxHeight:D.height});m=D;h.newWidth=m.width;h.newHeight=m.height;m.width=C(x,m.width);m.height=B(x,m.height);l=0<=m.width&&0<=m.height;if(!z.initialized&&g.minWidth>D.width){var g=g.minWidth-h.outerWidth,D=v.east.minSize||0,p=v.west.minSize||0,q=z.east.size,r=z.west.size,A=q,t=r;0<g&&z.east.isVisible&&q>D&&(A=b(q-D,q-g),g-=q-A);0<g&&z.west.isVisible&&r>p&&(t=b(r-p,r-g),g-=r-t);if(0===g){q&&q!=D&&Ba("east",A,!0,!0,e);r&&
r!=p&&Ba("west",t,!0,!0,e);ka("center",c,e);x.css(n);return}}}else{h.isVisible&&!h.noVerticalRoom&&a.extend(h,I(x),na(f));if(!e&&!h.noVerticalRoom&&D.height===h.outerHeight)return x.css(n),!0;m.top=D.top;m.bottom=D.bottom;h.newSize=D.height;m.height=B(x,D.height);h.maxHeight=m.height;l=0<=h.maxHeight;l||(h.noVerticalRoom=!0)}l?(!c&&z.initialized&&J("onresize_start",f),x.css(m),"center"!==f&&S(f),!h.noRoom||h.isClosed||h.isHidden||Ka(f),h.isVisible&&(a.extend(h,I(x)),z.initialized&&oa(f))):!h.noRoom&&
h.isVisible&&Ka(f);x.css(n);delete h.newSize;delete h.newWidth;delete h.newHeight;if(!h.isVisible)return!0;"center"===f&&(h=y.isIE6||!y.boxModel,K.north&&(h||"IFRAME"==z.north.tagName)&&K.north.css("width",C(K.north,Q.innerWidth)),K.south&&(h||"IFRAME"==z.south.tagName)&&K.south.css("width",C(K.south,Q.innerWidth)));!c&&z.initialized&&J("onresize_end",f)}})},Qa=function(b){r(b);if(M.is(":visible"))if(z.initialized){if(!0===b&&a.isPlainObject(v.outset)&&M.css(v.outset),a.extend(Q,I(M,v.inset)),Q.outerHeight){!0===
b&&zb();if(!1===J("onresizeall_start"))return!1;var d,c,e;a.each(["south","north","east","west"],function(a,b){K[b]&&(c=v[b],e=z[b],e.autoResize&&e.size!=c.size?Ba(b,c.size,!0,!0,!0):(ja(b),Ka(b,!1,!0,!0)))});ka("",!0,!0);S();a.each(u.allPanes,function(a,b){(d=K[b])&&z[b].isVisible&&J("onresize_end",b)});J("onresizeall_end")}}else Xa()},kb=function(b,d){var c=r.call(this,b);v[c].resizeChildren&&(d||Ia(c),c=H[c],a.isPlainObject(c)&&a.each(c,function(a,b){b.destroyed||b.resizeAll()}))},oa=function(d,
c){if(R()){var e=r.call(this,d),e=e?e.split(","):u.allPanes;a.each(e,function(a,d){function e(a){return b(l.css.paddingBottom,parseInt(a.css("marginBottom"),10)||0)}function f(){var a=v[d].contentIgnoreSelector,a=h.nextAll().not(".ui-layout-mask").not(a||":lt(0)"),b=a.filter(":visible"),c=b.filter(":last");m={top:h[0].offsetTop,height:h.outerHeight(),numFooters:a.length,hiddenFooters:a.length-b.length,spaceBelow:0};m.spaceAbove=m.top;m.bottom=m.top+m.height;m.spaceBelow=c.length?c[0].offsetTop+c.outerHeight()-
m.bottom+e(c):e(h)}var g=K[d],h=Ra[d],x=v[d],l=z[d],m=l.content;if(!g||!h||!g.is(":visible"))return!0;if(!h.length&&(tb(d,!1),!h))return;if(!1!==J("onsizecontent_start",d)){if(!l.isMoving&&!l.isResizing||x.liveContentResizing||c||void 0==m.top)f(),0<m.hiddenFooters&&"hidden"===g.css("overflow")&&(g.css("overflow","visible"),f(),g.css("overflow","hidden"));g=l.innerHeight-(m.spaceAbove-l.css.paddingTop)-(m.spaceBelow-l.css.paddingBottom);h.is(":visible")&&m.height==g||(sa(h,g,!0),m.height=g);z.initialized&&
J("onsizecontent_end",d)}})}},S=function(b){b=(b=r.call(this,b))?b.split(","):u.borderPanes;a.each(b,function(b,c){var f=v[c],g=z[c],h=K[c],x=qa[c],l=Aa[c],m;if(h&&x){var D=u[c].dir,n=g.isClosed?"_closed":"_open",p=f["spacing"+n],q=f["togglerAlign"+n],n=f["togglerLength"+n],r;if(0===p)x.hide();else{g.noRoom||g.isHidden||x.show();"horz"===D?(r=Q.innerWidth,g.resizerLength=r,h=a.layout.cssNum(h,"left"),x.css({width:C(x,r),height:B(x,p),left:-9999<h?h:Q.inset.left})):(r=h.outerHeight(),g.resizerLength=
r,x.css({height:B(x,r),width:C(x,p),top:Q.inset.top+aa("north",!0)}));ba(f,x);if(l){if(0===n||g.isSliding&&f.hideTogglerOnSlide){l.hide();return}l.show();if(!(0<n)||"100%"===n||n>r)n=r,q=0;else if(e(q))switch(q){case "top":case "left":q=0;break;case "bottom":case "right":q=r-n;break;default:q=d((r-n)/2)}else h=parseInt(q,10),q=0<=q?h:r-n+h;if("horz"===D){var A=C(l,n);l.css({width:A,height:B(l,p),left:q,top:0});l.children(".content").each(function(){m=a(this);m.css("marginLeft",d((A-m.outerWidth())/
2))})}else{var t=B(l,n);l.css({height:t,width:C(l,p),top:q,left:0});l.children(".content").each(function(){m=a(this);m.css("marginTop",d((t-m.outerHeight())/2))})}ba(0,l)}z.initialized||!f.initHidden&&!g.isHidden||(x.hide(),l&&l.hide())}}})},Db=function(a){if(R()){var b=r.call(this,a);a=Aa[b];var d=v[b];a&&(d.closable=!0,a.bind("click."+va,function(a){a.stopPropagation();ab(b)}).css("visibility","visible").css("cursor","pointer").attr("title",z[b].isClosed?d.tips.Open:d.tips.Close).show())}},Ob=function(b,
d){a.layout.plugins.buttons&&a.each(z[b].pins,function(c,e){a.layout.buttons.setPinState(x,a(e),b,d)})},M=a(this).eq(0);if(!M.length)return T(v.errors.containerMissing);if(M.data("layoutContainer")&&M.data("layout"))return M.data("layout");var K={},Ra={},qa={},Aa={},Sa=a([]),Q=z.container,va=z.id,x={options:v,state:z,container:M,panes:K,contents:Ra,resizers:qa,togglers:Aa,hide:Ja,show:pb,toggle:ab,open:Za,close:da,slideOpen:Wb,slideClose:W,slideToggle:function(a){a=r.call(this,a);ab(a,!0)},setSizeLimits:ja,
_sizePane:Ba,sizePane:jb,sizeContent:oa,swapPanes:function(d,c){function e(b){var d=K[b],c=Ra[b];return d?{pane:b,P:d?d[0]:!1,C:c?c[0]:!1,state:a.extend(!0,{},z[b]),options:a.extend(!0,{},v[b])}:!1}function f(d,c){if(d){var e=d.P,g=d.C,h=d.pane,l=u[c],n=a.extend(!0,{},z[c]),D=v[c],E={resizerCursor:D.resizerCursor};a.each(["fxName","fxSpeed","fxSettings"],function(a,b){E[b+"_open"]=D[b+"_open"];E[b+"_close"]=D[b+"_close"];E[b+"_size"]=D[b+"_size"]});K[c]=a(e).data({layoutPane:x[c],layoutEdge:c}).css(u.hidden).css(l.cssReq);
Ra[c]=g?a(g):!1;v[c]=a.extend(!0,{},d.options,E);z[c]=a.extend(!0,{},d.state);e.className=e.className.replace(new RegExp(D.paneClass+"-"+h,"g"),D.paneClass+"-"+c);Jb(c);l.dir!=u[h].dir?(e=m[c]||0,ja(c),e=b(e,z[c].minSize),jb(c,e,!0,!0)):qa[c].css(l.side,Q.inset[l.side]+(z[c].isVisible?aa(c):0));d.state.isVisible&&!n.isVisible?ib(c,!0):(ta(c),Pa(c,!0));d=null}}if(R()){var g=r.call(this,d);z[g].edge=c;z[c].edge=g;if(!1===J("onswap_start",g)||!1===J("onswap_start",c))z[g].edge=g,z[c].edge=c;else{var h=
e(g),l=e(c),m={};m[g]=h?h.state.size:0;m[c]=l?l.state.size:0;K[g]=!1;K[c]=!1;z[g]={};z[c]={};Aa[g]&&Aa[g].remove();Aa[c]&&Aa[c].remove();qa[g]&&qa[g].remove();qa[c]&&qa[c].remove();qa[g]=qa[c]=Aa[g]=Aa[c]=!1;f(h,c);f(l,g);h=l=m=null;K[g]&&K[g].css(u.visible);K[c]&&K[c].css(u.visible);Qa();J("onswap_end",g);J("onswap_end",c)}}},showMasks:db,hideMasks:hb,initContent:tb,addPane:Ib,removePane:Bb,createChildren:Ya,refreshChildren:Ia,enableClosable:Db,disableClosable:function(a,b){if(R()){var d=r.call(this,
a),c=Aa[d];c&&(v[d].closable=!1,z[d].isClosed&&Za(d,!1,!0),c.unbind("."+va).css("visibility",b?"hidden":"visible").css("cursor","default").attr("title",""))}},enableSlidable:function(a){if(R()){a=r.call(this,a);var b=qa[a];b&&b.data("draggable")&&(v[a].slidable=!0,z[a].isClosed&&Pa(a,!0))}},disableSlidable:function(a){if(R()){a=r.call(this,a);var b=qa[a];b&&(v[a].slidable=!1,z[a].isSliding?da(a,!1,!0):(Pa(a,!1),b.css("cursor","default").attr("title",""),ba(null,b[0])))}},enableResizable:function(a){if(R()){a=
r.call(this,a);var b=qa[a],d=v[a];b&&b.data("draggable")&&(d.resizable=!0,b.draggable("enable"),z[a].isClosed||b.css("cursor",d.resizerCursor).attr("title",d.tips.Resize))}},disableResizable:function(a){if(R()){a=r.call(this,a);var b=qa[a];b&&b.data("draggable")&&(v[a].resizable=!1,b.draggable("disable").css("cursor","default").attr("title",""),ba(null,b[0]))}},allowOverflow:l,resetOverflow:t,destroy:function(b,d){a(window).unbind("."+va);a(document).unbind("."+va);"object"===typeof b?r(b):d=b;M.clearQueue().removeData("layout").removeData("layoutContainer").removeClass(v.containerClass).unbind("."+
va);Sa.remove();a.each(u.allPanes,function(a,b){Bb(b,!1,!0,d)});M.data("layoutCSS")&&!M.data("layoutRole")&&M.css(M.data("layoutCSS")).removeData("layoutCSS");"BODY"===Q.tagName&&(M=a("html")).data("layoutCSS")&&M.css(M.data("layoutCSS")).removeData("layoutCSS");f(x,a.layout.onDestroy);gb();for(var c in x)c.match(/^(container|options)$/)||delete x[c];x.destroyed=!0;return x},initPanes:R,resizeAll:Qa,runCallbacks:J,hasParentLayout:!1,children:H,north:!1,south:!1,west:!1,east:!1,center:!1};return"cancel"===
function(){sb();var b=v,d=z;d.creatingLayout=!0;f(x,a.layout.onCreate);if(!1===J("onload_start"))return"cancel";var c=M[0],e=a("html"),g=Q.tagName=c.tagName,h=Q.id=c.id,l=Q.className=c.className,c=v,m=c.name,n={},p=M.data("parentLayout"),q=M.data("layoutEdge"),r=p&&q,A=a.layout.cssNum,t;Q.selector=M.selector.split(".slice")[0];Q.ref=(c.name?c.name+" layout / ":"")+g+(h?"#"+h:l?".["+l+"]":"");Q.isBody="BODY"===g;r||Q.isBody||(g=M.closest("."+a.layout.defaults.panes.paneClass),p=g.data("parentLayout"),
q=g.data("layoutEdge"),r=p&&q);M.data({layout:x,layoutContainer:va}).addClass(c.containerClass);g={destroy:"",initPanes:"",resizeAll:"resizeAll",resize:"resizeAll"};for(m in g)M.bind("layout"+m.toLowerCase()+"."+va,x[g[m]||m]);r&&(x.hasParentLayout=!0,p.refreshChildren(q,x));M.data("layoutCSS")||(Q.isBody?(M.data("layoutCSS",a.extend(F(M,"position,margin,padding,border"),{height:M.css("height"),overflow:M.css("overflow"),overflowX:M.css("overflowX"),overflowY:M.css("overflowY")})),e.data("layoutCSS",
a.extend(F(e,"padding"),{height:"auto",overflow:e.css("overflow"),overflowX:e.css("overflowX"),overflowY:e.css("overflowY")}))):M.data("layoutCSS",F(M,"position,margin,padding,border,top,bottom,left,right,width,height,overflow,overflowX,overflowY")));try{n={overflow:"hidden",overflowX:"hidden",overflowY:"hidden"};M.css(n);c.inset&&!a.isPlainObject(c.inset)&&(t=parseInt(c.inset,10)||0,c.inset={top:t,bottom:t,left:t,right:t});if(Q.isBody)c.outset?a.isPlainObject(c.outset)||(t=parseInt(c.outset,10)||
0,c.outset={top:t,bottom:t,left:t,right:t}):c.outset={top:A(e,"paddingTop"),bottom:A(e,"paddingBottom"),left:A(e,"paddingLeft"),right:A(e,"paddingRight")},e.css(n).css({height:"100%",border:"none",padding:0,margin:0}),y.isIE6?(M.css({width:"100%",height:"100%",border:"none",padding:0,margin:0,position:"relative"}),c.inset||(c.inset=I(M).inset)):(M.css({width:"auto",height:"auto",margin:0,position:"absolute"}),M.css(c.outset)),a.extend(Q,I(M,c.inset));else{var u=M.css("position");u&&u.match(/(fixed|absolute|relative)/)||
M.css("position","relative");M.is(":visible")&&(a.extend(Q,I(M,c.inset)),1>Q.innerHeight&&T(c.errors.noContainerHeight.replace(/CONTAINER/,Q.ref)))}A(M,"minWidth")&&M.parent().css("overflowX","auto");A(M,"minHeight")&&M.parent().css("overflowY","auto")}catch(B){}rb();a(window).bind("unload."+va,gb);f(x,a.layout.onLoad);b.initPanes&&Xa();delete d.creatingLayout;return z.initialized}()?null:x}})(jQuery);
(function(a){a.ui||(a.ui={});a.ui.cookie={acceptsCookies:!!navigator.cookieEnabled,read:function(c){for(var b=document.cookie,b=b?b.split(";"):[],d,e=0,f=b.length;e<f;e++)if(d=a.trim(b[e]).split("="),d[0]==c)return decodeURIComponent(d[1]);return null},write:function(c,b,d){var e="",f="",g=!1;d=d||{};var h=d.expires||null,l=a.type(h);"date"===l?f=h:"string"===l&&0<h&&(h=parseInt(h,10),l="number");"number"===l&&(f=new Date,0<h?f.setDate(f.getDate()+h):(f.setFullYear(1970),g=!0));f&&(e+=";expires="+
f.toUTCString());d.path&&(e+=";path="+d.path);d.domain&&(e+=";domain="+d.domain);d.secure&&(e+=";secure");document.cookie=c+"="+(g?"":encodeURIComponent(b))+e},clear:function(c){a.ui.cookie.write(c,"",{expires:-1})}};a.cookie||(a.cookie=function(c,b,d){var e=a.ui.cookie;if(null===b)e.clear(c);else{if(void 0===b)return e.read(c);e.write(c,b,d)}});a.layout.plugins.stateManagement=!0;a.layout.config.optionRootKeys.push("stateManagement");a.layout.defaults.stateManagement={enabled:!1,autoSave:!0,autoLoad:!0,
animateLoad:!0,includeChildren:!0,stateKeys:"north.size,south.size,east.size,west.size,north.isClosed,south.isClosed,east.isClosed,west.isClosed,north.isHidden,south.isHidden,east.isHidden,west.isHidden",cookie:{name:"",domain:"",path:"",expires:"",secure:!1}};a.layout.optionsMap.layout.push("stateManagement");a.layout.state={saveCookie:function(c,b,d){var e=c.options,f=e.stateManagement;d=a.extend(!0,{},f.cookie,d||null);c=c.state.stateData=c.readState(b||f.stateKeys);a.ui.cookie.write(d.name||e.name||
"Layout",a.layout.state.encodeJSON(c),d);return a.extend(!0,{},c)},deleteCookie:function(c){c=c.options;a.ui.cookie.clear(c.stateManagement.cookie.name||c.name||"Layout")},readCookie:function(c){c=c.options;return(c=a.ui.cookie.read(c.stateManagement.cookie.name||c.name||"Layout"))?a.layout.state.decodeJSON(c):{}},loadCookie:function(c){var b=a.layout.state.readCookie(c);b&&(c.state.stateData=a.extend(!0,{},b),c.loadState(b));return b},loadState:function(c,b,d){if(a.isPlainObject(b)&&!a.isEmptyObject(b))if(b=
c.state.stateData=a.layout.transformData(b),d=a.extend({animateLoad:!1,includeChildren:c.options.stateManagement.includeChildren},d),c.state.initialized){var e=!d.animateLoad,f,g,h,l;a.each(a.layout.config.borderPanes,function(d,m){q=b[m];a.isPlainObject(q)&&(s=q.size,f=q.initClosed,g=q.initHidden,ar=q.autoResize,h=c.state[m],l=h.isVisible,ar&&(h.autoResize=ar),l||c._sizePane(m,s,!1,!1,!1),!0===g?c.hide(m,e):!0===f?c.close(m,!1,e):!1===f?c.open(m,!1,e):!1===g&&c.show(m,!1,e),l&&c._sizePane(m,s,!1,
!1,e))});if(d.includeChildren){var m,p;a.each(c.children,function(d,c){(m=b[d]?b[d].children:0)&&c&&a.each(c,function(a,b){p=m[a];b&&p&&b.loadState(p)})})}}else{var q=a.extend(!0,{},b);a.each(a.layout.config.allPanes,function(a,b){q[b]&&delete q[b].children});a.extend(!0,c.options,q)}},readState:function(c,b){"string"===a.type(b)&&(b={keys:b});b||(b={});var d=c.options.stateManagement,e=b.includeChildren,e=void 0!==e?e:d.includeChildren,d=b.stateKeys||d.stateKeys,f={isClosed:"initClosed",isHidden:"initHidden"},
g=c.state,h=a.layout.config.allPanes,l={},m,p,q,t,y,u;a.isArray(d)&&(d=d.join(","));for(var d=d.replace(/__/g,".").split(","),C=0,B=d.length;C<B;C++)m=d[C].split("."),p=m[0],m=m[1],0>a.inArray(p,h)||(q=g[p][m],void 0!=q&&("isClosed"==m&&g[p].isSliding&&(q=!0),(l[p]||(l[p]={}))[f[m]?f[m]:m]=q));e&&a.each(h,function(b,d){y=c.children[d];t=g.stateData[d];a.isPlainObject(y)&&!a.isEmptyObject(y)&&(u=l[d]||(l[d]={}),u.children||(u.children={}),a.each(y,function(b,d){d.state.initialized?u.children[b]=a.layout.state.readState(d):
t&&t.children&&t.children[b]&&(u.children[b]=a.extend(!0,{},t.children[b]))}))});return l},encodeJSON:function(c){function b(d){var c=[],f=0,g,h,l,m=a.isArray(d);for(g in d)h=d[g],l=typeof h,"string"==l?h='"'+h+'"':"object"==l&&(h=b(h)),c[f++]=(m?"":'"'+g+'":')+h;return(m?"[":"{")+c.join(",")+(m?"]":"}")}return b(c)},decodeJSON:function(c){try{return a.parseJSON?a.parseJSON(c):window.eval("("+c+")")||{}}catch(b){return{}}},_create:function(c){var b=a.layout.state,d=c.options.stateManagement;a.extend(c,
{readCookie:function(){return b.readCookie(c)},deleteCookie:function(){b.deleteCookie(c)},saveCookie:function(a,d){return b.saveCookie(c,a,d)},loadCookie:function(){return b.loadCookie(c)},loadState:function(a,d){b.loadState(c,a,d)},readState:function(a){return b.readState(c,a)},encodeJSON:b.encodeJSON,decodeJSON:b.decodeJSON});c.state.stateData={};if(d.autoLoad)if(a.isPlainObject(d.autoLoad))a.isEmptyObject(d.autoLoad)||c.loadState(d.autoLoad);else if(d.enabled)if(a.isFunction(d.autoLoad)){var e=
{};try{e=d.autoLoad(c,c.state,c.options,c.options.name||"")}catch(f){}e&&a.isPlainObject(e)&&!a.isEmptyObject(e)&&c.loadState(e)}else c.loadCookie()},_unload:function(c){var b=c.options.stateManagement;if(b.enabled&&b.autoSave)if(a.isFunction(b.autoSave))try{b.autoSave(c,c.state,c.options,c.options.name||"")}catch(d){}else c.saveCookie()}};a.layout.onCreate.push(a.layout.state._create);a.layout.onUnload.push(a.layout.state._unload);a.layout.plugins.buttons=!0;a.layout.defaults.autoBindCustomButtons=
!1;a.layout.optionsMap.layout.push("autoBindCustomButtons");a.layout.buttons={init:function(c){var b=c.options.name||"",d;a.each("toggle open close pin toggle-slide open-slide".split(" "),function(e,f){a.each(a.layout.config.borderPanes,function(e,h){a(".ui-layout-button-"+f+"-"+h).each(function(){d=a(this).data("layoutName")||a(this).attr("layoutName");void 0!=d&&d!==b||c.bindButton(this,f,h)})})})},get:function(c,b,d,e){var f=a(b);c=c.options;var g=c.errors.addButtonError;f.length?0>a.inArray(d,
a.layout.config.borderPanes)?(a.layout.msg(g+" "+c.errors.pane+": "+d,!0),f=a("")):(b=c[d].buttonClass+"-"+e,f.addClass(b+" "+b+"-"+d).data("layoutName",c.name)):a.layout.msg(g+" "+c.errors.selector+": "+b,!0);return f},bind:function(c,b,d,e){var f=a.layout.buttons;switch(d.toLowerCase()){case "toggle":f.addToggle(c,b,e);break;case "open":f.addOpen(c,b,e);break;case "close":f.addClose(c,b,e);break;case "pin":f.addPin(c,b,e);break;case "toggle-slide":f.addToggle(c,b,e,!0);break;case "open-slide":f.addOpen(c,
b,e,!0)}return c},addToggle:function(c,b,d,e){a.layout.buttons.get(c,b,d,"toggle").click(function(a){c.toggle(d,!!e);a.stopPropagation()});return c},addOpen:function(c,b,d,e){a.layout.buttons.get(c,b,d,"open").attr("title",c.options[d].tips.Open).click(function(a){c.open(d,!!e);a.stopPropagation()});return c},addClose:function(c,b,d){a.layout.buttons.get(c,b,d,"close").attr("title",c.options[d].tips.Close).click(function(a){c.close(d);a.stopPropagation()});return c},addPin:function(c,b,d){var e=a.layout.buttons,
f=e.get(c,b,d,"pin");if(f.length){var g=c.state[d];f.click(function(b){e.setPinState(c,a(this),d,g.isSliding||g.isClosed);g.isSliding||g.isClosed?c.open(d):c.close(d);b.stopPropagation()});e.setPinState(c,f,d,!g.isClosed&&!g.isSliding);g.pins.push(b)}return c},setPinState:function(a,b,d,e){var f=b.attr("pin");if(!f||e!==("down"==f)){a=a.options[d];var f=a.buttonClass+"-pin",g=f+"-"+d;d=f+"-up "+g+"-up";f=f+"-down "+g+"-down";b.attr("pin",e?"down":"up").attr("title",e?a.tips.Unpin:a.tips.Pin).removeClass(e?
d:f).addClass(e?f:d)}},syncPinBtns:function(c,b,d){a.each(c.state[b].pins,function(e,f){a.layout.buttons.setPinState(c,a(f),b,d)})},_load:function(c){var b=a.layout.buttons;a.extend(c,{bindButton:function(a,d,g){return b.bind(c,a,d,g)},addToggleBtn:function(a,d,g){return b.addToggle(c,a,d,g)},addOpenBtn:function(a,d,g){return b.addOpen(c,a,d,g)},addCloseBtn:function(a,d){return b.addClose(c,a,d)},addPinBtn:function(a,d){return b.addPin(c,a,d)}});for(var d=0;4>d;d++)c.state[a.layout.config.borderPanes[d]].pins=
[];c.options.autoBindCustomButtons&&b.init(c)},_unload:function(a){}};a.layout.onLoad.push(a.layout.buttons._load);a.layout.plugins.browserZoom=!0;a.layout.defaults.browserZoomCheckInterval=1E3;a.layout.optionsMap.layout.push("browserZoomCheckInterval");a.layout.browserZoom={_init:function(c){!1!==a.layout.browserZoom.ratio()&&a.layout.browserZoom._setTimer(c)},_setTimer:function(c){if(!c.destroyed){var b=c.options,d=c.state,e=c.hasParentLayout?5E3:Math.max(b.browserZoomCheckInterval,100);setTimeout(function(){if(!c.destroyed&&
b.resizeWithWindow){var e=a.layout.browserZoom.ratio();e!==d.browserZoom&&(d.browserZoom=e,c.resizeAll());a.layout.browserZoom._setTimer(c)}},e)}},ratio:function(){function c(a,b){return(parseInt(a,10)/parseInt(b,10)*100).toFixed()}var b=window,d=screen,e=document,f=e.documentElement||e.body,g=a.layout.browser,h=g.version,l,m,p;return g.msie&&8<h||!g.msie?!1:d.deviceXDPI&&d.systemXDPI?c(d.deviceXDPI,d.systemXDPI):g.webkit&&(l=e.body.getBoundingClientRect)?c(l.left-l.right,e.body.offsetWidth):g.webkit&&
(m=b.outerWidth)?c(m,b.innerWidth):(m=d.width)&&(p=f.clientWidth)?c(m,p):!1}};a.layout.onReady.push(a.layout.browserZoom._init)})(jQuery);
(function(a){function c(b,d){var c=document.createElementNS("http://www.w3.org/2000/svg",b||"svg");d&&a.each(d,function(a,b){c.setAttributeNS(null,a,b)});return a(c)}a.fn.activity=function(c){this.each(function(){var e=a(this),f=e.data("activity");f&&(clearInterval(f.data("interval")),f.remove(),e.removeData("activity"));if(!1!==c){c=a.extend({color:e.css("color")},a.fn.activity.defaults,c);var f=b(e,c).css("position","absolute").prependTo(c.outside?"body":e),g=e.outerHeight()-f.height(),q=e.outerWidth()-
f.width(),g="top"==c.valign?c.padding:"bottom"==c.valign?g-c.padding:Math.floor(g/2),q="left"==c.align?c.padding:"right"==c.align?q-c.padding:Math.floor(q/2),t=e.offset();c.outside?f.css({top:t.top+"px",left:t.left+"px"}):(g-=f.offset().top-t.top,q-=f.offset().left-t.left);f.css({marginTop:g+"px",marginLeft:q+"px"});d(f,c.segments,Math.round(10/c.speed)/10);e.data("activity",f)}});return this};a.fn.activity.defaults={segments:12,space:3,length:7,width:4,speed:1.2,align:"center",valign:"center",padding:4};
a.fn.activity.getOpacity=function(a,b){var d=a.steps||a.segments-1,c=void 0!==a.opacity?a.opacity:1/d;return 1-Math.min(b,d)*(1-c)/d};var b=function(){return a("<div>").addClass("busy")},d=function(){};if(document.createElementNS&&document.createElementNS("http://www.w3.org/2000/svg","svg").createSVGRect)if(b=function(b,d){for(var e=2*d.width+d.space,f=e+d.length+Math.ceil(d.width/2)+1,g=c().width(2*f).height(2*f),t=c("g",{"stroke-width":d.width,"stroke-linecap":"round",stroke:d.color}).appendTo(c("g",
{transform:"translate("+f+","+f+")"}).appendTo(g)),y=0;y<d.segments;y++)t.append(c("line",{x1:0,y1:e,x2:0,y2:e+d.length,transform:"rotate("+360/d.segments*y+", 0, 0)",opacity:a.fn.activity.getOpacity(d,y)}));return a("<div>").append(g).width(2*f).height(2*f)},void 0!==document.createElement("div").style.WebkitAnimationName)var e={},d=function(a,b,d){if(!e[b]){for(var c="spin"+b,f="@-webkit-keyframes "+c+" {",g=0;g<b;g++)var y=Math.round(1E5/b*g)/1E3,u=Math.round(1E5/b*(g+1)-1)/1E3,C="% { -webkit-transform:rotate("+
Math.round(360/b*g)+"deg); }\n",f=f+(y+C+u+C);document.styleSheets[0].insertRule(f+"100% { -webkit-transform:rotate(100deg); }\n}");e[b]=c}a.css("-webkit-animation",e[b]+" "+d+"s linear infinite")};else d=function(a,b,d){var c=0,e=a.find("g g").get(0);a.data("interval",setInterval(function(){e.setAttributeNS(null,"transform","rotate("+ ++c%b*(360/b)+")")},1E3*d/b))};else{var f=a("<shape>").css("behavior","url(#default#VML)").appendTo("body");if(f.get(0).adj){var g=document.createStyleSheet();a.each(["group",
"shape","stroke"],function(){g.addRule(this,"behavior:url(#default#VML);")});b=function(b,d){for(var c=2*d.width+d.space,e=2*(c+d.length+Math.ceil(d.width/2)+1),f=-Math.ceil(e/2),f=a("<group>",{coordsize:e+" "+e,coordorigin:f+" "+f}).css({top:f,left:f,width:e,height:e}),g=0;g<d.segments;g++)f.append(a("<shape>",{path:"m "+c+",0  l "+(c+d.length)+",0"}).css({width:e,height:e,rotation:360/d.segments*g+"deg"}).append(a("<stroke>",{color:d.color,weight:d.width+"px",endcap:"round",opacity:a.fn.activity.getOpacity(d,
g)})));return a("<group>",{coordsize:e+" "+e}).css({width:e,height:e,overflow:"hidden"}).append(f)};d=function(a,b,d){var c=0,e=a.get(0);a.data("interval",setInterval(function(){e.style.rotation=++c%b*(360/b)},1E3*d/b))}}a(f).remove()}})(jQuery);
(function(a,c,b){(function(a){"function"===typeof define&&define.amd?define(["jquery"],a):jQuery&&!jQuery.fn.dataTable&&a(jQuery)})(function(d){var e=function(f){function g(a,f){var g=e.defaults.columns,l=a.aoColumns.length,g=d.extend({},e.models.oColumn,g,{sSortingClass:a.oClasses.sSortable,sSortingClassJUI:a.oClasses.sSortJUI,nTh:f?f:c.createElement("th"),sTitle:g.sTitle?g.sTitle:f?f.innerHTML:"",aDataSort:g.aDataSort?g.aDataSort:[l],mData:g.mData?g.oDefaults:l});a.aoColumns.push(g);a.aoPreSearchCols[l]===
b||null===a.aoPreSearchCols[l]?a.aoPreSearchCols[l]=d.extend({},e.models.oSearch):(g=a.aoPreSearchCols[l],g.bRegex===b&&(g.bRegex=!0),g.bSmart===b&&(g.bSmart=!0),g.bCaseInsensitive===b&&(g.bCaseInsensitive=!0));h(a,l,null)}function h(a,c,e){var f=a.aoColumns[c];e!==b&&null!==e&&(e.mDataProp&&!e.mData&&(e.mData=e.mDataProp),e.sType!==b&&(f.sType=e.sType,f._bAutoType=!1),d.extend(f,e),S(f,e,"sWidth","sWidthOrig"),e.iDataSort!==b&&(f.aDataSort=[e.iDataSort]),S(f,e,"aDataSort"));var g=f.mRender?O(f.mRender):
null,h=O(f.mData);f.fnGetData=function(a,b){var d=h(a,b);return f.mRender&&b&&""!==b?g(d,b,a):d};f.fnSetData=T(f.mData);a.oFeatures.bSort||(f.bSortable=!1);!f.bSortable||-1==d.inArray("asc",f.asSorting)&&-1==d.inArray("desc",f.asSorting)?(f.sSortingClass=a.oClasses.sSortableNone,f.sSortingClassJUI=""):-1==d.inArray("asc",f.asSorting)&&-1==d.inArray("desc",f.asSorting)?(f.sSortingClass=a.oClasses.sSortable,f.sSortingClassJUI=a.oClasses.sSortJUI):-1!=d.inArray("asc",f.asSorting)&&-1==d.inArray("desc",
f.asSorting)?(f.sSortingClass=a.oClasses.sSortableAsc,f.sSortingClassJUI=a.oClasses.sSortJUIAscAllowed):-1==d.inArray("asc",f.asSorting)&&-1!=d.inArray("desc",f.asSorting)&&(f.sSortingClass=a.oClasses.sSortableDesc,f.sSortingClassJUI=a.oClasses.sSortJUIDescAllowed)}function l(a){if(!1===a.oFeatures.bAutoWidth)return!1;ta(a);for(var b=0,d=a.aoColumns.length;b<d;b++)a.aoColumns[b].nTh.style.width=a.aoColumns[b].sWidth}function m(a,b){var d=t(a,"bVisible");return"number"===typeof d[b]?d[b]:null}function p(a,
b){var c=t(a,"bVisible"),c=d.inArray(b,c);return-1!==c?c:null}function q(a){return t(a,"bVisible").length}function t(a,b){var c=[];d.map(a.aoColumns,function(a,d){a[b]&&c.push(d)});return c}function y(a){for(var b=e.ext.aTypes,d=b.length,c=0;c<d;c++){var f=b[c](a);if(null!==f)return f}return"string"}function u(a,b){for(var d=b.split(","),c=[],e=0,f=a.aoColumns.length;e<f;e++)for(var g=0;g<f;g++)if(a.aoColumns[e].sName==d[g]){c.push(g);break}return c}function C(a){for(var b="",d=0,c=a.aoColumns.length;d<
c;d++)b+=a.aoColumns[d].sName+",";return b.length==c?"":b.slice(0,-1)}function B(a,b,c,e){var f,h,l,m,n;if(b)for(f=b.length-1;0<=f;f--){var p=b[f].aTargets;d.isArray(p)||oa(a,1,"aTargets must be an array of targets, not a "+typeof p);h=0;for(l=p.length;h<l;h++)if("number"===typeof p[h]&&0<=p[h]){for(;a.aoColumns.length<=p[h];)g(a);e(p[h],b[f])}else if("number"===typeof p[h]&&0>p[h])e(a.aoColumns.length+p[h],b[f]);else if("string"===typeof p[h])for(m=0,n=a.aoColumns.length;m<n;m++)("_all"==p[h]||d(a.aoColumns[m].nTh).hasClass(p[h]))&&
e(m,b[f])}if(c)for(f=0,a=c.length;f<a;f++)e(f,c[f])}function I(a,b){var c;c=d.isArray(b)?b.slice():d.extend(!0,{},b);var f=a.aoData.length,g=d.extend(!0,{},e.models.oRow);g._aData=c;a.aoData.push(g);for(var h,g=0,l=a.aoColumns.length;g<l;g++)c=a.aoColumns[g],"function"===typeof c.fnRender&&c.bUseRendered&&null!==c.mData?H(a,f,g,sa(a,f,g)):H(a,f,g,z(a,f,g)),c._bAutoType&&"string"!=c.sType&&(h=z(a,f,g,"type"),null!==h&&""!==h&&(h=y(h),null===c.sType?c.sType=h:c.sType!=h&&"html"!=c.sType&&(c.sType="string")));
a.aiDisplayMaster.push(f);a.oFeatures.bDeferRender||ia(a,f);return f}function F(a){var b,c,f,g,h,l,m;if(a.bDeferLoading||null===a.sAjaxSource)for(b=a.nTBody.firstChild;b;){if("TR"==b.nodeName.toUpperCase())for(c=a.aoData.length,b._DT_RowIndex=c,a.aoData.push(d.extend(!0,{},e.models.oRow,{nTr:b})),a.aiDisplayMaster.push(c),h=b.firstChild,f=0;h;){l=h.nodeName.toUpperCase();if("TD"==l||"TH"==l)H(a,c,f,d.trim(h.innerHTML)),f++;h=h.nextSibling}b=b.nextSibling}g=Qa(a);f=[];b=0;for(c=g.length;b<c;b++)for(h=
g[b].firstChild;h;)l=h.nodeName.toUpperCase(),"TD"!=l&&"TH"!=l||f.push(h),h=h.nextSibling;c=0;for(g=a.aoColumns.length;c<g;c++){m=a.aoColumns[c];null===m.sTitle&&(m.sTitle=m.nTh.innerHTML);var n=m._bAutoType,p="function"===typeof m.fnRender,r=null!==m.sClass,q=m.bVisible,v,A;if(n||p||r||!q)for(l=0,b=a.aoData.length;l<b;l++)h=a.aoData[l],v=f[l*g+c],n&&"string"!=m.sType&&(A=z(a,l,c,"type"),""!==A&&(A=y(A),null===m.sType?m.sType=A:m.sType!=A&&"html"!=m.sType&&(m.sType="string"))),m.mRender?v.innerHTML=
z(a,l,c,"display"):m.mData!==c&&(v.innerHTML=z(a,l,c,"display")),p&&(A=sa(a,l,c),v.innerHTML=A,m.bUseRendered&&H(a,l,c,A)),r&&(v.className+=" "+m.sClass),q?h._anHidden[c]=null:(h._anHidden[c]=v,v.parentNode.removeChild(v)),m.fnCreatedCell&&m.fnCreatedCell.call(a.oInstance,v,z(a,l,c,"display"),h._aData,l,c)}if(0!==a.aoRowCreatedCallback.length)for(b=0,c=a.aoData.length;b<c;b++)h=a.aoData[b],K(a,"aoRowCreatedCallback",null,[h.nTr,h._aData,b])}function A(a,d){return d._DT_RowIndex!==b?d._DT_RowIndex:
null}function r(a,b,d){b=kb(a,b);var c=0;for(a=a.aoColumns.length;c<a;c++)if(b[c]===d)return c;return-1}function v(a,b,d,c){for(var e=[],f=0,g=c.length;f<g;f++)e.push(z(a,b,c[f],d));return e}function z(a,d,c,e){var f=a.aoColumns[c];if((c=f.fnGetData(a.aoData[d]._aData,e))===b)return a.iDrawError!=a.iDraw&&null===f.sDefaultContent&&(oa(a,0,"Requested unknown parameter "+("function"==typeof f.mData?"{mData function}":"'"+f.mData+"'")+" from the data source for row "+d),a.iDrawError=a.iDraw),f.sDefaultContent;
if(null===c&&null!==f.sDefaultContent)c=f.sDefaultContent;else if("function"===typeof c)return c();return"display"==e&&null===c?"":c}function H(a,b,d,c){a.aoColumns[d].fnSetData(a.aoData[b]._aData,c)}function O(a){if(null===a)return function(a,b){return null};if("function"===typeof a)return function(b,d,c){return a(b,d,c)};if("string"!==typeof a||-1===a.indexOf(".")&&-1===a.indexOf("["))return function(b,d){return b[a]};var d=function(a,c,e){var f=e.split("."),g;if(""!==e){var h=0;for(g=f.length;h<
g;h++){if(e=f[h].match(Aa)){f[h]=f[h].replace(Aa,"");""!==f[h]&&(a=a[f[h]]);g=[];f.splice(0,h+1);for(var f=f.join("."),h=0,x=a.length;h<x;h++)g.push(d(a[h],c,f));a=e[0].substring(1,e[0].length-1);a=""===a?g:g.join(a);break}if(null===a||a[f[h]]===b)return b;a=a[f[h]]}}return a};return function(b,c){return d(b,c,a)}}function T(a){if(null===a)return function(a,b){};if("function"===typeof a)return function(b,d){a(b,"set",d)};if("string"!==typeof a||-1===a.indexOf(".")&&-1===a.indexOf("["))return function(b,
d){b[a]=d};var d=function(a,c,e){e=e.split(".");var f,g,h=0;for(g=e.length-1;h<g;h++){if(f=e[h].match(Aa)){e[h]=e[h].replace(Aa,"");a[e[h]]=[];f=e.slice();f.splice(0,h+1);g=f.join(".");for(var x=0,l=c.length;x<l;x++)f={},d(f,c[x],g),a[e[h]].push(f);return}if(null===a[e[h]]||a[e[h]]===b)a[e[h]]={};a=a[e[h]]}a[e[e.length-1].replace(Aa,"")]=c};return function(b,c){return d(b,c,a)}}function J(a){for(var b=[],d=a.aoData.length,c=0;c<d;c++)b.push(a.aoData[c]._aData);return b}function Z(a){a.aoData.splice(0,
a.aoData.length);a.aiDisplayMaster.splice(0,a.aiDisplayMaster.length);a.aiDisplay.splice(0,a.aiDisplay.length);ua(a)}function na(a,b){for(var d=-1,c=0,e=a.length;c<e;c++)a[c]==b?d=c:a[c]>b&&a[c]--; -1!=d&&a.splice(d,1)}function sa(a,b,d){var c=a.aoColumns[d];return c.fnRender({iDataRow:b,iDataColumn:d,oSettings:a,aData:a.aoData[b]._aData,mDataProp:c.mData},z(a,b,d,"display"))}function ia(a,b){var d=a.aoData[b],e;if(null===d.nTr){d.nTr=c.createElement("tr");d.nTr._DT_RowIndex=b;d._aData.DT_RowId&&
(d.nTr.id=d._aData.DT_RowId);d._aData.DT_RowClass&&(d.nTr.className=d._aData.DT_RowClass);for(var f=0,g=a.aoColumns.length;f<g;f++){var h=a.aoColumns[f];e=c.createElement(h.sCellType);e.innerHTML="function"!==typeof h.fnRender||h.bUseRendered&&null!==h.mData?z(a,b,f,"display"):sa(a,b,f);null!==h.sClass&&(e.className=h.sClass);h.bVisible?(d.nTr.appendChild(e),d._anHidden[f]=null):d._anHidden[f]=e;h.fnCreatedCell&&h.fnCreatedCell.call(a.oInstance,e,z(a,b,f,"display"),d._aData,b,f)}K(a,"aoRowCreatedCallback",
null,[d.nTr,d._aData,b])}}function aa(a){var b,e,f;if(0!==d("th, td",a.nTHead).length)for(b=0,f=a.aoColumns.length;b<f;b++)e=a.aoColumns[b].nTh,e.setAttribute("role","columnheader"),a.aoColumns[b].bSortable&&(e.setAttribute("tabindex",a.iTabIndex),e.setAttribute("aria-controls",a.sTableId)),null!==a.aoColumns[b].sClass&&d(e).addClass(a.aoColumns[b].sClass),a.aoColumns[b].sTitle!=e.innerHTML&&(e.innerHTML=a.aoColumns[b].sTitle);else{var g=c.createElement("tr");b=0;for(f=a.aoColumns.length;b<f;b++)e=
a.aoColumns[b].nTh,e.innerHTML=a.aoColumns[b].sTitle,e.setAttribute("tabindex","0"),null!==a.aoColumns[b].sClass&&d(e).addClass(a.aoColumns[b].sClass),g.appendChild(e);d(a.nTHead).html("")[0].appendChild(g);la(a.aoHeader,a.nTHead)}d(a.nTHead).children("tr").attr("role","row");if(a.bJUI)for(b=0,f=a.aoColumns.length;b<f;b++){e=a.aoColumns[b].nTh;g=c.createElement("div");g.className=a.oClasses.sSortJUIWrapper;d(e).contents().appendTo(g);var h=c.createElement("span");h.className=a.oClasses.sSortIcon;
g.appendChild(h);e.appendChild(g)}if(a.oFeatures.bSort)for(b=0;b<a.aoColumns.length;b++)!1!==a.aoColumns[b].bSortable?$a(a,a.aoColumns[b].nTh,b):d(a.aoColumns[b].nTh).addClass(a.oClasses.sSortableNone);""!==a.oClasses.sFooterTH&&d(a.nTFoot).children("tr").children("th").addClass(a.oClasses.sFooterTH);if(null!==a.nTFoot)for(e=L(a,null,a.aoFooter),b=0,f=a.aoColumns.length;b<f;b++)e[b]&&(a.aoColumns[b].nTf=e[b],a.aoColumns[b].sClass&&d(e[b]).addClass(a.aoColumns[b].sClass))}function ja(a,d,c){var e,
f,g,h=[],l=[],m=a.aoColumns.length,n;c===b&&(c=!1);e=0;for(f=d.length;e<f;e++){h[e]=d[e].slice();h[e].nTr=d[e].nTr;for(g=m-1;0<=g;g--)a.aoColumns[g].bVisible||c||h[e].splice(g,1);l.push([])}e=0;for(f=h.length;e<f;e++){if(a=h[e].nTr)for(;g=a.firstChild;)a.removeChild(g);g=0;for(d=h[e].length;g<d;g++)if(n=m=1,l[e][g]===b){a.appendChild(h[e][g].cell);for(l[e][g]=1;h[e+m]!==b&&h[e][g].cell==h[e+m][g].cell;)l[e+m][g]=1,m++;for(;h[e][g+n]!==b&&h[e][g].cell==h[e][g+n].cell;){for(c=0;c<m;c++)l[e+c][g+n]=
1;n++}h[e][g].cell.rowSpan=m;h[e][g].cell.colSpan=n}}}function ca(a){var e=K(a,"aoPreDrawCallback","preDraw",[a]);if(-1!==d.inArray(!1,e))Ja(a,!1);else{var f,g,e=[],h=0,l=a.asStripeClasses.length;f=a.aoOpenRows.length;a.bDrawing=!0;a.iInitDisplayStart!==b&&-1!=a.iInitDisplayStart&&(a._iDisplayStart=a.oFeatures.bServerSide?a.iInitDisplayStart:a.iInitDisplayStart>=a.fnRecordsDisplay()?0:a.iInitDisplayStart,a.iInitDisplayStart=-1,ua(a));if(a.bDeferLoading)a.bDeferLoading=!1,a.iDraw++;else if(!a.oFeatures.bServerSide)a.iDraw++;
else if(!a.bDestroying&&!R(a))return;if(0!==a.aiDisplay.length){var m=a._iDisplayStart;g=a._iDisplayEnd;a.oFeatures.bServerSide&&(m=0,g=a.aoData.length);for(;m<g;m++){var n=a.aoData[a.aiDisplay[m]];null===n.nTr&&ia(a,a.aiDisplay[m]);var p=n.nTr;if(0!==l){var r=a.asStripeClasses[h%l];n._sRowStripe!=r&&(d(p).removeClass(n._sRowStripe).addClass(r),n._sRowStripe=r)}K(a,"aoRowCallback",null,[p,a.aoData[a.aiDisplay[m]]._aData,h,m]);e.push(p);h++;if(0!==f)for(n=0;n<f;n++)if(p==a.aoOpenRows[n].nParent){e.push(a.aoOpenRows[n].nTr);
break}}}else e[0]=c.createElement("tr"),a.asStripeClasses[0]&&(e[0].className=a.asStripeClasses[0]),f=a.oLanguage,l=f.sZeroRecords,1!=a.iDraw||null===a.sAjaxSource||a.oFeatures.bServerSide?f.sEmptyTable&&0===a.fnRecordsTotal()&&(l=f.sEmptyTable):l=f.sLoadingRecords,f=c.createElement("td"),f.setAttribute("valign","top"),f.colSpan=q(a),f.className=a.oClasses.sRowEmpty,f.innerHTML=tb(a,l),e[h].appendChild(f);K(a,"aoHeaderCallback","header",[d(a.nTHead).children("tr")[0],J(a),a._iDisplayStart,a.fnDisplayEnd(),
a.aiDisplay]);K(a,"aoFooterCallback","footer",[d(a.nTFoot).children("tr")[0],J(a),a._iDisplayStart,a.fnDisplayEnd(),a.aiDisplay]);h=c.createDocumentFragment();f=c.createDocumentFragment();if(a.nTBody){l=a.nTBody.parentNode;f.appendChild(a.nTBody);if(!a.oScroll.bInfinite||!a._bInitComplete||a.bSorted||a.bFiltered)for(;f=a.nTBody.firstChild;)a.nTBody.removeChild(f);f=0;for(g=e.length;f<g;f++)h.appendChild(e[f]);a.nTBody.appendChild(h);null!==l&&l.appendChild(a.nTBody)}K(a,"aoDrawCallback","draw",[a]);
a.bSorted=!1;a.bFiltered=!1;a.bDrawing=!1;a.oFeatures.bServerSide&&(Ja(a,!1),a._bInitComplete||ub(a))}}function fa(a){a.oFeatures.bSort?Pa(a,a.oPreviousSearch):a.oFeatures.bFilter?za(a,a.oPreviousSearch):(ua(a),ca(a))}function ba(a){var b=d("<div></div>")[0];a.nTable.parentNode.insertBefore(b,a.nTable);a.nTableWrapper=d('<div id="'+a.sTableId+'_wrapper" class="'+a.oClasses.sWrapper+'" role="grid"></div>')[0];a.nTableReinsertBefore=a.nTable.nextSibling;for(var c=a.nTableWrapper,f=a.sDom.split(""),
g,h,l,m,n,p,r,q=0;q<f.length;q++){h=0;l=f[q];if("<"==l){m=d("<div></div>")[0];n=f[q+1];if("'"==n||'"'==n){p="";for(r=2;f[q+r]!=n;)p+=f[q+r],r++;"H"==p?p=a.oClasses.sJUIHeader:"F"==p&&(p=a.oClasses.sJUIFooter);-1!=p.indexOf(".")?(n=p.split("."),m.id=n[0].substr(1,n[0].length-1),m.className=n[1]):"#"==p.charAt(0)?m.id=p.substr(1,p.length-1):m.className=p;q+=r}c.appendChild(m);c=m}else if(">"==l)c=c.parentNode;else if("l"==l&&a.oFeatures.bPaginate&&a.oFeatures.bLengthChange)g=hb(a),h=1;else if("f"==
l&&a.oFeatures.bFilter)g=Ia(a),h=1;else if("r"==l&&a.oFeatures.bProcessing)g=vb(a),h=1;else if("t"==l)g=pb(a),h=1;else if("i"==l&&a.oFeatures.bInfo)g=zb(a),h=1;else if("p"==l&&a.oFeatures.bPaginate)g=Bb(a),h=1;else if(0!==e.ext.aoFeatures.length)for(m=e.ext.aoFeatures,r=0,n=m.length;r<n;r++)if(l==m[r].cFeature){(g=m[r].fnInit(a))&&(h=1);break}1==h&&null!==g&&("object"!==typeof a.aanFeatures[l]&&(a.aanFeatures[l]=[]),a.aanFeatures[l].push(g),c.appendChild(g))}b.parentNode.replaceChild(a.nTableWrapper,
b)}function la(a,b){var c=d(b).children("tr"),e,f,g,h,l,m,n,p,r,q;a.splice(0,a.length);g=0;for(m=c.length;g<m;g++)a.push([]);g=0;for(m=c.length;g<m;g++)for(e=c[g],f=e.firstChild;f;){if("TD"==f.nodeName.toUpperCase()||"TH"==f.nodeName.toUpperCase()){p=1*f.getAttribute("colspan");r=1*f.getAttribute("rowspan");p=p&&0!==p&&1!==p?p:1;r=r&&0!==r&&1!==r?r:1;h=0;for(l=a[g];l[h];)h++;n=h;q=1===p?!0:!1;for(l=0;l<p;l++)for(h=0;h<r;h++)a[g+h][n+l]={cell:f,unique:q},a[g+h].nTr=e}f=f.nextSibling}}function L(a,
b,d){var c=[];d||(d=a.aoHeader,b&&(d=[],la(d,b)));b=0;for(var e=d.length;b<e;b++)for(var f=0,g=d[b].length;f<g;f++)!d[b][f].unique||c[f]&&a.bSortCellsTop||(c[f]=d[b][f].cell);return c}function R(a){if(a.bAjaxDataGet){a.iDraw++;Ja(a,!0);var b=Xa(a);Ya(a,b);a.fnServerData.call(a.oInstance,a.sAjaxSource,b,function(b){Oa(a,b)},a);return!1}return!0}function Xa(a){var b=a.aoColumns.length,d=[],c,e,f,g;d.push({name:"sEcho",value:a.iDraw});d.push({name:"iColumns",value:b});d.push({name:"sColumns",value:C(a)});
d.push({name:"iDisplayStart",value:a._iDisplayStart});d.push({name:"iDisplayLength",value:!1!==a.oFeatures.bPaginate?a._iDisplayLength:-1});for(f=0;f<b;f++)c=a.aoColumns[f].mData,d.push({name:"mDataProp_"+f,value:"function"===typeof c?"function":c});if(!1!==a.oFeatures.bFilter)for(d.push({name:"sSearch",value:a.oPreviousSearch.sSearch}),d.push({name:"bRegex",value:a.oPreviousSearch.bRegex}),f=0;f<b;f++)d.push({name:"sSearch_"+f,value:a.aoPreSearchCols[f].sSearch}),d.push({name:"bRegex_"+f,value:a.aoPreSearchCols[f].bRegex}),
d.push({name:"bSearchable_"+f,value:a.aoColumns[f].bSearchable});if(!1!==a.oFeatures.bSort){var h=0;c=null!==a.aaSortingFixed?a.aaSortingFixed.concat(a.aaSorting):a.aaSorting.slice();for(f=0;f<c.length;f++)for(e=a.aoColumns[c[f][0]].aDataSort,g=0;g<e.length;g++)d.push({name:"iSortCol_"+h,value:e[g]}),d.push({name:"sSortDir_"+h,value:c[f][1]}),h++;d.push({name:"iSortingCols",value:h});for(f=0;f<b;f++)d.push({name:"bSortable_"+f,value:a.aoColumns[f].bSortable})}return d}function Ya(a,b){K(a,"aoServerParams",
"serverParams",[b])}function Oa(a,d){if(d.sEcho!==b){if(1*d.sEcho<a.iDraw)return;a.iDraw=1*d.sEcho}(!a.oScroll.bInfinite||a.oScroll.bInfinite&&(a.bSorted||a.bFiltered))&&Z(a);a._iRecordsTotal=parseInt(d.iTotalRecords,10);a._iRecordsDisplay=parseInt(d.iTotalDisplayRecords,10);var c=C(a),c=d.sColumns!==b&&""!==c&&d.sColumns!=c,e;c&&(e=u(a,d.sColumns));for(var f=O(a.sAjaxDataProp)(d),g=0,h=f.length;g<h;g++)if(c){for(var l=[],m=0,n=a.aoColumns.length;m<n;m++)l.push(f[g][e[m]]);I(a,l)}else I(a,f[g]);a.aiDisplay=
a.aiDisplayMaster.slice();a.bAjaxDataGet=!1;ca(a);a.bAjaxDataGet=!0;Ja(a,!1)}function Ia(a){var b=a.oPreviousSearch,e=a.oLanguage.sSearch,e=-1!==e.indexOf("_INPUT_")?e.replace("_INPUT_",'<input type="text" />'):""===e?'<input type="text" />':e+' <input type="text" />',f=c.createElement("div");f.className=a.oClasses.sFilter;f.innerHTML="<label>"+e+"</label>";a.aanFeatures.f||(f.id=a.sTableId+"_filter");e=d('input[type="text"]',f);f._DT_Input=e[0];e.val(b.sSearch.replace('"',"&quot;"));e.bind("keyup.DT",
function(c){c=a.aanFeatures.f;for(var e=""===this.value?"":this.value,f=0,g=c.length;f<g;f++)c[f]!=d(this).parents("div.dataTables_filter")[0]&&d(c[f]._DT_Input).val(e);e!=b.sSearch&&za(a,{sSearch:e,bRegex:b.bRegex,bSmart:b.bSmart,bCaseInsensitive:b.bCaseInsensitive})});e.attr("aria-controls",a.sTableId).bind("keypress.DT",function(a){if(13==a.keyCode)return!1});return f}function za(a,b,c){var e=a.oPreviousSearch,f=a.aoPreSearchCols,g=function(a){e.sSearch=a.sSearch;e.bRegex=a.bRegex;e.bSmart=a.bSmart;
e.bCaseInsensitive=a.bCaseInsensitive};if(a.oFeatures.bServerSide)g(b);else{rb(a,b.sSearch,c,b.bRegex,b.bSmart,b.bCaseInsensitive);g(b);for(b=0;b<a.aoPreSearchCols.length;b++)gb(a,f[b].sSearch,b,f[b].bRegex,f[b].bSmart,f[b].bCaseInsensitive);bb(a)}a.bFiltered=!0;d(a.oInstance).trigger("filter",a);a._iDisplayStart=0;ua(a);ca(a);sb(a,0)}function bb(a){for(var b=e.ext.afnFiltering,d=t(a,"bSearchable"),c=0,f=b.length;c<f;c++)for(var g=0,h=0,l=a.aiDisplay.length;h<l;h++){var m=a.aiDisplay[h-g];b[c](a,
v(a,m,"filter",d),m)||(a.aiDisplay.splice(h-g,1),g++)}}function gb(a,b,d,c,e,f){if(""!==b){var g=0;b=cb(b,c,e,f);for(c=a.aiDisplay.length-1;0<=c;c--)e=Ib(z(a,a.aiDisplay[c],d,"filter"),a.aoColumns[d].sType),b.test(e)||(a.aiDisplay.splice(c,1),g++)}}function rb(a,b,d,c,f,g){c=cb(b,c,f,g);f=a.oPreviousSearch;d||(d=0);0!==e.ext.afnFiltering.length&&(d=1);if(0>=b.length)a.aiDisplay.splice(0,a.aiDisplay.length),a.aiDisplay=a.aiDisplayMaster.slice();else if(a.aiDisplay.length==a.aiDisplayMaster.length||
f.sSearch.length>b.length||1==d||0!==b.indexOf(f.sSearch))for(a.aiDisplay.splice(0,a.aiDisplay.length),sb(a,1),b=0;b<a.aiDisplayMaster.length;b++)c.test(a.asDataSearch[b])&&a.aiDisplay.push(a.aiDisplayMaster[b]);else for(b=d=0;b<a.asDataSearch.length;b++)c.test(a.asDataSearch[b])||(a.aiDisplay.splice(b-d,1),d++)}function sb(a,b){if(!a.oFeatures.bServerSide){a.asDataSearch=[];for(var d=t(a,"bSearchable"),c=1===b?a.aiDisplayMaster:a.aiDisplay,e=0,f=c.length;e<f;e++)a.asDataSearch[e]=n(a,v(a,c[e],"filter",
d))}}function n(a,b){var c=b.join("  ");-1!==c.indexOf("&")&&(c=d("<div>").html(c).text());return c.replace(/[\n\r]/g," ")}function cb(a,b,d,c){if(d){a=b?a.split(" "):Fa(a).split(" ");a="^(?=.*?"+a.join(")(?=.*?")+").*$";try{return new RegExp(a,c?"i":"")}catch(e){return RegExp("")}}else return a=b?a:Fa(a),new RegExp(a,c?"i":"")}function Ib(a,b){return"function"===typeof e.ext.ofnSearch[b]?e.ext.ofnSearch[b](a):null===a?"":"html"==b?a.replace(/[\r\n]/g," ").replace(/<.*?>/g,""):"string"===typeof a?
a.replace(/[\r\n]/g," "):a}function Fa(a){return a.replace(RegExp("(\\/|\\.|\\*|\\+|\\?|\\||\\(|\\)|\\[|\\]|\\{|\\}|\\\\|\\$|\\^|\\-)","g"),"\\$1")}function zb(a){var b=c.createElement("div");b.className=a.oClasses.sInfo;a.aanFeatures.i||(a.aoDrawCallback.push({fn:Jb,sName:"information"}),b.id=a.sTableId+"_info");a.nTable.setAttribute("aria-describedby",a.sTableId+"_info");return b}function Jb(a){if(a.oFeatures.bInfo&&0!==a.aanFeatures.i.length){var b=a.oLanguage,c=a._iDisplayStart+1,e=a.fnDisplayEnd(),
f=a.fnRecordsTotal(),g=a.fnRecordsDisplay(),h;h=0===g?b.sInfoEmpty:b.sInfo;g!=f&&(h+=" "+b.sInfoFiltered);h+=b.sInfoPostFix;h=tb(a,h);null!==b.fnInfoCallback&&(h=b.fnInfoCallback.call(a.oInstance,a,c,e,f,g,h));a=a.aanFeatures.i;b=0;for(c=a.length;b<c;b++)d(a[b]).html(h)}}function tb(a,b){var d=a.fnFormatNumber(a._iDisplayStart+1),c=a.fnDisplayEnd(),c=a.fnFormatNumber(c),e=a.fnRecordsDisplay(),e=a.fnFormatNumber(e),f=a.fnRecordsTotal(),f=a.fnFormatNumber(f);a.oScroll.bInfinite&&(d=a.fnFormatNumber(1));
return b.replace(/_START_/g,d).replace(/_END_/g,c).replace(/_TOTAL_/g,e).replace(/_MAX_/g,f)}function Ab(a){var b,d,c=a.iInitDisplayStart;if(!1===a.bInitialised)setTimeout(function(){Ab(a)},200);else{ba(a);aa(a);ja(a,a.aoHeader);a.nTFoot&&ja(a,a.aoFooter);Ja(a,!0);a.oFeatures.bAutoWidth&&ta(a);b=0;for(d=a.aoColumns.length;b<d;b++)null!==a.aoColumns[b].sWidth&&(a.aoColumns[b].nTh.style.width=W(a.aoColumns[b].sWidth));a.oFeatures.bSort?Pa(a):a.oFeatures.bFilter?za(a,a.oPreviousSearch):(a.aiDisplay=
a.aiDisplayMaster.slice(),ua(a),ca(a));null===a.sAjaxSource||a.oFeatures.bServerSide?a.oFeatures.bServerSide||(Ja(a,!1),ub(a)):(d=[],Ya(a,d),a.fnServerData.call(a.oInstance,a.sAjaxSource,d,function(d){var e=""!==a.sAjaxDataProp?O(a.sAjaxDataProp)(d):d;for(b=0;b<e.length;b++)I(a,e[b]);a.iInitDisplayStart=c;a.oFeatures.bSort?Pa(a):(a.aiDisplay=a.aiDisplayMaster.slice(),ua(a),ca(a));Ja(a,!1);ub(a,d)},a))}}function ub(a,b){a._bInitComplete=!0;K(a,"aoInitComplete","init",[a,b])}function db(a){var b=e.defaults.oLanguage;
!a.sEmptyTable&&a.sZeroRecords&&"No data available in table"===b.sEmptyTable&&S(a,a,"sZeroRecords","sEmptyTable");!a.sLoadingRecords&&a.sZeroRecords&&"Loading..."===b.sLoadingRecords&&S(a,a,"sZeroRecords","sLoadingRecords")}function hb(a){if(a.oScroll.bInfinite)return null;var b='<select size="1" '+('name="'+a.sTableId+'_length"')+">",e,f,g=a.aLengthMenu;if(2==g.length&&"object"===typeof g[0]&&"object"===typeof g[1])for(e=0,f=g[0].length;e<f;e++)b+='<option value="'+g[0][e]+'">'+g[1][e]+"</option>";
else for(e=0,f=g.length;e<f;e++)b+='<option value="'+g[e]+'">'+g[e]+"</option>";b+="</select>";g=c.createElement("div");a.aanFeatures.l||(g.id=a.sTableId+"_length");g.className=a.oClasses.sLength;g.innerHTML="<label>"+a.oLanguage.sLengthMenu.replace("_MENU_",b)+"</label>";d('select option[value="'+a._iDisplayLength+'"]',g).attr("selected",!0);d("select",g).bind("change.DT",function(b){b=d(this).val();var c=a.aanFeatures.l;e=0;for(f=c.length;e<f;e++)c[e]!=this.parentNode&&d("select",c[e]).val(b);a._iDisplayLength=
parseInt(b,10);ua(a);a.fnDisplayEnd()==a.fnRecordsDisplay()&&(a._iDisplayStart=a.fnDisplayEnd()-a._iDisplayLength,0>a._iDisplayStart&&(a._iDisplayStart=0));-1==a._iDisplayLength&&(a._iDisplayStart=0);ca(a)});d("select",g).attr("aria-controls",a.sTableId);return g}function ua(a){a._iDisplayEnd=!1===a.oFeatures.bPaginate?a.aiDisplay.length:a._iDisplayStart+a._iDisplayLength>a.aiDisplay.length||-1==a._iDisplayLength?a.aiDisplay.length:a._iDisplayStart+a._iDisplayLength}function Bb(a){if(a.oScroll.bInfinite)return null;
var b=c.createElement("div");b.className=a.oClasses.sPaging+a.sPaginationType;e.ext.oPagination[a.sPaginationType].fnInit(a,b,function(a){ua(a);ca(a)});a.aanFeatures.p||a.aoDrawCallback.push({fn:function(a){e.ext.oPagination[a.sPaginationType].fnUpdate(a,function(a){ua(a);ca(a)})},sName:"pagination"});return b}function Ta(a,b){var c=a._iDisplayStart;if("number"===typeof b)a._iDisplayStart=b*a._iDisplayLength,a._iDisplayStart>a.fnRecordsDisplay()&&(a._iDisplayStart=0);else if("first"==b)a._iDisplayStart=
0;else if("previous"==b)a._iDisplayStart=0<=a._iDisplayLength?a._iDisplayStart-a._iDisplayLength:0,0>a._iDisplayStart&&(a._iDisplayStart=0);else if("next"==b)0<=a._iDisplayLength?a._iDisplayStart+a._iDisplayLength<a.fnRecordsDisplay()&&(a._iDisplayStart+=a._iDisplayLength):a._iDisplayStart=0;else if("last"==b)if(0<=a._iDisplayLength){var e=parseInt((a.fnRecordsDisplay()-1)/a._iDisplayLength,10)+1;a._iDisplayStart=(e-1)*a._iDisplayLength}else a._iDisplayStart=0;else oa(a,0,"Unknown paging action: "+
b);d(a.oInstance).trigger("page",a);return c!=a._iDisplayStart}function vb(a){var b=c.createElement("div");a.aanFeatures.r||(b.id=a.sTableId+"_processing");b.innerHTML=a.oLanguage.sProcessing;b.className=a.oClasses.sProcessing;a.nTable.parentNode.insertBefore(b,a.nTable);return b}function Ja(a,b){if(a.oFeatures.bProcessing)for(var c=a.aanFeatures.r,e=0,f=c.length;e<f;e++)c[e].style.visibility=b?"visible":"hidden";d(a.oInstance).trigger("processing",[a,b])}function pb(a){if(""===a.oScroll.sX&&""===
a.oScroll.sY)return a.nTable;var b=c.createElement("div"),e=c.createElement("div"),f=c.createElement("div"),g=c.createElement("div"),h=c.createElement("div"),l=c.createElement("div"),m=a.nTable.cloneNode(!1),n=a.nTable.cloneNode(!1),p=a.nTable.getElementsByTagName("thead")[0],r=0===a.nTable.getElementsByTagName("tfoot").length?null:a.nTable.getElementsByTagName("tfoot")[0],q=a.oClasses;e.appendChild(f);h.appendChild(l);g.appendChild(a.nTable);b.appendChild(e);b.appendChild(g);f.appendChild(m);m.appendChild(p);
null!==r&&(b.appendChild(h),l.appendChild(n),n.appendChild(r));b.className=q.sScrollWrapper;e.className=q.sScrollHead;f.className=q.sScrollHeadInner;g.className=q.sScrollBody;h.className=q.sScrollFoot;l.className=q.sScrollFootInner;a.oScroll.bAutoCss&&(e.style.overflow="hidden",e.style.position="relative",h.style.overflow="hidden",g.style.overflow="auto");e.style.border="0";e.style.width="100%";h.style.border="0";f.style.width=""!==a.oScroll.sXInner?a.oScroll.sXInner:"100%";m.removeAttribute("id");
m.style.marginLeft="0";a.nTable.style.marginLeft="0";null!==r&&(n.removeAttribute("id"),n.style.marginLeft="0");f=d(a.nTable).children("caption");0<f.length&&(f=f[0],"top"===f._captionSide?m.appendChild(f):"bottom"===f._captionSide&&r&&n.appendChild(f));""!==a.oScroll.sX&&(e.style.width=W(a.oScroll.sX),g.style.width=W(a.oScroll.sX),null!==r&&(h.style.width=W(a.oScroll.sX)),d(g).scroll(function(a){e.scrollLeft=this.scrollLeft;null!==r&&(h.scrollLeft=this.scrollLeft)}));""!==a.oScroll.sY&&(g.style.height=
W(a.oScroll.sY));a.aoDrawCallback.push({fn:ab,sName:"scrolling"});a.oScroll.bInfinite&&d(g).scroll(function(){!a.bDrawing&&0!==d(this).scrollTop()&&d(this).scrollTop()+d(this).height()>d(a.nTable).height()-a.oScroll.iLoadGap&&a.fnDisplayEnd()<a.fnRecordsDisplay()&&(Ta(a,"next"),ua(a),ca(a))});a.nScrollHead=e;a.nScrollFoot=h;return b}function ab(a){var b=a.nScrollHead.getElementsByTagName("div")[0],c=b.getElementsByTagName("table")[0],e=a.nTable.parentNode,f,g,h,l,n,p,r,q,v=[],A=[],z=null!==a.nTFoot?
a.nScrollFoot.getElementsByTagName("div")[0]:null,t=null!==a.nTFoot?z.getElementsByTagName("table")[0]:null,u=a.oBrowser.bScrollOversize,y=function(a){r=a.style;r.paddingTop="0";r.paddingBottom="0";r.borderTopWidth="0";r.borderBottomWidth="0";r.height=0};d(a.nTable).children("thead, tfoot").remove();f=d(a.nTHead).clone()[0];a.nTable.insertBefore(f,a.nTable.childNodes[0]);h=a.nTHead.getElementsByTagName("tr");l=f.getElementsByTagName("tr");null!==a.nTFoot&&(n=d(a.nTFoot).clone()[0],a.nTable.insertBefore(n,
a.nTable.childNodes[1]),p=a.nTFoot.getElementsByTagName("tr"),n=n.getElementsByTagName("tr"));""===a.oScroll.sX&&(e.style.width="100%",b.parentNode.style.width="100%");var B=L(a,f);f=0;for(g=B.length;f<g;f++)q=m(a,f),B[f].style.width=a.aoColumns[q].sWidth;null!==a.nTFoot&&Na(function(a){a.style.width=""},n);a.oScroll.bCollapse&&""!==a.oScroll.sY&&(e.style.height=e.offsetHeight+a.nTHead.offsetHeight+"px");f=d(a.nTable).outerWidth();""===a.oScroll.sX?(a.nTable.style.width="100%",u&&(d("tbody",e).height()>
e.offsetHeight||"scroll"==d(e).css("overflow-y"))&&(a.nTable.style.width=W(d(a.nTable).outerWidth()-a.oScroll.iBarWidth))):""!==a.oScroll.sXInner?a.nTable.style.width=W(a.oScroll.sXInner):f==d(e).width()&&d(e).height()<d(a.nTable).height()?(a.nTable.style.width=W(f-a.oScroll.iBarWidth),d(a.nTable).outerWidth()>f-a.oScroll.iBarWidth&&(a.nTable.style.width=W(f))):a.nTable.style.width=W(f);f=d(a.nTable).outerWidth();Na(y,l);Na(function(a){v.push(W(d(a).width()))},l);Na(function(a,b){a.style.width=v[b]},
h);d(l).height(0);null!==a.nTFoot&&(Na(y,n),Na(function(a){A.push(W(d(a).width()))},n),Na(function(a,b){a.style.width=A[b]},p),d(n).height(0));Na(function(a,b){a.innerHTML="";a.style.width=v[b]},l);null!==a.nTFoot&&Na(function(a,b){a.innerHTML="";a.style.width=A[b]},n);d(a.nTable).outerWidth()<f?(h=e.scrollHeight>e.offsetHeight||"scroll"==d(e).css("overflow-y")?f+a.oScroll.iBarWidth:f,u&&(e.scrollHeight>e.offsetHeight||"scroll"==d(e).css("overflow-y"))&&(a.nTable.style.width=W(h-a.oScroll.iBarWidth)),
e.style.width=W(h),a.nScrollHead.style.width=W(h),null!==a.nTFoot&&(a.nScrollFoot.style.width=W(h)),""===a.oScroll.sX?oa(a,1,"The table cannot fit into the current element which will cause column misalignment. The table has been drawn at its minimum possible width."):""!==a.oScroll.sXInner&&oa(a,1,"The table cannot fit into the current element which will cause column misalignment. Increase the sScrollXInner value or remove it to allow automatic calculation")):(e.style.width=W("100%"),a.nScrollHead.style.width=
W("100%"),null!==a.nTFoot&&(a.nScrollFoot.style.width=W("100%")));""===a.oScroll.sY&&u&&(e.style.height=W(a.nTable.offsetHeight+a.oScroll.iBarWidth));""!==a.oScroll.sY&&a.oScroll.bCollapse&&(e.style.height=W(a.oScroll.sY),u=""!==a.oScroll.sX&&a.nTable.offsetWidth>e.offsetWidth?a.oScroll.iBarWidth:0,a.nTable.offsetHeight<e.offsetHeight&&(e.style.height=W(a.nTable.offsetHeight+u)));u=d(a.nTable).outerWidth();c.style.width=W(u);b.style.width=W(u);c=d(a.nTable).height()>e.clientHeight||"scroll"==d(e).css("overflow-y");
b.style.paddingRight=c?a.oScroll.iBarWidth+"px":"0px";null!==a.nTFoot&&(t.style.width=W(u),z.style.width=W(u),z.style.paddingRight=c?a.oScroll.iBarWidth+"px":"0px");d(e).scroll();if(a.bSorted||a.bFiltered)e.scrollTop=0}function Na(a,b,d){for(var c=0,e=0,f=b.length,g,h;e<f;){g=b[e].firstChild;for(h=d?d[e].firstChild:null;g;)1===g.nodeType&&(d?a(g,h,c):a(g,c),c++),g=g.nextSibling,h=d?h.nextSibling:null;e++}}function da(a,b){if(!a||null===a||""===a)return 0;b||(b=c.body);var d,e=c.createElement("div");
e.style.width=W(a);b.appendChild(e);d=e.offsetWidth;b.removeChild(e);return d}function ta(a){var b=0,e,f=0,g=a.aoColumns.length,h,l,m=d("th",a.nTHead),n=a.nTable.getAttribute("width");l=a.nTable.parentNode;for(h=0;h<g;h++)a.aoColumns[h].bVisible&&(f++,null!==a.aoColumns[h].sWidth&&(e=da(a.aoColumns[h].sWidthOrig,l),null!==e&&(a.aoColumns[h].sWidth=W(e)),b++));if(g==m.length&&0===b&&f==g&&""===a.oScroll.sX&&""===a.oScroll.sY)for(h=0;h<a.aoColumns.length;h++)e=d(m[h]).width(),null!==e&&(a.aoColumns[h].sWidth=
W(e));else{b=a.nTable.cloneNode(!1);h=a.nTHead.cloneNode(!0);f=c.createElement("tbody");e=c.createElement("tr");b.removeAttribute("id");b.appendChild(h);null!==a.nTFoot&&(b.appendChild(a.nTFoot.cloneNode(!0)),Na(function(a){a.style.width=""},b.getElementsByTagName("tr")));b.appendChild(f);f.appendChild(e);f=d("thead th",b);0===f.length&&(f=d("tbody tr:eq(0)>td",b));m=L(a,h);for(h=f=0;h<g;h++){var p=a.aoColumns[h];p.bVisible&&null!==p.sWidthOrig&&""!==p.sWidthOrig?m[h-f].style.width=W(p.sWidthOrig):
p.bVisible?m[h-f].style.width="":f++}for(h=0;h<g;h++)a.aoColumns[h].bVisible&&(f=ib(a,h),null!==f&&(f=f.cloneNode(!0),""!==a.aoColumns[h].sContentPadding&&(f.innerHTML+=a.aoColumns[h].sContentPadding),e.appendChild(f)));l.appendChild(b);""!==a.oScroll.sX&&""!==a.oScroll.sXInner?b.style.width=W(a.oScroll.sXInner):""!==a.oScroll.sX?(b.style.width="",d(b).width()<l.offsetWidth&&(b.style.width=W(l.offsetWidth))):""!==a.oScroll.sY?b.style.width=W(l.offsetWidth):n&&(b.style.width=W(n));b.style.visibility=
"hidden";Za(a,b);g=d("tbody tr:eq(0)",b).children();0===g.length&&(g=L(a,d("thead",b)[0]));if(""!==a.oScroll.sX){for(h=f=l=0;h<a.aoColumns.length;h++)a.aoColumns[h].bVisible&&(l=null===a.aoColumns[h].sWidthOrig?l+d(g[f]).outerWidth():l+(parseInt(a.aoColumns[h].sWidth.replace("px",""),10)+(d(g[f]).outerWidth()-d(g[f]).width())),f++);b.style.width=W(l);a.nTable.style.width=W(l)}for(h=f=0;h<a.aoColumns.length;h++)a.aoColumns[h].bVisible&&(l=d(g[f]).width(),null!==l&&0<l&&(a.aoColumns[h].sWidth=W(l)),
f++);g=d(b).css("width");a.nTable.style.width=-1!==g.indexOf("%")?g:W(d(b).outerWidth());b.parentNode.removeChild(b)}n&&(a.nTable.style.width=W(n))}function Za(a,b){""===a.oScroll.sX&&""!==a.oScroll.sY?(d(b).width(),b.style.width=W(d(b).outerWidth()-a.oScroll.iBarWidth)):""!==a.oScroll.sX&&(b.style.width=W(d(b).outerWidth()))}function ib(a,b){var d=Wb(a,b);if(0>d)return null;if(null===a.aoData[d].nTr){var e=c.createElement("td");e.innerHTML=z(a,d,b,"");return e}return kb(a,d)[b]}function Wb(a,b){for(var d=
-1,c=-1,e=0;e<a.aoData.length;e++){var f=z(a,e,b,"display")+"",f=f.replace(/<.*?>/g,"");f.length>d&&(d=f.length,c=e)}return c}function W(a){if(null===a)return"0px";if("number"==typeof a)return 0>a?"0px":a+"px";var b=a.charCodeAt(a.length-1);return 48>b||57<b?a:a+"px"}function Cb(){var a=c.createElement("p"),b=a.style;b.width="100%";b.height="200px";b.padding="0px";var d=c.createElement("div"),b=d.style;b.position="absolute";b.top="0px";b.left="0px";b.visibility="hidden";b.width="200px";b.height="150px";
b.padding="0px";b.overflow="hidden";d.appendChild(a);c.body.appendChild(d);b=a.offsetWidth;d.style.overflow="scroll";a=a.offsetWidth;b==a&&(a=d.clientWidth);c.body.removeChild(d);return b-a}function Pa(a,c){var f,g,h,l,m,n,r=[],q=[],v=e.ext.oSort,A=a.aoData,t=a.aoColumns,u=a.oLanguage.oAria;if(!a.oFeatures.bServerSide&&(0!==a.aaSorting.length||null!==a.aaSortingFixed)){r=null!==a.aaSortingFixed?a.aaSortingFixed.concat(a.aaSorting):a.aaSorting.slice();for(f=0;f<r.length;f++)if(g=r[f][0],h=p(a,g),l=
a.aoColumns[g].sSortDataType,e.ext.afnSortData[l])if(m=e.ext.afnSortData[l].call(a.oInstance,a,g,h),m.length===A.length)for(h=0,l=A.length;h<l;h++)H(a,h,g,m[h]);else oa(a,0,"Returned data sort array (col "+g+") is the wrong length");f=0;for(g=a.aiDisplayMaster.length;f<g;f++)q[a.aiDisplayMaster[f]]=f;var y=r.length,B;f=0;for(g=A.length;f<g;f++)for(h=0;h<y;h++)for(B=t[r[h][0]].aDataSort,m=0,n=B.length;m<n;m++)l=t[B[m]].sType,l=v[(l?l:"string")+"-pre"],A[f]._aSortData[B[m]]=l?l(z(a,f,B[m],"sort")):
z(a,f,B[m],"sort");a.aiDisplayMaster.sort(function(a,b){var d,c,e,f,g;for(d=0;d<y;d++)for(g=t[r[d][0]].aDataSort,c=0,e=g.length;c<e;c++)if(f=t[g[c]].sType,f=v[(f?f:"string")+"-"+r[d][1]](A[a]._aSortData[g[c]],A[b]._aSortData[g[c]]),0!==f)return f;return v["numeric-asc"](q[a],q[b])})}c!==b&&!c||a.oFeatures.bDeferRender||Ka(a);f=0;for(g=a.aoColumns.length;f<g;f++)l=t[f].sTitle.replace(/<.*?>/g,""),h=t[f].nTh,h.removeAttribute("aria-sort"),h.removeAttribute("aria-label"),t[f].bSortable?0<r.length&&r[0][0]==
f?(h.setAttribute("aria-sort","asc"==r[0][1]?"ascending":"descending"),h.setAttribute("aria-label",l+("asc"==(t[f].asSorting[r[0][2]+1]?t[f].asSorting[r[0][2]+1]:t[f].asSorting[0])?u.sSortAscending:u.sSortDescending))):h.setAttribute("aria-label",l+("asc"==t[f].asSorting[0]?u.sSortAscending:u.sSortDescending)):h.setAttribute("aria-label",l);a.bSorted=!0;d(a.oInstance).trigger("sort",a);a.oFeatures.bFilter?za(a,a.oPreviousSearch,1):(a.aiDisplay=a.aiDisplayMaster.slice(),a._iDisplayStart=0,ua(a),ca(a))}
function $a(a,b,d,c){Ob(b,{},function(b){if(!1!==a.aoColumns[d].bSortable){var e=function(){var c,e;if(b.shiftKey){for(var f=!1,g=0;g<a.aaSorting.length;g++)if(a.aaSorting[g][0]==d){f=!0;c=a.aaSorting[g][0];e=a.aaSorting[g][2]+1;a.aoColumns[c].asSorting[e]?(a.aaSorting[g][1]=a.aoColumns[c].asSorting[e],a.aaSorting[g][2]=e):a.aaSorting.splice(g,1);break}!1===f&&a.aaSorting.push([d,a.aoColumns[d].asSorting[0],0])}else 1==a.aaSorting.length&&a.aaSorting[0][0]==d?(c=a.aaSorting[0][0],e=a.aaSorting[0][2]+
1,a.aoColumns[c].asSorting[e]||(e=0),a.aaSorting[0][1]=a.aoColumns[c].asSorting[e],a.aaSorting[0][2]=e):(a.aaSorting.splice(0,a.aaSorting.length),a.aaSorting.push([d,a.aoColumns[d].asSorting[0],0]));Pa(a)};a.oFeatures.bProcessing?(Ja(a,!0),setTimeout(function(){e();a.oFeatures.bServerSide||Ja(a,!1)},0)):e();"function"==typeof c&&c(a)}})}function Ka(a){var b,c,e,f,g,h=a.aoColumns.length,l=a.oClasses;for(b=0;b<h;b++)a.aoColumns[b].bSortable&&d(a.aoColumns[b].nTh).removeClass(l.sSortAsc+" "+l.sSortDesc+
" "+a.aoColumns[b].sSortingClass);c=null!==a.aaSortingFixed?a.aaSortingFixed.concat(a.aaSorting):a.aaSorting.slice();for(b=0;b<a.aoColumns.length;b++)if(a.aoColumns[b].bSortable){g=a.aoColumns[b].sSortingClass;f=-1;for(e=0;e<c.length;e++)if(c[e][0]==b){g="asc"==c[e][1]?l.sSortAsc:l.sSortDesc;f=e;break}d(a.aoColumns[b].nTh).addClass(g);a.bJUI&&(g=d("span."+l.sSortIcon,a.aoColumns[b].nTh),g.removeClass(l.sSortJUIAsc+" "+l.sSortJUIDesc+" "+l.sSortJUI+" "+l.sSortJUIAscAllowed+" "+l.sSortJUIDescAllowed),
g.addClass(-1==f?a.aoColumns[b].sSortingClassJUI:"asc"==c[f][1]?l.sSortJUIAsc:l.sSortJUIDesc))}else d(a.aoColumns[b].nTh).addClass(a.aoColumns[b].sSortingClass);g=l.sSortColumn;if(a.oFeatures.bSort&&a.oFeatures.bSortClasses){a=kb(a);f=[];for(b=0;b<h;b++)f.push("");b=0;for(e=1;b<c.length;b++)l=parseInt(c[b][0],10),f[l]=g+e,3>e&&e++;g=new RegExp(g+"[123]");var m;b=0;for(c=a.length;b<c;b++)l=b%h,e=a[b].className,m=f[l],l=e.replace(g,m),l!=e?a[b].className=d.trim(l):0<m.length&&-1==e.indexOf(m)&&(a[b].className=
e+" "+m)}}function jb(a){if(a.oFeatures.bStateSave&&!a.bDestroying){var b,c;b=a.oScroll.bInfinite;var e={iCreate:(new Date).getTime(),iStart:b?0:a._iDisplayStart,iEnd:b?a._iDisplayLength:a._iDisplayEnd,iLength:a._iDisplayLength,aaSorting:d.extend(!0,[],a.aaSorting),oSearch:d.extend(!0,{},a.oPreviousSearch),aoSearchCols:d.extend(!0,[],a.aoPreSearchCols),abVisCols:[]};b=0;for(c=a.aoColumns.length;b<c;b++)e.abVisCols.push(a.aoColumns[b].bVisible);K(a,"aoStateSaveParams","stateSaveParams",[a,e]);a.fnStateSave.call(a.oInstance,
a,e)}}function Ba(a,b){if(a.oFeatures.bStateSave){var c=a.fnStateLoad.call(a.oInstance,a);if(c){var e=K(a,"aoStateLoadParams","stateLoadParams",[a,c]);if(-1===d.inArray(!1,e)){a.oLoadedState=d.extend(!0,{},c);a._iDisplayStart=c.iStart;a.iInitDisplayStart=c.iStart;a._iDisplayEnd=c.iEnd;a._iDisplayLength=c.iLength;a.aaSorting=c.aaSorting.slice();a.saved_aaSorting=c.aaSorting.slice();d.extend(a.oPreviousSearch,c.oSearch);d.extend(!0,a.aoPreSearchCols,c.aoSearchCols);b.saved_aoColumns=[];for(e=0;e<c.abVisCols.length;e++)b.saved_aoColumns[e]=
{},b.saved_aoColumns[e].bVisible=c.abVisCols[e];K(a,"aoStateLoaded","stateLoaded",[a,c])}}}}function ka(a){for(var b=0;b<e.settings.length;b++)if(e.settings[b].nTable===a)return e.settings[b];return null}function Qa(a){var b=[];a=a.aoData;for(var d=0,c=a.length;d<c;d++)null!==a[d].nTr&&b.push(a[d].nTr);return b}function kb(a,d){var c=[],e,f,g,h,l,m;f=0;var n=a.aoData.length;d!==b&&(f=d,n=d+1);for(g=f;g<n;g++)if(m=a.aoData[g],null!==m.nTr){f=[];for(e=m.nTr.firstChild;e;)h=e.nodeName.toLowerCase(),
"td"!=h&&"th"!=h||f.push(e),e=e.nextSibling;h=e=0;for(l=a.aoColumns.length;h<l;h++)a.aoColumns[h].bVisible?c.push(f[h-e]):(c.push(m._anHidden[h]),e++)}return c}function oa(b,d,c){b=null===b?"DataTables warning: "+c:"DataTables warning (table id = '"+b.sTableId+"'): "+c;if(0===d)if("alert"==e.ext.sErrMode)alert(b);else throw Error(b);else a.console&&console.log&&console.log(b)}function S(a,d,c,e){e===b&&(e=c);d[c]!==b&&(a[e]=d[c])}function Db(a,b){var c,e;for(e in b)b.hasOwnProperty(e)&&(c=b[e],"object"===
typeof f[e]&&null!==c&&!1===d.isArray(c)?d.extend(!0,a[e],c):a[e]=c);return a}function Ob(a,b,c){d(a).bind("click.DT",b,function(b){a.blur();c(b)}).bind("keypress.DT",b,function(a){13===a.which&&c(a)}).bind("selectstart.DT",function(){return!1})}function M(a,b,d,c){d&&a[b].push({fn:d,sName:c})}function K(a,b,c,e){b=a[b];for(var f=[],g=b.length-1;0<=g;g--)f.push(b[g].fn.apply(a.oInstance,e));null!==c&&d(a.oInstance).trigger(c,e);return f}function Ra(a){var b=d('<div style="position:absolute; top:0; left:0; height:1px; width:1px; overflow:hidden"><div style="position:absolute; top:1px; left:1px; width:100px; overflow:scroll;"><div id="DT_BrowserTest" style="width:100%; height:10px;"></div></div></div>')[0];
c.body.appendChild(b);a.oBrowser.bScrollOversize=100===d("#DT_BrowserTest",b)[0].offsetWidth?!0:!1;c.body.removeChild(b)}function qa(a){return function(){var b=[ka(this[e.ext.iApiIndex])].concat(Array.prototype.slice.call(arguments));return e.ext.oApi[a].apply(this,b)}}var Aa=/\[.*?\]$/,Sa=a.JSON?JSON.stringify:function(a){var b=typeof a;if("object"!==b||null===a)return"string"===b&&(a='"'+a+'"'),a+"";var c,e,f=[],g=d.isArray(a);for(c in a)e=a[c],b=typeof e,"string"===b?e='"'+e+'"':"object"===b&&
null!==e&&(e=Sa(e)),f.push((g?"":'"'+c+'":')+e);return(g?"[":"{")+f+(g?"]":"}")};this.$=function(a,b){var c,f,g=[],h;f=ka(this[e.ext.iApiIndex]);var l=f.aoData,m=f.aiDisplay,n=f.aiDisplayMaster;b||(b={});b=d.extend({},{filter:"none",order:"current",page:"all"},b);if("current"==b.page)for(c=f._iDisplayStart,f=f.fnDisplayEnd();c<f;c++)(h=l[m[c]].nTr)&&g.push(h);else if("current"==b.order&&"none"==b.filter)for(c=0,f=n.length;c<f;c++)(h=l[n[c]].nTr)&&g.push(h);else if("current"==b.order&&"applied"==b.filter)for(c=
0,f=m.length;c<f;c++)(h=l[m[c]].nTr)&&g.push(h);else if("original"==b.order&&"none"==b.filter)for(c=0,f=l.length;c<f;c++)(h=l[c].nTr)&&g.push(h);else if("original"==b.order&&"applied"==b.filter)for(c=0,f=l.length;c<f;c++)h=l[c].nTr,-1!==d.inArray(c,m)&&h&&g.push(h);else oa(f,1,"Unknown selection options");g=d(g);c=g.filter(a);g=g.find(a);return d([].concat(d.makeArray(c),d.makeArray(g)))};this._=function(a,b){var d=[],c,e,f=this.$(a,b);c=0;for(e=f.length;c<e;c++)d.push(this.fnGetData(f[c]));return d};
this.fnAddData=function(a,d){if(0===a.length)return[];var c=[],f,g=ka(this[e.ext.iApiIndex]);if("object"===typeof a[0]&&null!==a[0])for(var h=0;h<a.length;h++){f=I(g,a[h]);if(-1==f)return c;c.push(f)}else{f=I(g,a);if(-1==f)return c;c.push(f)}g.aiDisplay=g.aiDisplayMaster.slice();(d===b||d)&&fa(g);return c};this.fnAdjustColumnSizing=function(a){var d=ka(this[e.ext.iApiIndex]);l(d);a===b||a?this.fnDraw(!1):""===d.oScroll.sX&&""===d.oScroll.sY||this.oApi._fnScrollDraw(d)};this.fnClearTable=function(a){var d=
ka(this[e.ext.iApiIndex]);Z(d);(a===b||a)&&ca(d)};this.fnClose=function(a){for(var b=ka(this[e.ext.iApiIndex]),d=0;d<b.aoOpenRows.length;d++)if(b.aoOpenRows[d].nParent==a)return(a=b.aoOpenRows[d].nTr.parentNode)&&a.removeChild(b.aoOpenRows[d].nTr),b.aoOpenRows.splice(d,1),0;return 1};this.fnDeleteRow=function(a,c,f){var g=ka(this[e.ext.iApiIndex]),h,l;a="object"===typeof a?A(g,a):a;var m=g.aoData.splice(a,1);h=0;for(l=g.aoData.length;h<l;h++)null!==g.aoData[h].nTr&&(g.aoData[h].nTr._DT_RowIndex=h);
h=d.inArray(a,g.aiDisplay);g.asDataSearch.splice(h,1);na(g.aiDisplayMaster,a);na(g.aiDisplay,a);"function"===typeof c&&c.call(this,g,m);g._iDisplayStart>=g.fnRecordsDisplay()&&(g._iDisplayStart-=g._iDisplayLength,0>g._iDisplayStart&&(g._iDisplayStart=0));if(f===b||f)ua(g),ca(g);return m};this.fnDestroy=function(a){var c=ka(this[e.ext.iApiIndex]),g=c.nTableWrapper.parentNode,h=c.nTBody,l,m;a=a===b?!1:a;c.bDestroying=!0;K(c,"aoDestroyCallback","destroy",[c]);if(!a)for(l=0,m=c.aoColumns.length;l<m;l++)!1===
c.aoColumns[l].bVisible&&this.fnSetColumnVis(l,!0);d(c.nTableWrapper).find("*").andSelf().unbind(".DT");d("tbody>tr>td."+c.oClasses.sRowEmpty,c.nTable).parent().remove();c.nTable!=c.nTHead.parentNode&&(d(c.nTable).children("thead").remove(),c.nTable.appendChild(c.nTHead));c.nTFoot&&c.nTable!=c.nTFoot.parentNode&&(d(c.nTable).children("tfoot").remove(),c.nTable.appendChild(c.nTFoot));c.nTable.parentNode.removeChild(c.nTable);d(c.nTableWrapper).remove();c.aaSorting=[];c.aaSortingFixed=[];Ka(c);d(Qa(c)).removeClass(c.asStripeClasses.join(" "));
d("th, td",c.nTHead).removeClass([c.oClasses.sSortable,c.oClasses.sSortableAsc,c.oClasses.sSortableDesc,c.oClasses.sSortableNone].join(" "));c.bJUI&&(d("th span."+c.oClasses.sSortIcon+", td span."+c.oClasses.sSortIcon,c.nTHead).remove(),d("th, td",c.nTHead).each(function(){var a=d("div."+c.oClasses.sSortJUIWrapper,this),b=a.contents();d(this).append(b);a.remove()}));!a&&c.nTableReinsertBefore?g.insertBefore(c.nTable,c.nTableReinsertBefore):a||g.appendChild(c.nTable);l=0;for(m=c.aoData.length;l<m;l++)null!==
c.aoData[l].nTr&&h.appendChild(c.aoData[l].nTr);!0===c.oFeatures.bAutoWidth&&(c.nTable.style.width=W(c.sDestroyWidth));if(m=c.asDestroyStripes.length)for(a=d(h).children("tr"),l=0;l<m;l++)a.filter(":nth-child("+m+"n + "+l+")").addClass(c.asDestroyStripes[l]);l=0;for(m=e.settings.length;l<m;l++)e.settings[l]==c&&e.settings.splice(l,1);f=c=null};this.fnDraw=function(a){var b=ka(this[e.ext.iApiIndex]);!1===a?(ua(b),ca(b)):fa(b)};this.fnFilter=function(a,f,g,h,l,m){var n=ka(this[e.ext.iApiIndex]);if(n.oFeatures.bFilter){if(g===
b||null===g)g=!1;if(h===b||null===h)h=!0;if(l===b||null===l)l=!0;if(m===b||null===m)m=!0;if(f===b||null===f){if(za(n,{sSearch:a+"",bRegex:g,bSmart:h,bCaseInsensitive:m},1),l&&n.aanFeatures.f)for(f=n.aanFeatures.f,g=0,h=f.length;g<h;g++)try{f[g]._DT_Input!=c.activeElement&&d(f[g]._DT_Input).val(a)}catch(p){d(f[g]._DT_Input).val(a)}}else d.extend(n.aoPreSearchCols[f],{sSearch:a+"",bRegex:g,bSmart:h,bCaseInsensitive:m}),za(n,n.oPreviousSearch,1)}};this.fnGetData=function(a,d){var c=ka(this[e.ext.iApiIndex]);
if(a!==b){var f=a;if("object"===typeof a){var g=a.nodeName.toLowerCase();"tr"===g?f=A(c,a):"td"===g&&(f=A(c,a.parentNode),d=r(c,f,a))}return d!==b?z(c,f,d,""):c.aoData[f]!==b?c.aoData[f]._aData:null}return J(c)};this.fnGetNodes=function(a){var d=ka(this[e.ext.iApiIndex]);return a!==b?d.aoData[a]!==b?d.aoData[a].nTr:null:Qa(d)};this.fnGetPosition=function(a){var b=ka(this[e.ext.iApiIndex]),d=a.nodeName.toUpperCase();return"TR"==d?A(b,a):"TD"==d||"TH"==d?(d=A(b,a.parentNode),a=r(b,d,a),[d,p(b,a),a]):
null};this.fnIsOpen=function(a){for(var b=ka(this[e.ext.iApiIndex]),d=0;d<b.aoOpenRows.length;d++)if(b.aoOpenRows[d].nParent==a)return!0;return!1};this.fnOpen=function(a,b,f){var g=ka(this[e.ext.iApiIndex]),h=Qa(g);if(-1!==d.inArray(a,h)){this.fnClose(a);var h=c.createElement("tr"),l=c.createElement("td");h.appendChild(l);l.className=f;l.colSpan=q(g);"string"===typeof b?l.innerHTML=b:d(l).html(b);b=d("tr",g.nTBody);-1!=d.inArray(a,b)&&d(h).insertAfter(a);g.aoOpenRows.push({nTr:h,nParent:a});return h}};
this.fnPageChange=function(a,d){var c=ka(this[e.ext.iApiIndex]);Ta(c,a);ua(c);(d===b||d)&&ca(c)};this.fnSetColumnVis=function(a,d,c){var f=ka(this[e.ext.iApiIndex]),g,h,m=f.aoColumns,n=f.aoData,p,r;if(m[a].bVisible!=d){if(d){for(g=h=0;g<a;g++)m[g].bVisible&&h++;r=h>=q(f);if(!r)for(g=a;g<m.length;g++)if(m[g].bVisible){p=g;break}g=0;for(h=n.length;g<h;g++)null!==n[g].nTr&&(r?n[g].nTr.appendChild(n[g]._anHidden[a]):n[g].nTr.insertBefore(n[g]._anHidden[a],kb(f,g)[p]))}else for(g=0,h=n.length;g<h;g++)null!==
n[g].nTr&&(p=kb(f,g)[a],n[g]._anHidden[a]=p,p.parentNode.removeChild(p));m[a].bVisible=d;ja(f,f.aoHeader);f.nTFoot&&ja(f,f.aoFooter);g=0;for(h=f.aoOpenRows.length;g<h;g++)f.aoOpenRows[g].nTr.colSpan=q(f);if(c===b||c)l(f),ca(f);jb(f)}};this.fnSettings=function(){return ka(this[e.ext.iApiIndex])};this.fnSort=function(a){var b=ka(this[e.ext.iApiIndex]);b.aaSorting=a;Pa(b)};this.fnSortListener=function(a,b,d){$a(ka(this[e.ext.iApiIndex]),a,b,d)};this.fnUpdate=function(a,c,f,g,h){var m=ka(this[e.ext.iApiIndex]);
c="object"===typeof c?A(m,c):c;if(d.isArray(a)&&f===b)for(m.aoData[c]._aData=a.slice(),f=0;f<m.aoColumns.length;f++)this.fnUpdate(z(m,c,f),c,f,!1,!1);else if(d.isPlainObject(a)&&f===b)for(m.aoData[c]._aData=d.extend(!0,{},a),f=0;f<m.aoColumns.length;f++)this.fnUpdate(z(m,c,f),c,f,!1,!1);else{H(m,c,f,a);a=z(m,c,f,"display");var p=m.aoColumns[f];null!==p.fnRender&&(a=sa(m,c,f),p.bUseRendered&&H(m,c,f,a));null!==m.aoData[c].nTr&&(kb(m,c)[f].innerHTML=a)}f=d.inArray(c,m.aiDisplay);m.asDataSearch[f]=n(m,
v(m,c,"filter",t(m,"bSearchable")));(h===b||h)&&l(m);(g===b||g)&&fa(m);return 0};this.fnVersionCheck=e.ext.fnVersionCheck;this.oApi={_fnExternApiFunc:qa,_fnInitialise:Ab,_fnInitComplete:ub,_fnLanguageCompat:db,_fnAddColumn:g,_fnColumnOptions:h,_fnAddData:I,_fnCreateTr:ia,_fnGatherData:F,_fnBuildHead:aa,_fnDrawHead:ja,_fnDraw:ca,_fnReDraw:fa,_fnAjaxUpdate:R,_fnAjaxParameters:Xa,_fnAjaxUpdateDraw:Oa,_fnServerParams:Ya,_fnAddOptionsHtml:ba,_fnFeatureHtmlTable:pb,_fnScrollDraw:ab,_fnAdjustColumnSizing:l,
_fnFeatureHtmlFilter:Ia,_fnFilterComplete:za,_fnFilterCustom:bb,_fnFilterColumn:gb,_fnFilter:rb,_fnBuildSearchArray:sb,_fnBuildSearchRow:n,_fnFilterCreateSearch:cb,_fnDataToSearch:Ib,_fnSort:Pa,_fnSortAttachListener:$a,_fnSortingClasses:Ka,_fnFeatureHtmlPaginate:Bb,_fnPageChange:Ta,_fnFeatureHtmlInfo:zb,_fnUpdateInfo:Jb,_fnFeatureHtmlLength:hb,_fnFeatureHtmlProcessing:vb,_fnProcessingDisplay:Ja,_fnVisibleToColumnIndex:m,_fnColumnIndexToVisible:p,_fnNodeToDataIndex:A,_fnVisbleColumns:q,_fnCalculateEnd:ua,
_fnConvertToWidth:da,_fnCalculateColumnWidths:ta,_fnScrollingWidthAdjust:Za,_fnGetWidestNode:ib,_fnGetMaxLenString:Wb,_fnStringToCss:W,_fnDetectType:y,_fnSettingsFromNode:ka,_fnGetDataMaster:J,_fnGetTrNodes:Qa,_fnGetTdNodes:kb,_fnEscapeRegex:Fa,_fnDeleteIndex:na,_fnReOrderIndex:u,_fnColumnOrdering:C,_fnLog:oa,_fnClearTable:Z,_fnSaveState:jb,_fnLoadState:Ba,_fnCreateCookie:function(b,e,f,g,h){var l=new Date;l.setTime(l.getTime()+1E3*f);f=a.location.pathname.split("/");b=b+"_"+f.pop().replace(/[\/:]/g,
"").toLowerCase();var m;null!==h?(m="function"===typeof d.parseJSON?d.parseJSON(e):eval("("+e+")"),e=h(b,m,l.toGMTString(),f.join("/")+"/")):e=b+"="+encodeURIComponent(e)+"; expires="+l.toGMTString()+"; path="+f.join("/")+"/";b=c.cookie.split(";");h=e.split(";")[0].length;l=[];if(4096<h+c.cookie.length+10){for(var n=0,p=b.length;n<p;n++)if(-1!=b[n].indexOf(g)){var r=b[n].split("=");try{(m=eval("("+decodeURIComponent(r[1])+")"))&&m.iCreate&&l.push({name:r[0],time:m.iCreate})}catch(q){}}for(l.sort(function(a,
b){return b.time-a.time});4096<h+c.cookie.length+10;){if(0===l.length)return;g=l.pop();c.cookie=g.name+"=; expires=Thu, 01-Jan-1970 00:00:01 GMT; path="+f.join("/")+"/"}}c.cookie=e},_fnReadCookie:function(b){var d=a.location.pathname.split("/");b=b+"_"+d[d.length-1].replace(/[\/:]/g,"").toLowerCase()+"=";for(var d=c.cookie.split(";"),e=0;e<d.length;e++){for(var f=d[e];" "==f.charAt(0);)f=f.substring(1,f.length);if(0===f.indexOf(b))return decodeURIComponent(f.substring(b.length,f.length))}return null},
_fnDetectHeader:la,_fnGetUniqueThs:L,_fnScrollBarWidth:Cb,_fnApplyToChildren:Na,_fnMap:S,_fnGetRowData:v,_fnGetCellData:z,_fnSetCellData:H,_fnGetObjectDataFn:O,_fnSetObjectDataFn:T,_fnApplyColumnDefs:B,_fnBindAction:Ob,_fnExtend:Db,_fnCallbackReg:M,_fnCallbackFire:K,_fnJsonString:Sa,_fnRender:sa,_fnNodeToColumnIndex:r,_fnInfoMacros:tb,_fnBrowserDetect:Ra,_fnGetColumns:t};d.extend(e.ext.oApi,this.oApi);for(var Q in e.ext.oApi)Q&&(this[Q]=qa(Q));var va=this;this.each(function(){var a=0,l,m,n;m=this.getAttribute("id");
var p=!1,r=!1;if("table"!=this.nodeName.toLowerCase())oa(null,0,"Attempted to initialise DataTables on a node which is not a table: "+this.nodeName);else{a=0;for(l=e.settings.length;a<l;a++){if(e.settings[a].nTable==this){if(f===b||f.bRetrieve)return e.settings[a].oInstance;if(f.bDestroy){e.settings[a].oInstance.fnDestroy();break}else{oa(e.settings[a],0,"Cannot reinitialise DataTable.\n\nTo retrieve the DataTables object for this table, pass no arguments or see the docs for bRetrieve and bDestroy");
return}}if(e.settings[a].sTableId==this.id){e.settings.splice(a,1);break}}if(null===m||""===m)this.id=m="DataTables_Table_"+e.ext._oExternConfig.iNextUnique++;var q=d.extend(!0,{},e.models.oSettings,{nTable:this,oApi:va.oApi,oInit:f,sDestroyWidth:d(this).width(),sInstance:m,sTableId:m});e.settings.push(q);q.oInstance=1===va.length?va:d(this).dataTable();f||(f={});f.oLanguage&&db(f.oLanguage);f=Db(d.extend(!0,{},e.defaults),f);S(q.oFeatures,f,"bPaginate");S(q.oFeatures,f,"bLengthChange");S(q.oFeatures,
f,"bFilter");S(q.oFeatures,f,"bSort");S(q.oFeatures,f,"bInfo");S(q.oFeatures,f,"bProcessing");S(q.oFeatures,f,"bAutoWidth");S(q.oFeatures,f,"bSortClasses");S(q.oFeatures,f,"bServerSide");S(q.oFeatures,f,"bDeferRender");S(q.oScroll,f,"sScrollX","sX");S(q.oScroll,f,"sScrollXInner","sXInner");S(q.oScroll,f,"sScrollY","sY");S(q.oScroll,f,"bScrollCollapse","bCollapse");S(q.oScroll,f,"bScrollInfinite","bInfinite");S(q.oScroll,f,"iScrollLoadGap","iLoadGap");S(q.oScroll,f,"bScrollAutoCss","bAutoCss");S(q,
f,"asStripeClasses");S(q,f,"asStripClasses","asStripeClasses");S(q,f,"fnServerData");S(q,f,"fnFormatNumber");S(q,f,"sServerMethod");S(q,f,"aaSorting");S(q,f,"aaSortingFixed");S(q,f,"aLengthMenu");S(q,f,"sPaginationType");S(q,f,"sAjaxSource");S(q,f,"sAjaxDataProp");S(q,f,"iCookieDuration");S(q,f,"sCookiePrefix");S(q,f,"sDom");S(q,f,"bSortCellsTop");S(q,f,"iTabIndex");S(q,f,"oSearch","oPreviousSearch");S(q,f,"aoSearchCols","aoPreSearchCols");S(q,f,"iDisplayLength","_iDisplayLength");S(q,f,"bJQueryUI",
"bJUI");S(q,f,"fnCookieCallback");S(q,f,"fnStateLoad");S(q,f,"fnStateSave");S(q.oLanguage,f,"fnInfoCallback");M(q,"aoDrawCallback",f.fnDrawCallback,"user");M(q,"aoServerParams",f.fnServerParams,"user");M(q,"aoStateSaveParams",f.fnStateSaveParams,"user");M(q,"aoStateLoadParams",f.fnStateLoadParams,"user");M(q,"aoStateLoaded",f.fnStateLoaded,"user");M(q,"aoRowCallback",f.fnRowCallback,"user");M(q,"aoRowCreatedCallback",f.fnCreatedRow,"user");M(q,"aoHeaderCallback",f.fnHeaderCallback,"user");M(q,"aoFooterCallback",
f.fnFooterCallback,"user");M(q,"aoInitComplete",f.fnInitComplete,"user");M(q,"aoPreDrawCallback",f.fnPreDrawCallback,"user");q.oFeatures.bServerSide&&q.oFeatures.bSort&&q.oFeatures.bSortClasses?M(q,"aoDrawCallback",Ka,"server_side_sort_classes"):q.oFeatures.bDeferRender&&M(q,"aoDrawCallback",Ka,"defer_sort_classes");f.bJQueryUI?(d.extend(q.oClasses,e.ext.oJUIClasses),f.sDom===e.defaults.sDom&&"lfrtip"===e.defaults.sDom&&(q.sDom='<"H"lfr>t<"F"ip>')):d.extend(q.oClasses,e.ext.oStdClasses);d(this).addClass(q.oClasses.sTable);
if(""!==q.oScroll.sX||""!==q.oScroll.sY)q.oScroll.iBarWidth=Cb();q.iInitDisplayStart===b&&(q.iInitDisplayStart=f.iDisplayStart,q._iDisplayStart=f.iDisplayStart);f.bStateSave&&(q.oFeatures.bStateSave=!0,Ba(q,f),M(q,"aoDrawCallback",jb,"state_save"));null!==f.iDeferLoading&&(q.bDeferLoading=!0,a=d.isArray(f.iDeferLoading),q._iRecordsDisplay=a?f.iDeferLoading[0]:f.iDeferLoading,q._iRecordsTotal=a?f.iDeferLoading[1]:f.iDeferLoading);null!==f.aaData&&(r=!0);""!==f.oLanguage.sUrl?(q.oLanguage.sUrl=f.oLanguage.sUrl,
d.getJSON(q.oLanguage.sUrl,null,function(a){db(a);d.extend(!0,q.oLanguage,f.oLanguage,a);Ab(q)}),p=!0):d.extend(!0,q.oLanguage,f.oLanguage);null===f.asStripeClasses&&(q.asStripeClasses=[q.oClasses.sStripeOdd,q.oClasses.sStripeEven]);l=q.asStripeClasses.length;q.asDestroyStripes=[];if(l){m=!1;n=d(this).children("tbody").children("tr:lt("+l+")");for(a=0;a<l;a++)n.hasClass(q.asStripeClasses[a])&&(m=!0,q.asDestroyStripes.push(q.asStripeClasses[a]));m&&n.removeClass(q.asStripeClasses.join(" "))}m=[];a=
this.getElementsByTagName("thead");0!==a.length&&(la(q.aoHeader,a[0]),m=L(q));if(null===f.aoColumns)for(n=[],a=0,l=m.length;a<l;a++)n.push(null);else n=f.aoColumns;a=0;for(l=n.length;a<l;a++)f.saved_aoColumns!==b&&f.saved_aoColumns.length==l&&(null===n[a]&&(n[a]={}),n[a].bVisible=f.saved_aoColumns[a].bVisible),g(q,m?m[a]:null);B(q,f.aoColumnDefs,n,function(a,b){h(q,a,b)});a=0;for(l=q.aaSorting.length;a<l;a++){q.aaSorting[a][0]>=q.aoColumns.length&&(q.aaSorting[a][0]=0);var v=q.aoColumns[q.aaSorting[a][0]];
q.aaSorting[a][2]===b&&(q.aaSorting[a][2]=0);f.aaSorting===b&&q.saved_aaSorting===b&&(q.aaSorting[a][1]=v.asSorting[0]);m=0;for(n=v.asSorting.length;m<n;m++)if(q.aaSorting[a][1]==v.asSorting[m]){q.aaSorting[a][2]=m;break}}Ka(q);Ra(q);a=d(this).children("caption").each(function(){this._captionSide=d(this).css("caption-side")});l=d(this).children("thead");0===l.length&&(l=[c.createElement("thead")],this.appendChild(l[0]));q.nTHead=l[0];l=d(this).children("tbody");0===l.length&&(l=[c.createElement("tbody")],
this.appendChild(l[0]));q.nTBody=l[0];q.nTBody.setAttribute("role","alert");q.nTBody.setAttribute("aria-live","polite");q.nTBody.setAttribute("aria-relevant","all");l=d(this).children("tfoot");0===l.length&&0<a.length&&(""!==q.oScroll.sX||""!==q.oScroll.sY)&&(l=[c.createElement("tfoot")],this.appendChild(l[0]));0<l.length&&(q.nTFoot=l[0],la(q.aoFooter,q.nTFoot));if(r)for(a=0;a<f.aaData.length;a++)I(q,f.aaData[a]);else F(q);q.aiDisplay=q.aiDisplayMaster.slice();q.bInitialised=!0;!1===p&&Ab(q)}});va=
null;return this};e.fnVersionCheck=function(a){var b=function(a,b){for(;a.length<b;)a+="0";return a},d=e.ext.sVersion.split(".");a=a.split(".");for(var c="",m="",p=0,q=a.length;p<q;p++)c+=b(d[p],3),m+=b(a[p],3);return parseInt(c,10)>=parseInt(m,10)};e.fnIsDataTable=function(a){for(var b=e.settings,d=0;d<b.length;d++)if(b[d].nTable===a||b[d].nScrollHead===a||b[d].nScrollFoot===a)return!0;return!1};e.fnTables=function(a){var b=[];jQuery.each(e.settings,function(c,e){(!a||!0===a&&d(e.nTable).is(":visible"))&&
b.push(e.nTable)});return b};e.version="1.9.4";e.settings=[];e.models={};e.models.ext={afnFiltering:[],afnSortData:[],aoFeatures:[],aTypes:[],fnVersionCheck:e.fnVersionCheck,iApiIndex:0,ofnSearch:{},oApi:{},oStdClasses:{},oJUIClasses:{},oPagination:{},oSort:{},sVersion:e.version,sErrMode:"alert",_oExternConfig:{iNextUnique:0}};e.models.oSearch={bCaseInsensitive:!0,sSearch:"",bRegex:!1,bSmart:!0};e.models.oRow={nTr:null,_aData:[],_aSortData:[],_anHidden:[],_sRowStripe:""};e.models.oColumn={aDataSort:null,
asSorting:null,bSearchable:null,bSortable:null,bUseRendered:null,bVisible:null,_bAutoType:!0,fnCreatedCell:null,fnGetData:null,fnRender:null,fnSetData:null,mData:null,mRender:null,nTh:null,nTf:null,sClass:null,sContentPadding:null,sDefaultContent:null,sName:null,sSortDataType:"std",sSortingClass:null,sSortingClassJUI:null,sTitle:null,sType:null,sWidth:null,sWidthOrig:null};e.defaults={aaData:null,aaSorting:[[0,"asc"]],aaSortingFixed:null,aLengthMenu:[10,25,50,100],aoColumns:null,aoColumnDefs:null,
aoSearchCols:[],asStripeClasses:null,bAutoWidth:!0,bDeferRender:!1,bDestroy:!1,bFilter:!0,bInfo:!0,bJQueryUI:!1,bLengthChange:!0,bPaginate:!0,bProcessing:!1,bRetrieve:!1,bScrollAutoCss:!0,bScrollCollapse:!1,bScrollInfinite:!1,bServerSide:!1,bSort:!0,bSortCellsTop:!1,bSortClasses:!0,bStateSave:!1,fnCookieCallback:null,fnCreatedRow:null,fnDrawCallback:null,fnFooterCallback:null,fnFormatNumber:function(a){if(1E3>a)return a;var b=a+"";a=b.split("");for(var d="",b=b.length,c=0;c<b;c++)0===c%3&&0!==c&&
(d=this.oLanguage.sInfoThousands+d),d=a[b-c-1]+d;return d},fnHeaderCallback:null,fnInfoCallback:null,fnInitComplete:null,fnPreDrawCallback:null,fnRowCallback:null,fnServerData:function(a,b,c,e){e.jqXHR=d.ajax({url:a,data:b,success:function(a){a.sError&&e.oApi._fnLog(e,0,a.sError);d(e.oInstance).trigger("xhr",[e,a]);c(a)},dataType:"json",cache:!1,type:e.sServerMethod,error:function(a,b,d){"parsererror"==b&&e.oApi._fnLog(e,0,"DataTables warning: JSON data from server could not be parsed. This is caused by a JSON formatting error.")}})},
fnServerParams:null,fnStateLoad:function(a){a=this.oApi._fnReadCookie(a.sCookiePrefix+a.sInstance);var b;try{b="function"===typeof d.parseJSON?d.parseJSON(a):eval("("+a+")")}catch(c){b=null}return b},fnStateLoadParams:null,fnStateLoaded:null,fnStateSave:function(a,b){this.oApi._fnCreateCookie(a.sCookiePrefix+a.sInstance,this.oApi._fnJsonString(b),a.iCookieDuration,a.sCookiePrefix,a.fnCookieCallback)},fnStateSaveParams:null,iCookieDuration:7200,iDeferLoading:null,iDisplayLength:10,iDisplayStart:0,
iScrollLoadGap:100,iTabIndex:0,oLanguage:{oAria:{sSortAscending:": activate to sort column ascending",sSortDescending:": activate to sort column descending"},oPaginate:{sFirst:"First",sLast:"Last",sNext:"Next",sPrevious:"Previous"},sEmptyTable:"No data available in table",sInfo:"Showing _START_ to _END_ of _TOTAL_ entries",sInfoEmpty:"Showing 0 to 0 of 0 entries",sInfoFiltered:"(filtered from _MAX_ total entries)",sInfoPostFix:"",sInfoThousands:",",sLengthMenu:"Show _MENU_ entries",sLoadingRecords:"Loading...",
sProcessing:"Processing...",sSearch:"Search:",sUrl:"",sZeroRecords:"No matching records found"},oSearch:d.extend({},e.models.oSearch),sAjaxDataProp:"aaData",sAjaxSource:null,sCookiePrefix:"SpryMedia_DataTables_",sDom:"lfrtip",sPaginationType:"two_button",sScrollX:"",sScrollXInner:"",sScrollY:"",sServerMethod:"GET"};e.defaults.columns={aDataSort:null,asSorting:["asc","desc"],bSearchable:!0,bSortable:!0,bUseRendered:!0,bVisible:!0,fnCreatedCell:null,fnRender:null,iDataSort:-1,mData:null,mRender:null,
sCellType:"td",sClass:"",sContentPadding:"",sDefaultContent:null,sName:"",sSortDataType:"std",sTitle:null,sType:null,sWidth:null};e.models.oSettings={oFeatures:{bAutoWidth:null,bDeferRender:null,bFilter:null,bInfo:null,bLengthChange:null,bPaginate:null,bProcessing:null,bServerSide:null,bSort:null,bSortClasses:null,bStateSave:null},oScroll:{bAutoCss:null,bCollapse:null,bInfinite:null,iBarWidth:0,iLoadGap:null,sX:null,sXInner:null,sY:null},oLanguage:{fnInfoCallback:null},oBrowser:{bScrollOversize:!1},
aanFeatures:[],aoData:[],aiDisplay:[],aiDisplayMaster:[],aoColumns:[],aoHeader:[],aoFooter:[],asDataSearch:[],oPreviousSearch:{},aoPreSearchCols:[],aaSorting:null,aaSortingFixed:null,asStripeClasses:null,asDestroyStripes:[],sDestroyWidth:0,aoRowCallback:[],aoHeaderCallback:[],aoFooterCallback:[],aoDrawCallback:[],aoRowCreatedCallback:[],aoPreDrawCallback:[],aoInitComplete:[],aoStateSaveParams:[],aoStateLoadParams:[],aoStateLoaded:[],sTableId:"",nTable:null,nTHead:null,nTFoot:null,nTBody:null,nTableWrapper:null,
bDeferLoading:!1,bInitialised:!1,aoOpenRows:[],sDom:null,sPaginationType:"two_button",iCookieDuration:0,sCookiePrefix:"",fnCookieCallback:null,aoStateSave:[],aoStateLoad:[],oLoadedState:null,sAjaxSource:null,sAjaxDataProp:null,bAjaxDataGet:!0,jqXHR:null,fnServerData:null,aoServerParams:[],sServerMethod:null,fnFormatNumber:null,aLengthMenu:null,iDraw:0,bDrawing:!1,iDrawError:-1,_iDisplayLength:10,_iDisplayStart:0,_iDisplayEnd:10,_iRecordsTotal:0,_iRecordsDisplay:0,bJUI:null,oClasses:{},bFiltered:!1,
bSorted:!1,bSortCellsTop:null,oInit:null,aoDestroyCallback:[],fnRecordsTotal:function(){return this.oFeatures.bServerSide?parseInt(this._iRecordsTotal,10):this.aiDisplayMaster.length},fnRecordsDisplay:function(){return this.oFeatures.bServerSide?parseInt(this._iRecordsDisplay,10):this.aiDisplay.length},fnDisplayEnd:function(){return this.oFeatures.bServerSide?!1===this.oFeatures.bPaginate||-1==this._iDisplayLength?this._iDisplayStart+this.aiDisplay.length:Math.min(this._iDisplayStart+this._iDisplayLength,
this._iRecordsDisplay):this._iDisplayEnd},oInstance:null,sInstance:null,iTabIndex:0,nScrollHead:null,nScrollFoot:null};e.ext=d.extend(!0,{},e.models.ext);d.extend(e.ext.oStdClasses,{sTable:"dataTable",sPagePrevEnabled:"paginate_enabled_previous",sPagePrevDisabled:"paginate_disabled_previous",sPageNextEnabled:"paginate_enabled_next",sPageNextDisabled:"paginate_disabled_next",sPageJUINext:"",sPageJUIPrev:"",sPageButton:"paginate_button",sPageButtonActive:"paginate_active",sPageButtonStaticDisabled:"paginate_button paginate_button_disabled",
sPageFirst:"first",sPagePrevious:"previous",sPageNext:"next",sPageLast:"last",sStripeOdd:"odd",sStripeEven:"even",sRowEmpty:"dataTables_empty",sWrapper:"dataTables_wrapper",sFilter:"dataTables_filter",sInfo:"dataTables_info",sPaging:"dataTables_paginate paging_",sLength:"dataTables_length",sProcessing:"dataTables_processing",sSortAsc:"sorting_asc",sSortDesc:"sorting_desc",sSortable:"sorting",sSortableAsc:"sorting_asc_disabled",sSortableDesc:"sorting_desc_disabled",sSortableNone:"sorting_disabled",
sSortColumn:"sorting_",sSortJUIAsc:"",sSortJUIDesc:"",sSortJUI:"",sSortJUIAscAllowed:"",sSortJUIDescAllowed:"",sSortJUIWrapper:"",sSortIcon:"",sScrollWrapper:"dataTables_scroll",sScrollHead:"dataTables_scrollHead",sScrollHeadInner:"dataTables_scrollHeadInner",sScrollBody:"dataTables_scrollBody",sScrollFoot:"dataTables_scrollFoot",sScrollFootInner:"dataTables_scrollFootInner",sFooterTH:"",sJUIHeader:"",sJUIFooter:""});d.extend(e.ext.oJUIClasses,e.ext.oStdClasses,{sPagePrevEnabled:"fg-button ui-button ui-state-default ui-corner-left",
sPagePrevDisabled:"fg-button ui-button ui-state-default ui-corner-left ui-state-disabled",sPageNextEnabled:"fg-button ui-button ui-state-default ui-corner-right",sPageNextDisabled:"fg-button ui-button ui-state-default ui-corner-right ui-state-disabled",sPageJUINext:"ui-icon ui-icon-circle-arrow-e",sPageJUIPrev:"ui-icon ui-icon-circle-arrow-w",sPageButton:"fg-button ui-button ui-state-default",sPageButtonActive:"fg-button ui-button ui-state-default ui-state-disabled",sPageButtonStaticDisabled:"fg-button ui-button ui-state-default ui-state-disabled",
sPageFirst:"first ui-corner-tl ui-corner-bl",sPageLast:"last ui-corner-tr ui-corner-br",sPaging:"dataTables_paginate fg-buttonset ui-buttonset fg-buttonset-multi ui-buttonset-multi paging_",sSortAsc:"ui-state-default",sSortDesc:"ui-state-default",sSortable:"ui-state-default",sSortableAsc:"ui-state-default",sSortableDesc:"ui-state-default",sSortableNone:"ui-state-default",sSortJUIAsc:"css_right ui-icon ui-icon-triangle-1-n",sSortJUIDesc:"css_right ui-icon ui-icon-triangle-1-s",sSortJUI:"css_right ui-icon ui-icon-carat-2-n-s",
sSortJUIAscAllowed:"css_right ui-icon ui-icon-carat-1-n",sSortJUIDescAllowed:"css_right ui-icon ui-icon-carat-1-s",sSortJUIWrapper:"DataTables_sort_wrapper",sSortIcon:"DataTables_sort_icon",sScrollHead:"dataTables_scrollHead ui-state-default",sScrollFoot:"dataTables_scrollFoot ui-state-default",sFooterTH:"ui-state-default",sJUIHeader:"fg-toolbar ui-toolbar ui-widget-header ui-corner-tl ui-corner-tr ui-helper-clearfix",sJUIFooter:"fg-toolbar ui-toolbar ui-widget-header ui-corner-bl ui-corner-br ui-helper-clearfix"});
d.extend(e.ext.oPagination,{two_button:{fnInit:function(a,b,c){var e=a.oLanguage.oPaginate,m=function(b){a.oApi._fnPageChange(a,b.data.action)&&c(a)},e=a.bJUI?'<a class="'+a.oClasses.sPagePrevDisabled+'" tabindex="'+a.iTabIndex+'" role="button"><span class="'+a.oClasses.sPageJUIPrev+'"></span></a><a class="'+a.oClasses.sPageNextDisabled+'" tabindex="'+a.iTabIndex+'" role="button"><span class="'+a.oClasses.sPageJUINext+'"></span></a>':'<a class="'+a.oClasses.sPagePrevDisabled+'" tabindex="'+a.iTabIndex+
'" role="button">'+e.sPrevious+'</a><a class="'+a.oClasses.sPageNextDisabled+'" tabindex="'+a.iTabIndex+'" role="button">'+e.sNext+"</a>";d(b).append(e);var p=d("a",b),e=p[0],p=p[1];a.oApi._fnBindAction(e,{action:"previous"},m);a.oApi._fnBindAction(p,{action:"next"},m);a.aanFeatures.p||(b.id=a.sTableId+"_paginate",e.id=a.sTableId+"_previous",p.id=a.sTableId+"_next",e.setAttribute("aria-controls",a.sTableId),p.setAttribute("aria-controls",a.sTableId))},fnUpdate:function(a,b){if(a.aanFeatures.p)for(var d=
a.oClasses,c=a.aanFeatures.p,e,p=0,q=c.length;p<q;p++)if(e=c[p].firstChild)e.className=0===a._iDisplayStart?d.sPagePrevDisabled:d.sPagePrevEnabled,e=e.nextSibling,e.className=a.fnDisplayEnd()==a.fnRecordsDisplay()?d.sPageNextDisabled:d.sPageNextEnabled}},iFullNumbersShowPages:5,full_numbers:{fnInit:function(a,b,c){var e=a.oLanguage.oPaginate,m=a.oClasses,p=function(b){a.oApi._fnPageChange(a,b.data.action)&&c(a)};d(b).append('<a  tabindex="'+a.iTabIndex+'" class="'+m.sPageButton+" "+m.sPageFirst+'">'+
e.sFirst+'</a><a  tabindex="'+a.iTabIndex+'" class="'+m.sPageButton+" "+m.sPagePrevious+'">'+e.sPrevious+'</a><span></span><a tabindex="'+a.iTabIndex+'" class="'+m.sPageButton+" "+m.sPageNext+'">'+e.sNext+'</a><a tabindex="'+a.iTabIndex+'" class="'+m.sPageButton+" "+m.sPageLast+'">'+e.sLast+"</a>");var q=d("a",b),e=q[0],m=q[1],t=q[2],q=q[3];a.oApi._fnBindAction(e,{action:"first"},p);a.oApi._fnBindAction(m,{action:"previous"},p);a.oApi._fnBindAction(t,{action:"next"},p);a.oApi._fnBindAction(q,{action:"last"},
p);a.aanFeatures.p||(b.id=a.sTableId+"_paginate",e.id=a.sTableId+"_first",m.id=a.sTableId+"_previous",t.id=a.sTableId+"_next",q.id=a.sTableId+"_last")},fnUpdate:function(a,b){if(a.aanFeatures.p){var c=e.ext.oPagination.iFullNumbersShowPages,l=Math.floor(c/2),m=Math.ceil(a.fnRecordsDisplay()/a._iDisplayLength),p=Math.ceil(a._iDisplayStart/a._iDisplayLength)+1,q="",t,y=a.oClasses,u,C=a.aanFeatures.p,B=function(d){a.oApi._fnBindAction(this,{page:d+t-1},function(d){a.oApi._fnPageChange(a,d.data.page);
b(a);d.preventDefault()})};-1===a._iDisplayLength?p=l=t=1:m<c?(t=1,l=m):p<=l?(t=1,l=c):p>=m-l?(t=m-c+1,l=m):(t=p-Math.ceil(c/2)+1,l=t+c-1);for(c=t;c<=l;c++)q+=p!==c?'<a tabindex="'+a.iTabIndex+'" class="'+y.sPageButton+'">'+a.fnFormatNumber(c)+"</a>":'<a tabindex="'+a.iTabIndex+'" class="'+y.sPageButtonActive+'">'+a.fnFormatNumber(c)+"</a>";c=0;for(l=C.length;c<l;c++)u=C[c],u.hasChildNodes()&&(d("span:eq(0)",u).html(q).children("a").each(B),u=u.getElementsByTagName("a"),u=[u[0],u[1],u[u.length-2],
u[u.length-1]],d(u).removeClass(y.sPageButton+" "+y.sPageButtonActive+" "+y.sPageButtonStaticDisabled),d([u[0],u[1]]).addClass(1==p?y.sPageButtonStaticDisabled:y.sPageButton),d([u[2],u[3]]).addClass(0===m||p===m||-1===a._iDisplayLength?y.sPageButtonStaticDisabled:y.sPageButton))}}}});d.extend(e.ext.oSort,{"string-pre":function(a){"string"!=typeof a&&(a=null!==a&&a.toString?a.toString():"");return a.toLowerCase()},"string-asc":function(a,b){return a<b?-1:a>b?1:0},"string-desc":function(a,b){return a<
b?1:a>b?-1:0},"html-pre":function(a){return a.replace(/<.*?>/g,"").toLowerCase()},"html-asc":function(a,b){return a<b?-1:a>b?1:0},"html-desc":function(a,b){return a<b?1:a>b?-1:0},"date-pre":function(a){a=Date.parse(a);if(isNaN(a)||""===a)a=Date.parse("01/01/1970 00:00:00");return a},"date-asc":function(a,b){return a-b},"date-desc":function(a,b){return b-a},"numeric-pre":function(a){return"-"==a||""===a?0:1*a},"numeric-asc":function(a,b){return a-b},"numeric-desc":function(a,b){return b-a}});d.extend(e.ext.aTypes,
[function(a){if("number"===typeof a)return"numeric";if("string"!==typeof a)return null;var b,d=!1;b=a.charAt(0);if(-1=="0123456789-".indexOf(b))return null;for(var c=1;c<a.length;c++){b=a.charAt(c);if(-1=="0123456789.".indexOf(b))return null;if("."==b){if(d)return null;d=!0}}return"numeric"},function(a){var b=Date.parse(a);return null!==b&&!isNaN(b)||"string"===typeof a&&0===a.length?"date":null},function(a){return"string"===typeof a&&-1!=a.indexOf("<")&&-1!=a.indexOf(">")?"html":null}]);d.fn.DataTable=
e;d.fn.dataTable=e;d.fn.dataTableSettings=e.settings;d.fn.dataTableExt=e.ext})})(window,document);
var ZeroClipboard_TableTools={version:"1.0.4-TableTools2",clients:{},moviePath:"",nextId:1,$:function(a){"string"==typeof a&&(a=document.getElementById(a));a.addClass||(a.hide=function(){this.style.display="none"},a.show=function(){this.style.display=""},a.addClass=function(a){this.removeClass(a);this.className+=" "+a},a.removeClass=function(a){this.className=this.className.replace(new RegExp("\\s*"+a+"\\s*")," ").replace(/^\s+/,"").replace(/\s+$/,"")},a.hasClass=function(a){return!!this.className.match(new RegExp("\\s*"+
a+"\\s*"))});return a},setMoviePath:function(a){this.moviePath=a},dispatch:function(a,c,b){(a=this.clients[a])&&a.receiveEvent(c,b)},register:function(a,c){this.clients[a]=c},getDOMObjectPosition:function(a){var c={left:0,top:0,width:a.width?a.width:a.offsetWidth,height:a.height?a.height:a.offsetHeight};""!=a.style.width&&(c.width=a.style.width.replace("px",""));""!=a.style.height&&(c.height=a.style.height.replace("px",""));for(;a;)c.left+=a.offsetLeft,c.top+=a.offsetTop,a=a.offsetParent;return c},
Client:function(a){this.handlers={};this.id=ZeroClipboard_TableTools.nextId++;this.movieId="ZeroClipboard_TableToolsMovie_"+this.id;ZeroClipboard_TableTools.register(this.id,this);a&&this.glue(a)}};
ZeroClipboard_TableTools.Client.prototype={id:0,ready:!1,movie:null,clipText:"",fileName:"",action:"copy",handCursorEnabled:!0,cssEffects:!0,handlers:null,sized:!1,glue:function(a,c){this.domElement=ZeroClipboard_TableTools.$(a);var b=99;this.domElement.style.zIndex&&(b=parseInt(this.domElement.style.zIndex)+1);var d=ZeroClipboard_TableTools.getDOMObjectPosition(this.domElement);this.div=document.createElement("div");var e=this.div.style;e.position="absolute";e.left="0px";e.top="0px";e.width=d.width+
"px";e.height=d.height+"px";e.zIndex=b;"undefined"!=typeof c&&""!=c&&(this.div.title=c);0!=d.width&&0!=d.height&&(this.sized=!0);this.domElement&&(this.domElement.appendChild(this.div),this.div.innerHTML=this.getHTML(d.width,d.height))},positionElement:function(){var a=ZeroClipboard_TableTools.getDOMObjectPosition(this.domElement),c=this.div.style;c.position="absolute";c.width=a.width+"px";c.height=a.height+"px";0!=a.width&&0!=a.height&&(this.sized=!0,c=this.div.childNodes[0],c.width=a.width,c.height=
a.height)},getHTML:function(a,c){var b="",d="id="+this.id+"&width="+a+"&height="+c;if(navigator.userAgent.match(/MSIE/))var e=location.href.match(/^https/i)?"https://":"http://",b=b+('<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" codebase="'+e+'download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=10,0,0,0" width="'+a+'" height="'+c+'" id="'+this.movieId+'" align="middle"><param name="allowScriptAccess" value="always" /><param name="allowFullScreen" value="false" /><param name="movie" value="'+
ZeroClipboard_TableTools.moviePath+'" /><param name="loop" value="false" /><param name="menu" value="false" /><param name="quality" value="best" /><param name="bgcolor" value="#ffffff" /><param name="flashvars" value="'+d+'"/><param name="wmode" value="transparent"/></object>');else b+='<embed id="'+this.movieId+'" src="'+ZeroClipboard_TableTools.moviePath+'" loop="false" menu="false" quality="best" bgcolor="#ffffff" width="'+a+'" height="'+c+'" name="'+this.movieId+'" align="middle" allowScriptAccess="always" allowFullScreen="false" type="application/x-shockwave-flash" pluginspage="http://www.macromedia.com/go/getflashplayer" flashvars="'+
d+'" wmode="transparent" />';return b},hide:function(){this.div&&(this.div.style.left="-2000px")},show:function(){this.reposition()},destroy:function(){if(this.domElement&&this.div){this.hide();this.div.innerHTML="";var a=document.getElementsByTagName("body")[0];try{a.removeChild(this.div)}catch(c){}this.div=this.domElement=null}},reposition:function(a){a&&((this.domElement=ZeroClipboard_TableTools.$(a))||this.hide());if(this.domElement&&this.div){a=ZeroClipboard_TableTools.getDOMObjectPosition(this.domElement);
var c=this.div.style;c.left=""+a.left+"px";c.top=""+a.top+"px"}},clearText:function(){this.clipText="";this.ready&&this.movie.clearText()},appendText:function(a){this.clipText+=a;this.ready&&this.movie.appendText(a)},setText:function(a){this.clipText=a;this.ready&&this.movie.setText(a)},setCharSet:function(a){this.charSet=a;this.ready&&this.movie.setCharSet(a)},setBomInc:function(a){this.incBom=a;this.ready&&this.movie.setBomInc(a)},setFileName:function(a){this.fileName=a;this.ready&&this.movie.setFileName(a)},
setAction:function(a){this.action=a;this.ready&&this.movie.setAction(a)},addEventListener:function(a,c){a=a.toString().toLowerCase().replace(/^on/,"");this.handlers[a]||(this.handlers[a]=[]);this.handlers[a].push(c)},setHandCursor:function(a){this.handCursorEnabled=a;this.ready&&this.movie.setHandCursor(a)},setCSSEffects:function(a){this.cssEffects=!!a},receiveEvent:function(a,c){a=a.toString().toLowerCase().replace(/^on/,"");switch(a){case "load":this.movie=document.getElementById(this.movieId);
if(!this.movie){var b=this;setTimeout(function(){b.receiveEvent("load",null)},1);return}if(!this.ready&&navigator.userAgent.match(/Firefox/)&&navigator.userAgent.match(/Windows/)){b=this;setTimeout(function(){b.receiveEvent("load",null)},100);this.ready=!0;return}this.ready=!0;this.movie.clearText();this.movie.appendText(this.clipText);this.movie.setFileName(this.fileName);this.movie.setAction(this.action);this.movie.setCharSet(this.charSet);this.movie.setBomInc(this.incBom);this.movie.setHandCursor(this.handCursorEnabled);
break;case "mouseover":this.domElement&&this.cssEffects&&this.recoverActive&&this.domElement.addClass("active");break;case "mouseout":this.domElement&&this.cssEffects&&(this.recoverActive=!1,this.domElement.hasClass("active")&&(this.domElement.removeClass("active"),this.recoverActive=!0));break;case "mousedown":this.domElement&&this.cssEffects&&this.domElement.addClass("active");break;case "mouseup":this.domElement&&this.cssEffects&&(this.domElement.removeClass("active"),this.recoverActive=!1)}if(this.handlers[a])for(var d=
0,e=this.handlers[a].length;d<e;d++){var f=this.handlers[a][d];if("function"==typeof f)f(this,c);else if("object"==typeof f&&2==f.length)f[0][f[1]](this,c);else if("string"==typeof f)window[f](this,c)}}};var TableTools;
(function(a,c,b){TableTools=function(b,c){!this instanceof TableTools&&alert("Warning: TableTools must be initialised with the keyword 'new'");this.s={that:this,dt:b.fnSettings(),print:{saveStart:-1,saveLength:-1,saveScroll:-1,funcEnd:function(){}},buttonCounter:0,select:{type:"",selected:[],preRowSelect:null,postSelected:null,postDeselected:null,all:!1,selectedClass:""},custom:{},swfPath:"",buttonSet:[],master:!1,tags:{}};this.dom={container:null,table:null,print:{hidden:[],message:null},collection:{collection:null,
background:null}};this.classes=a.extend(!0,{},TableTools.classes);this.s.dt.bJUI&&a.extend(!0,this.classes,TableTools.classes_themeroller);this.fnSettings=function(){return this.s};"undefined"==typeof c&&(c={});this._fnConstruct(c);return this};TableTools.prototype={fnGetSelected:function(a){var b=[],c=this.s.dt.aoData,g=this.s.dt.aiDisplay,h;if(a)for(a=0,h=g.length;a<h;a++)c[g[a]]._DTTT_selected&&b.push(c[g[a]].nTr);else for(a=0,h=c.length;a<h;a++)c[a]._DTTT_selected&&b.push(c[a].nTr);return b},
fnGetSelectedData:function(){var a=[],b=this.s.dt.aoData,c,g;c=0;for(g=b.length;c<g;c++)b[c]._DTTT_selected&&a.push(this.s.dt.oInstance.fnGetData(c));return a},fnIsSelected:function(a){a=this.s.dt.oInstance.fnGetPosition(a);return!0===this.s.dt.aoData[a]._DTTT_selected?!0:!1},fnSelectAll:function(a){var b=this._fnGetMasterSettings();this._fnRowSelect(!0===a?b.dt.aiDisplay:b.dt.aoData)},fnSelectNone:function(a){this._fnGetMasterSettings();this._fnRowDeselect(this.fnGetSelected(a))},fnSelect:function(a){"single"==
this.s.select.type?(this.fnSelectNone(),this._fnRowSelect(a)):"multi"==this.s.select.type&&this._fnRowSelect(a)},fnDeselect:function(a){this._fnRowDeselect(a)},fnGetTitle:function(a){var c="";"undefined"!=typeof a.sTitle&&""!==a.sTitle?c=a.sTitle:(a=b.getElementsByTagName("title"),0<a.length&&(c=a[0].innerHTML));return 4>"\u00a1".toString().length?c.replace(/[^a-zA-Z0-9_\u00A1-\uFFFF\.,\-_ !\(\)]/g,""):c.replace(/[^a-zA-Z0-9_\.,\-_ !\(\)]/g,"")},fnCalcColRatios:function(a){var b=this.s.dt.aoColumns;
a=this._fnColumnTargets(a.mColumns);var c=[],g=0,h=0,l,m;l=0;for(m=a.length;l<m;l++)a[l]&&(g=b[l].nTh.offsetWidth,h+=g,c.push(g));l=0;for(m=c.length;l<m;l++)c[l]/=h;return c.join("\t")},fnGetTableData:function(a){if(this.s.dt)return this._fnGetDataTablesData(a)},fnSetText:function(a,b){this._fnFlashSetText(a,b)},fnResizeButtons:function(){for(var a in ZeroClipboard_TableTools.clients)if(a){var b=ZeroClipboard_TableTools.clients[a];"undefined"!=typeof b.domElement&&b.domElement.parentNode&&b.positionElement()}},
fnResizeRequired:function(){for(var a in ZeroClipboard_TableTools.clients)if(a){var b=ZeroClipboard_TableTools.clients[a];if("undefined"!=typeof b.domElement&&b.domElement.parentNode==this.dom.container&&!1===b.sized)return!0}return!1},fnPrint:function(a,b){void 0===b&&(b={});void 0===a||a?this._fnPrintStart(b):this._fnPrintEnd()},fnInfo:function(c,e){var f=b.createElement("div");f.className=this.classes.print.info;f.innerHTML=c;b.body.appendChild(f);setTimeout(function(){a(f).fadeOut("normal",function(){b.body.removeChild(f)})},
e)},_fnConstruct:function(a){var c=this;this._fnCustomiseSettings(a);this.dom.container=b.createElement(this.s.tags.container);this.dom.container.className=this.classes.container;"none"!=this.s.select.type&&this._fnRowSelectConfig();this._fnButtonDefinations(this.s.buttonSet,this.dom.container);this.s.dt.aoDestroyCallback.push({sName:"TableTools",fn:function(){c.dom.container.innerHTML=""}})},_fnCustomiseSettings:function(b){"undefined"==typeof this.s.dt._TableToolsInit&&(this.s.master=!0,this.s.dt._TableToolsInit=
!0);this.dom.table=this.s.dt.nTable;this.s.custom=a.extend({},TableTools.DEFAULTS,b);this.s.swfPath=this.s.custom.sSwfPath;"undefined"!=typeof ZeroClipboard_TableTools&&(ZeroClipboard_TableTools.moviePath=this.s.swfPath);this.s.select.type=this.s.custom.sRowSelect;this.s.select.preRowSelect=this.s.custom.fnPreRowSelect;this.s.select.postSelected=this.s.custom.fnRowSelected;this.s.select.postDeselected=this.s.custom.fnRowDeselected;this.s.custom.sSelectedClass&&(this.classes.select.row=this.s.custom.sSelectedClass);
this.s.tags=this.s.custom.oTags;this.s.buttonSet=this.s.custom.aButtons},_fnButtonDefinations:function(b,c){for(var f,g=0,h=b.length;g<h;g++){if("string"==typeof b[g]){if("undefined"==typeof TableTools.BUTTONS[b[g]]){alert("TableTools: Warning - unknown button type: "+b[g]);continue}f=a.extend({},TableTools.BUTTONS[b[g]],!0)}else{if("undefined"==typeof TableTools.BUTTONS[b[g].sExtends]){alert("TableTools: Warning - unknown button type: "+b[g].sExtends);continue}f=a.extend({},TableTools.BUTTONS[b[g].sExtends],
!0);f=a.extend(f,b[g],!0)}c.appendChild(this._fnCreateButton(f,a(c).hasClass(this.classes.collection.container)))}},_fnCreateButton:function(a,b){var c=this._fnButtonBase(a,b);a.sAction.match(/flash/)?this._fnFlashConfig(c,a):"text"==a.sAction?this._fnTextConfig(c,a):"div"==a.sAction?this._fnTextConfig(c,a):"collection"==a.sAction&&(this._fnTextConfig(c,a),this._fnCollectionConfig(c,a));return c},_fnButtonBase:function(a,c){var f,g,h;c?(f="default"!==a.sTag?a.sTag:this.s.tags.collection.button,g=
"default"!==a.sLinerTag?a.sLiner:this.s.tags.collection.liner,h=this.classes.collection.buttons.normal):(f="default"!==a.sTag?a.sTag:this.s.tags.button,g="default"!==a.sLinerTag?a.sLiner:this.s.tags.liner,h=this.classes.buttons.normal);f=b.createElement(f);g=b.createElement(g);var l=this._fnGetMasterSettings();f.className=h+" "+a.sButtonClass;f.setAttribute("id","ToolTables_"+this.s.dt.sInstance+"_"+l.buttonCounter);f.appendChild(g);g.innerHTML=a.sButtonText;l.buttonCounter++;return f},_fnGetMasterSettings:function(){if(this.s.master)return this.s;
for(var a=TableTools._aInstances,b=0,c=a.length;b<c;b++)if(this.dom.table==a[b].s.dt.nTable)return a[b].s},_fnCollectionConfig:function(a,c){var f=b.createElement(this.s.tags.collection.container);f.style.display="none";f.className=this.classes.collection.container;c._collection=f;b.body.appendChild(f);this._fnButtonDefinations(c.aButtons,f)},_fnCollectionShow:function(d,e){var f=this,g=a(d).offset(),h=e._collection,l=g.left,g=g.top+a(d).outerHeight(),m=a(c).height(),p=a(b).height(),q=a(c).width(),
t=a(b).width();h.style.position="absolute";h.style.left=l+"px";h.style.top=g+"px";h.style.display="block";a(h).css("opacity",0);var y=b.createElement("div");y.style.position="absolute";y.style.left="0px";y.style.top="0px";y.style.height=(m>p?m:p)+"px";y.style.width=(q>t?q:t)+"px";y.className=this.classes.collection.background;a(y).css("opacity",0);b.body.appendChild(y);b.body.appendChild(h);m=a(h).outerWidth();q=a(h).outerHeight();l+m>t&&(h.style.left=t-m+"px");g+q>p&&(h.style.top=g-q-a(d).outerHeight()+
"px");this.dom.collection.collection=h;this.dom.collection.background=y;setTimeout(function(){a(h).animate({opacity:1},500);a(y).animate({opacity:.25},500)},10);this.fnResizeButtons();a(y).click(function(){f._fnCollectionHide.call(f,null,null)})},_fnCollectionHide:function(b,c){null!==c&&"collection"==c.sExtends||null===this.dom.collection.collection||(a(this.dom.collection.collection).animate({opacity:0},500,function(a){this.style.display="none"}),a(this.dom.collection.background).animate({opacity:0},
500,function(a){this.parentNode.removeChild(this)}),this.dom.collection.collection=null,this.dom.collection.background=null)},_fnRowSelectConfig:function(){if(this.s.master){var b=this,c=this.s.dt;a(c.nTable).addClass(this.classes.select.table);a("tr",c.nTBody).live("click",function(a){this.parentNode==c.nTBody&&null!==c.oInstance.fnGetData(this)&&(b.fnIsSelected(this)?b._fnRowDeselect(this,a):"single"==b.s.select.type?(b.fnSelectNone(),b._fnRowSelect(this,a)):"multi"==b.s.select.type&&b._fnRowSelect(this,
a))});c.oApi._fnCallbackReg(c,"aoRowCreatedCallback",function(f,g,h){c.aoData[h]._DTTT_selected&&a(f).addClass(b.classes.select.row)},"TableTools-SelectAll")}},_fnRowSelect:function(b,c){var f=this._fnSelectData(b),g=[],h,l;h=0;for(l=f.length;h<l;h++)f[h].nTr&&g.push(f[h].nTr);if(null===this.s.select.preRowSelect||this.s.select.preRowSelect.call(this,c,g,!0)){h=0;for(l=f.length;h<l;h++)f[h]._DTTT_selected=!0,f[h].nTr&&a(f[h].nTr).addClass(this.classes.select.row);null!==this.s.select.postSelected&&
this.s.select.postSelected.call(this,g);TableTools._fnEventDispatch(this,"select",g,!0)}},_fnRowDeselect:function(b,c){var f=this._fnSelectData(b),g=[],h,l;h=0;for(l=f.length;h<l;h++)f[h].nTr&&g.push(f[h].nTr);if(null===this.s.select.preRowSelect||this.s.select.preRowSelect.call(this,c,g,!1)){h=0;for(l=f.length;h<l;h++)f[h]._DTTT_selected=!1,f[h].nTr&&a(f[h].nTr).removeClass(this.classes.select.row);null!==this.s.select.postDeselected&&this.s.select.postDeselected.call(this,g);TableTools._fnEventDispatch(this,
"select",g,!1)}},_fnSelectData:function(a){var b=[],c,g,h;if(a.nodeName)c=this.s.dt.oInstance.fnGetPosition(a),b.push(this.s.dt.aoData[c]);else if("undefined"!==typeof a.length)for(g=0,h=a.length;g<h;g++)a[g].nodeName?(c=this.s.dt.oInstance.fnGetPosition(a[g]),b.push(this.s.dt.aoData[c])):"number"===typeof a[g]?b.push(this.s.dt.aoData[a[g]]):b.push(a[g]);else b.push(a);return b},_fnTextConfig:function(b,c){var f=this;null!==c.fnInit&&c.fnInit.call(this,b,c);""!==c.sToolTip&&(b.title=c.sToolTip);a(b).hover(function(){null!==
c.fnMouseover&&c.fnMouseover.call(this,b,c,null)},function(){null!==c.fnMouseout&&c.fnMouseout.call(this,b,c,null)});null!==c.fnSelect&&TableTools._fnEventListen(this,"select",function(a){c.fnSelect.call(f,b,c,a)});a(b).click(function(a){null!==c.fnClick&&c.fnClick.call(f,b,c,null);null!==c.fnComplete&&c.fnComplete.call(f,b,c,null,null);f._fnCollectionHide(b,c)})},_fnFlashConfig:function(a,b){var c=this,g=new ZeroClipboard_TableTools.Client;null!==b.fnInit&&b.fnInit.call(this,a,b);g.setHandCursor(!0);
"flash_save"==b.sAction?(g.setAction("save"),g.setCharSet("utf16le"==b.sCharSet?"UTF16LE":"UTF8"),g.setBomInc(b.bBomInc),g.setFileName(b.sFileName.replace("*",this.fnGetTitle(b)))):"flash_pdf"==b.sAction?(g.setAction("pdf"),g.setFileName(b.sFileName.replace("*",this.fnGetTitle(b)))):g.setAction("copy");g.addEventListener("mouseOver",function(h){null!==b.fnMouseover&&b.fnMouseover.call(c,a,b,g)});g.addEventListener("mouseOut",function(h){null!==b.fnMouseout&&b.fnMouseout.call(c,a,b,g)});g.addEventListener("mouseDown",
function(h){null!==b.fnClick&&b.fnClick.call(c,a,b,g)});g.addEventListener("complete",function(h,l){null!==b.fnComplete&&b.fnComplete.call(c,a,b,g,l);c._fnCollectionHide(a,b)});this._fnFlashGlue(g,a,b.sToolTip)},_fnFlashGlue:function(a,c,f){var g=this,h=c.getAttribute("id");b.getElementById(h)?a.glue(c,f):setTimeout(function(){g._fnFlashGlue(a,c,f)},100)},_fnFlashSetText:function(a,b){var c=this._fnChunkData(b,8192);a.clearText();for(var g=0,h=c.length;g<h;g++)a.appendText(c[g])},_fnColumnTargets:function(a){var b=
[],c=this.s.dt;if("object"==typeof a){i=0;for(iLen=c.aoColumns.length;i<iLen;i++)b.push(!1);i=0;for(iLen=a.length;i<iLen;i++)b[a[i]]=!0}else if("visible"==a)for(i=0,iLen=c.aoColumns.length;i<iLen;i++)b.push(c.aoColumns[i].bVisible?!0:!1);else if("hidden"==a)for(i=0,iLen=c.aoColumns.length;i<iLen;i++)b.push(c.aoColumns[i].bVisible?!1:!0);else if("sortable"==a)for(i=0,iLen=c.aoColumns.length;i<iLen;i++)b.push(c.aoColumns[i].bSortable?!0:!1);else for(i=0,iLen=c.aoColumns.length;i<iLen;i++)b.push(!0);
return b},_fnNewline:function(a){return"auto"==a.sNewLine?navigator.userAgent.match(/Windows/)?"\r\n":"\n":a.sNewLine},_fnGetDataTablesData:function(b){var c,f,g,h,l,m=[],p="",q=this.s.dt,t,y=new RegExp(b.sFieldBoundary,"g"),u=this._fnColumnTargets(b.mColumns);g="undefined"!=typeof b.bSelectedOnly?b.bSelectedOnly:!1;if(b.bHeader){l=[];c=0;for(f=q.aoColumns.length;c<f;c++)u[c]&&(p=q.aoColumns[c].sTitle.replace(/\n/g," ").replace(/<.*?>/g,"").replace(/^\s+|\s+$/g,""),p=this._fnHtmlDecode(p),l.push(this._fnBoundData(p,
b.sFieldBoundary,y)));m.push(l.join(b.sFieldSeperator))}var C=q.aiDisplay;h=this.fnGetSelected();if("none"!==this.s.select.type&&g&&0!==h.length)for(C=[],c=0,f=h.length;c<f;c++)C.push(q.oInstance.fnGetPosition(h[c]));g=0;for(h=C.length;g<h;g++){t=q.aoData[C[g]].nTr;l=[];c=0;for(f=q.aoColumns.length;c<f;c++)u[c]&&(p=q.oApi._fnGetCellData(q,C[g],c,"display"),b.fnCellRender?p=b.fnCellRender(p,c,t,C[g])+"":"string"==typeof p?(p=p.replace(/\n/g," "),p=p.replace(/<img.*?\s+alt\s*=\s*(?:"([^"]+)"|'([^']+)'|([^\s>]+)).*?>/gi,
"$1$2$3"),p=p.replace(/<.*?>/g,"")):p+="",p=p.replace(/^\s+/,"").replace(/\s+$/,""),p=this._fnHtmlDecode(p),l.push(this._fnBoundData(p,b.sFieldBoundary,y)));m.push(l.join(b.sFieldSeperator));b.bOpenRows&&(c=a.grep(q.aoOpenRows,function(a){return a.nParent===t}),1===c.length&&(p=this._fnBoundData(a("td",c[0].nTr).html(),b.sFieldBoundary,y),m.push(p)))}if(b.bFooter&&null!==q.nTFoot){l=[];c=0;for(f=q.aoColumns.length;c<f;c++)u[c]&&null!==q.aoColumns[c].nTf&&(p=q.aoColumns[c].nTf.innerHTML.replace(/\n/g,
" ").replace(/<.*?>/g,""),p=this._fnHtmlDecode(p),l.push(this._fnBoundData(p,b.sFieldBoundary,y)));m.push(l.join(b.sFieldSeperator))}return _sLastData=m.join(this._fnNewline(b))},_fnBoundData:function(a,b,c){return""===b?a:b+a.replace(c,b+b)+b},_fnChunkData:function(a,b){for(var c=[],g=a.length,h=0;h<g;h+=b)h+b<g?c.push(a.substring(h,h+b)):c.push(a.substring(h,g));return c},_fnHtmlDecode:function(a){if(-1===a.indexOf("&"))return a;var c=b.createElement("div");return a.replace(/&([^\s]*);/g,function(a,
b){if("#"===a.substr(1,1))return String.fromCharCode(Number(b.substr(1)));c.innerHTML=a;return c.childNodes[0].nodeValue})},_fnPrintStart:function(d){var e=this,f=this.s.dt;this._fnPrintHideNodes(f.nTable);this.s.print.saveStart=f._iDisplayStart;this.s.print.saveLength=f._iDisplayLength;d.bShowAll&&(f._iDisplayStart=0,f._iDisplayLength=-1,f.oApi._fnCalculateEnd(f),f.oApi._fnDraw(f));if(""!==f.oScroll.sX||""!==f.oScroll.sY)this._fnPrintScrollStart(f),a(this.s.dt.nTable).bind("draw.DTTT_Print",function(){e._fnPrintScrollStart(f)});
var g=f.aanFeatures,h;for(h in g)if("i"!=h&&"t"!=h&&1==h.length)for(var l=0,m=g[h].length;l<m;l++)this.dom.print.hidden.push({node:g[h][l],display:"block"}),g[h][l].style.display="none";a(b.body).addClass(this.classes.print.body);""!==d.sInfo&&this.fnInfo(d.sInfo,3E3);d.sMessage&&(this.dom.print.message=b.createElement("div"),this.dom.print.message.className=this.classes.print.message,this.dom.print.message.innerHTML=d.sMessage,b.body.insertBefore(this.dom.print.message,b.body.childNodes[0]));this.s.print.saveScroll=
a(c).scrollTop();c.scrollTo(0,0);a(b).bind("keydown.DTTT",function(a){27==a.keyCode&&(a.preventDefault(),e._fnPrintEnd.call(e,a))})},_fnPrintEnd:function(d){d=this.s.dt;var e=this.s.print,f=this.dom.print;this._fnPrintShowNodes();if(""!==d.oScroll.sX||""!==d.oScroll.sY)a(this.s.dt.nTable).unbind("draw.DTTT_Print"),this._fnPrintScrollEnd();c.scrollTo(0,e.saveScroll);null!==f.message&&(b.body.removeChild(f.message),f.message=null);a(b.body).removeClass("DTTT_Print");d._iDisplayStart=e.saveStart;d._iDisplayLength=
e.saveLength;d.oApi._fnCalculateEnd(d);d.oApi._fnDraw(d);a(b).unbind("keydown.DTTT")},_fnPrintScrollStart:function(){var b=this.s.dt;b.nScrollHead.getElementsByTagName("div")[0].getElementsByTagName("table");var c=b.nTable.parentNode,f=b.nTable.getElementsByTagName("thead");0<f.length&&b.nTable.removeChild(f[0]);null!==b.nTFoot&&(f=b.nTable.getElementsByTagName("tfoot"),0<f.length&&b.nTable.removeChild(f[0]));f=b.nTHead.cloneNode(!0);b.nTable.insertBefore(f,b.nTable.childNodes[0]);null!==b.nTFoot&&
(f=b.nTFoot.cloneNode(!0),b.nTable.insertBefore(f,b.nTable.childNodes[1]));""!==b.oScroll.sX&&(b.nTable.style.width=a(b.nTable).outerWidth()+"px",c.style.width=a(b.nTable).outerWidth()+"px",c.style.overflow="visible");""!==b.oScroll.sY&&(c.style.height=a(b.nTable).outerHeight()+"px",c.style.overflow="visible")},_fnPrintScrollEnd:function(){var a=this.s.dt,b=a.nTable.parentNode;""!==a.oScroll.sX&&(b.style.width=a.oApi._fnStringToCss(a.oScroll.sX),b.style.overflow="auto");""!==a.oScroll.sY&&(b.style.height=
a.oApi._fnStringToCss(a.oScroll.sY),b.style.overflow="auto")},_fnPrintShowNodes:function(){for(var a=this.dom.print.hidden,b=0,c=a.length;b<c;b++)a[b].node.style.display=a[b].display;a.splice(0,a.length)},_fnPrintHideNodes:function(b){for(var c=this.dom.print.hidden,f=b.parentNode,g=f.childNodes,h=0,l=g.length;h<l;h++)if(g[h]!=b&&1==g[h].nodeType){var m=a(g[h]).css("display");"none"!=m&&(c.push({node:g[h],display:m}),g[h].style.display="none")}"BODY"!=f.nodeName&&this._fnPrintHideNodes(f)}};TableTools._aInstances=
[];TableTools._aListeners=[];TableTools.fnGetMasters=function(){for(var a=[],b=0,c=TableTools._aInstances.length;b<c;b++)TableTools._aInstances[b].s.master&&a.push(TableTools._aInstances[b]);return a};TableTools.fnGetInstance=function(a){"object"!=typeof a&&(a=b.getElementById(a));for(var c=0,f=TableTools._aInstances.length;c<f;c++)if(TableTools._aInstances[c].s.master&&TableTools._aInstances[c].dom.table==a)return TableTools._aInstances[c];return null};TableTools._fnEventListen=function(a,b,c){TableTools._aListeners.push({that:a,
type:b,fn:c})};TableTools._fnEventDispatch=function(a,b,c,g){for(var h=TableTools._aListeners,l=0,m=h.length;l<m;l++)a.dom.table==h[l].that.dom.table&&h[l].type==b&&h[l].fn(c,g)};TableTools.buttonBase={sAction:"text",sTag:"default",sLinerTag:"default",sButtonClass:"DTTT_button_text",sButtonText:"Button text",sTitle:"",sToolTip:"",sCharSet:"utf8",bBomInc:!1,sFileName:"*.csv",sFieldBoundary:"",sFieldSeperator:"\t",sNewLine:"auto",mColumns:"all",bHeader:!0,bFooter:!0,bOpenRows:!1,bSelectedOnly:!1,fnMouseover:null,
fnMouseout:null,fnClick:null,fnSelect:null,fnComplete:null,fnInit:null,fnCellRender:null};TableTools.BUTTONS={csv:a.extend({},TableTools.buttonBase,{sAction:"flash_save",sButtonClass:"DTTT_button_csv",sButtonText:"CSV",sFieldBoundary:'"',sFieldSeperator:",",fnClick:function(a,b,c){this.fnSetText(c,this.fnGetTableData(b))}}),xls:a.extend({},TableTools.buttonBase,{sAction:"flash_save",sCharSet:"utf16le",bBomInc:!0,sButtonClass:"DTTT_button_xls",sButtonText:"Excel",fnClick:function(a,b,c){this.fnSetText(c,
this.fnGetTableData(b))}}),copy:a.extend({},TableTools.buttonBase,{sAction:"flash_copy",sButtonClass:"DTTT_button_copy",sButtonText:"Copy",fnClick:function(a,b,c){this.fnSetText(c,this.fnGetTableData(b))},fnComplete:function(a,b,c,g){a=g.split("\n").length;a=null===this.s.dt.nTFoot?a-1:a-2;this.fnInfo("<h6>Table copied</h6><p>Copied "+a+" row"+(1==a?"":"s")+" to the clipboard.</p>",1500)}}),pdf:a.extend({},TableTools.buttonBase,{sAction:"flash_pdf",sNewLine:"\n",sFileName:"*.pdf",sButtonClass:"DTTT_button_pdf",
sButtonText:"PDF",sPdfOrientation:"portrait",sPdfSize:"A4",sPdfMessage:"",fnClick:function(a,b,c){this.fnSetText(c,"title:"+this.fnGetTitle(b)+"\nmessage:"+b.sPdfMessage+"\ncolWidth:"+this.fnCalcColRatios(b)+"\norientation:"+b.sPdfOrientation+"\nsize:"+b.sPdfSize+"\n--/TableToolsOpts--\n"+this.fnGetTableData(b))}}),print:a.extend({},TableTools.buttonBase,{sInfo:"<h6>Print view</h6><p>Please use your browser's print function to print this table. Press escape when finished.",sMessage:null,bShowAll:!0,
sToolTip:"View print view",sButtonClass:"DTTT_button_print",sButtonText:"Print",fnClick:function(a,b){this.fnPrint(!0,b)}}),text:a.extend({},TableTools.buttonBase),select:a.extend({},TableTools.buttonBase,{sButtonText:"Select button",fnSelect:function(b,c){0!==this.fnGetSelected().length?a(b).removeClass(this.classes.buttons.disabled):a(b).addClass(this.classes.buttons.disabled)},fnInit:function(b,c){a(b).addClass(this.classes.buttons.disabled)}}),select_single:a.extend({},TableTools.buttonBase,{sButtonText:"Select button",
fnSelect:function(b,c){1==this.fnGetSelected().length?a(b).removeClass(this.classes.buttons.disabled):a(b).addClass(this.classes.buttons.disabled)},fnInit:function(b,c){a(b).addClass(this.classes.buttons.disabled)}}),select_all:a.extend({},TableTools.buttonBase,{sButtonText:"Select all",fnClick:function(a,b){this.fnSelectAll()},fnSelect:function(b,c){this.fnGetSelected().length==this.s.dt.fnRecordsDisplay()?a(b).addClass(this.classes.buttons.disabled):a(b).removeClass(this.classes.buttons.disabled)}}),
select_none:a.extend({},TableTools.buttonBase,{sButtonText:"Deselect all",fnClick:function(a,b){this.fnSelectNone()},fnSelect:function(b,c){0!==this.fnGetSelected().length?a(b).removeClass(this.classes.buttons.disabled):a(b).addClass(this.classes.buttons.disabled)},fnInit:function(b,c){a(b).addClass(this.classes.buttons.disabled)}}),ajax:a.extend({},TableTools.buttonBase,{sAjaxUrl:"/xhr.php",sButtonText:"Ajax button",fnClick:function(b,c){var f=this.fnGetTableData(c);a.ajax({url:c.sAjaxUrl,data:[{name:"tableData",
value:f}],success:c.fnAjaxComplete,dataType:"json",type:"POST",cache:!1,error:function(){alert("Error detected when sending table data to server")}})},fnAjaxComplete:function(a){alert("Ajax complete")}}),div:a.extend({},TableTools.buttonBase,{sAction:"div",sTag:"div",sButtonClass:"DTTT_nonbutton",sButtonText:"Text button"}),collection:a.extend({},TableTools.buttonBase,{sAction:"collection",sButtonClass:"DTTT_button_collection",sButtonText:"Collection",fnClick:function(a,b){this._fnCollectionShow(a,
b)}})};TableTools.classes={container:"DTTT_container",buttons:{normal:"DTTT_button",disabled:"DTTT_disabled"},collection:{container:"DTTT_collection",background:"DTTT_collection_background",buttons:{normal:"DTTT_button",disabled:"DTTT_disabled"}},select:{table:"DTTT_selectable",row:"DTTT_selected"},print:{body:"DTTT_Print",info:"DTTT_print_info",message:"DTTT_PrintMessage"}};TableTools.classes_themeroller={container:"DTTT_container ui-buttonset ui-buttonset-multi",buttons:{normal:"DTTT_button ui-button ui-state-default"},
collection:{container:"DTTT_collection ui-buttonset ui-buttonset-multi"}};TableTools.DEFAULTS={sSwfPath:"media/swf/copy_csv_xls_pdf.swf",sRowSelect:"none",sSelectedClass:null,fnPreRowSelect:null,fnRowSelected:null,fnRowDeselected:null,aButtons:["copy","csv","xls","pdf","print"],oTags:{container:"div",button:"a",liner:"span",collection:{container:"div",button:"a",liner:"span"}}};TableTools.prototype.CLASS="TableTools";TableTools.VERSION="2.1.4";TableTools.prototype.VERSION=TableTools.VERSION;"function"==
typeof a.fn.dataTable&&"function"==typeof a.fn.dataTableExt.fnVersionCheck&&a.fn.dataTableExt.fnVersionCheck("1.9.0")?a.fn.dataTableExt.aoFeatures.push({fnInit:function(a){a=new TableTools(a.oInstance,"undefined"!=typeof a.oInit.oTableTools?a.oInit.oTableTools:{});TableTools._aInstances.push(a);return a.dom.container},cFeature:"T",sFeature:"TableTools"}):alert("Warning: TableTools 2 requires DataTables 1.9.0 or newer - www.datatables.net/download");a.fn.DataTable.TableTools=TableTools})(jQuery,window,
document);
(function(a){function c(b,c,d){var e="text_filter";d&&(e="number_filter");e=a('<input type="text" class="search_init '+e+'" value="'+l+'"/>');m.html(e);d?m.wrapInner('<span class="filter_column filter_number" />'):m.wrapInner('<span class="filter_column filter_text" />');g[h]=l;var f=h;d&&!oTable.fnSettings().oFeatures.bServerSide?e.keyup(function(){oTable.fnFilter("^"+this.value,f,!0,!1)}):e.keyup(function(){oTable.fnFilter(this.value,f,b,c)});e.focus(function(){a(this).hasClass("search_init")&&(a(this).removeClass("search_init"),
this.value="")});e.blur(function(){""==this.value&&(a(this).addClass("search_init"),this.value=g[f])})}function b(){m.html(f(0));var b="tablerange_from_"+h,c=a('<input type="text" class="number_range_filter" id="'+b+'" rel="'+h+'"/>');m.append(c);m.append(f(1));var d="tablerange_to_"+h,c=a('<input type="text" class="number_range_filter" id="'+d+'" rel="'+h+'"/>');m.append(c);m.append(f(2));m.wrapInner('<span class="filterColumn filter_number_range" />');var e=h;t.push(h);a.fn.dataTableExt.afnFiltering.push(function(a,
c,f){a=1*document.getElementById(b).value;f=1*document.getElementById(d).value;c="-"==c[e]?0:1*c[e];return""==a&&""==f||""==a&&c<f||a<c&&""==f||a<c&&c<f?!0:!1});a("#"+b+",#"+d,m).keyup(function(){var a=1*document.getElementById(b).value,c=1*document.getElementById(d).value;0!=a&&0!=c&&a>c||oTable.fnDraw()})}function d(){m.html(f(0));var b="tablerange_from_"+h,c=a('<input type="text" class="date_range_filter" id="'+b+'" rel="'+h+'"/>');c.datepicker();m.append(c);m.append(f(1));var d="tablerange_to_"+
h,e=a('<input type="text" class="date_range_filter" id="'+d+'" rel="'+h+'"/>');m.append(e);m.append(f(2));m.wrapInner('<span class="filterColumn filter_date_range" />');e.datepicker();var g=h;t.push(h);a.fn.dataTableExt.afnFiltering.push(function(b,d,f){b=c.datepicker("getDate");f=e.datepicker("getDate");d=a.datepicker.parseDate(a.datepicker.regional[""].dateFormat,d[g]);return null==d?!1:null==b&&null==f||null==b&&d<f||b<d&&null==f||b<d&&d<f?!0:!1});a("#"+b+",#"+d,m).change(function(){oTable.fnDraw()})}
function e(b){var c=h,d='<select class="search_init select_filter"><option value="" class="search_init">'+l+"</option>",e,f=b.length;for(e=0;e<f;e++)d+='<option value="'+b[e]+'">'+b[e]+"</option>";b=a(d+"</select>");m.html(b);m.wrapInner('<span class="filterColumn filter_select" />');b.change(function(){""!=a(this).val()?a(this).removeClass("search_init"):a(this).addClass("search_init");oTable.fnFilter(a(this).val(),c)})}function f(a){switch(a){case 0:return p.substring(0,p.indexOf("{from}"));case 1:return p.substring(p.indexOf("{from}")+
6,p.indexOf("{to}"));default:return p.substring(p.indexOf("{to}")+4)}}var g,h,l,m,p="From {from} to {to}",q=[],t=[];a.fn.columnFilter=function(f){oTable=this;properties=a.extend({sPlaceHolder:"foot",sRangeSeparator:"~",iFilteringDelay:500,aoColumns:null,sRangeFormat:"From {from} to {to}"},f);return this.each(function(){g=[];var f="tfoot tr";"head:after"==properties.sPlaceHolder?f="thead tr:last":"head:before"==properties.sPlaceHolder&&(a("thead tr:last").detach().prependTo("thead"),f="thead tr:first");
a(f+" th",oTable).each(function(f){h=f;f={type:"text",bRegex:!1,bSmart:!0};if(null!=properties.aoColumns){if(properties.aoColumns.length<h||null==properties.aoColumns[h])return;f=properties.aoColumns[h]}l=a(this).text();m=a(a(this)[0]);if(null!=f)switch(p=null!=f.sRangeFormat?f.sRangeFormat:properties.sRangeFormat,f.type){case "number":c(!0,!1,!0);break;case "text":bRegex=null==f.bRegex?!1:f.bRegex;bSmart=null==f.bSmart?!1:f.bSmart;c(bRegex,bSmart,!1);break;case "select":e(f.values);break;case "number-range":b();
break;case "date-range":d()}});for(j=0;j<t.length;j++){var y=t[j];q.push(function(){return a("#range_from_"+y).val()+properties.sRangeSeparator+a("#range_to_"+y).val()})}if(oTable.fnSettings().oFeatures.bServerSide){var B=oTable.fnSettings().fnServerData;oTable.fnSettings().fnServerData=function(b,c,d){for(j=0;j<t.length;j++){var e=t[j];for(k=0;k<c.length;k++)c[k].name=="sSearch_"+e&&(c[k].value=q[j]())}c.push({name:"sRangeSeparator",value:properties.sRangeSeparator});null!=B?B(b,c,d):a.getJSON(b,
c,function(a){d(a)})}}})}})(jQuery);
(function(a){a.widget("ui.dropdownchecklist",{version:function(){alert("DropDownCheckList v1.4")},_appendDropContainer:function(c){var b=a("<div/>");b.addClass("ui-dropdownchecklist ui-dropdownchecklist-dropcontainer-wrapper");b.addClass("ui-widget");b.attr("id",c.attr("id")+"-ddw");b.css({position:"absolute",left:"-33000px",top:"-33000px"});var d=a("<div/>");d.addClass("ui-dropdownchecklist-dropcontainer ui-widget-content");b.append(d);b.insertAfter(c);b.isOpen=!1;return b},_isDropDownKeyShortcut:function(c,
b){return c.altKey&&a.ui.keyCode.DOWN==b},_isDropDownCloseKey:function(c,b){return a.ui.keyCode.ESCAPE==b||a.ui.keyCode.ENTER==b},_keyFocusChange:function(c,b,d){var e=a(":focusable");c=e.index(c);0<=c&&(c+=b,d&&(d=this.dropWrapper.find("input:not([disabled])"),b=e.index(d.get(0)),d=e.index(d.get(d.length-1)),c<b?c=d:c>d&&(c=b)),e.get(c).focus())},_handleKeyboard:function(c){var b=c.keyCode||c.which;!this.dropWrapper.isOpen&&this._isDropDownKeyShortcut(c,b)?(c.stopImmediatePropagation(),this._toggleDropContainer(!0)):
this.dropWrapper.isOpen&&this._isDropDownCloseKey(c,b)?(c.stopImmediatePropagation(),this._toggleDropContainer(!1),this.controlSelector.focus()):!this.dropWrapper.isOpen||"checkbox"!=c.target.type||b!=a.ui.keyCode.DOWN&&b!=a.ui.keyCode.UP||(c.stopImmediatePropagation(),this._keyFocusChange(c.target,b==a.ui.keyCode.DOWN?1:-1,!0))},_handleFocus:function(c,b,d){d&&!this.dropWrapper.isOpen?(c.stopImmediatePropagation(),b?(this.controlSelector.addClass("ui-state-hover"),null!=a.ui.dropdownchecklist.gLastOpened&&
a.ui.dropdownchecklist.gLastOpened._toggleDropContainer(!1)):this.controlSelector.removeClass("ui-state-hover")):d||b||(null!=c&&c.stopImmediatePropagation(),this.controlSelector.removeClass("ui-state-hover"),this._toggleDropContainer(!1))},_cancelBlur:function(a){null!=this.blurringItem&&(clearTimeout(this.blurringItem),this.blurringItem=null)},_appendControl:function(){var c=this,b=this.sourceSelect,d=this.options,e=a("<span/>");e.addClass("ui-dropdownchecklist ui-dropdownchecklist-selector-wrapper ui-widget");
e.css({display:"inline-block",cursor:"default",overflow:"hidden"});var f=b.attr("id"),f=null==f||""==f?"ddcl-"+a.ui.dropdownchecklist.gIDCounter++:"ddcl-"+f;e.attr("id",f);var g=a("<span/>");g.addClass("ui-dropdownchecklist-selector ui-state-default");g.css({display:"inline-block",overflow:"hidden","white-space":"nowrap"});f=b.attr("tabIndex");null==f?f=0:(f=parseInt(f),0>f&&(f=0));g.attr("tabIndex",f);g.keyup(function(a){c._handleKeyboard(a)});g.focus(function(a){c._handleFocus(a,!0,!0)});g.blur(function(a){c._handleFocus(a,
!1,!0)});e.append(g);if(null!=d.icon){var f=null==d.icon.placement?"left":d.icon.placement,h=a("<div/>");h.addClass("ui-icon");h.addClass(null!=d.icon.toOpen?d.icon.toOpen:"ui-icon-triangle-1-e");h.css({"float":f});g.append(h)}d=a("<span/>");d.addClass("ui-dropdownchecklist-text");d.css({display:"inline-block","white-space":"nowrap",overflow:"hidden"});g.append(d);e.hover(function(){c.disabled||g.addClass("ui-state-hover")},function(){c.disabled||g.removeClass("ui-state-hover")});e.click(function(a){c.disabled||
(a.stopImmediatePropagation(),c._toggleDropContainer(!c.dropWrapper.isOpen))});e.insertAfter(b);a(window).resize(function(){!c.disabled&&c.dropWrapper.isOpen&&c._toggleDropContainer(!0)});return e},_createDropItem:function(c,b,d,e,f,g,h,l){var m=this,p=this.options,q=this.sourceSelect,t=this.controlWrapper,y=a("<div/>");y.addClass("ui-dropdownchecklist-item");y.css({"white-space":"nowrap"});g=g?' checked="checked"':"";var u=h?' class="inactive"':' class="active"',C=t.attr("id"),t=C+"-i"+c;b=m.isMultiple?
a('<input disabled type="checkbox" id="'+t+'"'+g+u+' tabindex="'+b+'" />'):a('<input disabled type="radio" id="'+t+'" name="'+C+'"'+g+u+' tabindex="'+b+'" />');b=b.attr("index",c).val(d);y.append(b);c=a("<label for="+t+"/>");c.addClass("ui-dropdownchecklist-text");null!=f&&c.attr("style",f);c.css({cursor:"default"});c.html(e);l&&y.addClass("ui-dropdownchecklist-indent");y.addClass("ui-state-default");h&&y.addClass("ui-state-disabled");c.click(function(a){a.stopImmediatePropagation()});y.append(c);
y.hover(function(b){b=a(this);b.hasClass("ui-state-disabled")||b.addClass("ui-state-hover")},function(b){a(this).removeClass("ui-state-hover")});b.click(function(b){var c=a(this);b.stopImmediatePropagation();if(c.hasClass("active")){b=m.options.onItemClick;if(a.isFunction(b))try{b.call(m,c,q.get(0))}catch(d){c.prop("checked",!c.prop("checked"));m._syncSelected(c);return}m._syncSelected(c);m.sourceSelect.trigger("change","ddcl_internal");!m.isMultiple&&p.closeRadioOnClick&&m._toggleDropContainer(!1)}});
y.click(function(b){var c=a(this);b.stopImmediatePropagation();if(c.hasClass("ui-state-disabled"))c.focus(),m._cancelBlur();else{b=c.find("input");c=b.prop("checked");b.prop("checked",!c);var d=m.options.onItemClick;if(a.isFunction(d))try{d.call(m,b,q.get(0))}catch(e){b.prop("checked",c);m._syncSelected(b);return}m._syncSelected(b);m.sourceSelect.trigger("change","ddcl_internal");c||m.isMultiple||!p.closeRadioOnClick||m._toggleDropContainer(!1)}});y.focus(function(b){a(this);b.stopImmediatePropagation()});
y.keyup(function(a){m._handleKeyboard(a)});return y},_createGroupItem:function(c,b){var d=this,e=a("<div />");e.addClass("ui-dropdownchecklist-group ui-widget-header");b&&e.addClass("ui-state-disabled");e.css({"white-space":"nowrap"});var f=a("<span/>");f.addClass("ui-dropdownchecklist-text");f.css({cursor:"default"});f.text(c);e.append(f);e.click(function(b){var c=a(this);b.stopImmediatePropagation();c.focus();d._cancelBlur()});e.focus(function(b){a(this);b.stopImmediatePropagation()});return e},
_createCloseItem:function(c){var b=this,d=a("<div />");d.addClass("ui-state-default ui-dropdownchecklist-close ui-dropdownchecklist-item");d.css({"white-space":"nowrap","text-align":"right"});var e=a("<span/>");e.addClass("ui-dropdownchecklist-text");e.css({cursor:"default"});e.html(c);d.append(e);d.click(function(c){var d=a(this);c.stopImmediatePropagation();d.focus();b._toggleDropContainer(!1)});d.hover(function(b){a(this).addClass("ui-state-hover")},function(b){a(this).removeClass("ui-state-hover")});
d.focus(function(b){a(this);b.stopImmediatePropagation()});return d},_appendItems:function(){var c=this,b=this.options,d=this.sourceSelect,e=this.dropWrapper.find(".ui-dropdownchecklist-dropcontainer");d.children().each(function(b){var d=a(this);if(d.is("option"))c._appendOption(d,e,b,!1,!1);else if(d.is("optgroup")){var h=d.prop("disabled"),l=d.attr("label");""!=l&&(l=c._createGroupItem(l,h),e.append(l));c._appendOptions(d,e,b,!0,h)}});null!=b.explicitClose&&(b=c._createCloseItem(b.explicitClose),
e.append(b));b=e.outerWidth();d=e.outerHeight();return{width:b,height:d}},_appendOptions:function(c,b,d,e,f){var g=this;c.children("option").each(function(c){var l=a(this);g._appendOption(l,b,d+"."+c,e,f)})},_appendOption:function(a,b,d,e,f){var g=a.html();if(null!=g&&""!=g){var h=a.val(),l=a.attr("style"),m=a.prop("selected");a=f||a.prop("disabled");f=this.controlSelector.attr("tabindex");d=this._createDropItem(d,f,h,g,l,m,a,e);b.append(d)}},_syncSelected:function(c){var b=this.options,d=this.dropWrapper,
e=this.sourceSelect.get(0).options,f=d.find("input.active");if("exclusive"==b.firstItemChecksAll)if(null==c&&a(e[0]).prop("selected"))f.prop("checked",!1),a(f[0]).prop("checked",!0);else if(null!=c&&0==c.attr("index"))b=c.prop("checked"),f.prop("checked",!1),a(f[0]).prop("checked",b);else{var g=!0,h=null;f.each(function(b){0<b?a(this).prop("checked")||(g=!1):h=a(this)});null!=h&&(g&&f.prop("checked",!1),h.prop("checked",g))}else b.firstItemChecksAll&&(null==c&&a(e[0]).prop("selected")?f.prop("checked",
!0):null!=c&&0==c.attr("index")?f.prop("checked",c.prop("checked")):(g=!0,h=null,f.each(function(b){0<b?a(this).prop("checked")||(g=!1):h=a(this)}),null!=h&&h.prop("checked",g)));var l=0,f=d.find("input");f.each(function(b){var c=a(e[b+l]),d=c.html();if(null==d||""==d)l+=1,c=a(e[b+l]);c.prop("selected",a(this).prop("checked"))});this._updateControlText();null!=c&&c.focus()},_sourceSelectChangeHandler:function(a){this.dropWrapper.find("input").val(this.sourceSelect.val());this._updateControlText()},
_updateControlText:function(){var a=this.sourceSelect,b=this.options,d=this.controlWrapper,e=a.find("option:first"),a=a.find("option"),b=this._formatText(a,b.firstItemChecksAll,e),d=d.find(".ui-dropdownchecklist-text");d.html(b);d.attr("title",d.text())},_formatText:function(c,b,d){var e;if(a.isFunction(this.options.textFormatFunction))try{e=this.options.textFormatFunction(c)}catch(f){alert("textFormatFunction failed: "+f)}else b&&null!=d&&d.prop("selected")?e=d.html():(e="",c.each(function(){if(a(this).prop("selected")){""!=
e&&(e+=", ");var b=a(this).attr("style"),c=a("<span/>");c.html(a(this).html());null==b?e+=c.html():(c.attr("style",b),e+=a("<span/>").append(c).html())}}),""==e&&(e=null!=this.options.emptyText?this.options.emptyText:"&nbsp;"));return e},_toggleDropContainer:function(c){var b=function(c){if(null!=c&&c.dropWrapper.isOpen){c.dropWrapper.isOpen=!1;a.ui.dropdownchecklist.gLastOpened=null;var d=c.options;c.dropWrapper.css({top:"-33000px",left:"-33000px"});var g=c.controlSelector;g.removeClass("ui-state-active");
g.removeClass("ui-state-hover");g=c.controlWrapper.find(".ui-icon");0<g.length&&(g.removeClass(null!=d.icon.toClose?d.icon.toClose:"ui-icon-triangle-1-s"),g.addClass(null!=d.icon.toOpen?d.icon.toOpen:"ui-icon-triangle-1-e"));a(document).unbind("click",b);c.dropWrapper.find("input.active").prop("disabled",!0);if(a.isFunction(d.onComplete))try{d.onComplete.call(c,c.sourceSelect.get(0))}catch(h){alert("callback failed: "+h)}}},d=function(c){if(!c.dropWrapper.isOpen){c.dropWrapper.isOpen=!0;a.ui.dropdownchecklist.gLastOpened=
c;var d=c.options;null==d.positionHow||"absolute"==d.positionHow?c.dropWrapper.css({position:"absolute",top:c.controlWrapper.position().top+c.controlWrapper.outerHeight()+"px",left:c.controlWrapper.position().left+"px"}):"relative"==d.positionHow&&c.dropWrapper.css({position:"relative",top:"0px",left:"0px"});var g=0;if(null==d.zIndex){var h=c.controlWrapper.parents().map(function(){var b=a(this).css("z-index");return isNaN(b)?0:b}).get(),h=Math.max.apply(Math,h);0<=h&&(g=h+1)}else g=parseInt(d.zIndex);
0<g&&c.dropWrapper.css({"z-index":g});g=c.controlSelector;g.addClass("ui-state-active");g.removeClass("ui-state-hover");g=c.controlWrapper.find(".ui-icon");0<g.length&&(g.removeClass(null!=d.icon.toOpen?d.icon.toOpen:"ui-icon-triangle-1-e"),g.addClass(null!=d.icon.toClose?d.icon.toClose:"ui-icon-triangle-1-s"));a(document).bind("click",function(a){b(c)});d=c.dropWrapper.find("input.active");d.prop("disabled",!1);d=d.get(0);null!=d&&d.focus()}};c?(b(a.ui.dropdownchecklist.gLastOpened),d(this)):b(this)},
_setSize:function(a){var b=this.options,d=this.controlWrapper;a=a.width;null!=b.width?a=parseInt(b.width):null!=b.minWidth&&(b=parseInt(b.minWidth),a<b&&(a=b));var e=this.controlSelector;e.css({width:a+"px"});b=e.find(".ui-dropdownchecklist-text");e=e.find(".ui-icon");null!=e&&(a-=e.outerWidth()+4,b.css({width:a+"px"}));d.outerWidth()},_init:function(){var c=this,b=this.options;null==a.ui.dropdownchecklist.gIDCounter&&(a.ui.dropdownchecklist.gIDCounter=1);c.blurringItem=null;var d=c.element;c.initialDisplay=
d.css("display");d.css("display","none");c.initialMultiple=d.prop("multiple");c.isMultiple=c.initialMultiple;null!=b.forceMultiple&&(c.isMultiple=b.forceMultiple);d.prop("multiple",!0);c.sourceSelect=d;var e=c._appendControl();c.controlWrapper=e;c.controlSelector=e.find(".ui-dropdownchecklist-selector");var f=c._appendDropContainer(e);c.dropWrapper=f;var g=c._appendItems();c._updateControlText(e,f,d);c._setSize(g);b.firstItemChecksAll&&c._syncSelected(null);b.bgiframe&&"function"==typeof c.dropWrapper.bgiframe&&
c.dropWrapper.bgiframe();c.sourceSelect.change(function(a,b){"ddcl_internal"!=b&&c._sourceSelectChangeHandler(a)})},_refreshOption:function(a,b,d){var e=a.parent();b?(a.prop("disabled",!0),a.removeClass("active"),a.addClass("inactive"),e.addClass("ui-state-disabled")):(a.prop("disabled",!1),a.removeClass("inactive"),a.addClass("active"),e.removeClass("ui-state-disabled"));a.prop("checked",d)},_refreshGroup:function(a,b){b?a.addClass("ui-state-disabled"):a.removeClass("ui-state-disabled")},close:function(){this._toggleDropContainer(!1)},
refresh:function(){var c=this,b=this.sourceSelect,d=this.dropWrapper,e=d.find("input"),f=d.find(".ui-dropdownchecklist-group"),g=0,h=0;b.children().each(function(b){b=a(this);var d=b.prop("disabled");if(b.is("option")){b=b.prop("selected");var p=a(e[h]);c._refreshOption(p,d,b);h+=1}else b.is("optgroup")&&(""!=b.attr("label")&&(p=a(f[g]),c._refreshGroup(p,d),g+=1),b.children("option").each(function(){var b=a(this),f=d||b.prop("disabled"),b=b.prop("selected"),g=a(e[h]);c._refreshOption(g,f,b);h+=1}))});
c._syncSelected(null)},enable:function(){this.controlSelector.removeClass("ui-state-disabled");this.disabled=!1},disable:function(){this.controlSelector.addClass("ui-state-disabled");this.disabled=!0},destroy:function(){a.Widget.prototype.destroy.apply(this,arguments);this.sourceSelect.css("display",this.initialDisplay);this.sourceSelect.prop("multiple",this.initialMultiple);this.controlWrapper.unbind().remove();this.dropWrapper.remove()}});a.extend(a.ui.dropdownchecklist,{defaults:{width:null,maxDropHeight:null,
firstItemChecksAll:!1,closeRadioOnClick:!1,minWidth:50,positionHow:"absolute",bgiframe:!1,explicitClose:null}})})(jQuery);(function(a,c,b,d,e,f,g){a.GoogleAnalyticsObject=e;a[e]=a[e]||function(){(a[e].q=a[e].q||[]).push(arguments)};a[e].l=1*new Date;f=c.createElement(b);g=c.getElementsByTagName(b)[0];f.async=1;f.src=d;g.parentNode.insertBefore(f,g)})(window,document,"script","//www.google-analytics.com/analytics.js","ga");ga("create","UA-40113910-1","umd.edu");ga("send","pageview");
!function(){function a(a){return null!=a&&!isNaN(a)}function c(a){return a.length}function b(a,b){try{for(var c in b)Object.defineProperty(a.prototype,c,{value:b[c],enumerable:!1})}catch(d){a.prototype=b}}function d(){}function e(a){return xc+a in this}function f(){var a=[];return this.forEach(function(b){a.push(b)}),a}function g(){var a=0,b;for(b in this)b.charCodeAt(0)===Gd&&++a;return a}function h(){for(var a in this)if(a.charCodeAt(0)===Gd)return!1;return!0}function l(){}function m(a,b,c){return function(){var d=
c.apply(b,arguments);return d===b?a:d}}function p(a,b){if(b in a)return b;b=b.charAt(0).toUpperCase()+b.substring(1);for(var c=0,d=Cf.length;d>c;++c){var e=Cf[c]+b;if(e in a)return e}}function q(){}function t(){}function y(a){function b(){for(var d,e=c,f=-1,g=e.length;++f<g;)(d=e[f].on)&&d.apply(this,arguments);return a}var c=[],e=new d;return b.on=function(b,d){var f,g=e.get(b);return 2>arguments.length?g&&g.on:(g&&(g.on=null,c=c.slice(0,f=c.indexOf(g)).concat(c.slice(f+1)),e.remove(b)),d&&c.push(e.set(b,
{on:d})),a)},b}function u(){w.event.preventDefault()}function C(){for(var a,b=w.event;a=b.sourceEvent;)b=a;return b}function B(a){for(var b=new t,c=0,d=arguments.length;++c<d;)b[arguments[c]]=y(b);return b.of=function(c,d){return function(e){try{var f=e.sourceEvent=w.event;e.target=a;w.event=e;b[e.type].apply(c,d)}finally{w.event=f}}},b}function I(a){return Hd(a,ra),a}function F(a){return"function"==typeof a?a:function(){return Ae(a,this)}}function A(a){return"function"==typeof a?a:function(){return Be(a,
this)}}function r(a,b){function c(){this.removeAttribute(a)}function d(){this.removeAttributeNS(a.space,a.local)}function e(){this.setAttribute(a,b)}function f(){this.setAttributeNS(a.space,a.local,b)}function g(){var c=b.apply(this,arguments);null==c?this.removeAttribute(a):this.setAttribute(a,c)}function h(){var c=b.apply(this,arguments);null==c?this.removeAttributeNS(a.space,a.local):this.setAttributeNS(a.space,a.local,c)}return a=w.ns.qualify(a),null==b?a.local?d:c:"function"==typeof b?a.local?
h:g:a.local?f:e}function v(a){return a.trim().replace(/\s+/g," ")}function z(a){return new RegExp("(?:^|\\s+)"+w.requote(a)+"(?:\\s+|$)","g")}function H(a,b){function c(){for(var d=-1;++d<e;)a[d](this,b)}function d(){for(var c=-1,f=b.apply(this,arguments);++c<e;)a[c](this,f)}a=a.trim().split(/^|\s+/).map(O);var e=a.length;return"function"==typeof b?d:c}function O(a){var b=z(a);return function(c,d){if(e=c.classList)return d?e.add(a):e.remove(a);var e=c.getAttribute("class")||"";d?(b.lastIndex=0,b.test(e)||
c.setAttribute("class",v(e+" "+a))):c.setAttribute("class",v(e.replace(b," ")))}}function T(a,b,c){function d(){this.style.removeProperty(a)}function e(){this.style.setProperty(a,b,c)}function f(){var d=b.apply(this,arguments);null==d?this.style.removeProperty(a):this.style.setProperty(a,d,c)}return null==b?d:"function"==typeof b?f:e}function J(a,b){function c(){delete this[a]}function d(){this[a]=b}function e(){var c=b.apply(this,arguments);null==c?delete this[a]:this[a]=c}return null==b?c:"function"==
typeof b?e:d}function Z(a){return"function"==typeof a?a:(a=w.ns.qualify(a)).local?function(){return this.ownerDocument.createElementNS(a.space,a.local)}:function(){return this.ownerDocument.createElementNS(this.namespaceURI,a)}}function na(a){return function(){return Df(this,a)}}function sa(a){return arguments.length||(a=w.ascending),function(b,c){return b&&c?a(b.__data__,c.__data__):!b-!c}}function ia(a,b){for(var c=0,d=a.length;d>c;c++)for(var e,f=a[c],g=0,h=f.length;h>g;g++)(e=f[g])&&b(e,g,c);
return a}function aa(a){return Hd(a,Zb),a}function ja(a){var b,c;return function(d,e,f){d=a[f].update;var g=d.length;f!=c&&(c=f,b=0);for(e>=b&&(b=e+1);!(e=d[b])&&++b<g;);return e}}function ca(){var a=this.__transition__;a&&++a.active}function fa(a,b,c){function d(){var b=this[g];b&&(this.removeEventListener(a,b,b.$),delete this[g])}function e(){var f=l(b,kc(arguments));d.call(this);this.addEventListener(a,this[g]=f,f.$=c);f._=b}function f(){var b,c=new RegExp("^__on([^.]+)"+w.requote(a)+"$"),d;for(d in this)if(b=
d.match(c)){var e=this[d];this.removeEventListener(b[1],e,e.$);delete this[d]}}var g="__on"+a,h=a.indexOf("."),l=ba;0<h&&(a=a.substring(0,h));var m=Ce.get(a);return m&&(a=m,l=la),h?b?e:d:b?q:f}function ba(a,b){return function(c){var d=w.event;w.event=c;b[0]=this.__data__;try{a.apply(this,b)}finally{w.event=d}}}function la(a,b){var c=ba(a,b);return function(a){var b=a.relatedTarget;b&&(b===this||8&b.compareDocumentPosition(this))||c.call(this,a)}}function L(){var a=".dragsuppress-"+ ++sh,b="click"+
a,c=w.select(Ua).on("touchmove"+a,u).on("dragstart"+a,u).on("selectstart"+a,u);if(fd){var d=lc.style,e=d[fd];d[fd]="none"}return function(f){function g(){c.on(b,null)}c.on(a,null);fd&&(d[fd]=e);f&&(c.on(b,function(){u();g()},!0),setTimeout(g,0))}}function R(a,b){b.changedTouches&&(b=b.changedTouches[0]);var c=a.ownerSVGElement||a;if(c.createSVGPoint){var d=c.createSVGPoint();if(0>De&&(Ua.scrollX||Ua.scrollY)){var c=w.select("body").append("svg").style({position:"absolute",top:0,left:0,margin:0,padding:0,
border:"none"},"important"),e=c[0][0].getScreenCTM();De=!(e.f||e.e);c.remove()}return De?(d.x=b.pageX,d.y=b.pageY):(d.x=b.clientX,d.y=b.clientY),d=d.matrixTransform(a.getScreenCTM().inverse()),[d.x,d.y]}c=a.getBoundingClientRect();return[b.clientX-c.left-a.clientLeft,b.clientY-c.top-a.clientTop]}function Xa(a,b,c){return(b[0]-a[0])*(c[1]-a[1])-(b[1]-a[1])*(c[0]-a[0])}function Ya(a){return 1<a?0:-1>a?X:Math.acos(a)}function Oa(a){return 1<a?eb:-1>a?-eb:Math.asin(a)}function Ia(a){return((a=Math.exp(a))+
1/a)/2}function za(a){return(a=Math.sin(a/2))*a}function bb(){}function gb(a,b,c){return new rb(a,b,c)}function rb(a,b,c){this.h=a;this.s=b;this.l=c}function sb(a,b,c){function d(a){return 360<a?a-=360:0>a&&(a+=360),60>a?e+(f-e)*a/60:180>a?f:240>a?e+(f-e)*(240-a)/60:e}var e,f;return a=isNaN(a)?0:0>(a%=360)?a+360:a,b=isNaN(b)?0:0>b?0:1<b?1:b,c=0>c?0:1<c?1:c,f=.5>=c?c*(1+b):c+b-c*b,e=2*c-f,ua(Math.round(255*d(a+120)),Math.round(255*d(a)),Math.round(255*d(a-120)))}function n(a,b,c){return new cb(a,b,
c)}function cb(a,b,c){this.h=a;this.c=b;this.l=c}function Ib(a,b,c){return isNaN(a)&&(a=0),isNaN(b)&&(b=0),Fa(c,Math.cos(a*=V)*b,Math.sin(a)*b)}function Fa(a,b,c){return new zb(a,b,c)}function zb(a,b,c){this.l=a;this.a=b;this.b=c}function Jb(a,b,c){a=(a+16)/116;b=a+b/500;c=a-c/200;return b=Ab(b)*Ef,a=Ab(a)*Ff,c=Ab(c)*Gf,ua(db(3.2404542*b-1.5371385*a-.4985314*c),db(-.969266*b+1.8760108*a+.041556*c),db(.0556434*b-.2040259*a+1.0572252*c))}function tb(a,b,c){return 0<a?n(Math.atan2(c,b)*ya,Math.sqrt(b*
b+c*c),a):n(0/0,0/0,a)}function Ab(a){return.206893034<a?a*a*a:(a-4/29)/7.787037}function ub(a){return.008856<a?Math.pow(a,1/3):7.787037*a+4/29}function db(a){return Math.round(255*(.00304>=a?12.92*a:1.055*Math.pow(a,1/2.4)-.055))}function hb(a){return ua(a>>16,255&a>>8,255&a)+""}function ua(a,b,c){return new Bb(a,b,c)}function Bb(a,b,c){this.r=a;this.g=b;this.b=c}function Ta(a){return 16>a?"0"+Math.max(0,a).toString(16):Math.min(255,a).toString(16)}function vb(a,b,c){var d,e,f,g=0,h=0,l=0;if(d=/([a-z]+)\((.*)\)/i.exec(a))switch(e=
d[2].split(","),d[1]){case "hsl":return c(parseFloat(e[0]),parseFloat(e[1])/100,parseFloat(e[2])/100);case "rgb":return b(Na(e[0]),Na(e[1]),Na(e[2]))}return(f=Jd.get(a))?b(f.r,f.g,f.b):(null!=a&&"#"===a.charAt(0)&&(4===a.length?(g=a.charAt(1),g+=g,h=a.charAt(2),h+=h,l=a.charAt(3),l+=l):7===a.length&&(g=a.substring(1,3),h=a.substring(3,5),l=a.substring(5,7)),g=parseInt(g,16),h=parseInt(h,16),l=parseInt(l,16)),b(g,h,l))}function Ja(a,b,c){var d,e,f=Math.min(a/=255,b/=255,c/=255),g=Math.max(a,b,c),h=
g-f,l=(g+f)/2;return h?(e=.5>l?h/(g+f):h/(2-g-f),d=a==g?(b-c)/h+(c>b?6:0):b==g?(c-a)/h+2:(a-b)/h+4,d*=60):(d=0/0,e=0<l&&1>l?0:d),gb(d,e,l)}function pb(a,b,c){a=ab(a);b=ab(b);c=ab(c);var d=ub((.4124564*a+.3575761*b+.1804375*c)/Ef),e=ub((.2126729*a+.7151522*b+.072175*c)/Ff);a=ub((.0193339*a+.119192*b+.9503041*c)/Gf);return Fa(116*e-16,500*(d-e),200*(e-a))}function ab(a){return.04045>=(a/=255)?a/12.92:Math.pow((a+.055)/1.055,2.4)}function Na(a){var b=parseFloat(a);return"%"===a.charAt(a.length-1)?Math.round(2.55*
b):b}function da(a){return"function"==typeof a?a:function(){return a}}function ta(a){return a}function Za(a){return function(b,c,d){return 2===arguments.length&&"function"==typeof c&&(d=c,c=null),ib(b,c,a,d)}}function ib(a,b,c,d){function e(){var a,b=l.status;if(!b&&l.responseText||200<=b&&300>b||304===b){try{a=c.call(f,l)}catch(d){return g.error.call(f,d),void 0}g.load.call(f,a)}else g.error.call(f,l)}var f={},g=w.dispatch("beforesend","progress","load","error"),h={},l=new XMLHttpRequest,m=null;
return!Ua.XDomainRequest||"withCredentials"in l||!/^(http(s)?:)?\/\//.test(a)||(l=new XDomainRequest),"onload"in l?l.onload=l.onerror=e:l.onreadystatechange=function(){3<l.readyState&&e()},l.onprogress=function(a){var b=w.event;w.event=a;try{g.progress.call(f,l)}finally{w.event=b}},f.header=function(a,b){return a=(a+"").toLowerCase(),2>arguments.length?h[a]:(null==b?delete h[a]:h[a]=b+"",f)},f.mimeType=function(a){return arguments.length?(b=null==a?null:a+"",f):b},f.responseType=function(a){return arguments.length?
(m=a,f):m},f.response=function(a){return c=a,f},["get","post"].forEach(function(a){f[a]=function(){return f.send.apply(f,[a].concat(kc(arguments)))}}),f.send=function(c,d,e){if(2===arguments.length&&"function"==typeof d&&(e=d,d=null),l.open(c,a,!0),null==b||"accept"in h||(h.accept=b+",*/*"),l.setRequestHeader)for(var ma in h)l.setRequestHeader(ma,h[ma]);return null!=b&&l.overrideMimeType&&l.overrideMimeType(b),null!=m&&(l.responseType=m),null!=e&&f.on("error",e).on("load",function(a){e(null,a)}),
g.beforesend.call(f,l),l.send(null==d?null:d),f},f.abort=function(){return l.abort(),f},w.rebind(f,g,"on"),null==d?f:f.get(Wb(d))}function Wb(a){return 1===a.length?function(b,c){a(null==b?c:null)}:a}function W(){var a=Cb(),a=Pa()-a;24<a?(isFinite(a)&&(clearTimeout(Kd),Kd=setTimeout(W,a)),Ld=0):(Ld=1,Hf(W))}function Cb(){var a=Date.now();for($b=Md;$b;)a>=$b.t&&($b.f=$b.c(a-$b.t)),$b=$b.n;return a}function Pa(){for(var a,b=Md,c=1/0;b;)b.f?b=a?a.n=b.n:Md=b.n:(b.t<c&&(c=b.t),b=(a=b).n);return Nd=a,c}
function $a(a,b){return b-(a?Math.ceil(Math.log(a)/Math.LN10):1)}function Ka(a){var b=a.decimal,c=a.thousands,d=a.grouping,e=a.currency,f=d?function(a){for(var b=a.length,e=[],f=0,g=d[0];0<b&&0<g;)e.push(a.substring(b-=g,b+g)),g=d[f=(f+1)%d.length];return e.reverse().join(c)}:ta;return function(a){a=If.exec(a);var c=a[1]||" ",d=a[2]||">",g=a[3]||"",G=a[4]||"",h=a[5],l=+a[6],ma=a[7],m=a[8],pa=a[9],n=1,p="",q="",r=!1;switch(m&&(m=+m.substring(1)),(h||"0"===c&&"="===d)&&(h=c="0",d="=",ma&&(l-=Math.floor((l-
1)/4))),pa){case "n":ma=!0;pa="g";break;case "%":n=100;q="%";pa="f";break;case "p":n=100;q="%";pa="r";break;case "b":case "o":case "x":case "X":"#"===G&&(p="0"+pa.toLowerCase());case "c":case "d":r=!0;m=0;break;case "s":n=-1,pa="r"}"$"===G&&(p=e[0],q=e[1]);"r"!=pa||m||(pa="g");null!=m&&("g"==pa?m=Math.max(1,Math.min(21,m)):("e"==pa||"f"==pa)&&(m=Math.max(0,Math.min(20,m))));var pa=th.get(pa)||jb,v=h&&ma;return function(a){if(r&&a%1)return"";var e=0>a||0===a&&0>1/a?(a=-a,"-"):g;if(0>n){var G=w.formatPrefix(a,
m);a=G.scale(a);q=G.symbol}else a*=n;a=pa(a,m);var Ma=a.lastIndexOf("."),G=0>Ma?a:a.substring(0,Ma),Ma=0>Ma?"":b+a.substring(Ma+1);!h&&ma&&(G=f(G));var mb=p.length+G.length+Ma.length+(v?0:e.length),Eb=l>mb?Array(mb=l-mb+1).join(c):"";return v&&(G=f(Eb+G)),e+=p,a=G+Ma,("<"===d?e+a+Eb:">"===d?Eb+e+a:"^"===d?Eb.substring(0,mb>>=1)+e+a+Eb.substring(mb):e+(v?a:Eb+a))+q}}}function jb(a){return a+""}function Ba(){this._=new Date(1<arguments.length?Date.UTC.apply(this,arguments):arguments[0])}function ka(a,
b,c){function d(b){var c=a(b),e=f(c,1);return e-b>b-c?c:e}function e(c){return b(c=a(new Va(c-1)),1),c}function f(a,c){return b(a=new Va(+a),c),a}function g(a,d,f){a=e(a);var G=[];if(1<f)for(;d>a;)c(a)%f||G.push(new Date(+a)),b(a,1);else for(;d>a;)G.push(new Date(+a)),b(a,1);return G}a.floor=a;a.round=d;a.ceil=e;a.offset=f;a.range=g;var h=a.utc=Qa(a);return h.floor=h,h.round=Qa(d),h.ceil=Qa(e),h.offset=Qa(f),h.range=function(a,b,c){try{Va=Ba;var d=new Ba;return d._=a,g(d,b,c)}finally{Va=Date}},a}
function Qa(a){return function(b,c){try{Va=Ba;var d=new Ba;return d._=b,a(d,c)._}finally{Va=Date}}}function kb(a){function b(a){function d(b){for(var c,f,g,G=[],h=-1,ea=0;++h<e;)37===a.charCodeAt(h)&&(G.push(a.substring(ea,h)),null!=(f=Jf[c=a.charAt(++h)])&&(c=a.charAt(++h)),(g=J[c])&&(c=g(b,null==f?"e"===c?" ":"0":f)),G.push(c),ea=h+1);return G.push(a.substring(ea,h)),G.join("")}var e=a.length;return d.parse=function(b){var d={y:1900,m:0,d:1,H:0,M:0,S:0,L:0,Z:null};if(c(d,a,b,0)!=b.length)return null;
"p"in d&&(d.H=d.H%12+12*d.p);b=null!=d.Z&&Va!==Ba;var e=new (b?Ba:Va);return"j"in d?e.setFullYear(d.y,0,d.j):"w"in d&&("W"in d||"U"in d)?(e.setFullYear(d.y,0,1),e.setFullYear(d.y,0,"W"in d?(d.w+6)%7+7*d.W-(e.getDay()+5)%7:d.w+7*d.U-(e.getDay()+6)%7)):e.setFullYear(d.y,d.m,d.d),e.setHours(d.H+Math.floor(d.Z/100),d.M+d.Z%100,d.S,d.L),b?e._:e},d.toString=function(){return a},d}function c(a,b,d,e){for(var f,g,G,h=0,ea=b.length,l=d.length;ea>h;){if(e>=l)return-1;if(f=b.charCodeAt(h++),37===f){if(G=b.charAt(h++),
g=B[G in Jf?b.charAt(h++):G],!g||0>(e=g(a,d,e)))return-1}else if(f!=d.charCodeAt(e++))return-1}return e}var d=a.dateTime,e=a.date,f=a.time,g=a.periods,h=a.days,l=a.shortDays,m=a.months,n=a.shortMonths;b.utc=function(a){function c(a){try{Va=Ba;var b=new Va;return b._=a,d(b)}finally{Va=Date}}var d=b(a);return c.parse=function(a){try{Va=Ba;var b=d.parse(a);return b&&b._}finally{Va=Date}},c.toString=d.toString,c};b.multi=b.utc.multi=ha;var p=w.map(),q=S(h),r=Db(h),v=S(l),A=Db(l),z=S(m),t=Db(m),u=S(n),
y=Db(n);g.forEach(function(a,b){p.set(a.toLowerCase(),b)});var J={a:function(a){return l[a.getDay()]},A:function(a){return h[a.getDay()]},b:function(a){return n[a.getMonth()]},B:function(a){return m[a.getMonth()]},c:b(d),d:function(a,b){return oa(a.getDate(),b,2)},e:function(a,b){return oa(a.getDate(),b,2)},H:function(a,b){return oa(a.getHours(),b,2)},I:function(a,b){return oa(a.getHours()%12||12,b,2)},j:function(a,b){return oa(1+P.dayOfYear(a),b,3)},L:function(a,b){return oa(a.getMilliseconds(),
b,3)},m:function(a,b){return oa(a.getMonth()+1,b,2)},M:function(a,b){return oa(a.getMinutes(),b,2)},p:function(a){return g[+(12<=a.getHours())]},S:function(a,b){return oa(a.getSeconds(),b,2)},U:function(a,b){return oa(P.sundayOfYear(a),b,2)},w:function(a){return a.getDay()},W:function(a,b){return oa(P.mondayOfYear(a),b,2)},x:b(e),X:b(f),y:function(a,b){return oa(a.getFullYear()%100,b,2)},Y:function(a,b){return oa(a.getFullYear()%1E4,b,4)},Z:Ga,"%":function(){return"%"}},B={a:function(a,b,c){v.lastIndex=
0;return(b=v.exec(b.substring(c)))?(a.w=A.get(b[0].toLowerCase()),c+b[0].length):-1},A:function(a,b,c){q.lastIndex=0;return(b=q.exec(b.substring(c)))?(a.w=r.get(b[0].toLowerCase()),c+b[0].length):-1},b:function(a,b,c){u.lastIndex=0;return(b=u.exec(b.substring(c)))?(a.m=y.get(b[0].toLowerCase()),c+b[0].length):-1},B:function(a,b,c){z.lastIndex=0;return(b=z.exec(b.substring(c)))?(a.m=t.get(b[0].toLowerCase()),c+b[0].length):-1},c:function(a,b,d){return c(a,J.c.toString(),b,d)},d:Q,e:Q,H:x,I:x,j:va,
L:U,m:Sa,M:D,p:function(a,b,c){b=p.get(b.substring(c,c+=2).toLowerCase());return null==b?-1:(a.p=b,c)},S:E,U:M,w:Ob,W:K,x:function(a,b,d){return c(a,J.x.toString(),b,d)},X:function(a,b,d){return c(a,J.X.toString(),b,d)},y:qa,Y:Ra,Z:Aa,"%":xa};return b}function oa(a,b,c){var d=0>a?"-":"";a=(d?-a:a)+"";var e=a.length;return d+(c>e?Array(c-e+1).join(b)+a:a)}function S(a){return new RegExp("^(?:"+a.map(w.requote).join("|")+")","i")}function Db(a){for(var b=new d,c=-1,e=a.length;++c<e;)b.set(a[c].toLowerCase(),
c);return b}function Ob(a,b,c){Ca.lastIndex=0;return(b=Ca.exec(b.substring(c,c+1)))?(a.w=+b[0],c+b[0].length):-1}function M(a,b,c){Ca.lastIndex=0;return(b=Ca.exec(b.substring(c)))?(a.U=+b[0],c+b[0].length):-1}function K(a,b,c){Ca.lastIndex=0;return(b=Ca.exec(b.substring(c)))?(a.W=+b[0],c+b[0].length):-1}function Ra(a,b,c){Ca.lastIndex=0;return(b=Ca.exec(b.substring(c,c+4)))?(a.y=+b[0],c+b[0].length):-1}function qa(a,b,c){Ca.lastIndex=0;if(b=Ca.exec(b.substring(c,c+2))){var d=+b[0];a=(a.y=d+(68<d?
1900:2E3),c+b[0].length)}else a=-1;return a}function Aa(a,b,c){return/^[+-]\d{4}$/.test(b=b.substring(c,c+5))?(a.Z=+b,c+5):-1}function Sa(a,b,c){Ca.lastIndex=0;return(b=Ca.exec(b.substring(c,c+2)))?(a.m=b[0]-1,c+b[0].length):-1}function Q(a,b,c){Ca.lastIndex=0;return(b=Ca.exec(b.substring(c,c+2)))?(a.d=+b[0],c+b[0].length):-1}function va(a,b,c){Ca.lastIndex=0;return(b=Ca.exec(b.substring(c,c+3)))?(a.j=+b[0],c+b[0].length):-1}function x(a,b,c){Ca.lastIndex=0;return(b=Ca.exec(b.substring(c,c+2)))?(a.H=
+b[0],c+b[0].length):-1}function D(a,b,c){Ca.lastIndex=0;return(b=Ca.exec(b.substring(c,c+2)))?(a.M=+b[0],c+b[0].length):-1}function E(a,b,c){Ca.lastIndex=0;return(b=Ca.exec(b.substring(c,c+2)))?(a.S=+b[0],c+b[0].length):-1}function U(a,b,c){Ca.lastIndex=0;return(b=Ca.exec(b.substring(c,c+3)))?(a.L=+b[0],c+b[0].length):-1}function Ga(a){var b=a.getTimezoneOffset();a=0<b?"-":"+";var c=~~(Y(b)/60),b=Y(b)%60;return a+oa(c,"0",2)+oa(b,"0",2)}function xa(a,b,c){Kf.lastIndex=0;return(a=Kf.exec(b.substring(c,
c+1)))?c+a[0].length:-1}function ha(a){for(var b=a.length,c=-1;++c<b;)a[c][0]=this(a[c][0]);return function(b){for(var c=0,d=a[c];!d[1](b);)d=a[++c];return d[0](b)}}function La(){}function Kb(a,b,c){var d=c.s=a+b,e=d-a;c.t=a-(d-e)+(b-e)}function Ea(a,b){a&&Lf.hasOwnProperty(a.type)&&Lf[a.type](a,b)}function wb(a,b,c){var d=-1,e=a.length-c;for(b.lineStart();++d<e;)c=a[d],b.point(c[0],c[1],c[2]);b.lineEnd()}function Yb(a,b){var c=-1,d=a.length;for(b.polygonStart();++c<d;)wb(a[c],b,1);b.polygonEnd()}
function Da(){function a(b,c){b*=V;c=c*V/2+X/4;var g=b-d,G=Math.cos(c),h=Math.sin(c),ea=f*h,l=e*G+ea*Math.cos(g),g=ea*Math.sin(g);yc.add(Math.atan2(g,l));d=b;e=G;f=h}var b,c,d,e,f;xb.point=function(g,h){xb.point=a;d=(b=g)*V;e=Math.cos(h=(c=h)*V/2+X/4);f=Math.sin(h)};xb.lineEnd=function(){a(b,c)}}function Wa(a){var b=a[0];a=a[1];var c=Math.cos(a);return[c*Math.cos(b),c*Math.sin(b),Math.sin(a)]}function qb(a,b){return a[0]*b[0]+a[1]*b[1]+a[2]*b[2]}function Pb(a,b){return[a[1]*b[2]-a[2]*b[1],a[2]*b[0]-
a[0]*b[2],a[0]*b[1]-a[1]*b[0]]}function ad(a,b){a[0]+=b[0];a[1]+=b[1];a[2]+=b[2]}function Jc(a,b){return[a[0]*b,a[1]*b,a[2]*b]}function Kc(a){var b=Math.sqrt(a[0]*a[0]+a[1]*a[1]+a[2]*a[2]);a[0]/=b;a[1]/=b;a[2]/=b}function hc(a){return[Math.atan2(a[1],a[0]),Oa(a[2])]}function Dc(a,b){return Y(a[0]-b[0])<N&&Y(a[1]-b[1])<N}function ec(a,b){a*=V;var c=Math.cos(b*=V);uc(c*Math.cos(a),c*Math.sin(a),Math.sin(b))}function uc(a,b,c){++gd;ac+=(a-ac)/gd;bc+=(b-bc)/gd;Ub+=(c-Ub)/gd}function Ec(){function a(e,
f){e*=V;var g=Math.cos(f*=V),G=g*Math.cos(e),g=g*Math.sin(e),h=Math.sin(f),l=Math.atan2(Math.sqrt((l=c*h-d*g)*l+(l=d*G-b*h)*l+(l=b*g-c*G)*l),b*G+c*g+d*h);Nc+=l;Fb+=l*(b+(b=G));Gb+=l*(c+(c=g));nb+=l*(d+(d=h));uc(b,c,d)}var b,c,d;Lb.point=function(e,f){e*=V;var g=Math.cos(f*=V);b=g*Math.cos(e);c=g*Math.sin(e);d=Math.sin(f);Lb.point=a;uc(b,c,d)}}function pd(){Lb.point=ec}function qd(){function a(b,c){b*=V;var g=Math.cos(c*=V),G=g*Math.cos(b),g=g*Math.sin(b),h=Math.sin(c),l=e*h-f*g,ea=f*G-d*h,m=d*g-e*
G,ma=Math.sqrt(l*l+ea*ea+m*m),n=d*G+e*g+f*h,p=ma&&-Ya(n)/ma,ma=Math.atan2(ma,n);mc+=p*l;nc+=p*ea;Vb+=p*m;Nc+=ma;Fb+=ma*(d+(d=G));Gb+=ma*(e+(e=g));nb+=ma*(f+(f=h));uc(d,e,f)}var b,c,d,e,f;Lb.point=function(g,h){b=g;c=h;Lb.point=a;g*=V;var l=Math.cos(h*=V);d=l*Math.cos(g);e=l*Math.sin(g);f=Math.sin(h);uc(d,e,f)};Lb.lineEnd=function(){a(b,c);Lb.lineEnd=pd;Lb.point=ec}}function fb(){return!0}function Uc(a,b,c,d,e){var f=[],g=[];if(a.forEach(function(a){if(!(0>=(b=a.length-1))){var b,c=a[0],d=a[b];if(Dc(c,
d)){e.lineStart();for(d=0;b>d;++d)e.point((c=a[d])[0],c[1]);return e.lineEnd(),void 0}b=new Lc(c,a,null,!0);c=new Lc(c,null,b,!1);b.o=c;f.push(b);g.push(c);b=new Lc(d,a,null,!1);c=new Lc(d,null,b,!0);b.o=c;f.push(b);g.push(c)}}),g.sort(b),rd(f),rd(g),f.length){a=0;b=c;for(c=g.length;c>a;++a)g[a].e=b=!b;for(var h,l=f[0];;){for(var m=l,n=!0;m.v;)if((m=m.n)===l)return;b=m.z;e.lineStart();do{if(m.v=m.o.v=!0,m.e){if(n)for(a=0,c=b.length;c>a;++a)e.point((h=b[a])[0],h[1]);else d(m.x,m.n.x,1,e);m=m.n}else{if(n)for(b=
m.p.z,a=b.length-1;0<=a;--a)e.point((h=b[a])[0],h[1]);else d(m.x,m.p.x,-1,e);m=m.p}m=m.o;b=m.z;n=!n}while(!m.v);e.lineEnd()}}}function rd(a){if(b=a.length){for(var b,c,d=0,e=a[0];++d<b;)e.n=c=a[d],c.p=e,e=c;e.n=c=a[0];c.p=e}}function Lc(a,b,c,d){this.x=a;this.z=b;this.o=c;this.e=d;this.v=!1;this.n=this.p=null}function jd(a,b,c,d){return function(e,f){function g(b,c){var d=e(b,c);a(b=d[0],c=d[1])&&f.point(b,c)}function h(a,b){var c=e(a,b);z.point(c[0],c[1])}function l(){u.point=h;z.lineStart()}function m(){u.point=
g;z.lineEnd()}function n(a,b){A.push([a,b]);var c=e(a,b);x.point(c[0],c[1])}function p(){x.lineStart();A=[]}function q(){n(A[0][0],A[0][1]);x.lineEnd();var a;a=x.clean();var b=y.buffer(),c=b.length;if(A.pop(),v.push(A),A=null,c){if(1&a){a=b[0];var d,c=a.length-1,b=-1;for(f.lineStart();++b<c;)f.point((d=a[b])[0],d[1]);return f.lineEnd(),void 0}1<c&&2&a&&b.push(b.pop().concat(b.shift()));r.push(b.filter(sd))}}var r,v,A,z=b(f),t=e.invert(d[0],d[1]),u={point:g,lineStart:l,lineEnd:m,polygonStart:function(){u.point=
n;u.lineStart=p;u.lineEnd=q;r=[];v=[];f.polygonStart()},polygonEnd:function(){u.point=g;u.lineStart=l;u.lineEnd=m;r=w.merge(r);var a,b=t;a=v;var d=b[0],e=b[1],G=[Math.sin(d),-Math.cos(d),0],h=0,ea=0;yc.reset();for(var pa=0,n=a.length;n>pa;++pa){var Ma=a[pa],p=Ma.length;if(p)for(var wa=Ma[0],q=wa[0],b=wa[1]/2+X/4,Eb=Math.sin(b),A=Math.cos(b),Id=1;;){Id===p&&(Id=0);var b=Ma[Id],z=b[0],ed=b[1]/2+X/4,y=Math.sin(ed),ed=Math.cos(ed),x=z-q,Od=Y(x)>X,Eb=Eb*y;if(yc.add(Math.atan2(Eb*Math.sin(x),A*ed+Eb*Math.cos(x))),
h+=Od?x+(0<=x?ob:-ob):x,Od^q>=d^z>=d)wa=Pb(Wa(wa),Wa(b)),Kc(wa),q=Pb(G,wa),Kc(q),q=(Od^0<=x?-1:1)*Oa(q[2]),(e>q||e===q&&(wa[0]||wa[1]))&&(ea+=Od^0<=x?1:-1);if(!Id++)break;q=z;Eb=y;A=ed;wa=b}}a=(-N>h||N>h&&0>yc)^1&ea;r.length?Uc(r,xe,a,c,f):a&&(f.lineStart(),c(null,null,1,f),f.lineEnd());f.polygonEnd();r=v=null},sphere:function(){f.polygonStart();f.lineStart();c(null,null,1,f);f.lineEnd();f.polygonEnd()}},y=td(),x=b(y);return u}}function sd(a){return 1<a.length}function td(){var a,b=[];return{lineStart:function(){b.push(a=
[])},point:function(b,c){a.push([b,c])},lineEnd:q,buffer:function(){var c=b;return b=[],a=null,c},rejoin:function(){1<b.length&&b.push(b.pop().concat(b.shift()))}}}function xe(a,b){return(0>(a=a.x)[0]?a[1]-eb-N:eb-a[1])-(0>(b=b.x)[0]?b[1]-eb-N:eb-b[1])}function ic(a){function b(a,c){return Math.cos(a)*Math.cos(c)>e}function c(a,b,d){var f=Wa(a),g=Wa(b),G=[1,0,0],g=Pb(f,g),h=qb(g,g),f=g[0],l=h-f*f;if(!l)return!d&&a;h=e*h/l;l=-e*f/l;f=Pb(G,g);G=Jc(G,h);g=Jc(g,l);ad(G,g);g=qb(G,f);h=qb(f,f);l=g*g-h*
(qb(G,G)-1);if(!(0>l)){var ea=Math.sqrt(l),l=Jc(f,(-g-ea)/h);if(ad(l,G),l=hc(l),!d)return l;var m;d=a[0];var ma=b[0];a=a[1];b=b[1];d>ma&&(m=d,d=ma,ma=m);var pa=ma-d,n=Y(pa-X)<N,lb=n||N>pa;if(!n&&a>b&&(m=a,a=b,b=m),lb?n?0<a+b^l[1]<(Y(l[0]-d)<N?a:b):a<=l[1]&&l[1]<=b:pa>X^(d<=l[0]&&l[0]<=ma))return m=Jc(f,(-g+ea)/h),ad(m,G),[l,hc(m)]}}function d(b,c){var e=f?a:X-a,g=0;return-e>b?g|=1:b>e&&(g|=2),-e>c?g|=4:c>e&&(g|=8),g}var e=Math.cos(a),f=0<e,g=Y(e)>N,h=gc(a,6*V);return jd(b,function(a){var e,G,h,l,
m;return{lineStart:function(){l=h=!1;m=1},point:function(n,Ma){var p,wa=[n,Ma],q=b(n,Ma),r=f?q?0:d(n,Ma):q?d(n+(0>n?X:-X),Ma):0;if(!e&&(l=h=q)&&a.lineStart(),q!==h&&(p=c(e,wa),(Dc(e,p)||Dc(wa,p))&&(wa[0]+=N,wa[1]+=N,q=b(wa[0],wa[1]))),q!==h)m=0,q?(a.lineStart(),p=c(wa,e),a.point(p[0],p[1])):(p=c(e,wa),a.point(p[0],p[1]),a.lineEnd()),e=p;else if(g&&e&&f^q){var v;r&G||!(v=c(wa,e,!0))||(m=0,f?(a.lineStart(),a.point(v[0][0],v[0][1]),a.point(v[1][0],v[1][1]),a.lineEnd()):(a.point(v[1][0],v[1][1]),a.lineEnd(),
a.lineStart(),a.point(v[0][0],v[0][1])))}!q||e&&Dc(e,wa)||a.point(wa[0],wa[1]);e=wa;h=q;G=r},lineEnd:function(){h&&a.lineEnd();e=null},clean:function(){return m|(l&&h)<<1}}},h,f?[0,-a]:[-X,a-X])}function Qb(a,b,c,d){return function(e){var f,g=e.a,h=e.b,l=g.x,g=g.y,m=0,n=1,p=h.x-l,h=h.y-g;if(f=a-l,p||!(0<f)){if(f/=p,0>p){if(m>f)return;n>f&&(n=f)}else if(0<p){if(f>n)return;f>m&&(m=f)}if(f=c-l,p||!(0>f)){if(f/=p,0>p){if(f>n)return;f>m&&(m=f)}else if(0<p){if(m>f)return;n>f&&(n=f)}if(f=b-g,h||!(0<f)){if(f/=
h,0>h){if(m>f)return;n>f&&(n=f)}else if(0<h){if(f>n)return;f>m&&(m=f)}if(f=d-g,h||!(0>f)){if(f/=h,0>h){if(f>n)return;f>m&&(m=f)}else if(0<h){if(m>f)return;n>f&&(n=f)}return 0<m&&(e.a={x:l+m*p,y:g+m*h}),1>n&&(e.b={x:l+n*p,y:g+n*h}),e}}}}}}function ud(a,b,c,d){function e(d,f){return Y(d[0]-a)<N?0<f?0:3:Y(d[0]-c)<N?0<f?2:1:Y(d[1]-b)<N?0<f?1:0:0<f?3:2}function f(a,b){return g(a.x,b.x)}function g(a,b){var c=e(a,1),d=e(b,1);return c!==d?c-d:0===c?b[1]-a[1]:1===c?a[0]-b[0]:2===c?a[1]-b[1]:b[0]-a[0]}return function(h){function l(f,
h,m,n){var lb=0,p=0;if(null==f||(lb=e(f,m))!==(p=e(h,m))||0>g(f,h)^0<m){do n.point(0===lb||3===lb?a:c,1<lb?d:b);while((lb=(lb+m+4)%4)!==p)}else n.point(h[0],h[1])}function m(e,f){e>=a&&c>=e&&f>=b&&d>=f&&h.point(e,f)}function n(e,f){e=Math.max(-Pd,Math.min(Pd,e));f=Math.max(-Pd,Math.min(Pd,f));var g=e>=a&&c>=e&&f>=b&&d>=f;if(q&&r.push([e,f]),x)v=e,A=f,z=g,x=!1,g&&(h.lineStart(),h.point(e,f));else if(g&&y)h.point(e,f);else{var l={a:{x:t,y:u},b:{x:e,y:f}};C(l)?(y||(h.lineStart(),h.point(l.a.x,l.a.y)),
h.point(l.b.x,l.b.y),g||h.lineEnd(),J=!1):g&&(h.lineStart(),h.point(e,f),J=!1)}t=e;u=f;y=g}var p,q,r,v,A,z,t,u,y,x,J,B=h,H=td(),C=Qb(a,b,c,d),Z={point:m,lineStart:function(){Z.point=n;q&&q.push(r=[]);x=!0;y=!1;t=u=0/0},lineEnd:function(){p&&(n(v,A),z&&y&&H.rejoin(),p.push(H.buffer()));Z.point=m;y&&h.lineEnd()},polygonStart:function(){h=H;p=[];q=[];J=!0},polygonEnd:function(){h=B;p=w.merge(p);var b;b=[a,d];for(var c=0,e=q.length,g=b[1],ea=0;e>ea;++ea)for(var m,ma=1,n=q[ea],Ma=n.length,mb=n[0];Ma>ma;++ma)m=
n[ma],mb[1]<=g?m[1]>g&&0<Xa(mb,m,b)&&++c:m[1]<=g&&0>Xa(mb,m,b)&&--c,mb=m;b=0!==c;c=J&&b;e=p.length;(c||e)&&(h.polygonStart(),c&&(h.lineStart(),l(null,null,1,h),h.lineEnd()),e&&Uc(p,f,b,l,h),h.polygonEnd());p=q=r=null}};return Z}}function vd(a,b){function c(d,e){return d=a(d,e),b(d[0],d[1])}return a.invert&&b.invert&&(c.invert=function(c,d){return c=b.invert(c,d),c&&a.invert(c[0],c[1])}),c}function bd(a){var b=0,c=X/3,d=Tb(a);a=d(b,c);return a.parallels=function(a){return arguments.length?d(b=a[0]*
X/180,c=a[1]*X/180):[b/X*180,c/X*180]},a}function wd(a,b){function c(a,b){var d=Math.sqrt(f-2*e*Math.sin(b))/e;return[d*Math.sin(a*=e),g-d*Math.cos(a)]}var d=Math.sin(a),e=(d+Math.sin(b))/2,f=1+d*(2*e-d),g=Math.sqrt(f)/e;return c.invert=function(a,b){var c=g-b;return[Math.atan2(a,c)/e,Oa((f-(a*a+c*c)*e*e)/(2*e))]},c}function xd(){function a(b,c){Qd+=e*b-d*c;d=b;e=c}var b,c,d,e;oc.point=function(f,g){oc.point=a;b=d=f;c=e=g};oc.lineEnd=function(){a(b,c)}}function ye(){function a(b,c){g.push("M",b,",",
c,f)}function b(a,d){g.push("M",a,",",d);h.point=c}function c(a,b){g.push("L",a,",",b)}function d(){h.point=a}function e(){g.push("Z")}var f=yd(4.5),g=[],h={point:a,lineStart:function(){h.point=b},lineEnd:d,polygonStart:function(){h.lineEnd=e},polygonEnd:function(){h.lineEnd=d;h.point=a},pointRadius:function(a){return f=yd(a),h},result:function(){if(g.length){var a=g.join("");return g=[],a}}};return h}function yd(a){return"m0,"+a+"a"+a+","+a+" 0 1,1 0,"+-2*a+"a"+a+","+a+" 0 1,1 0,"+2*a+"z"}function Rb(a,
b){ac+=a;bc+=b;++Ub}function cd(){function a(d,e){var f=d-b,g=e-c,f=Math.sqrt(f*f+g*g);Fb+=f*(b+d)/2;Gb+=f*(c+e)/2;nb+=f;Rb(b=d,c=e)}var b,c;Mb.point=function(d,e){Mb.point=a;Rb(b=d,c=e)}}function Fc(){Mb.point=Rb}function zd(){function a(b,c){var f=b-d,g=c-e,f=Math.sqrt(f*f+g*g);Fb+=f*(d+b)/2;Gb+=f*(e+c)/2;nb+=f;f=e*b-d*c;mc+=f*(d+b);nc+=f*(e+c);Vb+=3*f;Rb(d=b,e=c)}var b,c,d,e;Mb.point=function(f,g){Mb.point=a;Rb(b=d=f,c=e=g)};Mb.lineEnd=function(){a(b,c)}}function Ad(a){function b(c,d){a.moveTo(c,
d);a.arc(c,d,g,0,ob)}function c(b,e){a.moveTo(b,e);h.point=d}function d(b,c){a.lineTo(b,c)}function e(){h.point=b}function f(){a.closePath()}var g=4.5,h={point:b,lineStart:function(){h.point=c},lineEnd:e,polygonStart:function(){h.lineEnd=f},polygonEnd:function(){h.lineEnd=e;h.point=b},pointRadius:function(a){return g=a,h},result:q};return h}function ze(a){function b(a){return(h?d:c)(a)}function c(b){return vc(b,function(c,d){c=a(c,d);b.point(c[0],c[1])})}function d(b){function c(d,e){d=a(d,e);b.point(d[0],
d[1])}function f(){v=0/0;w.point=g;b.lineStart()}function g(c,d){var f=Wa([c,d]),l=a(c,d);e(v,A,r,z,t,u,v=l[0],A=l[1],r=c,z=f[0],t=f[1],u=f[2],h,b);b.point(v,A)}function l(){w.point=c;b.lineEnd()}function ea(){f();w.point=m;w.lineEnd=ma}function m(a,b){g(n=a,b);pa=v;lb=A;p=z;q=t;mb=u;w.point=g}function ma(){e(v,A,r,z,t,u,pa,lb,n,p,q,mb,h,b);w.lineEnd=l;l()}var n,pa,lb,p,q,mb,r,v,A,z,t,u,w={point:c,lineStart:f,lineEnd:l,polygonStart:function(){b.polygonStart();w.lineStart=ea},polygonEnd:function(){b.polygonEnd();
w.lineStart=f}};return w}function e(b,c,d,h,l,ea,m,ma,n,pa,p,q,wa,r){var v=m-b,A=ma-c,z=v*v+A*A;if(z>4*f&&wa--){var t=h+pa,u=l+p,w=ea+q,y=Math.sqrt(t*t+u*u+w*w),x=Math.asin(w/=y),J=Y(Y(w)-1)<N||Y(d-n)<N?(d+n)/2:Math.atan2(u,t),B=a(J,x),x=B[0],B=B[1],H=x-b,C=B-c,Z=A*H-v*C;(Z*Z/z>f||.3<Y((v*H+A*C)/z-.5)||g>h*pa+l*p+ea*q)&&(e(b,c,d,h,l,ea,x,B,J,t/=y,u/=y,w,wa,r),r.point(x,B),e(x,B,J,t,u,w,m,ma,n,pa,p,q,wa,r))}}var f=.5,g=Math.cos(30*V),h=16;return b.precision=function(a){return arguments.length?(h=0<
(f=a*a)&&16,b):Math.sqrt(f)},b}function Bd(a){var b=ze(function(b,c){return a([b*ya,c*ya])});return function(a){return Mc(b(a))}}function Cd(a){this.stream=a}function vc(a,b){return{point:b,sphere:function(){a.sphere()},lineStart:function(){a.lineStart()},lineEnd:function(){a.lineEnd()},polygonStart:function(){a.polygonStart()},polygonEnd:function(){a.polygonEnd()}}}function Sb(a){return Tb(function(){return a})()}function Tb(a){function b(a){return a=h(a[0]*V,a[1]*V),[a[0]*q+l,m-a[1]*q]}function c(a){return a=
h.invert((a[0]-l)/q,(m-a[1])/q),a&&[a[0]*ya,a[1]*ya]}function d(){h=vd(g=jc(t,u,y),f);var a=f(A,z);return l=r-a[0]*q,m=v+a[1]*q,e()}function e(){return n&&(n.valid=!1,n=null),b}var f,g,h,l,m,n,p=ze(function(a,b){return a=f(a,b),[a[0]*q+l,m-a[1]*q]}),q=150,r=480,v=250,A=0,z=0,t=0,u=0,y=0,x=Mf,J=ta,B=null,H=null;return b.stream=function(a){return n&&(n.valid=!1),n=Mc(x(g,p(J(a)))),n.valid=!0,n},b.clipAngle=function(a){return arguments.length?(x=null==a?(B=a,Mf):ic((B=+a)*V),e()):B},b.clipExtent=function(a){return arguments.length?
(H=a,J=a?ud(a[0][0],a[0][1],a[1][0],a[1][1]):ta,e()):H},b.scale=function(a){return arguments.length?(q=+a,d()):q},b.translate=function(a){return arguments.length?(r=+a[0],v=+a[1],d()):[r,v]},b.center=function(a){return arguments.length?(A=a[0]%360*V,z=a[1]%360*V,d()):[A*ya,z*ya]},b.rotate=function(a){return arguments.length?(t=a[0]%360*V,u=a[1]%360*V,y=2<a.length?a[2]%360*V:0,d()):[t*ya,u*ya,y*ya]},w.rebind(b,p,"precision"),function(){return f=a.apply(this,arguments),b.invert=f.invert&&c,d()}}function Mc(a){return vc(a,
function(b,c){a.point(b*V,c*V)})}function wc(a,b){return[a,b]}function sc(a,b){return[a>X?a-ob:-X>a?a+ob:a,b]}function jc(a,b,c){return a?b||c?vd(Ed(a),Fd(b,c)):Ed(a):b||c?Fd(b,c):sc}function Dd(a){return function(b,c){return b+=a,[b>X?b-ob:-X>b?b+ob:b,c]}}function Ed(a){var b=Dd(a);return b.invert=Dd(-a),b}function Fd(a,b){function c(a,b){var h=Math.cos(b),G=Math.cos(a)*h,h=Math.sin(a)*h,l=Math.sin(b),m=l*d+G*e;return[Math.atan2(h*f-m*g,G*d-l*e),Oa(m*f+h*g)]}var d=Math.cos(a),e=Math.sin(a),f=Math.cos(b),
g=Math.sin(b);return c.invert=function(a,b){var c=Math.cos(b),h=Math.cos(a)*c,c=Math.sin(a)*c,G=Math.sin(b),l=G*f-c*g;return[Math.atan2(c*f+G*g,h*d+l*e),Oa(l*d-h*e)]},c}function gc(a,b){var c=Math.cos(a),d=Math.sin(a);return function(e,f,g,h){var l=g*b;null!=e?(e=fc(c,e),f=fc(c,f),(0<g?f>e:e>f)&&(e+=g*ob)):(e=a+g*ob,f=a-.5*l);for(var m;0<g?e>f:f>e;e-=l)h.point((m=hc([c,-d*Math.cos(e),-d*Math.sin(e)]))[0],m[1])}}function fc(a,b){var c=Wa(b);c[0]-=a;Kc(c);var d=Ya(-c[1]);return((0>-c[2]?-d:d)+2*Math.PI-
N)%(2*Math.PI)}function dd(a,b,c){var d=w.range(a,b-N,c).concat(b);return function(a){return d.map(function(b){return[a,b]})}}function Tc(a,b,c){var d=w.range(a,b-N,c).concat(b);return function(a){return d.map(function(b){return[b,a]})}}function oe(a){return a.source}function pe(a){return a.target}function Pg(a,b,c,d){var e=Math.cos(b),f=Math.sin(b),g=Math.cos(d),h=Math.sin(d),l=e*Math.cos(a),m=e*Math.sin(a),n=g*Math.cos(c),p=g*Math.sin(c),q=2*Math.asin(Math.sqrt(za(d-b)+e*g*za(c-a))),r=1/Math.sin(q);
c=q?function(a){var b=Math.sin(a*=q)*r,c=Math.sin(q-a)*r;a=c*l+b*n;var d=c*m+b*p,b=c*f+b*h;return[Math.atan2(d,a)*ya,Math.atan2(b,Math.sqrt(a*a+d*d))*ya]}:function(){return[a*ya,b*ya]};return c.distance=q,c}function rc(a,b){function c(b,d){var e=Math.cos(b),f=Math.cos(d),e=a(e*f);return[e*f*Math.sin(b),e*Math.sin(d)]}return c.invert=function(a,c){var d=Math.sqrt(a*a+c*c),e=b(d),f=Math.sin(e),e=Math.cos(e);return[Math.atan2(a*f,d*e),Math.asin(d&&c*f/d)]},c}function ef(a,b){function c(a,b){var d=Y(Y(b)-
eb)<N?0:f/Math.pow(Math.tan(X/4+b/2),e);return[d*Math.sin(e*a),f-d*Math.cos(e*a)]}var d=Math.cos(a),e=a===b?Math.sin(a):Math.log(d/Math.cos(b))/Math.log(Math.tan(X/4+b/2)/Math.tan(X/4+a/2)),f=d*Math.pow(Math.tan(X/4+a/2),e)/e;return e?(c.invert=function(a,b){var c=f-b,d=(0<e?1:0>e?-1:0)*Math.sqrt(a*a+c*c);return[Math.atan2(a,c)/e,2*Math.atan(Math.pow(f/d,1/e))-eb]},c):kd}function ff(a,b){function c(a,b){var d=f-b;return[d*Math.sin(e*a),f-d*Math.cos(e*a)]}var d=Math.cos(a),e=a===b?Math.sin(a):(d-Math.cos(b))/
(b-a),f=d/e+a;return Y(e)<N?wc:(c.invert=function(a,b){var c=f-b;return[Math.atan2(a,c)/e,f-(0<e?1:0>e?-1:0)*Math.sqrt(a*a+c*c)]},c)}function kd(a,b){return[a,Math.log(Math.tan(X/4+b/2))]}function gf(a){var b,c=Sb(a),d=c.scale,e=c.translate,f=c.clipExtent;return c.scale=function(){var a=d.apply(c,arguments);return a===c?b?c.clipExtent(null):c:a},c.translate=function(){var a=e.apply(c,arguments);return a===c?b?c.clipExtent(null):c:a},c.clipExtent=function(a){var g=f.apply(c,arguments);if(g===c){if(b=
null==a){var h=X*d(),G=e();f([[G[0]-h,G[1]-h],[G[0]+h,G[1]+h]])}}else b&&(g=null);return g},c.clipExtent(null)}function qe(a,b){return[Math.log(Math.tan(X/4+b/2)),-a]}function Gc(a){return a[0]}function Vc(a){return a[1]}function hf(a){for(var b=a.length,c=[0,1],d=2,e=2;b>e;e++){for(;1<d&&0>=Xa(a[c[d-2]],a[c[d-1]],a[e]);)--d;c[d++]=e}return c.slice(0,d)}function re(a,b){return a[0]-b[0]||a[1]-b[1]}function se(a,b,c){return(c[0]-b[0])*(a[1]-b[1])<(c[1]-b[1])*(a[0]-b[0])}function jf(a,b,c,d){var e=
a[0],f=c[0],g=b[0]-e,h=d[0]-f;a=a[1];c=c[1];b=b[1]-a;d=d[1]-c;f=(h*(a-c)-d*(e-f))/(d*g-h*b);return[e+f*g,a+f*b]}function kf(a){var b=a[0];a=a[a.length-1];return!(b[0]-a[0]||b[1]-a[1])}function Qg(){md(this);this.edge=this.site=this.circle=null}function tf(a){var b=Nf.pop()||new Qg;return b.site=a,b}function we(a){Hc(a);Oc.remove(a);Nf.push(a);md(a)}function qf(a,b){var c=a.site,d=c.x,e=c.y,f=e-b;if(!f)return d;var g=a.P;if(!g)return-1/0;var c=g.site,g=c.x,c=c.y,h=c-b;if(!h)return g;var l=g-d,m=1/
f-1/h,n=l/h;return m?(-n+Math.sqrt(n*n-2*m*(l*l/(-2*h)-c+h/2+e-f/2)))/m+d:(d+g)/2}function rf(a){this.site=a;this.edges=[]}function yf(a,b){return b.angle-a.angle}function hh(){md(this);this.x=this.y=this.arc=this.site=this.cy=null}function Ic(a){var b=a.P,c=a.N;if(b&&c){var d=b.site,b=a.site,e=c.site;if(d!==e){var c=b.x,f=b.y,g=d.x-c,h=d.y-f,d=e.x-c,e=e.y-f,l=2*(g*e-h*d);if(!(l>=-Ee)){var m=g*g+h*h,n=d*d+e*e,h=(e*m-h*n)/l,g=(g*n-d*m)/l,e=g+f,f=Of.pop()||new hh;f.arc=a;f.site=b;f.x=h+c;f.y=e+Math.sqrt(h*
h+g*g);f.cy=e;a.circle=f;a=null;for(b=hd._;b;)if(f.y<b.y||f.y===b.y&&f.x<=b.x){if(!b.L){a=b.P;break}b=b.L}else{if(!b.R){a=b;break}b=b.R}hd.insert(a,f);a||(Fe=f)}}}}function Hc(a){var b=a.circle;b&&(b.P||(Fe=b.N),hd.remove(b),Of.push(b),md(b),a.circle=null)}function ih(a,b){var c=a.b;if(c)return!0;var d,e,f=a.a,c=b[0][0],g=b[1][0],h=b[0][1],l=b[1][1],m=a.l,n=a.r,p=m.x,m=m.y,q=n.x,n=n.y;e=(p+q)/2;if(n===m){if(c>e||e>=g)return;if(p>q){if(f){if(f.y>=l)return}else f={x:e,y:h};c={x:e,y:l}}else{if(f){if(f.y<
h)return}else f={x:e,y:l};c={x:e,y:h}}}else if(d=(p-q)/(n-m),e=(m+n)/2-d*e,-1>d||1<d)if(p>q){if(f){if(f.y>=l)return}else f={x:(h-e)/d,y:h};c={x:(l-e)/d,y:l}}else{if(f){if(f.y<h)return}else f={x:(l-e)/d,y:l};c={x:(h-e)/d,y:h}}else if(n>m){if(f){if(f.x>=g)return}else f={x:c,y:d*c+e};c={x:g,y:d*g+e}}else{if(f){if(f.x<c)return}else f={x:g,y:d*g+e};c={x:c,y:d*c+e}}return a.a=f,a.b=c,!0}function sf(a,b){this.l=a;this.r=b;this.a=this.b=null}function Yc(a,b,c,d){var e=new sf(a,b);return Pc.push(e),c&&od(e,
a,b,c),d&&od(e,b,a,d),zc[a.i].edges.push(new ld(e,a,b)),zc[b.i].edges.push(new ld(e,b,a)),e}function Rg(a,b,c){a=new sf(a,null);return a.a=b,a.b=c,Pc.push(a),a}function od(a,b,c,d){a.a||a.b?a.l===c?a.b=d:a.a=d:(a.a=d,a.l=b,a.r=c)}function ld(a,b,c){var d=a.a,e=a.b;this.edge=a;this.site=b;this.angle=c?Math.atan2(c.y-b.y,c.x-b.x):a.l===b?Math.atan2(e.x-d.x,d.y-e.y):Math.atan2(d.x-e.x,e.y-d.y)}function ve(){this._=null}function md(a){a.U=a.C=a.L=a.R=a.P=a.N=null}function Wc(a,b){var c=b.R,d=b.U;d?d.L===
b?d.L=c:d.R=c:a._=c;c.U=d;b.U=c;b.R=c.L;b.R&&(b.R.U=b);c.L=b}function Xc(a,b){var c=b.L,d=b.U;d?d.L===b?d.L=c:d.R=c:a._=c;c.U=d;b.U=c;b.L=c.R;b.L&&(b.L.U=b);c.R=b}function wf(a){for(;a.L;)a=a.L;return a}function ue(a,b){var c,d,e,f=a.sort(jh).pop();Pc=[];zc=Array(a.length);Oc=new ve;for(hd=new ve;;)if(e=Fe,f&&(!e||f.y<e.y||f.y===e.y&&f.x<e.x)){if(f.x!==c||f.y!==d){zc[f.i]=new rf(f);c=f;for(var g=d=void 0,h=void 0,l=void 0,m=c.x,n=c.y,p=Oc._;p;)if(h=qf(p,n)-m,h>N)p=p.L;else{var q;var r=p;q=n;var v=
r.N;v?q=qf(v,q):(r=r.site,q=r.y===q?r.x:1/0);if(l=m-q,!(l>N)){h>-N?(d=p.P,g=p):l>-N?(d=p,g=p.N):d=g=p;break}if(!p.R){d=p;break}p=p.R}h=tf(c);if(Oc.insert(d,h),d||g)if(d===g)Hc(d),g=tf(d.site),Oc.insert(h,g),h.edge=g.edge=Yc(d.site,h.site),Ic(d),Ic(g);else if(g){Hc(d);Hc(g);l=d.site;n=l.x;p=l.y;q=c.x-n;var r=c.y-p,m=g.site,v=m.x-n,A=m.y-p,z=2*(q*A-r*v),t=q*q+r*r,u=v*v+A*A,n={x:(A*t-r*u)/z+n,y:(q*u-v*t)/z+p};od(g.edge,l,m,n);h.edge=Yc(l,c,null,n);g.edge=Yc(c,m,null,n);Ic(d);Ic(g)}else h.edge=Yc(d.site,
h.site);c=f.x;d=f.y}f=a.pop()}else{if(!e)break;m=e.arc;g=m.circle;l=g.x;n=g.cy;g={x:l,y:n};q=m.P;p=m.N;h=[m];we(m);for(m=q;m.circle&&Y(l-m.circle.x)<N&&Y(n-m.circle.cy)<N;)q=m.P,h.unshift(m),we(m),m=q;h.unshift(m);Hc(m);for(q=p;q.circle&&Y(l-q.circle.x)<N&&Y(n-q.circle.cy)<N;)p=q.N,h.push(q),we(q),q=p;h.push(q);Hc(q);l=void 0;n=h.length;for(l=1;n>l;++l)q=h[l],m=h[l-1],od(q.edge,m.site,q.site,g);m=h[0];q=h[n-1];q.edge=Yc(m.site,q.site,null,g);Ic(m);Ic(q)}if(b){f=Pc;c=Qb(b[0][0],b[0][1],b[1][0],b[1][1]);
for(d=f.length;d--;)e=f[d],(!ih(e,b)||!c(e)||Y(e.a.x-e.b.x)<N&&Y(e.a.y-e.b.y)<N)&&(e.a=e.b=null,f.splice(d,1));var w,m=b[0][0],n=b[1][0],p=b[0][1];q=b[1][1];r=zc;for(v=r.length;v--;)if(w=r[v],w&&w.prepare())for(g=w.edges,h=g.length,d=0;h>d;)l=g[d].end(),f=l.x,c=l.y,A=g[++d%h].start(),e=A.x,A=A.y,(Y(f-e)>N||Y(c-A)>N)&&(g.splice(d,0,new ld(Rg(w.site,l,Y(f-m)<N&&q-c>N?{x:m,y:Y(e-m)<N?A:q}:Y(c-q)<N&&n-f>N?{x:Y(A-q)<N?e:n,y:q}:Y(f-n)<N&&c-p>N?{x:n,y:Y(e-n)<N?A:p}:Y(c-p)<N&&f-m>N?{x:Y(A-p)<N?e:m,y:p}:null),
w.site,null)),++h)}w={cells:zc,edges:Pc};return Oc=hd=Pc=zc=null,w}function jh(a,b){return b.y-a.y||b.x-a.x}function kh(a){return a.x}function Xg(a){return a.y}function zf(){return{leaf:!0,nodes:[],point:null,x:null,y:null}}function $c(a,b,c,d,e,f){if(!a(b,c,d,e,f)){var g=.5*(c+e),h=.5*(d+f);b=b.nodes;b[0]&&$c(a,b[0],c,d,g,h);b[1]&&$c(a,b[1],g,d,e,h);b[2]&&$c(a,b[2],c,h,g,f);b[3]&&$c(a,b[3],g,h,e,f)}}function te(a,b){a=w.rgb(a);b=w.rgb(b);var c=a.r,d=a.g,e=a.b,f=b.r-c,g=b.g-d,h=b.b-e;return function(a){return"#"+
Ta(Math.round(c+f*a))+Ta(Math.round(d+g*a))+Ta(Math.round(e+h*a))}}function uf(a,b){var c,d={},e={};for(c in a)c in b?d[c]=tc(a[c],b[c]):e[c]=a[c];for(c in b)c in a||(e[c]=b[c]);return function(a){for(c in d)e[c]=d[c](a);return e}}function Xb(a,b){return b-=a=+a,function(c){return a+b*c}}function Af(a,b){var c,d,e,f,g=0,h=[],l=[];a+="";b+="";for(d=Rd.lastIndex=0;c=Rd.exec(b);++d)c.index&&h.push(b.substring(g,c.index)),l.push({i:h.length,x:c[0]}),h.push(null),g=Rd.lastIndex;g<b.length&&h.push(b.substring(g));
d=0;for(e=l.length;(c=Rd.exec(a))&&e>d;++d)if(f=l[d],f.x==c[0]){if(f.i)if(null==h[f.i+1])for(h[f.i-1]+=f.x,h.splice(f.i,1),c=d+1;e>c;++c)l[c].i--;else for(h[f.i-1]+=f.x+h[f.i+1],h.splice(f.i,2),c=d+1;e>c;++c)l[c].i-=2;else if(null==h[f.i+1])h[f.i]=f.x;else for(h[f.i]=f.x+h[f.i+1],h.splice(f.i+1,1),c=d+1;e>c;++c)l[c].i--;l.splice(d,1);e--;d--}else f.x=Xb(parseFloat(c[0]),parseFloat(f.x));for(;e>d;)f=l.pop(),null==h[f.i+1]?h[f.i]=f.x:(h[f.i]=f.x+h[f.i+1],h.splice(f.i+1,1)),e--;return 1===h.length?null==
h[0]?(f=l[0].x,function(a){return f(a)+""}):function(){return b}:function(a){for(d=0;e>d;++d)h[(f=l[d]).i]=f.x(a);return h.join("")}}function tc(a,b){for(var c,d=w.interpolators.length;0<=--d&&!(c=w.interpolators[d](a,b)););return c}function nd(a,b){var c,d=[],e=[],f=a.length,g=b.length,h=Math.min(a.length,b.length);for(c=0;h>c;++c)d.push(tc(a[c],b[c]));for(;f>c;++c)e[c]=a[c];for(;g>c;++c)e[c]=b[c];return function(a){for(c=0;h>c;++c)e[c]=d[c](a);return e}}function lh(a){return function(b){return 0>=
b?0:1<=b?1:a(b)}}function Bf(a){return function(b){return 1-a(1-b)}}function xf(a){return function(b){return.5*(.5>b?a(2*b):2-a(2-2*b))}}function Yg(a){return a*a}function mh(a){return a*a*a}function nh(a){if(0>=a)return 0;if(1<=a)return 1;var b=a*a,c=b*a;return 4*(.5>a?c:3*(a-b)+c-.75)}function oh(a){return 1-Math.cos(a*eb)}function Wg(a){return Math.pow(2,10*(a-1))}function ph(a){return 1-Math.sqrt(1-a*a)}function qh(a){return 1/2.75>a?7.5625*a*a:2/2.75>a?7.5625*(a-=1.5/2.75)*a+.75:2.5/2.75>a?7.5625*
(a-=2.25/2.75)*a+.9375:7.5625*(a-=2.625/2.75)*a+.984375}function lf(a,b){return b-=a,function(c){return Math.round(a+b*c)}}function mf(a){var b=[a.a,a.b],c=[a.c,a.d],d=nf(b),e=b[0]*c[0]+b[1]*c[1],f;f=-e;f=(c[0]+=f*b[0],c[1]+=f*b[1],c);f=nf(f)||0;b[0]*c[1]<c[0]*b[1]&&(b[0]*=-1,b[1]*=-1,d*=-1,e*=-1);this.rotate=(d?Math.atan2(b[1],b[0]):Math.atan2(-c[0],c[1]))*ya;this.translate=[a.e,a.f];this.scale=[d,f];this.skew=f?Math.atan2(e,f)*ya:0}function nf(a){var b=Math.sqrt(a[0]*a[0]+a[1]*a[1]);return b&&(a[0]/=
b,a[1]/=b),b}function of(a,b){var c,d=[],e=[],f=w.transform(a),g=w.transform(b),h=f.translate,l=g.translate,m=f.rotate,n=g.rotate,p=f.skew,q=g.skew,f=f.scale,g=g.scale;return h[0]!=l[0]||h[1]!=l[1]?(d.push("translate(",null,",",null,")"),e.push({i:1,x:Xb(h[0],l[0])},{i:3,x:Xb(h[1],l[1])})):l[0]||l[1]?d.push("translate("+l+")"):d.push(""),m!=n?(180<m-n?n+=360:180<n-m&&(m+=360),e.push({i:d.push(d.pop()+"rotate(",null,")")-2,x:Xb(m,n)})):n&&d.push(d.pop()+"rotate("+n+")"),p!=q?e.push({i:d.push(d.pop()+
"skewX(",null,")")-2,x:Xb(p,q)}):q&&d.push(d.pop()+"skewX("+q+")"),f[0]!=g[0]||f[1]!=g[1]?(c=d.push(d.pop()+"scale(",null,",",null,")"),e.push({i:c-4,x:Xb(f[0],g[0])},{i:c-2,x:Xb(f[1],g[1])})):(1!=g[0]||1!=g[1])&&d.push(d.pop()+"scale("+g+")"),c=e.length,function(a){for(var b,f=-1;++f<c;)d[(b=e[f]).i]=b.x(a);return d.join("")}}function Sg(a,b){return b=b-(a=+a)?1/(b-a):0,function(c){return(c-a)*b}}function Tg(a,b){return b=b-(a=+a)?1/(b-a):0,function(c){return Math.max(0,Math.min(1,(c-a)*b))}}function Ug(a){var b=
a.source;a=a.target;var c;var d=a;if(b===d)c=b;else{c=pf(b);for(var d=pf(d),e=c.pop(),f=d.pop(),g=null;e===f;)g=e,e=c.pop(),f=d.pop();c=g}for(d=[b];b!==c;)b=b.parent,d.push(b);for(b=d.length;a!==c;)d.splice(b,0,a),a=a.parent;return d}function pf(a){for(var b=[],c=a.parent;null!=c;)b.push(a),a=c,c=c.parent;return b.push(a),b}function Vg(a){a.fixed|=2}function Zg(a){a.fixed&=-7}function $g(a){a.fixed|=4;a.px=a.x;a.py=a.y}function ah(a){a.fixed&=-5}function vf(a,b,c){var d=0,e=0;if(a.charge=0,!a.leaf)for(var f,
g=a.nodes,h=g.length,l=-1;++l<h;)f=g[l],null!=f&&(vf(f,b,c),a.charge+=f.charge,d+=f.charge*f.cx,e+=f.charge*f.cy);a.point&&(a.leaf||(a.point.x+=Math.random()-.5,a.point.y+=Math.random()-.5),b*=c[a.point.index],a.charge+=a.pointCharge=b,d+=b*a.point.x,e+=b*a.point.y);a.cx=d/a.charge;a.cy=e/a.charge}function Zc(a,b){return w.rebind(a,b,"sort","children","value"),a.nodes=a,a.links=eh,a}function bh(a){return a.children}function ch(a){return a.value}function dh(a,b){return b.value-a.value}function eh(a){return w.merge(a.map(function(a){return(a.children||
[]).map(function(b){return{source:a,target:b}})}))}function fh(a){return a.x}function gh(a){return a.y}function uh(a,b,c){a.y0=b;a.y=c}function Ge(a){return w.range(a.length)}function He(a){var b=-1;a=a[0].length;for(var c=[];++b<a;)c[b]=0;return c}function vh(a){for(var b,c=1,d=0,e=a[0][1],f=a.length;f>c;++c)(b=a[c][1])>e&&(d=c,e=b);return d}function wh(a){return a.reduce(xh,0)}function xh(a,b){return a+b[1]}function yh(a,b){return Pf(a,Math.ceil(Math.log(b.length)/Math.LN2+1))}function Pf(a,b){for(var c=
-1,d=+a[0],e=(a[1]-d)/b,f=[];++c<=b;)f[c]=e*c+d;return f}function zh(a){return[w.min(a),w.max(a)]}function Qf(a,b){return a.parent==b.parent?1:2}function Ie(a){var b=a.children;return b&&b.length?b[0]:a._tree.thread}function Je(a){var b,c=a.children;return c&&(b=c.length)?c[b-1]:a._tree.thread}function Sd(a,b){var c=a.children;if(c&&(e=c.length))for(var d,e,f=-1;++f<e;)0<b(d=Sd(c[f],b),a)&&(a=d);return a}function Ah(a,b){return a.x-b.x}function Bh(a,b){return b.x-a.x}function Ch(a,b){return a.depth-
b.depth}function cc(a,b){function c(a,d){var e=a.children;if(e&&(g=e.length))for(var f,g,h=null,G=-1;++G<g;)f=e[G],c(f,h),h=f;b(a,d)}c(a,null)}function Dh(a,b){return a.value-b.value}function Ke(a,b){var c=a._pack_next;a._pack_next=b;b._pack_prev=a;b._pack_next=c;c._pack_prev=b}function Rf(a,b){a._pack_next=b;b._pack_prev=a}function Sf(a,b){var c=b.x-a.x,d=b.y-a.y,e=a.r+b.r;return.999*e*e>c*c+d*d}function Tf(a){function b(a){n=Math.min(a.x-a.r,n);p=Math.max(a.x+a.r,p);q=Math.min(a.y-a.r,q);r=Math.max(a.y+
a.r,r)}if((c=a.children)&&(m=c.length)){var c,d,e,f,g,h,l,m,n=1/0,p=-1/0,q=1/0,r=-1/0;if(c.forEach(Eh),d=c[0],d.x=-d.r,d.y=0,b(d),1<m&&(e=c[1],e.x=e.r,e.y=0,b(e),2<m))for(f=c[2],Uf(d,e,f),b(f),Ke(d,f),d._pack_prev=f,Ke(f,e),e=d._pack_next,g=3;m>g;g++){Uf(d,e,f=c[g]);var v=0,A=1,z=1;for(h=e._pack_next;h!==e;h=h._pack_next,A++)if(Sf(h,f)){v=1;break}if(1==v)for(l=d._pack_prev;l!==h._pack_prev&&!Sf(l,f);l=l._pack_prev,z++);v?(z>A||A==z&&e.r<d.r?Rf(d,e=h):Rf(d=l,e),g--):(Ke(d,f),e=f,b(f))}d=(n+p)/2;e=
(q+r)/2;for(g=h=0;m>g;g++)f=c[g],f.x-=d,f.y-=e,h=Math.max(h,f.r+Math.sqrt(f.x*f.x+f.y*f.y));a.r=h;c.forEach(Fh)}}function Eh(a){a._pack_next=a._pack_prev=a}function Fh(a){delete a._pack_next;delete a._pack_prev}function Vf(a,b,c,d){var e=a.children;if(a.x=b+=d*a.x,a.y=c+=d*a.y,a.r*=d,e){a=-1;for(var f=e.length;++a<f;)Vf(e[a],b,c,d)}}function Uf(a,b,c){var d=a.r+c.r,e=b.x-a.x,f=b.y-a.y;if(d&&(e||f)){var g=b.r+c.r,h=e*e+f*f,g=g*g,d=d*d;b=.5+(d-g)/(2*h);g=Math.sqrt(Math.max(0,2*g*(d+h)-(d-=h)*d-g*g))/
(2*h);c.x=a.x+b*e+g*f;c.y=a.y+b*f-g*e}else c.x=a.x+d,c.y=a.y}function Gh(a){return 1+w.max(a,function(a){return a.y})}function Hh(a){return a.reduce(function(a,b){return a+b.x},0)/a.length}function Wf(a){var b=a.children;return b&&b.length?Wf(b[0]):a}function Xf(a){var b,c=a.children;return c&&(b=c.length)?Xf(c[b-1]):a}function Le(a){return{x:a.x,y:a.y,dx:a.dx,dy:a.dy}}function Yf(a,b){var c=a.x+b[3],d=a.y+b[0],e=a.dx-b[1]-b[3],f=a.dy-b[0]-b[2];return 0>e&&(c+=e/2,e=0),0>f&&(d+=f/2,f=0),{x:c,y:d,
dx:e,dy:f}}function Qc(a){var b=a[0];a=a[a.length-1];return a>b?[b,a]:[a,b]}function Td(a){return a.rangeExtent?a.rangeExtent():Qc(a.range())}function Ih(a,b,c,d){var e=c(a[0],a[1]),f=d(b[0],b[1]);return function(a){return f(e(a))}}function Ud(a,b){var c,d=0,e=a.length-1,f=a[d],g=a[e];return f>g&&(c=d,d=e,e=c,c=f,f=g,g=c),a[d]=b.floor(f),a[e]=b.ceil(g),a}function Zf(a){return a?{floor:function(b){return Math.floor(b/a)*a},ceil:function(b){return Math.ceil(b/a)*a}}:Jh}function Kh(a,b,c,d){var e=[],
f=[],g=0,h=Math.min(a.length,b.length)-1;for(a[h]<a[0]&&(a=a.slice().reverse(),b=b.slice().reverse());++g<=h;)e.push(c(a[g-1],a[g])),f.push(d(b[g-1],b[g]));return function(b){var c=w.bisect(a,b,1,h)-1;return f[c](e[c](b))}}function $f(a,b,c,d){function e(){var l=2<Math.min(a.length,b.length)?Kh:Ih,m=d?Tg:Sg;return g=l(a,b,m,c),h=l(b,a,m,tc),f}function f(a){return g(a)}var g,h;return f.invert=function(a){return h(a)},f.domain=function(b){return arguments.length?(a=b.map(Number),e()):a},f.range=function(a){return arguments.length?
(b=a,e()):b},f.rangeRound=function(a){return f.range(a).interpolate(lf)},f.clamp=function(a){return arguments.length?(d=a,e()):d},f.interpolate=function(a){return arguments.length?(c=a,e()):c},f.ticks=function(b){return w.range.apply(w,pc(a,b))},f.tickFormat=function(b,c){return Me(a,b,c)},f.nice=function(b){return Ud(a,Zf(pc(a,b)[2])),e()},f.copy=function(){return $f(a,b,c,d)},e()}function Ne(a,b){return w.rebind(a,b,"range","rangeRound","interpolate","clamp")}function pc(a,b){null==b&&(b=10);var c=
Qc(a),d=c[1]-c[0],e=Math.pow(10,Math.floor(Math.log(d/b)/Math.LN10)),d=b/d*e;return.15>=d?e*=10:.35>=d?e*=5:.75>=d&&(e*=2),c[0]=Math.ceil(c[0]/e)*e,c[1]=Math.floor(c[1]/e)*e+.5*e,c[2]=e,c}function Me(a,b,c){var d=pc(a,b);return w.format(c?c.replace(If,function(a,b,c,e,f,g,h,l,G,m){return[b,c,e,f,g,h,l,G||"."+Lh(m,d),m].join("")}):",."+Oe(d[2])+"f")}function Oe(a){return-Math.floor(Math.log(a)/Math.LN10+.01)}function Lh(a,b){var c=Oe(b[2]);return a in Mh?Math.abs(c-Oe(Math.max(Math.abs(b[0]),Math.abs(b[1]))))+
+("e"!==a):c-2*("%"===a)}function ag(a,b,c,d){function e(a){return(c?Math.log(0>a?0:a):-Math.log(0<a?0:-a))/Math.log(b)}function f(a){return c?Math.pow(b,a):-Math.pow(b,-a)}function g(b){return a(e(b))}return g.invert=function(b){return f(a.invert(b))},g.domain=function(b){return arguments.length?(c=0<=b[0],a.domain((d=b.map(Number)).map(e)),g):d},g.base=function(c){return arguments.length?(b=+c,a.domain(d.map(e)),g):b},g.nice=function(){var b=Ud(d.map(e),c?Math:Nh);return a.domain(b),d=b.map(f),
g},g.ticks=function(){var a=Qc(d),g=[],h=a[0],a=a[1],l=Math.floor(e(h)),G=Math.ceil(e(a)),m=b%1?2:b;if(isFinite(G-l)){if(c){for(;G>l;l++)for(var n=1;m>n;n++)g.push(f(l)*n);g.push(f(l))}else for(g.push(f(l));l++<G;)for(n=m-1;0<n;n--)g.push(f(l)*n);for(l=0;g[l]<h;l++);for(G=g.length;g[G-1]>a;G--);g=g.slice(l,G)}return g},g.tickFormat=function(a,b){if(!arguments.length)return bg;2>arguments.length?b=bg:"function"!=typeof b&&(b=w.format(b));var d,h=Math.max(.1,a/g.ticks().length),l=c?(d=1E-12,Math.ceil):
(d=-1E-12,Math.floor);return function(a){return a/f(l(e(a)+d))<=h?b(a):""}},g.copy=function(){return ag(a.copy(),b,c,d)},Ne(g,a)}function cg(a,b,c){function d(b){return a(e(b))}var e=Vd(b),f=Vd(1/b);return d.invert=function(b){return f(a.invert(b))},d.domain=function(b){return arguments.length?(a.domain((c=b.map(Number)).map(e)),d):c},d.ticks=function(a){return w.range.apply(w,pc(c,a))},d.tickFormat=function(a,b){return Me(c,a,b)},d.nice=function(a){return d.domain(Ud(c,Zf(pc(c,a)[2])))},d.exponent=
function(g){return arguments.length?(e=Vd(b=g),f=Vd(1/b),a.domain(c.map(e)),d):b},d.copy=function(){return cg(a.copy(),b,c)},Ne(d,a)}function Vd(a){return function(b){return 0>b?-Math.pow(-b,a):Math.pow(b,a)}}function dg(a,b){function c(d){return g[((f.get(d)||"range"===b.t&&f.set(d,a.push(d)))-1)%g.length]}function e(b,c){return w.range(a.length).map(function(a){return b+c*a})}var f,g,h;return c.domain=function(e){if(!arguments.length)return a;a=[];f=new d;for(var g,h=-1,l=e.length;++h<l;)f.has(g=
e[h])||f.set(g,a.push(g));return c[b.t].apply(c,b.a)},c.range=function(a){return arguments.length?(g=a,h=0,b={t:"range",a:arguments},c):g},c.rangePoints=function(d,f){2>arguments.length&&(f=0);var l=d[0],m=d[1],n=(m-l)/(Math.max(1,a.length-1)+f);return g=e(2>a.length?(l+m)/2:l+n*f/2,n),h=0,b={t:"rangePoints",a:arguments},c},c.rangeBands=function(d,f,l){2>arguments.length&&(f=0);3>arguments.length&&(l=f);var m=d[1]<d[0],n=d[m-0],p=(d[1-m]-n)/(a.length-f+2*l);return g=e(n+p*l,p),m&&g.reverse(),h=p*
(1-f),b={t:"rangeBands",a:arguments},c},c.rangeRoundBands=function(d,f,l){2>arguments.length&&(f=0);3>arguments.length&&(l=f);var m=d[1]<d[0],n=d[m-0],p=d[1-m],q=Math.floor((p-n)/(a.length-f+2*l));return g=e(n+Math.round((p-n-(a.length-f)*q)/2),q),m&&g.reverse(),h=Math.round(q*(1-f)),b={t:"rangeRoundBands",a:arguments},c},c.rangeBand=function(){return h},c.rangeExtent=function(){return Qc(b.a[0])},c.copy=function(){return dg(a,b)},c.domain(a)}function eg(a,b){function c(){var f=0,g=b.length;for(e=
[];++f<g;)e[f-1]=w.quantile(a,f/g);return d}function d(a){return isNaN(a=+a)?void 0:b[w.bisect(e,a)]}var e;return d.domain=function(b){return arguments.length?(a=b.filter(function(a){return!isNaN(a)}).sort(w.ascending),c()):a},d.range=function(a){return arguments.length?(b=a,c()):b},d.quantiles=function(){return e},d.invertExtent=function(c){return c=b.indexOf(c),0>c?[0/0,0/0]:[0<c?e[c-1]:a[0],c<e.length?e[c]:a[a.length-1]]},d.copy=function(){return eg(a,b)},c()}function fg(a,b,c){function d(b){return c[Math.max(0,
Math.min(g,Math.floor(f*(b-a))))]}function e(){return f=c.length/(b-a),g=c.length-1,d}var f,g;return d.domain=function(c){return arguments.length?(a=+c[0],b=+c[c.length-1],e()):[a,b]},d.range=function(a){return arguments.length?(c=a,e()):c},d.invertExtent=function(b){return b=c.indexOf(b),b=0>b?0/0:b/f+a,[b,b+1/f]},d.copy=function(){return fg(a,b,c)},e()}function gg(a,b){function c(d){return d>=d?b[w.bisect(a,d)]:void 0}return c.domain=function(b){return arguments.length?(a=b,c):a},c.range=function(a){return arguments.length?
(b=a,c):b},c.invertExtent=function(c){return c=b.indexOf(c),[a[c-1],a[c]]},c.copy=function(){return gg(a,b)},c}function hg(a){function b(a){return+a}return b.invert=b,b.domain=b.range=function(c){return arguments.length?(a=c.map(b),b):a},b.ticks=function(b){return w.range.apply(w,pc(a,b))},b.tickFormat=function(b,c){return Me(a,b,c)},b.copy=function(){return hg(a)},b}function Oh(a){return a.innerRadius}function Ph(a){return a.outerRadius}function ig(a){return a.startAngle}function jg(a){return a.endAngle}
function kg(a){function b(g){function l(){n.push("M",f(a(ea),h))}for(var m,n=[],ea=[],p=-1,q=g.length,r=da(c),v=da(d);++p<q;)e.call(this,m=g[p],p)?ea.push([+r.call(this,m,p),+v.call(this,m,p)]):ea.length&&(l(),ea=[]);return ea.length&&l(),n.length?n.join(""):null}var c=Gc,d=Vc,e=fb,f=yb,g=f.key,h=.7;return b.x=function(a){return arguments.length?(c=a,b):c},b.y=function(a){return arguments.length?(d=a,b):d},b.defined=function(a){return arguments.length?(e=a,b):e},b.interpolate=function(a){return arguments.length?
(g="function"==typeof a?f=a:(f=Pe.get(a)||yb).key,b):g},b.tension=function(a){return arguments.length?(h=a,b):h},b}function yb(a){return a.join("L")}function Qe(a){for(var b=0,c=a.length,d=a[0],e=[d[0],",",d[1]];++b<c;)e.push("V",(d=a[b])[1],"H",d[0]);return e.join("")}function Re(a){for(var b=0,c=a.length,d=a[0],e=[d[0],",",d[1]];++b<c;)e.push("H",(d=a[b])[0],"V",d[1]);return e.join("")}function Wd(a,b){if(1>b.length||a.length!=b.length&&a.length!=b.length+2)return yb(a);var c=a.length!=b.length,
d="",e=a[0],f=a[1],g=b[0],h=g,l=1;if(c&&(d+="Q"+(f[0]-2*g[0]/3)+","+(f[1]-2*g[1]/3)+","+f[0]+","+f[1],e=a[1],l=2),1<b.length)for(h=b[1],f=a[l],l++,d+="C"+(e[0]+g[0])+","+(e[1]+g[1])+","+(f[0]-h[0])+","+(f[1]-h[1])+","+f[0]+","+f[1],e=2;e<b.length;e++,l++)f=a[l],h=b[e],d+="S"+(f[0]-h[0])+","+(f[1]-h[1])+","+f[0]+","+f[1];c&&(c=a[l],d+="Q"+(f[0]+2*h[0]/3)+","+(f[1]+2*h[1]/3)+","+c[0]+","+c[1]);return d}function Se(a,b){for(var c,d=[],e=(1-b)/2,f=a[0],g=a[1],h=1,l=a.length;++h<l;)c=f,f=g,g=a[h],d.push([e*
(g[0]-c[0]),e*(g[1]-c[1])]);return d}function lg(a){if(3>a.length)return yb(a);var b=1,c=a.length,d=a[0],e=d[0],f=d[1],g=[e,e,e,(d=a[1])[0]],h=[f,f,f,d[1]],e=[e,",",f,"L",Hb(qc,g),",",Hb(qc,h)];for(a.push(a[c-1]);++b<=c;)d=a[b],g.shift(),g.push(d[0]),h.shift(),h.push(d[1]),Te(e,g,h);return a.pop(),e.push("L",d),e.join("")}function Hb(a,b){return a[0]*b[0]+a[1]*b[1]+a[2]*b[2]+a[3]*b[3]}function Te(a,b,c){a.push("C",Hb(mg,b),",",Hb(mg,c),",",Hb(ng,b),",",Hb(ng,c),",",Hb(qc,b),",",Hb(qc,c))}function Ue(a,
b){return(b[1]-a[1])/(b[0]-a[0])}function og(a){for(var b,c,d,e=-1,f=a.length;++e<f;)b=a[e],c=b[0],d=b[1]+Ac,b[0]=c*Math.cos(d),b[1]=c*Math.sin(d);return a}function pg(a){function b(l){function ea(){A.push("M",h(a(t),p),n,m(a(z.reverse()),p),"Z")}for(var q,r,v,A=[],z=[],t=[],u=-1,w=l.length,y=da(c),rh=da(e),x=c===d?function(){return r}:da(d),J=e===f?function(){return v}:da(f);++u<w;)g.call(this,q=l[u],u)?(z.push([r=+y.call(this,q,u),v=+rh.call(this,q,u)]),t.push([+x.call(this,q,u),+J.call(this,q,
u)])):z.length&&(ea(),z=[],t=[]);return z.length&&ea(),A.length?A.join(""):null}var c=Gc,d=Gc,e=0,f=Vc,g=fb,h=yb,l=h.key,m=h,n="L",p=.7;return b.x=function(a){return arguments.length?(c=d=a,b):d},b.x0=function(a){return arguments.length?(c=a,b):c},b.x1=function(a){return arguments.length?(d=a,b):d},b.y=function(a){return arguments.length?(e=f=a,b):f},b.y0=function(a){return arguments.length?(e=a,b):e},b.y1=function(a){return arguments.length?(f=a,b):f},b.defined=function(a){return arguments.length?
(g=a,b):g},b.interpolate=function(a){return arguments.length?(l="function"==typeof a?h=a:(h=Pe.get(a)||yb).key,m=h.reverse||h,n=h.closed?"M":"L",b):l},b.tension=function(a){return arguments.length?(p=a,b):p},b}function Qh(a){return a.radius}function qg(a){return[a.x,a.y]}function Rh(a){return function(){var b=a.apply(this,arguments),c=b[0],b=b[1]+Ac;return[c*Math.cos(b),c*Math.sin(b)]}}function Sh(){return 64}function Th(){return"circle"}function rg(a){a=Math.sqrt(a/X);return"M0,"+a+"A"+a+","+a+" 0 1,1 0,"+
-a+"A"+a+","+a+" 0 1,1 0,"+a+"Z"}function id(a,b){return Hd(a,Ha),a.id=b,a}function Ve(a,b,c,d){var e=a.id;return ia(a,"function"==typeof c?function(a,f,g){a.__transition__[e].tween.set(b,d(c.call(a,a.__data__,f,g)))}:(c=d(c),function(a){a.__transition__[e].tween.set(b,c)}))}function Uh(a){return null==a&&(a=""),function(){this.textContent=a}}function Xd(a,b,c,e){var f=a.__transition__||(a.__transition__={active:0,count:0}),g=f[c];if(!g){var h=e.time,g=f[c]={tween:new d,time:h,ease:e.ease,delay:e.delay,
duration:e.duration};++f.count;w.timer(function(d){function e(d){return f.active>c?m():(f.active=c,g.event&&g.event.start.call(a,n,b),g.tween.forEach(function(c,d){(d=d.call(a,n,b))&&v.push(d)}),w.timer(function(){return pa.c=l(d||1)?fb:l,1},0,h),void 0)}function l(d){if(f.active!==c)return m();d/=r;for(var e=p(d),h=v.length;0<h;)v[--h].call(a,e);return 1<=d?(g.event&&g.event.end.call(a,n,b),m()):void 0}function m(){return--f.count?delete f[c]:delete a.__transition__,1}var n=a.__data__,p=g.ease,q=
g.delay,r=g.duration,pa=$b,v=[];return pa.t=q+h,d>=q?e(d-q):(pa.c=e,void 0)},0,h)}}function sg(a,b){a.attr("transform",function(a){return"translate("+b(a)+",0)"})}function tg(a,b){a.attr("transform",function(a){return"translate(0,"+b(a)+")"})}function We(a){return a.toISOString()}function Xe(a,b,c){function d(b){return a(b)}function e(a,c){var d=(a[1]-a[0])/c,f=w.bisect(Yd,d);return f==Yd.length?[b.year,pc(a.map(function(a){return a/31536E6}),c)[2]]:f?b[d/Yd[f-1]<Yd[f]/d?f-1:f]:[Vh,pc(a,c)[2]]}return d.invert=
function(b){return Bc(a.invert(b))},d.domain=function(b){return arguments.length?(a.domain(b),d):a.domain().map(Bc)},d.nice=function(a,b){function c(d){return!isNaN(d)&&!a.range(d,Bc(+d+1),b).length}var f=d.domain(),g=Qc(f),g=null==a?e(g,10):"number"==typeof a&&e(g,a);return g&&(a=g[0],b=g[1]),d.domain(Ud(f,1<b?{floor:function(b){for(;c(b=a.floor(b));)b=Bc(b-1);return b},ceil:function(b){for(;c(b=a.ceil(b));)b=Bc(+b+1);return b}}:a))},d.ticks=function(a,b){var c=Qc(d.domain()),f=null==a?e(c,10):"number"==
typeof a?e(c,a):!a.range&&[{range:a},b];return f&&(a=f[0],b=f[1]),a.range(c[0],Bc(+c[1]+1),1>b?1:b)},d.tickFormat=function(){return c},d.copy=function(){return Xe(a.copy(),b,c)},Ne(d,a)}function Bc(a){return new Date(a)}function Wh(a){return JSON.parse(a.responseText)}function Xh(a){var b=Nb.createRange();return b.selectNode(Nb.body),b.createContextualFragment(a.responseText)}var w={version:"3.4.1"};Date.now||(Date.now=function(){return+new Date});var ug=[].slice,kc=function(a){return ug.call(a)},
Nb=document,lc=Nb.documentElement,Ua=window;try{kc(lc.childNodes)[0].nodeType}catch(wi){kc=function(a){for(var b=a.length,c=Array(b);b--;)c[b]=a[b];return c}}try{Nb.createElement("div").style.setProperty("opacity",0,"")}catch(xi){var Zd=Ua.Element.prototype,Yh=Zd.setAttribute,Zh=Zd.setAttributeNS,vg=Ua.CSSStyleDeclaration.prototype,$h=vg.setProperty;Zd.setAttribute=function(a,b){Yh.call(this,a,b+"")};Zd.setAttributeNS=function(a,b,c){Zh.call(this,a,b,c+"")};vg.setProperty=function(a,b,c){$h.call(this,
a,b+"",c)}}w.ascending=function(a,b){return b>a?-1:a>b?1:a>=b?0:0/0};w.descending=function(a,b){return a>b?-1:b>a?1:b>=a?0:0/0};w.min=function(a,b){var c,d,e=-1,f=a.length;if(1===arguments.length){for(;++e<f&&!(null!=(c=a[e])&&c>=c);)c=void 0;for(;++e<f;)null!=(d=a[e])&&c>d&&(c=d)}else{for(;++e<f&&!(null!=(c=b.call(a,a[e],e))&&c>=c);)c=void 0;for(;++e<f;)null!=(d=b.call(a,a[e],e))&&c>d&&(c=d)}return c};w.max=function(a,b){var c,d,e=-1,f=a.length;if(1===arguments.length){for(;++e<f&&!(null!=(c=a[e])&&
c>=c);)c=void 0;for(;++e<f;)null!=(d=a[e])&&d>c&&(c=d)}else{for(;++e<f&&!(null!=(c=b.call(a,a[e],e))&&c>=c);)c=void 0;for(;++e<f;)null!=(d=b.call(a,a[e],e))&&d>c&&(c=d)}return c};w.extent=function(a,b){var c,d,e,f=-1,g=a.length;if(1===arguments.length){for(;++f<g&&!(null!=(c=e=a[f])&&c>=c);)c=e=void 0;for(;++f<g;)null!=(d=a[f])&&(c>d&&(c=d),d>e&&(e=d))}else{for(;++f<g&&!(null!=(c=e=b.call(a,a[f],f))&&c>=c);)c=void 0;for(;++f<g;)null!=(d=b.call(a,a[f],f))&&(c>d&&(c=d),d>e&&(e=d))}return[c,e]};w.sum=
function(a,b){var c,d=0,e=a.length,f=-1;if(1===arguments.length)for(;++f<e;)isNaN(c=+a[f])||(d+=c);else for(;++f<e;)isNaN(c=+b.call(a,a[f],f))||(d+=c);return d};w.mean=function(b,c){var d,e=b.length,f=0,g=-1,h=0;if(1===arguments.length)for(;++g<e;)a(d=b[g])&&(f+=(d-f)/++h);else for(;++g<e;)a(d=c.call(b,b[g],g))&&(f+=(d-f)/++h);return h?f:void 0};w.quantile=function(a,b){var c=(a.length-1)*b+1,d=Math.floor(c),e=+a[d-1];return(c-=d)?e+c*(a[d]-e):e};w.median=function(b,c){return 1<arguments.length&&
(b=b.map(c)),b=b.filter(a),b.length?w.quantile(b.sort(w.ascending),.5):void 0};w.bisector=function(a){return{left:function(b,c,d,e){3>arguments.length&&(d=0);for(4>arguments.length&&(e=b.length);e>d;){var f=d+e>>>1;a.call(b,b[f],f)<c?d=f+1:e=f}return d},right:function(b,c,d,e){3>arguments.length&&(d=0);for(4>arguments.length&&(e=b.length);e>d;){var f=d+e>>>1;c<a.call(b,b[f],f)?e=f:d=f+1}return d}}};var wg=w.bisector(function(a){return a});w.bisectLeft=wg.left;w.bisect=w.bisectRight=wg.right;w.shuffle=
function(a){for(var b,c,d=a.length;d;)c=0|Math.random()*d--,b=a[d],a[d]=a[c],a[c]=b;return a};w.permute=function(a,b){for(var c=b.length,d=Array(c);c--;)d[c]=a[b[c]];return d};w.pairs=function(a){for(var b=0,c=a.length-1,d=a[0],e=Array(0>c?0:c);c>b;)e[b]=[d,d=a[++b]];return e};w.zip=function(){if(!(e=arguments.length))return[];for(var a=-1,b=w.min(arguments,c),d=Array(b);++a<b;)for(var e,f=-1,g=d[a]=Array(e);++f<e;)g[f]=arguments[f][a];return d};w.transpose=function(a){return w.zip.apply(w,a)};w.keys=
function(a){var b=[],c;for(c in a)b.push(c);return b};w.values=function(a){var b=[],c;for(c in a)b.push(a[c]);return b};w.entries=function(a){var b=[],c;for(c in a)b.push({key:c,value:a[c]});return b};w.merge=function(a){var b,c,d,e=a.length;b=-1;for(var f=0;++b<e;)f+=a[b].length;for(c=Array(f);0<=--e;)for(d=a[e],b=d.length;0<=--b;)c[--f]=d[b];return c};var Y=Math.abs;w.range=function(a,b,c){if(3>arguments.length&&(c=1,2>arguments.length&&(b=a,a=0)),1/0===(b-a)/c)throw Error("infinite range");var d,
e=[],f;d=Y(c);for(f=1;d*f%1;)f*=10;var g=-1;if(a*=f,b*=f,c*=f,0>c)for(;(d=a+c*++g)>b;)e.push(d/f);else for(;(d=a+c*++g)<b;)e.push(d/f);return e};w.map=function(a){var b=new d;if(a instanceof d)a.forEach(function(a,c){b.set(a,c)});else for(var c in a)b.set(c,a[c]);return b};b(d,{has:e,get:function(a){return this[xc+a]},set:function(a,b){return this[xc+a]=b},remove:function(a){return a=xc+a,a in this&&delete this[a]},keys:f,values:function(){var a=[];return this.forEach(function(b,c){a.push(c)}),a},
entries:function(){var a=[];return this.forEach(function(b,c){a.push({key:b,value:c})}),a},size:g,empty:h,forEach:function(a){for(var b in this)b.charCodeAt(0)===Gd&&a.call(this,b.substring(1),this[b])}});var xc="\x00",Gd=xc.charCodeAt(0);w.nest=function(){function a(b,h,l){if(l>=g.length)return e?e.call(f,h):c?h.sort(c):h;for(var m,n,p,q,ea=-1,r=h.length,v=g[l++],A=new d;++ea<r;)(q=A.get(m=v(n=h[ea])))?q.push(n):A.set(m,[n]);return b?(n=b(),p=function(c,d){n.set(c,a(b,d,l))}):(n={},p=function(c,
d){n[c]=a(b,d,l)}),A.forEach(p),n}function b(a,c){if(c>=g.length)return a;var d=[],e=h[c++];return a.forEach(function(a,e){d.push({key:a,values:b(e,c)})}),e?d.sort(function(a,b){return e(a.key,b.key)}):d}var c,e,f={},g=[],h=[];return f.map=function(b,c){return a(c,b,0)},f.entries=function(c){return b(a(w.map,c,0),0)},f.key=function(a){return g.push(a),f},f.sortKeys=function(a){return h[g.length-1]=a,f},f.sortValues=function(a){return c=a,f},f.rollup=function(a){return e=a,f},f};w.set=function(a){var b=
new l;if(a)for(var c=0,d=a.length;d>c;++c)b.add(a[c]);return b};b(l,{has:e,add:function(a){return this[xc+a]=!0,a},remove:function(a){return a=xc+a,a in this&&delete this[a]},values:f,size:g,empty:h,forEach:function(a){for(var b in this)b.charCodeAt(0)===Gd&&a.call(this,b.substring(1))}});w.behavior={};w.rebind=function(a,b){for(var c,d=1,e=arguments.length;++d<e;)a[c=arguments[d]]=m(a,b,b[c]);return a};var Cf="webkit ms moz Moz o O".split(" ");w.dispatch=function(){for(var a=new t,b=-1,c=arguments.length;++b<
c;)a[arguments[b]]=y(a);return a};t.prototype.on=function(a,b){var c=a.indexOf("."),d="";if(0<=c&&(d=a.substring(c+1),a=a.substring(0,c)),a)return 2>arguments.length?this[a].on(d):this[a].on(d,b);if(2===arguments.length){if(null==b)for(a in this)this.hasOwnProperty(a)&&this[a].on(d,null);return this}};w.event=null;w.requote=function(a){return a.replace(ai,"\\$&")};var ai=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g,Hd={}.__proto__?function(a,b){a.__proto__=b}:function(a,b){for(var c in b)a[c]=b[c]},Ae=function(a,
b){return b.querySelector(a)},Be=function(a,b){return b.querySelectorAll(a)},bi=lc[p(lc,"matchesSelector")],Df=function(a,b){return bi.call(a,b)};"function"==typeof Sizzle&&(Ae=function(a,b){return Sizzle(a,b)[0]||null},Be=function(a,b){return Sizzle.uniqueSort(Sizzle(a,b))},Df=Sizzle.matchesSelector);w.selection=function(){return xg};var ra=w.selection.prototype=[];ra.select=function(a){var b,c,d,e,f=[];a=F(a);for(var g=-1,h=this.length;++g<h;){f.push(b=[]);b.parentNode=(d=this[g]).parentNode;for(var l=
-1,m=d.length;++l<m;)(e=d[l])?(b.push(c=a.call(e,e.__data__,l,g)),c&&"__data__"in e&&(c.__data__=e.__data__)):b.push(null)}return I(f)};ra.selectAll=function(a){var b,c,d=[];a=A(a);for(var e=-1,f=this.length;++e<f;)for(var g=this[e],h=-1,l=g.length;++h<l;)(c=g[h])&&(d.push(b=kc(a.call(c,c.__data__,h,e))),b.parentNode=c);return I(d)};var Ye={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};
w.ns={prefix:Ye,qualify:function(a){var b=a.indexOf(":"),c=a;return 0<=b&&(c=a.substring(0,b),a=a.substring(b+1)),Ye.hasOwnProperty(c)?{space:Ye[c],local:a}:a}};ra.attr=function(a,b){if(2>arguments.length){if("string"==typeof a){var c=this.node();return a=w.ns.qualify(a),a.local?c.getAttributeNS(a.space,a.local):c.getAttribute(a)}for(b in a)this.each(r(b,a[b]));return this}return this.each(r(a,b))};ra.classed=function(a,b){if(2>arguments.length){if("string"==typeof a){var c=this.node(),d=(a=a.trim().split(/^|\s+/)).length,
e=-1;if(b=c.classList)for(;++e<d;){if(!b.contains(a[e]))return!1}else for(b=c.getAttribute("class");++e<d;)if(!z(a[e]).test(b))return!1;return!0}for(b in a)this.each(H(b,a[b]));return this}return this.each(H(a,b))};ra.style=function(a,b,c){var d=arguments.length;if(3>d){if("string"!=typeof a){2>d&&(b="");for(c in a)this.each(T(c,a[c],b));return this}if(2>d)return Ua.getComputedStyle(this.node(),null).getPropertyValue(a);c=""}return this.each(T(a,b,c))};ra.property=function(a,b){if(2>arguments.length){if("string"==
typeof a)return this.node()[a];for(b in a)this.each(J(b,a[b]));return this}return this.each(J(a,b))};ra.text=function(a){return arguments.length?this.each("function"==typeof a?function(){var b=a.apply(this,arguments);this.textContent=null==b?"":b}:null==a?function(){this.textContent=""}:function(){this.textContent=a}):this.node().textContent};ra.html=function(a){return arguments.length?this.each("function"==typeof a?function(){var b=a.apply(this,arguments);this.innerHTML=null==b?"":b}:null==a?function(){this.innerHTML=
""}:function(){this.innerHTML=a}):this.node().innerHTML};ra.append=function(a){return a=Z(a),this.select(function(){return this.appendChild(a.apply(this,arguments))})};ra.insert=function(a,b){return a=Z(a),b=F(b),this.select(function(){return this.insertBefore(a.apply(this,arguments),b.apply(this,arguments)||null)})};ra.remove=function(){return this.each(function(){var a=this.parentNode;a&&a.removeChild(this)})};ra.data=function(a,b){function c(a,e){var f,g,h,G=a.length,p=e.length,q=Math.min(G,p),
r=Array(p),ma=Array(p),v=Array(G);if(b){var A=new d,pa=new d,lb=[];for(f=-1;++f<G;)q=b.call(g=a[f],g.__data__,f),A.has(q)?v[f]=g:A.set(q,g),lb.push(q);for(f=-1;++f<p;)q=b.call(e,h=e[f],f),(g=A.get(q))?(r[f]=g,g.__data__=h):pa.has(q)||(ma[f]={__data__:h}),pa.set(q,h),A.remove(q);for(f=-1;++f<G;)A.has(lb[f])&&(v[f]=a[f])}else{for(f=-1;++f<q;)g=a[f],h=e[f],g?(g.__data__=h,r[f]=g):ma[f]={__data__:h};for(;p>f;++f)ma[f]={__data__:e[f]};for(;G>f;++f)v[f]=a[f]}ma.update=r;ma.parentNode=r.parentNode=v.parentNode=
a.parentNode;l.push(ma);m.push(r);n.push(v)}var e,f,g=-1,h=this.length;if(!arguments.length){for(a=Array(h=(e=this[0]).length);++g<h;)(f=e[g])&&(a[g]=f.__data__);return a}var l=aa([]),m=I([]),n=I([]);if("function"==typeof a)for(;++g<h;)c(e=this[g],a.call(e,e.parentNode.__data__,g));else for(;++g<h;)c(e=this[g],a);return m.enter=function(){return l},m.exit=function(){return n},m};ra.datum=function(a){return arguments.length?this.property("__data__",a):this.property("__data__")};ra.filter=function(a){var b,
c,d,e=[];"function"!=typeof a&&(a=na(a));for(var f=0,g=this.length;g>f;f++){e.push(b=[]);b.parentNode=(c=this[f]).parentNode;for(var h=0,l=c.length;l>h;h++)(d=c[h])&&a.call(d,d.__data__,h,f)&&b.push(d)}return I(e)};ra.order=function(){for(var a=-1,b=this.length;++a<b;)for(var c,d=this[a],e=d.length-1,f=d[e];0<=--e;)(c=d[e])&&(f&&f!==c.nextSibling&&f.parentNode.insertBefore(c,f),f=c);return this};ra.sort=function(a){a=sa.apply(this,arguments);for(var b=-1,c=this.length;++b<c;)this[b].sort(a);return this.order()};
ra.each=function(a){return ia(this,function(b,c,d){a.call(b,b.__data__,c,d)})};ra.call=function(a){var b=kc(arguments);return a.apply(b[0]=this,b),this};ra.empty=function(){return!this.node()};ra.node=function(){for(var a=0,b=this.length;b>a;a++)for(var c=this[a],d=0,e=c.length;e>d;d++){var f=c[d];if(f)return f}return null};ra.size=function(){var a=0;return this.each(function(){++a}),a};var Zb=[];w.selection.enter=aa;w.selection.enter.prototype=Zb;Zb.append=ra.append;Zb.empty=ra.empty;Zb.node=ra.node;
Zb.call=ra.call;Zb.size=ra.size;Zb.select=function(a){for(var b,c,d,e,f,g=[],h=-1,l=this.length;++h<l;){d=(e=this[h]).update;g.push(b=[]);b.parentNode=e.parentNode;for(var m=-1,n=e.length;++m<n;)(f=e[m])?(b.push(d[m]=c=a.call(e.parentNode,f.__data__,m,h)),c.__data__=f.__data__):b.push(null)}return I(g)};Zb.insert=function(a,b){return 2>arguments.length&&(b=ja(this)),ra.insert.call(this,a,b)};ra.transition=function(){for(var a,b,c=Cc||++yg,d=[],e=$d||{time:Date.now(),ease:nh,delay:0,duration:250},
f=-1,g=this.length;++f<g;){d.push(a=[]);for(var h=this[f],l=-1,m=h.length;++l<m;)(b=h[l])&&Xd(b,l,c,e),a.push(b)}return id(d,c)};ra.interrupt=function(){return this.each(ca)};w.select=function(a){a=["string"==typeof a?Ae(a,Nb):a];return a.parentNode=lc,I([a])};w.selectAll=function(a){a=kc("string"==typeof a?Be(a,Nb):a);return a.parentNode=lc,I([a])};var xg=w.select(lc);ra.on=function(a,b,c){var d=arguments.length;if(3>d){if("string"!=typeof a){2>d&&(b=!1);for(c in a)this.each(fa(c,a[c],b));return this}if(2>
d)return(d=this.node()["__on"+a])&&d._;c=!1}return this.each(fa(a,b,c))};var Ce=w.map({mouseenter:"mouseover",mouseleave:"mouseout"});Ce.forEach(function(a){"on"+a in Nb&&Ce.remove(a)});var fd="onselectstart"in Nb?null:p(lc.style,"userSelect"),sh=0;w.mouse=function(a){return R(a,C())};var De=/WebKit/.test(Ua.navigator.userAgent)?-1:0;w.touches=function(a,b){return 2>arguments.length&&(b=C().touches),b?kc(b).map(function(b){var c=R(a,b);return c.identifier=b.identifier,c}):[]};w.behavior.drag=function(){function a(){this.on("mousedown.drag",
e).on("touchstart.drag",f)}function b(a,e,f,g){return function(){var b,h=this.parentNode,l=c.of(this,arguments),m=w.event.target,n=a(),G=null==n?"drag":"drag-"+n,p=e(h,n),q=0,r=w.select(Ua).on(f+"."+G,function(){var a=e(h,n),c=a[0]-p[0],d=a[1]-p[1];q=q|c|d;p=a;l({type:"drag",x:a[0]+b[0],y:a[1]+b[1],dx:c,dy:d})}).on(g+"."+G,function(){r.on(f+"."+G,null).on(g+"."+G,null);ea(q&&w.event.target===m);l({type:"dragend"})}),ea=L();d?(b=d.apply(this,arguments),b=[b.x-p[0],b.y-p[1]]):b=[0,0];l({type:"dragstart"})}}
var c=B(a,"drag","dragstart","dragend"),d=null,e=b(q,w.mouse,"mousemove","mouseup"),f=b(function(){return w.event.changedTouches[0].identifier},function(a,b){return w.touches(a).filter(function(a){return a.identifier===b})[0]},"touchmove","touchend");return a.origin=function(b){return arguments.length?(d=b,a):d},w.rebind(a,c,"on")};var X=Math.PI,ob=2*X,eb=X/2,N=1E-6,Ee=N*N,V=X/180,ya=180/X,ae=Math.SQRT2;w.interpolateZoom=function(a,b){function c(a){var b=a*v;if(r){a=Ia(q);var g=f/(2*n),m,G=ae*b+q;
m=((G=Math.exp(2*G))-1)/(G+1);m*=a;var p=q,G=((p=Math.exp(p))-1/p)/2,g=g*(m-G);return[d+g*h,e+g*l,f*a/Ia(ae*b+q)]}return[d+a*h,e+a*l,f*Math.exp(ae*b)]}var d=a[0],e=a[1],f=a[2],g=b[2],h=b[0]-d,l=b[1]-e,m=h*h+l*l,n=Math.sqrt(m),p=(g*g-f*f+4*m)/(4*f*n),m=(g*g-f*f-4*m)/(4*g*n),q=Math.log(Math.sqrt(p*p+1)-p),r=Math.log(Math.sqrt(m*m+1)-m)-q,v=(r||Math.log(g/f))/ae;return c.duration=1E3*v,c};w.behavior.zoom=function(){function a(b){b.on(F,l).on(ci+".zoom",n).on(na,p).on("dblclick.zoom",q).on(E,m)}function b(a){return[(a[0]-
H.x)/H.k,(a[1]-H.y)/H.k]}function c(a){H.k=Math.max(Z[0],Math.min(Z[1],a))}function d(a,b){b=[b[0]*H.k+H.x,b[1]*H.k+H.y];H.x+=a[0]-b[0];H.y+=a[1]-b[1]}function e(){y&&y.domain(t.range().map(function(a){return(a-H.x)/H.k}).map(t.invert));J&&J.domain(x.range().map(function(a){return(a-H.y)/H.k}).map(x.invert))}function f(a){a({type:"zoomstart"})}function g(a){e();a({type:"zoom",scale:H.k,translate:[H.x,H.y]})}function h(a){a({type:"zoomend"})}function l(){var a=this,c=sa.of(a,arguments),e=w.event.target,
m=0,n=w.select(Ua).on(na,function(){m=1;d(w.mouse(a),G);g(c)}).on(D,function(){n.on(na,Ua===a?p:null).on(D,null);q(m&&w.event.target===e);h(c)}),G=b(w.mouse(a)),q=L();ca.call(a);f(c)}function m(){function a(){var c=w.touches(G);return n=H.k,c.forEach(function(a){a.identifier in q&&(q[a.identifier]=b(a))}),c}function e(){for(var b=w.event.changedTouches,f=0,h=b.length;h>f;++f)q[b[f].identifier]=null;h=a();f=Date.now();1===h.length?(500>f-z&&(b=h[0],h=q[b.identifier],c(2*H.k),d(b,h),u(),g(p)),z=f):
1<h.length&&(b=h[0],h=h[1],f=b[0]-h[0],b=b[1]-h[1],r=f*f+b*b)}var n,G=this,p=sa.of(G,arguments),q={},r=0,v=w.event.changedTouches[0].identifier,A="touchmove.zoom-"+v,t="touchend.zoom-"+v,Ma=w.select(Ua).on(A,function(){for(var a,b,e,f,h=w.touches(G),l=0,m=h.length;m>l;++l,f=null)if(e=h[l],f=q[e.identifier]){if(b)break;a=e;b=f}if(f){var ea=(ea=e[0]-a[0])*ea+(ea=e[1]-a[1])*ea,h=r&&Math.sqrt(ea/r);a=[(a[0]+e[0])/2,(a[1]+e[1])/2];b=[(b[0]+f[0])/2,(b[1]+f[1])/2];c(h*n)}z=null;d(a,b);g(p)}).on(t,function(){if(w.event.touches.length){for(var b=
w.event.changedTouches,c=0,d=b.length;d>c;++c)delete q[b[c].identifier];for(var e in q)return void a()}Ma.on(A,null).on(t,null);y.on(F,l).on(E,m);x();h(p)}),y=w.select(G).on(F,null).on(E,e),x=L();ca.call(G);e();f(p)}function n(){var a=sa.of(this,arguments);A?clearTimeout(A):(ca.call(this),f(a));A=setTimeout(function(){A=null;h(a)},50);u();var e=v||w.mouse(this);r||(r=b(e));c(Math.pow(2,.002*be())*H.k);d(e,r);g(a)}function p(){r=null}function q(){var a=sa.of(this,arguments),e=w.mouse(this),l=b(e),
m=Math.log(H.k)/Math.LN2;f(a);c(Math.pow(2,w.event.shiftKey?Math.ceil(m)-1:Math.floor(m)+1));d(e,l);g(a);h(a)}var r,v,A,z,t,y,x,J,H={x:0,y:0,k:1},C=[960,500],Z=zg,F="mousedown.zoom",na="mousemove.zoom",D="mouseup.zoom",E="touchstart.zoom",sa=B(a,"zoomstart","zoom","zoomend");return a.event=function(a){a.each(function(){var a=sa.of(this,arguments),b=H;Cc?w.select(this).transition().each("start.zoom",function(){H=this.__chart__||{x:0,y:0,k:1};f(a)}).tween("zoom:zoom",function(){var c=C[0],d=c/2,e=C[1]/
2,f=w.interpolateZoom([(d-H.x)/H.k,(e-H.y)/H.k,c/H.k],[(d-b.x)/b.k,(e-b.y)/b.k,c/b.k]);return function(b){b=f(b);var h=c/b[2];this.__chart__=H={x:d-b[0]*h,y:e-b[1]*h,k:h};g(a)}}).each("end.zoom",function(){h(a)}):(this.__chart__=H,f(a),g(a),h(a))})},a.translate=function(b){return arguments.length?(H={x:+b[0],y:+b[1],k:H.k},e(),a):[H.x,H.y]},a.scale=function(b){return arguments.length?(H={x:H.x,y:H.y,k:+b},e(),a):H.k},a.scaleExtent=function(b){return arguments.length?(Z=null==b?zg:[+b[0],+b[1]],a):
Z},a.center=function(b){return arguments.length?(v=b&&[+b[0],+b[1]],a):v},a.size=function(b){return arguments.length?(C=b&&[+b[0],+b[1]],a):C},a.x=function(b){return arguments.length?(y=b,t=b.copy(),H={x:0,y:0,k:1},a):y},a.y=function(b){return arguments.length?(J=b,x=b.copy(),H={x:0,y:0,k:1},a):J},w.rebind(a,sa,"on")};var be,zg=[0,1/0],ci="onwheel"in Nb?(be=function(){return-w.event.deltaY*(w.event.deltaMode?120:1)},"wheel"):"onmousewheel"in Nb?(be=function(){return w.event.wheelDelta},"mousewheel"):
(be=function(){return-w.event.detail},"MozMousePixelScroll");bb.prototype.toString=function(){return this.rgb()+""};w.hsl=function(a,b,c){return 1===arguments.length?a instanceof rb?gb(a.h,a.s,a.l):vb(""+a,Ja,gb):gb(+a,+b,+c)};var Ze=rb.prototype=new bb;Ze.brighter=function(a){return a=Math.pow(.7,arguments.length?a:1),gb(this.h,this.s,this.l/a)};Ze.darker=function(a){return a=Math.pow(.7,arguments.length?a:1),gb(this.h,this.s,a*this.l)};Ze.rgb=function(){return sb(this.h,this.s,this.l)};w.hcl=function(a,
b,c){return 1===arguments.length?a instanceof cb?n(a.h,a.c,a.l):a instanceof zb?tb(a.l,a.a,a.b):tb((a=pb((a=w.rgb(a)).r,a.g,a.b)).l,a.a,a.b):n(+a,+b,+c)};var $e=cb.prototype=new bb;$e.brighter=function(a){return n(this.h,this.c,Math.min(100,this.l+ce*(arguments.length?a:1)))};$e.darker=function(a){return n(this.h,this.c,Math.max(0,this.l-ce*(arguments.length?a:1)))};$e.rgb=function(){return Ib(this.h,this.c,this.l).rgb()};w.lab=function(a,b,c){return 1===arguments.length?a instanceof zb?Fa(a.l,a.a,
a.b):a instanceof cb?Ib(a.l,a.c,a.h):pb((a=w.rgb(a)).r,a.g,a.b):Fa(+a,+b,+c)};var ce=18,Ef=.95047,Ff=1,Gf=1.08883,af=zb.prototype=new bb;af.brighter=function(a){return Fa(Math.min(100,this.l+ce*(arguments.length?a:1)),this.a,this.b)};af.darker=function(a){return Fa(Math.max(0,this.l-ce*(arguments.length?a:1)),this.a,this.b)};af.rgb=function(){return Jb(this.l,this.a,this.b)};w.rgb=function(a,b,c){return 1===arguments.length?a instanceof Bb?ua(a.r,a.g,a.b):vb(""+a,ua,sb):ua(~~a,~~b,~~c)};var de=Bb.prototype=
new bb;de.brighter=function(a){a=Math.pow(.7,arguments.length?a:1);var b=this.r,c=this.g,d=this.b;return b||c||d?(b&&30>b&&(b=30),c&&30>c&&(c=30),d&&30>d&&(d=30),ua(Math.min(255,~~(b/a)),Math.min(255,~~(c/a)),Math.min(255,~~(d/a)))):ua(30,30,30)};de.darker=function(a){return a=Math.pow(.7,arguments.length?a:1),ua(~~(a*this.r),~~(a*this.g),~~(a*this.b))};de.hsl=function(){return Ja(this.r,this.g,this.b)};de.toString=function(){return"#"+Ta(this.r)+Ta(this.g)+Ta(this.b)};var Jd=w.map({aliceblue:15792383,
antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,
darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,
indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,
magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,
palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,
violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074});Jd.forEach(function(a,b){Jd.set(a,ua(b>>16,255&b>>8,255&b))});w.functor=da;w.xhr=Za(ta);w.dsv=function(a,b){function c(a,f,g){3>arguments.length&&(g=f,f=null);var h=ib(a,b,null==f?d:e(f),g);return h.row=function(a){return arguments.length?h.response(null==(f=a)?d:e(a)):f},h}function d(a){return c.parse(a.responseText)}function e(a){return function(b){return c.parse(b.responseText,a)}}function f(b){return b.map(g).join(a)}
function g(a){return h.test(a)?'"'+a.replace(/\"/g,'""')+'"':a}var h=new RegExp('["'+a+"\n]"),m=a.charCodeAt(0);return c.parse=function(a,b){var d;return c.parseRows(a,function(a,c){if(d)return d(a,c-1);var e=new Function("d","return {"+a.map(function(a,b){return JSON.stringify(a)+": d["+b+"]"}).join(",")+"}");d=b?function(a,c){return b(e(a),c)}:e})},c.parseRows=function(a,b){function c(){if(n>=l)return g;if(e)return e=!1,f;var b=n;if(34===a.charCodeAt(b)){for(var d=b;d++<l;)if(34===a.charCodeAt(d)){if(34!==
a.charCodeAt(d+1))break;++d}n=d+2;var h=a.charCodeAt(d+1);return 13===h?(e=!0,10===a.charCodeAt(d+2)&&++n):10===h&&(e=!0),a.substring(b+1,d).replace(/""/g,'"')}for(;l>n;){h=a.charCodeAt(n++);d=1;if(10===h)e=!0;else if(13===h)e=!0,10===a.charCodeAt(n)&&(++n,++d);else if(h!==m)continue;return a.substring(b,n-d)}return a.substring(b)}for(var d,e,f={},g={},h=[],l=a.length,n=0,G=0;(d=c())!==g;){for(var p=[];d!==f&&d!==g;)p.push(d),d=c();b&&!(p=b(p,G++))||h.push(p)}return h},c.format=function(b){if(Array.isArray(b[0]))return c.formatRows(b);
var d=new l,e=[];return b.forEach(function(a){for(var b in a)d.has(b)||e.push(d.add(b))}),[e.map(g).join(a)].concat(b.map(function(b){return e.map(function(a){return g(b[a])}).join(a)})).join("\n")},c.formatRows=function(a){return a.map(f).join("\n")},c};w.csv=w.dsv(",","text/csv");w.tsv=w.dsv("\t","text/tab-separated-values");var Md,Nd,Ld,Kd,$b,Hf=Ua[p(Ua,"requestAnimationFrame")]||function(a){setTimeout(a,17)};w.timer=function(a,b,c){var d=arguments.length;2>d&&(b=0);3>d&&(c=Date.now());d={c:a,
t:c+b,f:!1,n:null};Nd?Nd.n=d:Md=d;Nd=d;Ld||(Kd=clearTimeout(Kd),Ld=1,Hf(W))};w.timer.flush=function(){Cb();Pa()};w.round=function(a,b){return b?Math.round(a*(b=Math.pow(10,b)))/b:Math.round(a)};var di="y z a f p n \u00b5 m  k M G T P E Z Y".split(" ").map(function(a,b){var c=Math.pow(10,3*Y(8-b));return{scale:8<b?function(a){return a/c}:function(a){return a*c},symbol:a}});w.formatPrefix=function(a,b){var c=0;return a&&(0>a&&(a*=-1),b&&(a=w.round(a,$a(a,b))),c=1+Math.floor(1E-12+Math.log(a)/Math.LN10),
c=Math.max(-24,Math.min(24,3*Math.floor((0>=c?c+1:c-1)/3)))),di[8+c/3]};var If=/(?:([^{])?([<>=^]))?([+\- ])?([$#])?(0)?(\d+)?(,)?(\.-?\d+)?([a-z%])?/i,th=w.map({b:function(a){return a.toString(2)},c:function(a){return String.fromCharCode(a)},o:function(a){return a.toString(8)},x:function(a){return a.toString(16)},X:function(a){return a.toString(16).toUpperCase()},g:function(a,b){return a.toPrecision(b)},e:function(a,b){return a.toExponential(b)},f:function(a,b){return a.toFixed(b)},r:function(a,
b){return(a=w.round(a,$a(a,b))).toFixed(Math.max(0,Math.min(20,$a(a*(1+1E-15),b))))}}),P=w.time={},Va=Date;Ba.prototype={getDate:function(){return this._.getUTCDate()},getDay:function(){return this._.getUTCDay()},getFullYear:function(){return this._.getUTCFullYear()},getHours:function(){return this._.getUTCHours()},getMilliseconds:function(){return this._.getUTCMilliseconds()},getMinutes:function(){return this._.getUTCMinutes()},getMonth:function(){return this._.getUTCMonth()},getSeconds:function(){return this._.getUTCSeconds()},
getTime:function(){return this._.getTime()},getTimezoneOffset:function(){return 0},valueOf:function(){return this._.valueOf()},setDate:function(){dc.setUTCDate.apply(this._,arguments)},setDay:function(){dc.setUTCDay.apply(this._,arguments)},setFullYear:function(){dc.setUTCFullYear.apply(this._,arguments)},setHours:function(){dc.setUTCHours.apply(this._,arguments)},setMilliseconds:function(){dc.setUTCMilliseconds.apply(this._,arguments)},setMinutes:function(){dc.setUTCMinutes.apply(this._,arguments)},
setMonth:function(){dc.setUTCMonth.apply(this._,arguments)},setSeconds:function(){dc.setUTCSeconds.apply(this._,arguments)},setTime:function(){dc.setTime.apply(this._,arguments)}};var dc=Date.prototype;P.year=ka(function(a){return a=P.day(a),a.setMonth(0,1),a},function(a,b){a.setFullYear(a.getFullYear()+b)},function(a){return a.getFullYear()});P.years=P.year.range;P.years.utc=P.year.utc.range;P.day=ka(function(a){var b=new Va(2E3,0);return b.setFullYear(a.getFullYear(),a.getMonth(),a.getDate()),b},
function(a,b){a.setDate(a.getDate()+b)},function(a){return a.getDate()-1});P.days=P.day.range;P.days.utc=P.day.utc.range;P.dayOfYear=function(a){var b=P.year(a);return Math.floor((a-b-6E4*(a.getTimezoneOffset()-b.getTimezoneOffset()))/864E5)};"sunday monday tuesday wednesday thursday friday saturday".split(" ").forEach(function(a,b){b=7-b;var c=P[a]=ka(function(a){return(a=P.day(a)).setDate(a.getDate()-(a.getDay()+b)%7),a},function(a,b){a.setDate(a.getDate()+7*Math.floor(b))},function(a){var c=P.year(a).getDay();
return Math.floor((P.dayOfYear(a)+(c+b)%7)/7)-(c!==b)});P[a+"s"]=c.range;P[a+"s"].utc=c.utc.range;P[a+"OfYear"]=function(a){var c=P.year(a).getDay();return Math.floor((P.dayOfYear(a)+(c+b)%7)/7)}});P.week=P.sunday;P.weeks=P.sunday.range;P.weeks.utc=P.sunday.utc.range;P.weekOfYear=P.sundayOfYear;var Jf={"-":"",_:" ",0:"0"},Ca=/^\s*\d+/,Kf=/^%/;w.locale=function(a){return{numberFormat:Ka(a),timeFormat:kb(a)}};var Ag=w.locale({decimal:".",thousands:",",grouping:[3],currency:["$",""],dateTime:"%a %b %e %X %Y",
date:"%m/%d/%Y",time:"%H:%M:%S",periods:["AM","PM"],days:"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),shortDays:"Sun Mon Tue Wed Thu Fri Sat".split(" "),months:"January February March April May June July August September October November December".split(" "),shortMonths:"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" ")});w.format=Ag.numberFormat;w.geo={};La.prototype={s:0,t:0,add:function(a){Kb(a,this.t,ee);Kb(ee.s,this.s,this);this.s?this.t+=ee.t:this.s=ee.t},
reset:function(){this.s=this.t=0},valueOf:function(){return this.s}};var ee=new La;w.geo.stream=function(a,b){a&&Bg.hasOwnProperty(a.type)?Bg[a.type](a,b):Ea(a,b)};var Bg={Feature:function(a,b){Ea(a.geometry,b)},FeatureCollection:function(a,b){for(var c=a.features,d=-1,e=c.length;++d<e;)Ea(c[d].geometry,b)}},Lf={Sphere:function(a,b){b.sphere()},Point:function(a,b){a=a.coordinates;b.point(a[0],a[1],a[2])},MultiPoint:function(a,b){for(var c=a.coordinates,d=-1,e=c.length;++d<e;)a=c[d],b.point(a[0],a[1],
a[2])},LineString:function(a,b){wb(a.coordinates,b,0)},MultiLineString:function(a,b){for(var c=a.coordinates,d=-1,e=c.length;++d<e;)wb(c[d],b,0)},Polygon:function(a,b){Yb(a.coordinates,b)},MultiPolygon:function(a,b){for(var c=a.coordinates,d=-1,e=c.length;++d<e;)Yb(c[d],b)},GeometryCollection:function(a,b){for(var c=a.geometries,d=-1,e=c.length;++d<e;)Ea(c[d],b)}};w.geo.area=function(a){return Rc=0,w.geo.stream(a,xb),Rc};var Rc,yc=new La,xb={sphere:function(){Rc+=4*X},point:q,lineStart:q,lineEnd:q,
polygonStart:function(){yc.reset();xb.lineStart=Da},polygonEnd:function(){var a=2*yc;Rc+=0>a?4*X+a:a;xb.lineStart=xb.lineEnd=xb.point=q}};w.geo.bounds=function(){function a(b,c){y.push(x=[n=b,q=b]);p>c&&(p=c);c>r&&(r=c)}function b(c,d){var e=Wa([c*V,d*V]);if(t){var f=Pb(t,e),f=Pb([f[1],-f[0],0],f);Kc(f);var f=hc(f),g=c-v,l=0<g?1:-1,m=f[0]*ya*l,g=180<Y(g);g^(m>l*v&&l*c>m)?(f=f[1]*ya,f>r&&(r=f)):(m=(m+360)%360-180,g^(m>l*v&&l*c>m))?(f=-f[1]*ya,p>f&&(p=f)):(p>d&&(p=d),d>r&&(r=d));g?v>c?h(n,c)>h(n,q)&&
(q=c):h(c,q)>h(n,q)&&(n=c):q>=n?(n>c&&(n=c),c>q&&(q=c)):c>v?h(n,c)>h(n,q)&&(q=c):h(c,q)>h(n,q)&&(n=c)}else a(c,d);t=e;v=c}function c(){J.point=b}function d(){x[0]=n;x[1]=q;J.point=a;t=null}function e(a,c){if(t){var d=a-v;u+=180<Y(d)?d+(0<d?360:-360):d}else A=a,z=c;xb.point(a,c);b(a,c)}function f(){xb.lineStart()}function g(){e(A,z);xb.lineEnd();Y(u)>N&&(n=-(q=180));x[0]=n;x[1]=q;t=null}function h(a,b){return 0>(b-=a)?b+360:b}function l(a,b){return a[0]-b[0]}function m(a,b){return b[0]<=b[1]?b[0]<=
a&&a<=b[1]:a<b[0]||b[1]<a}var n,p,q,r,v,A,z,t,u,y,x,J={point:a,lineStart:c,lineEnd:d,polygonStart:function(){J.point=e;J.lineStart=f;J.lineEnd=g;u=0;xb.polygonStart()},polygonEnd:function(){xb.polygonEnd();J.point=a;J.lineStart=c;J.lineEnd=d;0>yc?(n=-(q=180),p=-(r=90)):u>N?r=90:-N>u&&(p=-90);x[0]=n;x[1]=q}};return function(a){r=q=-(n=p=1/0);y=[];w.geo.stream(a,J);if(a=y.length){y.sort(l);for(var b,c=1,d=y[0],e=[d];a>c;++c)b=y[c],m(b[0],d)||m(b[1],d)?(h(d[0],b[1])>h(d[0],d[1])&&(d[1]=b[1]),h(b[0],
d[1])>h(d[0],d[1])&&(d[0]=b[0])):e.push(d=b);var f,g=-1/0;a=e.length-1;c=0;for(d=e[a];a>=c;d=b,++c)b=e[c],(f=h(d[1],b[0]))>g&&(g=f,n=b[0],q=d[1])}return y=x=null,1/0===n||1/0===p?[[0/0,0/0],[0/0,0/0]]:[[n,p],[q,r]]}}();w.geo.centroid=function(a){gd=Nc=ac=bc=Ub=Fb=Gb=nb=mc=nc=Vb=0;w.geo.stream(a,Lb);a=mc;var b=nc,c=Vb,d=a*a+b*b+c*c;return Ee>d&&(a=Fb,b=Gb,c=nb,N>Nc&&(a=ac,b=bc,c=Ub),d=a*a+b*b+c*c,Ee>d)?[0/0,0/0]:[Math.atan2(b,a)*ya,Oa(c/Math.sqrt(d))*ya]};var gd,Nc,ac,bc,Ub,Fb,Gb,nb,mc,nc,Vb,Lb={sphere:q,
point:ec,lineStart:Ec,lineEnd:pd,polygonStart:function(){Lb.lineStart=qd},polygonEnd:function(){Lb.lineStart=Ec}},Mf=jd(fb,function(a){var b,c=0/0,d=0/0,e=0/0;return{lineStart:function(){a.lineStart();b=1},point:function(f,g){var h=0<f?X:-X,l=Y(f-c);if(Y(l-X)<N)a.point(c,d=0<(d+g)/2?eb:-eb),a.point(e,d),a.lineEnd(),a.lineStart(),a.point(h,d),a.point(f,d),b=0;else if(e!==h&&l>=X){Y(c-e)<N&&(c-=e*N);Y(f-h)<N&&(f-=h*N);var l=c,m=d,n=f,p,q,r=Math.sin(l-n);d=Y(r)>N?Math.atan((Math.sin(m)*(q=Math.cos(g))*
Math.sin(n)-Math.sin(g)*(p=Math.cos(m))*Math.sin(l))/(p*q*r)):(m+g)/2;a.point(e,d);a.lineEnd();a.lineStart();a.point(h,d);b=0}a.point(c=f,d=g);e=h},lineEnd:function(){a.lineEnd();c=d=0/0},clean:function(){return 2-b}}},function(a,b,c,d){null==a?(c*=eb,d.point(-X,c),d.point(0,c),d.point(X,c),d.point(X,0),d.point(X,-c),d.point(0,-c),d.point(-X,-c),d.point(-X,0),d.point(-X,c)):Y(a[0]-b[0])>N?(a=a[0]<b[0]?X:-X,c=c*a/2,d.point(-a,c),d.point(0,c),d.point(a,c)):d.point(b[0],b[1])},[-X,-X/2]),Pd=1E9;w.geo.clipExtent=
function(){var a,b,c,d,e,f,g={stream:function(a){return e&&(e.valid=!1),e=f(a),e.valid=!0,e},extent:function(h){return arguments.length?(f=ud(a=+h[0][0],b=+h[0][1],c=+h[1][0],d=+h[1][1]),e&&(e.valid=!1,e=null),g):[[a,b],[c,d]]}};return g.extent([[0,0],[960,500]])};(w.geo.conicEqualArea=function(){return bd(wd)}).raw=wd;w.geo.albers=function(){return w.geo.conicEqualArea().rotate([96,0]).center([-.6,38.7]).parallels([29.5,45.5]).scale(1070)};w.geo.albersUsa=function(){function a(f){var g=f[0];f=f[1];
return b=null,c(g,f),b||(d(g,f),b)||e(g,f),b}var b,c,d,e,f=w.geo.albers(),g=w.geo.conicEqualArea().rotate([154,0]).center([-2,58.5]).parallels([55,65]),h=w.geo.conicEqualArea().rotate([157,0]).center([-3,19.9]).parallels([8,18]),l={point:function(a,c){b=[a,c]}};return a.invert=function(a){var b=f.scale(),c=f.translate(),d=(a[0]-c[0])/b,b=(a[1]-c[1])/b;return(.12<=b&&.234>b&&-.425<=d&&-.214>d?g:.166<=b&&.234>b&&-.214<=d&&-.115>d?h:f).invert(a)},a.stream=function(a){var b=f.stream(a),c=g.stream(a),
d=h.stream(a);return{point:function(a,e){b.point(a,e);c.point(a,e);d.point(a,e)},sphere:function(){b.sphere();c.sphere();d.sphere()},lineStart:function(){b.lineStart();c.lineStart();d.lineStart()},lineEnd:function(){b.lineEnd();c.lineEnd();d.lineEnd()},polygonStart:function(){b.polygonStart();c.polygonStart();d.polygonStart()},polygonEnd:function(){b.polygonEnd();c.polygonEnd();d.polygonEnd()}}},a.precision=function(b){return arguments.length?(f.precision(b),g.precision(b),h.precision(b),a):f.precision()},
a.scale=function(b){return arguments.length?(f.scale(b),g.scale(.35*b),h.scale(b),a.translate(f.translate())):f.scale()},a.translate=function(b){if(!arguments.length)return f.translate();var m=f.scale(),n=+b[0],p=+b[1];return c=f.translate(b).clipExtent([[n-.455*m,p-.238*m],[n+.455*m,p+.238*m]]).stream(l).point,d=g.translate([n-.307*m,p+.201*m]).clipExtent([[n-.425*m+N,p+.12*m+N],[n-.214*m-N,p+.234*m-N]]).stream(l).point,e=h.translate([n-.205*m,p+.212*m]).clipExtent([[n-.214*m+N,p+.166*m+N],[n-.115*
m-N,p+.234*m-N]]).stream(l).point,a},a.scale(1070)};var fe,Qd,ge,he,ie,je,oc={point:q,lineStart:q,lineEnd:q,polygonStart:function(){Qd=0;oc.lineStart=xd},polygonEnd:function(){oc.lineStart=oc.lineEnd=oc.point=q;fe+=Y(Qd/2)}},ei={point:function(a,b){ge>a&&(ge=a);a>ie&&(ie=a);he>b&&(he=b);b>je&&(je=b)},lineStart:q,lineEnd:q,polygonStart:q,polygonEnd:q},Mb={point:Rb,lineStart:cd,lineEnd:Fc,polygonStart:function(){Mb.lineStart=zd},polygonEnd:function(){Mb.point=Rb;Mb.lineStart=cd;Mb.lineEnd=Fc}};w.geo.path=
function(){function a(b){return b&&("function"==typeof g&&e.pointRadius(+g.apply(this,arguments)),f&&f.valid||(f=d(e)),w.geo.stream(b,f)),e.result()}var b,c,d,e,f,g=4.5;return a.area=function(a){return fe=0,w.geo.stream(a,d(oc)),fe},a.centroid=function(a){return ac=bc=Ub=Fb=Gb=nb=mc=nc=Vb=0,w.geo.stream(a,d(Mb)),Vb?[mc/Vb,nc/Vb]:nb?[Fb/nb,Gb/nb]:Ub?[ac/Ub,bc/Ub]:[0/0,0/0]},a.bounds=function(a){return ie=je=-(ge=he=1/0),w.geo.stream(a,d(ei)),[[ge,he],[ie,je]]},a.projection=function(c){return arguments.length?
(d=(b=c)?c.stream||Bd(c):ta,f=null,a):b},a.context=function(b){return arguments.length?(e=null==(c=b)?new ye:new Ad(b),"function"!=typeof g&&e.pointRadius(g),f=null,a):c},a.pointRadius=function(b){return arguments.length?(g="function"==typeof b?b:(e.pointRadius(+b),+b),a):g},a.projection(w.geo.albersUsa()).context(null)};w.geo.transform=function(a){return{stream:function(b){b=new Cd(b);for(var c in a)b[c]=a[c];return b}}};Cd.prototype={point:function(a,b){this.stream.point(a,b)},sphere:function(){this.stream.sphere()},
lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};w.geo.projection=Sb;w.geo.projectionMutator=Tb;(w.geo.equirectangular=function(){return Sb(wc)}).raw=wc.invert=wc;w.geo.rotation=function(a){function b(c){return c=a(c[0]*V,c[1]*V),c[0]*=ya,c[1]*=ya,c}return a=jc(a[0]%360*V,a[1]*V,2<a.length?a[2]*V:0),b.invert=function(b){return b=a.invert(b[0]*V,b[1]*V),b[0]*=
ya,b[1]*=ya,b},b};sc.invert=wc;w.geo.circle=function(){function a(){var b="function"==typeof d?d.apply(this,arguments):d,e=jc(-b[0]*V,-b[1]*V,0).invert,f=[];return c(null,null,1,{point:function(a,b){f.push(a=e(a,b));a[0]*=ya;a[1]*=ya}}),{type:"Polygon",coordinates:[f]}}var b,c,d=[0,0],e=6;return a.origin=function(b){return arguments.length?(d=b,a):d},a.angle=function(d){return arguments.length?(c=gc((b=+d)*V,e*V),a):b},a.precision=function(d){return arguments.length?(c=gc(b*V,(e=+d)*V),a):e},a.angle(90)};
w.geo.distance=function(a,b){var c,d=(b[0]-a[0])*V,e=a[1]*V,f=b[1]*V,g=Math.sin(d),d=Math.cos(d),h=Math.sin(e),e=Math.cos(e),l=Math.sin(f),f=Math.cos(f);return Math.atan2(Math.sqrt((c=f*g)*c+(c=e*l-h*f*d)*c),h*l+e*f*d)};w.geo.graticule=function(){function a(){return{type:"MultiLineString",coordinates:b()}}function b(){return w.range(Math.ceil(f/z)*z,e,z).map(q).concat(w.range(Math.ceil(m/t)*t,l,t).map(r)).concat(w.range(Math.ceil(d/v)*v,c,v).filter(function(a){return Y(a%z)>N}).map(n)).concat(w.range(Math.ceil(h/
A)*A,g,A).filter(function(a){return Y(a%t)>N}).map(p))}var c,d,e,f,g,h,l,m,n,p,q,r,v=10,A=v,z=90,t=360,u=2.5;return a.lines=function(){return b().map(function(a){return{type:"LineString",coordinates:a}})},a.outline=function(){return{type:"Polygon",coordinates:[q(f).concat(r(l).slice(1),q(e).reverse().slice(1),r(m).reverse().slice(1))]}},a.extent=function(b){return arguments.length?a.majorExtent(b).minorExtent(b):a.minorExtent()},a.majorExtent=function(b){return arguments.length?(f=+b[0][0],e=+b[1][0],
m=+b[0][1],l=+b[1][1],f>e&&(b=f,f=e,e=b),m>l&&(b=m,m=l,l=b),a.precision(u)):[[f,m],[e,l]]},a.minorExtent=function(b){return arguments.length?(d=+b[0][0],c=+b[1][0],h=+b[0][1],g=+b[1][1],d>c&&(b=d,d=c,c=b),h>g&&(b=h,h=g,g=b),a.precision(u)):[[d,h],[c,g]]},a.step=function(b){return arguments.length?a.majorStep(b).minorStep(b):a.minorStep()},a.majorStep=function(b){return arguments.length?(z=+b[0],t=+b[1],a):[z,t]},a.minorStep=function(b){return arguments.length?(v=+b[0],A=+b[1],a):[v,A]},a.precision=
function(b){return arguments.length?(u=+b,n=dd(h,g,90),p=Tc(d,c,u),q=dd(m,l,90),r=Tc(f,e,u),a):u},a.majorExtent([[-180,-90+N],[180,90-N]]).minorExtent([[-180,-80-N],[180,80+N]])};w.geo.greatArc=function(){function a(){return{type:"LineString",coordinates:[b||d.apply(this,arguments),c||e.apply(this,arguments)]}}var b,c,d=oe,e=pe;return a.distance=function(){return w.geo.distance(b||d.apply(this,arguments),c||e.apply(this,arguments))},a.source=function(c){return arguments.length?(d=c,b="function"==
typeof c?null:c,a):d},a.target=function(b){return arguments.length?(e=b,c="function"==typeof b?null:b,a):e},a.precision=function(){return arguments.length?a:0},a};w.geo.interpolate=function(a,b){return Pg(a[0]*V,a[1]*V,b[0]*V,b[1]*V)};w.geo.length=function(a){return ke=0,w.geo.stream(a,Sc),ke};var ke,Sc={sphere:q,point:q,lineStart:function(){function a(e,f){var g=Math.sin(f*=V),h=Math.cos(f),l=Y((e*=V)-b),m=Math.cos(l);ke+=Math.atan2(Math.sqrt((l=h*Math.sin(l))*l+(l=d*g-c*h*m)*l),c*g+d*h*m);b=e;c=
g;d=h}var b,c,d;Sc.point=function(e,f){b=e*V;c=Math.sin(f*=V);d=Math.cos(f);Sc.point=a};Sc.lineEnd=function(){Sc.point=Sc.lineEnd=q}},lineEnd:q,polygonStart:q,polygonEnd:q},Cg=rc(function(a){return Math.sqrt(2/(1+a))},function(a){return 2*Math.asin(a/2)});(w.geo.azimuthalEqualArea=function(){return Sb(Cg)}).raw=Cg;var Dg=rc(function(a){return(a=Math.acos(a))&&a/Math.sin(a)},ta);(w.geo.azimuthalEquidistant=function(){return Sb(Dg)}).raw=Dg;(w.geo.conicConformal=function(){return bd(ef)}).raw=ef;(w.geo.conicEquidistant=
function(){return bd(ff)}).raw=ff;var Eg=rc(function(a){return 1/a},Math.atan);(w.geo.gnomonic=function(){return Sb(Eg)}).raw=Eg;kd.invert=function(a,b){return[a,2*Math.atan(Math.exp(b))-eb]};(w.geo.mercator=function(){return gf(kd)}).raw=kd;var Fg=rc(function(){return 1},Math.asin);(w.geo.orthographic=function(){return Sb(Fg)}).raw=Fg;var Gg=rc(function(a){return 1/(1+a)},function(a){return 2*Math.atan(a)});(w.geo.stereographic=function(){return Sb(Gg)}).raw=Gg;qe.invert=function(a,b){return[-b,
2*Math.atan(Math.exp(a))-eb]};(w.geo.transverseMercator=function(){var a=gf(qe),b=a.center,c=a.rotate;return a.center=function(a){return a?b([-a[1],a[0]]):(a=b(),[-a[1],a[0]])},a.rotate=function(a){return a?c([a[0],a[1],2<a.length?a[2]+90:90]):(a=c(),[a[0],a[1],a[2]-90])},a.rotate([0,0])}).raw=qe;w.geom={};w.geom.hull=function(a){function b(a){if(3>a.length)return[];var e,f=da(c),g=da(d),h=a.length,l=[],m=[];for(e=0;h>e;e++)l.push([+f.call(this,a[e],e),+g.call(this,a[e],e),e]);l.sort(re);for(e=0;h>
e;e++)m.push([l[e][0],-l[e][1]]);var f=hf(l),m=hf(m),g=m[0]===f[0],h=m[m.length-1]===f[f.length-1],n=[];for(e=f.length-1;0<=e;--e)n.push(a[l[f[e]][2]]);for(e=+g;e<m.length-h;++e)n.push(a[l[m[e]][2]]);return n}var c=Gc,d=Vc;return arguments.length?b(a):(b.x=function(a){return arguments.length?(c=a,b):c},b.y=function(a){return arguments.length?(d=a,b):d},b)};w.geom.polygon=function(a){return Hd(a,le),a};var le=w.geom.polygon.prototype=[];le.area=function(){for(var a,b=-1,c=this.length,d=this[c-1],e=
0;++b<c;)a=d,d=this[b],e+=a[1]*d[0]-a[0]*d[1];return.5*e};le.centroid=function(a){var b,c,d=-1,e=this.length,f=0,g=0,h=this[e-1];for(arguments.length||(a=-1/(6*this.area()));++d<e;)b=h,h=this[d],c=b[0]*h[1]-h[0]*b[1],f+=(b[0]+h[0])*c,g+=(b[1]+h[1])*c;return[f*a,g*a]};le.clip=function(a){for(var b,c,d,e,f,g,h=kf(a),l=-1,m=this.length-kf(this),n=this[m-1];++l<m;){b=a.slice();a.length=0;e=this[l];f=b[(d=b.length-h)-1];for(c=-1;++c<d;)g=b[c],se(g,n,e)?(se(f,n,e)||a.push(jf(f,g,n,e)),a.push(g)):se(f,n,
e)&&a.push(jf(f,g,n,e)),f=g;h&&a.push(a[0]);n=e}return a};var Pc,zc,Oc,Fe,hd,Nf=[],Of=[];rf.prototype.prepare=function(){for(var a,b=this.edges,c=b.length;c--;)a=b[c].edge,a.b&&a.a||b.splice(c,1);return b.sort(yf),b.length};ld.prototype={start:function(){return this.edge.l===this.site?this.edge.a:this.edge.b},end:function(){return this.edge.l===this.site?this.edge.b:this.edge.a}};ve.prototype={insert:function(a,b){var c,d,e;if(a){if(b.P=a,b.N=a.N,a.N&&(a.N.P=b),a.N=b,a.R){for(a=a.R;a.L;)a=a.L;a.L=
b}else a.R=b;c=a}else this._?(a=wf(this._),b.P=null,b.N=a,a.P=a.L=b,c=a):(b.P=b.N=null,this._=b,c=null);b.L=b.R=null;b.U=c;b.C=!0;for(a=b;c&&c.C;)d=c.U,c===d.L?(e=d.R,e&&e.C?(c.C=e.C=!1,d.C=!0,a=d):(a===c.R&&(Wc(this,c),a=c,c=a.U),c.C=!1,d.C=!0,Xc(this,d))):(e=d.L,e&&e.C?(c.C=e.C=!1,d.C=!0,a=d):(a===c.L&&(Xc(this,c),a=c,c=a.U),c.C=!1,d.C=!0,Wc(this,d))),c=a.U;this._.C=!1},remove:function(a){a.N&&(a.N.P=a.P);a.P&&(a.P.N=a.N);a.N=a.P=null;var b,c,d,e=a.U,f=a.L,g=a.R;if(c=f?g?wf(g):f:g,e?e.L===a?e.L=
c:e.R=c:this._=c,f&&g?(d=c.C,c.C=a.C,c.L=f,f.U=c,c!==g?(e=c.U,c.U=a.U,a=c.R,e.L=a,c.R=g,g.U=c):(c.U=e,e=c,a=c.R)):(d=a.C,a=c),a&&(a.U=e),!d){if(a&&a.C)return a.C=!1,void 0;do{if(a===this._)break;if(a===e.L){if(b=e.R,b.C&&(b.C=!1,e.C=!0,Wc(this,e),b=e.R),b.L&&b.L.C||b.R&&b.R.C){b.R&&b.R.C||(b.L.C=!1,b.C=!0,Xc(this,b),b=e.R);b.C=e.C;e.C=b.R.C=!1;Wc(this,e);a=this._;break}}else if(b=e.L,b.C&&(b.C=!1,e.C=!0,Xc(this,e),b=e.L),b.L&&b.L.C||b.R&&b.R.C){b.L&&b.L.C||(b.R.C=!1,b.C=!0,Wc(this,b),b=e.L);b.C=e.C;
e.C=b.L.C=!1;Xc(this,e);a=this._;break}b.C=!0;a=e;e=e.U}while(!a.C);a&&(a.C=!1)}}};w.geom.voronoi=function(a){function b(a){var d=Array(a.length),e=h[0][0],f=h[0][1],g=h[1][0],l=h[1][1];return ue(c(a),h).cells.forEach(function(b,c){var h=b.edges,m=b.site;(d[c]=h.length?h.map(function(a){a=a.start();return[a.x,a.y]}):m.x>=e&&m.x<=g&&m.y>=f&&m.y<=l?[[e,l],[g,l],[g,f],[e,f]]:[]).point=a[c]}),d}function c(a){return a.map(function(a,b){return{x:Math.round(f(a,b)/N)*N,y:Math.round(g(a,b)/N)*N,i:b}})}var d=
Gc,e=Vc,f=d,g=e,h=me;return a?b(a):(b.links=function(a){return ue(c(a)).edges.filter(function(a){return a.l&&a.r}).map(function(b){return{source:a[b.l.i],target:a[b.r.i]}})},b.triangles=function(a){var b=[];return ue(c(a)).cells.forEach(function(c,d){for(var e,f=c.site,g=c.edges.sort(yf),h=-1,l=g.length,m=g[l-1].edge,m=m.l===f?m.r:m.l;++h<l;)e=m,m=g[h].edge,m=m.l===f?m.r:m.l,d<e.i&&d<m.i&&0>(f.x-m.x)*(e.y-f.y)-(f.x-e.x)*(m.y-f.y)&&b.push([a[d],a[e.i],a[m.i]])}),b},b.x=function(a){return arguments.length?
(f=da(d=a),b):d},b.y=function(a){return arguments.length?(g=da(e=a),b):e},b.clipExtent=function(a){return arguments.length?(h=null==a?me:a,b):h===me?null:h},b.size=function(a){return arguments.length?b.clipExtent(a&&[[0,0],a]):h===me?null:h&&h[1]},b)};var me=[[-1E6,-1E6],[1E6,1E6]];w.geom.delaunay=function(a){return w.geom.voronoi().triangles(a)};w.geom.quadtree=function(a,b,c,d,e){function f(a){function m(a,b,c,d,e,f,g,h){if(!isNaN(c)&&!isNaN(d))if(a.leaf){var l=a.x,p=a.y;if(null!=l){if(!(.01>Y(l-
c)+Y(p-d))){var q=a.point;a.x=a.y=a.point=null;n(a,q,l,p,e,f,g,h)}n(a,b,c,d,e,f,g,h)}else a.x=c,a.y=d,a.point=b}else n(a,b,c,d,e,f,g,h)}function n(a,b,c,d,e,f,g,h){var l=.5*(e+g),p=.5*(f+h),q=c>=l,r=d>=p,G=(r<<1)+q;a.leaf=!1;a=a.nodes[G]||(a.nodes[G]=zf());q?e=l:g=l;r?f=p:h=p;m(a,b,c,d,e,f,g,h)}var p,q,r,G,v,A,z,t,u,w=da(h),y=da(l);if(null!=b)A=b,z=c,t=d,u=e;else if(t=u=-(A=z=1/0),q=[],r=[],v=a.length,g)for(G=0;v>G;++G)p=a[G],p.x<A&&(A=p.x),p.y<z&&(z=p.y),p.x>t&&(t=p.x),p.y>u&&(u=p.y),q.push(p.x),
r.push(p.y);else for(G=0;v>G;++G){var x=+w(p=a[G],G);p=+y(p,G);A>x&&(A=x);z>p&&(z=p);x>t&&(t=x);p>u&&(u=p);q.push(x);r.push(p)}x=t-A;p=u-z;x>p?u=z+x:t=A+p;var J=zf();if(J.add=function(a){m(J,a,+w(a,++G),+y(a,G),A,z,t,u)},J.visit=function(a){$c(a,J,A,z,t,u)},G=-1,null==b){for(;++G<v;)m(J,a[G],q[G],r[G],A,z,t,u);--G}else a.forEach(J.add);return q=r=a=p=null,J}var g,h=Gc,l=Vc;return(g=arguments.length)?(h=kh,l=Xg,3===g&&(e=c,d=b,c=b=0),f(a)):(f.x=function(a){return arguments.length?(h=a,f):h},f.y=function(a){return arguments.length?
(l=a,f):l},f.extent=function(a){return arguments.length?(null==a?b=c=d=e=null:(b=+a[0][0],c=+a[0][1],d=+a[1][0],e=+a[1][1]),f):null==b?null:[[b,c],[d,e]]},f.size=function(a){return arguments.length?(null==a?b=c=d=e=null:(b=c=0,d=+a[0],e=+a[1]),f):null==b?null:[d-b,e-c]},f)};w.interpolateRgb=te;w.interpolateObject=uf;w.interpolateNumber=Xb;w.interpolateString=Af;var Rd=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g;w.interpolate=tc;w.interpolators=[function(a,b){var c=typeof b;return("string"===c?Jd.has(b)||
/^(#|rgb\(|hsl\()/.test(b)?te:Af:b instanceof bb?te:"object"===c?Array.isArray(b)?nd:uf:Xb)(a,b)}];w.interpolateArray=nd;var Hg=function(){return ta},fi=w.map({linear:Hg,poly:function(a){return function(b){return Math.pow(b,a)}},quad:function(){return Yg},cubic:function(){return mh},sin:function(){return oh},exp:function(){return Wg},circle:function(){return ph},elastic:function(a,b){var c;return 2>arguments.length&&(b=.45),arguments.length?c=b/ob*Math.asin(1/a):(a=1,c=b/4),function(d){return 1+a*
Math.pow(2,-10*d)*Math.sin((d-c)*ob/b)}},back:function(a){return a||(a=1.70158),function(b){return b*b*((a+1)*b-a)}},bounce:function(){return qh}}),gi=w.map({"in":ta,out:Bf,"in-out":xf,"out-in":function(a){return xf(Bf(a))}});w.ease=function(a){var b=a.indexOf("-"),c=0<=b?a.substring(0,b):a,b=0<=b?a.substring(b+1):"in";return c=fi.get(c)||Hg,b=gi.get(b)||ta,lh(b(c.apply(null,ug.call(arguments,1))))};w.interpolateHcl=function(a,b){a=w.hcl(a);b=w.hcl(b);var c=a.h,d=a.c,e=a.l,f=b.h-c,g=b.c-d,h=b.l-e;
return isNaN(g)&&(g=0,d=isNaN(d)?b.c:d),isNaN(f)?(f=0,c=isNaN(c)?b.h:c):180<f?f-=360:-180>f&&(f+=360),function(a){return Ib(c+f*a,d+g*a,e+h*a)+""}};w.interpolateHsl=function(a,b){a=w.hsl(a);b=w.hsl(b);var c=a.h,d=a.s,e=a.l,f=b.h-c,g=b.s-d,h=b.l-e;return isNaN(g)&&(g=0,d=isNaN(d)?b.s:d),isNaN(f)?(f=0,c=isNaN(c)?b.h:c):180<f?f-=360:-180>f&&(f+=360),function(a){return sb(c+f*a,d+g*a,e+h*a)+""}};w.interpolateLab=function(a,b){a=w.lab(a);b=w.lab(b);var c=a.l,d=a.a,e=a.b,f=b.l-c,g=b.a-d,h=b.b-e;return function(a){return Jb(c+
f*a,d+g*a,e+h*a)+""}};w.interpolateRound=lf;w.transform=function(a){var b=Nb.createElementNS(w.ns.prefix.svg,"g");return(w.transform=function(a){if(null!=a){b.setAttribute("transform",a);var c=b.transform.baseVal.consolidate()}return new mf(c?c.matrix:hi)})(a)};mf.prototype.toString=function(){return"translate("+this.translate+")rotate("+this.rotate+")skewX("+this.skew+")scale("+this.scale+")"};var hi={a:1,b:0,c:0,d:1,e:0,f:0};w.interpolateTransform=of;w.layout={};w.layout.bundle=function(){return function(a){for(var b=
[],c=-1,d=a.length;++c<d;)b.push(Ug(a[c]));return b}};w.layout.chord=function(){function a(){var m,p,q,r,G,v={},A=[],z=w.range(f),t=[];c=[];d=[];m=0;for(r=-1;++r<f;){p=0;for(G=-1;++G<f;)p+=e[r][G];A.push(p);t.push(w.range(f));m+=p}g&&z.sort(function(a,b){return g(A[a],A[b])});h&&t.forEach(function(a,b){a.sort(function(a,c){return h(e[b][a],e[b][c])})});m=(ob-n*f)/m;p=0;for(r=-1;++r<f;){q=p;for(G=-1;++G<f;){var u=z[r],y=t[u][G],x=e[u][y],J=p,H=p+=x*m;v[u+"-"+y]={index:u,subindex:y,startAngle:J,endAngle:H,
value:x}}d[u]={index:u,startAngle:q,endAngle:p,value:(p-q)/m};p+=n}for(r=-1;++r<f;)for(G=r-1;++G<f;)m=v[r+"-"+G],p=v[G+"-"+r],(m.value||p.value)&&c.push(m.value<p.value?{source:p,target:m}:{source:m,target:p});l&&b()}function b(){c.sort(function(a,b){return l((a.source.value+a.target.value)/2,(b.source.value+b.target.value)/2)})}var c,d,e,f,g,h,l,m={},n=0;return m.matrix=function(a){return arguments.length?(f=(e=a)&&e.length,c=d=null,m):e},m.padding=function(a){return arguments.length?(n=a,c=d=null,
m):n},m.sortGroups=function(a){return arguments.length?(g=a,c=d=null,m):g},m.sortSubgroups=function(a){return arguments.length?(h=a,c=null,m):h},m.sortChords=function(a){return arguments.length?(l=a,c&&b(),m):l},m.chords=function(){return c||a(),c},m.groups=function(){return d||a(),d},m};w.layout.force=function(){function a(b){return function(a,c,d,e){if(a.point!==b){d=a.cx-b.x;var f=a.cy-b.y;c=e-c;e=d*d+f*f;if(e>c*c/z)return v>e&&(c=a.charge/e,b.px-=d*c,b.py-=f*c),!0;a.point&&e&&v>e&&(c=a.pointCharge/
e,b.px-=d*c,b.py-=f*c)}return!a.charge}}function b(a){a.px=w.event.x;a.py=w.event.y;h.resume()}var c,d,e,f,g,h={},l=w.dispatch("start","tick","end"),m=[1,1],n=.9,p=ii,q=ji,r=-30,v=ki,A=.1,z=.64,t=[],u=[];return h.tick=function(){if(.005>(d*=.99))return l.end({type:"end",alpha:d=0}),!0;var b,c,h,p,q,v,z,y,x=t.length,J=u.length;for(c=0;J>c;++c)h=u[c],b=h.source,p=h.target,z=p.x-b.x,y=p.y-b.y,(q=z*z+y*y)&&(q=d*f[c]*((q=Math.sqrt(q))-e[c])/q,z*=q,y*=q,p.x-=z*(v=b.weight/(p.weight+b.weight)),p.y-=y*v,
b.x+=z*(v=1-v),b.y+=y*v);if((v=d*A)&&(z=m[0]/2,y=m[1]/2,c=-1,v))for(;++c<x;)h=t[c],h.x+=(z-h.x)*v,h.y+=(y-h.y)*v;if(r)for(vf(b=w.geom.quadtree(t),d,g),c=-1;++c<x;)(h=t[c]).fixed||b.visit(a(h));for(c=-1;++c<x;)h=t[c],h.fixed?(h.x=h.px,h.y=h.py):(h.x-=(h.px-(h.px=h.x))*n,h.y-=(h.py-(h.py=h.y))*n);l.tick({type:"tick",alpha:d})},h.nodes=function(a){return arguments.length?(t=a,h):t},h.links=function(a){return arguments.length?(u=a,h):u},h.size=function(a){return arguments.length?(m=a,h):m},h.linkDistance=
function(a){return arguments.length?(p="function"==typeof a?a:+a,h):p},h.distance=h.linkDistance,h.linkStrength=function(a){return arguments.length?(q="function"==typeof a?a:+a,h):q},h.friction=function(a){return arguments.length?(n=+a,h):n},h.charge=function(a){return arguments.length?(r="function"==typeof a?a:+a,h):r},h.chargeDistance=function(a){return arguments.length?(v=a*a,h):Math.sqrt(v)},h.gravity=function(a){return arguments.length?(A=+a,h):A},h.theta=function(a){return arguments.length?
(z=a*a,h):Math.sqrt(z)},h.alpha=function(a){return arguments.length?(a=+a,d?d=0<a?a:0:0<a&&(l.start({type:"start",alpha:d=a}),w.timer(h.tick)),h):d},h.start=function(){function a(d,e){if(!c){c=Array(l);for(h=0;l>h;++h)c[h]=[];for(h=0;m>h;++h){var f=u[h];c[f.source.index].push(f.target);c[f.target.index].push(f.source)}}for(var g=c[b],h=-1,m=g.length;++h<m;)if(!isNaN(f=g[h][d]))return f;return Math.random()*e}var b,c,d,l=t.length,n=u.length,G=m[0],v=m[1];for(b=0;l>b;++b)(d=t[b]).index=b,d.weight=0;
for(b=0;n>b;++b)d=u[b],"number"==typeof d.source&&(d.source=t[d.source]),"number"==typeof d.target&&(d.target=t[d.target]),++d.source.weight,++d.target.weight;for(b=0;l>b;++b)d=t[b],isNaN(d.x)&&(d.x=a("x",G)),isNaN(d.y)&&(d.y=a("y",v)),isNaN(d.px)&&(d.px=d.x),isNaN(d.py)&&(d.py=d.y);if(e=[],"function"==typeof p)for(b=0;n>b;++b)e[b]=+p.call(this,u[b],b);else for(b=0;n>b;++b)e[b]=p;if(f=[],"function"==typeof q)for(b=0;n>b;++b)f[b]=+q.call(this,u[b],b);else for(b=0;n>b;++b)f[b]=q;if(g=[],"function"==
typeof r)for(b=0;l>b;++b)g[b]=+r.call(this,t[b],b);else for(b=0;l>b;++b)g[b]=r;return h.resume()},h.resume=function(){return h.alpha(.1)},h.stop=function(){return h.alpha(0)},h.drag=function(){return c||(c=w.behavior.drag().origin(ta).on("dragstart.force",Vg).on("drag.force",b).on("dragend.force",Zg)),arguments.length?(this.on("mouseover.force",$g).on("mouseout.force",ah).call(c),void 0):c},w.rebind(h,l,"on")};var ii=20,ji=1,ki=1/0;w.layout.hierarchy=function(){function a(b,g,h){var l=e.call(c,b,
g);if(b.depth=g,h.push(b),l&&(m=l.length)){for(var m,n=-1,p=b.children=Array(m),q=0,r=g+1;++n<m;)g=p[n]=a(l[n],r,h),g.parent=b,q+=g.value;d&&p.sort(d);f&&(b.value=q)}else delete b.children,f&&(b.value=+f.call(c,b,g)||0);return b}function b(a,d){var e=a.children,g=0;if(e&&(h=e.length))for(var h,l=-1,m=d+1;++l<h;)g+=b(e[l],m);else f&&(g=+f.call(c,a,d)||0);return f&&(a.value=g),g}function c(b){var d=[];return a(b,0,d),d}var d=dh,e=bh,f=ch;return c.sort=function(a){return arguments.length?(d=a,c):d},
c.children=function(a){return arguments.length?(e=a,c):e},c.value=function(a){return arguments.length?(f=a,c):f},c.revalue=function(a){return b(a,0),a},c};w.layout.partition=function(){function a(b,c,d,e){var f=b.children;if(b.x=c,b.y=b.depth*e,b.dx=d,b.dy=e,f&&(g=f.length)){var g,h,l=-1;for(d=b.value?d/b.value:0;++l<g;)a(h=f[l],c,b=h.value*d,e),c+=b}}function b(a){a=a.children;var c=0;if(a&&(d=a.length))for(var d,e=-1;++e<d;)c=Math.max(c,b(a[e]));return 1+c}function c(f,g){var h=d.call(this,f,g);
return a(h[0],0,e[0],e[1]/b(h[0])),h}var d=w.layout.hierarchy(),e=[1,1];return c.size=function(a){return arguments.length?(e=a,c):e},Zc(c,d)};w.layout.pie=function(){function a(f){var g=f.map(function(c,d){return+b.call(a,c,d)}),h=+("function"==typeof d?d.apply(this,arguments):d),l=(("function"==typeof e?e.apply(this,arguments):e)-h)/w.sum(g),m=w.range(f.length);null!=c&&m.sort(c===Ig?function(a,b){return g[b]-g[a]}:function(a,b){return c(f[a],f[b])});var n=[];return m.forEach(function(a){var b;n[a]=
{data:f[a],value:b=g[a],startAngle:h,endAngle:h+=b*l}}),n}var b=Number,c=Ig,d=0,e=ob;return a.value=function(c){return arguments.length?(b=c,a):b},a.sort=function(b){return arguments.length?(c=b,a):c},a.startAngle=function(b){return arguments.length?(d=b,a):d},a.endAngle=function(b){return arguments.length?(e=b,a):e},a};var Ig={};w.layout.stack=function(){function a(h,l){var m=h.map(function(c,d){return b.call(a,c,d)}),n=m.map(function(b){return b.map(function(b,c){return[f.call(a,b,c),g.call(a,b,
c)]})}),p=c.call(a,n,l),m=w.permute(m,p),n=w.permute(n,p),q,r,v=d.call(a,n,l),A=m.length,z=m[0].length;for(q=0;z>q;++q)for(e.call(a,m[0][q],r=v[q],n[0][q][1]),p=1;A>p;++p)e.call(a,m[p][q],r+=n[p-1][q][1],n[p][q][1]);return h}var b=ta,c=Ge,d=He,e=uh,f=fh,g=gh;return a.values=function(c){return arguments.length?(b=c,a):b},a.order=function(b){return arguments.length?(c="function"==typeof b?b:li.get(b)||Ge,a):c},a.offset=function(b){return arguments.length?(d="function"==typeof b?b:mi.get(b)||He,a):d},
a.x=function(b){return arguments.length?(f=b,a):f},a.y=function(b){return arguments.length?(g=b,a):g},a.out=function(b){return arguments.length?(e=b,a):e},a};var li=w.map({"inside-out":function(a){var b,c=a.length,d=a.map(vh),e=a.map(wh),f=w.range(c).sort(function(a,b){return d[a]-d[b]}),g=0,h=0,l=[],m=[];for(a=0;c>a;++a)b=f[a],h>g?(g+=e[b],l.push(b)):(h+=e[b],m.push(b));return m.reverse().concat(l)},reverse:function(a){return w.range(a.length).reverse()},"default":Ge}),mi=w.map({silhouette:function(a){var b,
c,d,e=a.length,f=a[0].length,g=[],h=0,l=[];for(c=0;f>c;++c){for(d=b=0;e>b;b++)d+=a[b][c][1];d>h&&(h=d);g.push(d)}for(c=0;f>c;++c)l[c]=(h-g[c])/2;return l},wiggle:function(a){var b,c,d,e,f,g,h,l,m,n=a.length,p=a[0],q=p.length,r=[];r[0]=l=m=0;for(c=1;q>c;++c){for(e=b=0;n>b;++b)e+=a[b][c][1];f=b=0;for(h=p[c][0]-p[c-1][0];n>b;++b){d=0;for(g=(a[b][c][1]-a[b][c-1][1])/(2*h);b>d;++d)g+=(a[d][c][1]-a[d][c-1][1])/h;f+=g*a[b][c][1]}r[c]=l-=e?f/e*h:0;m>l&&(m=l)}for(c=0;q>c;++c)r[c]-=m;return r},expand:function(a){var b,
c,d,e=a.length,f=a[0].length,g=1/e,h=[];for(c=0;f>c;++c){for(d=b=0;e>b;b++)d+=a[b][c][1];if(d)for(b=0;e>b;b++)a[b][c][1]/=d;else for(b=0;e>b;b++)a[b][c][1]=g}for(c=0;f>c;++c)h[c]=0;return h},zero:He});w.layout.histogram=function(){function a(f,g){var h,l,m=[],n=f.map(c,this),p=d.call(this,n,g),q=e.call(this,p,n,g);g=-1;for(var r=n.length,v=q.length-1,G=b?1:1/r;++g<v;)h=m[g]=[],h.dx=q[g+1]-(h.x=q[g]),h.y=0;if(0<v)for(g=-1;++g<r;)l=n[g],l>=p[0]&&l<=p[1]&&(h=m[w.bisect(q,l,1,v)-1],h.y+=G,h.push(f[g]));
return m}var b=!0,c=Number,d=zh,e=yh;return a.value=function(b){return arguments.length?(c=b,a):c},a.range=function(b){return arguments.length?(d=da(b),a):d},a.bins=function(b){return arguments.length?(e="number"==typeof b?function(a){return Pf(a,b)}:da(b),a):e},a.frequency=function(c){return arguments.length?(b=!!c,a):b},a};w.layout.tree=function(){function a(f,g){function h(a,b){var d=a.children,e=a._tree;if(d&&(f=d.length)){for(var f,g,l,m=d[0],n=m,p=-1;++p<f;){l=d[p];h(l,g);var q=l;if(g){for(var r=
void 0,v=q,G=q,A=q.parent.children[0],z=v._tree.mod,t=G._tree.mod,u=g._tree.mod,w=A._tree.mod;g=Je(g),v=Ie(v),g&&v;){A=Ie(A);G=Je(G);G._tree.ancestor=q;r=g._tree.prelim+u-v._tree.prelim-z+c(g,v);if(0<r){var y=g._tree.ancestor.parent==q.parent?g._tree.ancestor:n,x=q,J=r,y=y._tree,x=x._tree,H=J/(x.number-y.number);y.change+=H;x.change-=H;x.shift+=J;x.prelim+=J;x.mod+=J;z+=r;t+=r}u+=g._tree.mod;z+=v._tree.mod;w+=A._tree.mod;t+=G._tree.mod}g&&!Je(G)&&(G._tree.thread=g,G._tree.mod+=u-t);v&&!Ie(A)&&(A._tree.thread=
v,A._tree.mod+=z-w,n=q)}g=l}p=f=0;q=a.children;for(n=q.length;0<=--n;)d=q[n]._tree,d.prelim+=f,d.mod+=f,f+=d.shift+(p+=d.change);l=.5*(m._tree.prelim+l._tree.prelim);b?(e.prelim=b._tree.prelim+c(a,b),e.mod=e.prelim-l):e.prelim=l}else b&&(e.prelim=b._tree.prelim+c(a,b))}function l(a,b){a.x=a._tree.prelim+b;var c=a.children;if(c&&(d=c.length)){var d,e=-1;for(b+=a._tree.mod;++e<d;)l(c[e],b)}}var m=b.call(this,f,g),n=m[0];cc(n,function(a,b){a._tree={ancestor:a,prelim:0,mod:0,change:0,shift:0,number:b?
b._tree.number+1:0}});h(n);l(n,-n._tree.prelim);var p=Sd(n,Bh),q=Sd(n,Ah),r=Sd(n,Ch),v=p.x-c(p,q)/2,G=q.x+c(q,p)/2,A=r.depth||1;return cc(n,e?function(a){a.x*=d[0];a.y=a.depth*d[1];delete a._tree}:function(a){a.x=(a.x-v)/(G-v)*d[0];a.y=a.depth/A*d[1];delete a._tree}),m}var b=w.layout.hierarchy().sort(null).value(null),c=Qf,d=[1,1],e=!1;return a.separation=function(b){return arguments.length?(c=b,a):c},a.size=function(b){return arguments.length?(e=null==(d=b),a):e?null:d},a.nodeSize=function(b){return arguments.length?
(e=null!=(d=b),a):e?d:null},Zc(a,b)};w.layout.pack=function(){function a(f,g){var h=c.call(this,f,g),l=h[0],m=e[0],n=e[1],p=null==b?Math.sqrt:"function"==typeof b?b:function(){return b};if(l.x=l.y=0,cc(l,function(a){a.r=+p(a.value)}),cc(l,Tf),d){var q=d*(b?1:Math.max(2*l.r/m,2*l.r/n))/2;cc(l,function(a){a.r+=q});cc(l,Tf);cc(l,function(a){a.r-=q})}return Vf(l,m/2,n/2,b?1:1/Math.max(2*l.r/m,2*l.r/n)),h}var b,c=w.layout.hierarchy().sort(Dh),d=0,e=[1,1];return a.size=function(b){return arguments.length?
(e=b,a):e},a.radius=function(c){return arguments.length?(b=null==c||"function"==typeof c?c:+c,a):b},a.padding=function(b){return arguments.length?(d=+b,a):d},Zc(a,c)};w.layout.cluster=function(){function a(f,g){var h,l=b.call(this,f,g),m=l[0],n=0;cc(m,function(a){var b=a.children;b&&b.length?(a.x=Hh(b),a.y=Gh(b)):(a.x=h?n+=c(a,h):0,a.y=0,h=a)});var p=Wf(m),q=Xf(m),r=p.x-c(p,q)/2,v=q.x+c(q,p)/2;return cc(m,e?function(a){a.x=(a.x-m.x)*d[0];a.y=(m.y-a.y)*d[1]}:function(a){a.x=(a.x-r)/(v-r)*d[0];a.y=
(1-(m.y?a.y/m.y:1))*d[1]}),l}var b=w.layout.hierarchy().sort(null).value(null),c=Qf,d=[1,1],e=!1;return a.separation=function(b){return arguments.length?(c=b,a):c},a.size=function(b){return arguments.length?(e=null==(d=b),a):e?null:d},a.nodeSize=function(b){return arguments.length?(e=null!=(d=b),a):e?d:null},Zc(a,b)};w.layout.treemap=function(){function a(b,c){for(var d,e,f=-1,g=b.length;++f<g;)e=(d=b[f]).value*(0>c?0:c),d.area=isNaN(e)||0>=e?0:e}function b(c){var e=c.children;if(e&&e.length){var f,
g=n(c),h=[],l=e.slice(),m=1/0,p="slice"===q?g.dx:"dice"===q?g.dy:"slice-dice"===q?1&c.depth?g.dy:g.dx:Math.min(g.dx,g.dy);a(l,g.dx*g.dy/c.value);for(h.area=0;0<(c=l.length);){h.push(c=l[c-1]);h.area+=c.area;var v;if(!(v="squarify"!==q)){c=p;f=void 0;var A=h.area;v=0;for(var z=1/0,t=-1,u=h.length;++t<u;)(f=h[t].area)&&(z>f&&(z=f),f>v&&(v=f));v=(f=(A*=A,c*=c,A?Math.max(c*v*r/A,A/(c*z*r)):1/0))<=m}v?(l.pop(),m=f):(h.area-=h.pop().area,d(h,p,g,!1),p=Math.min(g.dx,g.dy),h.length=h.area=0,m=1/0)}h.length&&
(d(h,p,g,!0),h.length=h.area=0);e.forEach(b)}}function c(b){var e=b.children;if(e&&e.length){var f=n(b),g=e.slice(),h=[];a(g,f.dx*f.dy/b.value);for(h.area=0;b=g.pop();)h.push(b),h.area+=b.area,null!=b.z&&(d(h,b.z?f.dx:f.dy,f,!g.length),h.length=h.area=0);e.forEach(c)}}function d(a,b,c,e){var f,g=-1,l=a.length,m=c.x,n=c.y,p=b?h(a.area/b):0;if(b==c.dx){for((e||p>c.dy)&&(p=c.dy);++g<l;)f=a[g],f.x=m,f.y=n,f.dy=p,m+=f.dx=Math.min(c.x+c.dx-m,p?h(f.area/p):0);f.z=!0;f.dx+=c.x+c.dx-m;c.y+=p;c.dy-=p}else{for((e||
p>c.dx)&&(p=c.dx);++g<l;)f=a[g],f.x=m,f.y=n,f.dx=p,n+=f.dy=Math.min(c.y+c.dy-n,p?h(f.area/p):0);f.z=!1;f.dy+=c.y+c.dy-n;c.x+=p;c.dx-=p}}function e(d){d=f||g(d);var h=d[0];return h.x=0,h.y=0,h.dx=l[0],h.dy=l[1],f&&g.revalue(h),a([h],h.dx*h.dy/h.value),(f?c:b)(h),p&&(f=d),d}var f,g=w.layout.hierarchy(),h=Math.round,l=[1,1],m=null,n=Le,p=!1,q="squarify",r=.5*(1+Math.sqrt(5));return e.size=function(a){return arguments.length?(l=a,e):l},e.padding=function(a){function b(c){var d=a.call(e,c,c.depth);return null==
d?Le(c):Yf(c,"number"==typeof d?[d,d,d,d]:d)}function c(b){return Yf(b,a)}if(!arguments.length)return m;var d;return n=null==(m=a)?Le:"function"==(d=typeof a)?b:"number"===d?(a=[a,a,a,a],c):c,e},e.round=function(a){return arguments.length?(h=a?Math.round:Number,e):h!=Number},e.sticky=function(a){return arguments.length?(p=a,f=null,e):p},e.ratio=function(a){return arguments.length?(r=a,e):r},e.mode=function(a){return arguments.length?(q=a+"",e):q},Zc(e,g)};w.random={normal:function(a,b){var c=arguments.length;
return 2>c&&(b=1),1>c&&(a=0),function(){var c,d;do c=2*Math.random()-1,d=2*Math.random()-1,d=c*c+d*d;while(!d||1<d);return a+b*c*Math.sqrt(-2*Math.log(d)/d)}},logNormal:function(){var a=w.random.normal.apply(w,arguments);return function(){return Math.exp(a())}},bates:function(a){var b=w.random.irwinHall(a);return function(){return b()/a}},irwinHall:function(a){return function(){for(var b=0,c=0;a>c;c++)b+=Math.random();return b}}};w.scale={};var Jh={floor:ta,ceil:ta};w.scale.linear=function(){return $f([0,
1],[0,1],tc,!1)};var Mh={s:1,g:1,p:1,r:1,e:1};w.scale.log=function(){return ag(w.scale.linear().domain([0,1]),10,!0,[1,10])};var bg=w.format(".0e"),Nh={floor:function(a){return-Math.ceil(-a)},ceil:function(a){return-Math.floor(-a)}};w.scale.pow=function(){return cg(w.scale.linear(),1,[0,1])};w.scale.sqrt=function(){return w.scale.pow().exponent(.5)};w.scale.ordinal=function(){return dg([],{t:"range",a:[[]]})};w.scale.category10=function(){return w.scale.ordinal().range(ni)};w.scale.category20=function(){return w.scale.ordinal().range(oi)};
w.scale.category20b=function(){return w.scale.ordinal().range(pi)};w.scale.category20c=function(){return w.scale.ordinal().range(qi)};var ni=[2062260,16744206,2924588,14034728,9725885,9197131,14907330,8355711,12369186,1556175].map(hb),oi=[2062260,11454440,16744206,16759672,2924588,10018698,14034728,16750742,9725885,12955861,9197131,12885140,14907330,16234194,8355711,13092807,12369186,14408589,1556175,10410725].map(hb),pi=[3750777,5395619,7040719,10264286,6519097,9216594,11915115,13556636,9202993,
12426809,15186514,15190932,8666169,11356490,14049643,15177372,8077683,10834324,13528509,14589654].map(hb),qi=[3244733,7057110,10406625,13032431,15095053,16616764,16625259,16634018,3253076,7652470,10607003,13101504,7695281,10394312,12369372,14342891,6513507,9868950,12434877,14277081].map(hb);w.scale.quantile=function(){return eg([],[])};w.scale.quantize=function(){return fg(0,1,[0,1])};w.scale.threshold=function(){return gg([.5],[0,1])};w.scale.identity=function(){return hg([0,1])};w.svg={};w.svg.arc=
function(){function a(){var f=b.apply(this,arguments),g=c.apply(this,arguments),h=d.apply(this,arguments)+Ac,l=e.apply(this,arguments)+Ac,m=(h>l&&(m=h,h=l,l=m),l-h),n=X>m?"0":"1",p=Math.cos(h),h=Math.sin(h),q=Math.cos(l),l=Math.sin(l);return m>=ri?f?"M0,"+g+"A"+g+","+g+" 0 1,1 0,"+-g+"A"+g+","+g+" 0 1,1 0,"+g+"M0,"+f+"A"+f+","+f+" 0 1,0 0,"+-f+"A"+f+","+f+" 0 1,0 0,"+f+"Z":"M0,"+g+"A"+g+","+g+" 0 1,1 0,"+-g+"A"+g+","+g+" 0 1,1 0,"+g+"Z":f?"M"+g*p+","+g*h+"A"+g+","+g+" 0 "+n+",1 "+g*q+","+g*l+"L"+
f*q+","+f*l+"A"+f+","+f+" 0 "+n+",0 "+f*p+","+f*h+"Z":"M"+g*p+","+g*h+"A"+g+","+g+" 0 "+n+",1 "+g*q+","+g*l+"L0,0Z"}var b=Oh,c=Ph,d=ig,e=jg;return a.innerRadius=function(c){return arguments.length?(b=da(c),a):b},a.outerRadius=function(b){return arguments.length?(c=da(b),a):c},a.startAngle=function(b){return arguments.length?(d=da(b),a):d},a.endAngle=function(b){return arguments.length?(e=da(b),a):e},a.centroid=function(){var a=(b.apply(this,arguments)+c.apply(this,arguments))/2,f=(d.apply(this,arguments)+
e.apply(this,arguments))/2+Ac;return[Math.cos(f)*a,Math.sin(f)*a]},a};var Ac=-eb,ri=ob-N;w.svg.line=function(){return kg(ta)};var Pe=w.map({linear:yb,"linear-closed":function(a){return yb(a)+"Z"},step:function(a){for(var b=0,c=a.length,d=a[0],e=[d[0],",",d[1]];++b<c;)e.push("H",(d[0]+(d=a[b])[0])/2,"V",d[1]);return 1<c&&e.push("H",d[0]),e.join("")},"step-before":Qe,"step-after":Re,basis:lg,"basis-open":function(a){if(4>a.length)return yb(a);for(var b,c=[],d=-1,e=a.length,f=[0],g=[0];3>++d;)b=a[d],
f.push(b[0]),g.push(b[1]);c.push(Hb(qc,f)+","+Hb(qc,g));for(--d;++d<e;)b=a[d],f.shift(),f.push(b[0]),g.shift(),g.push(b[1]),Te(c,f,g);return c.join("")},"basis-closed":function(a){for(var b,c,d=-1,e=a.length,f=e+4,g=[],h=[];4>++d;)c=a[d%e],g.push(c[0]),h.push(c[1]);b=[Hb(qc,g),",",Hb(qc,h)];for(--d;++d<f;)c=a[d%e],g.shift(),g.push(c[0]),h.shift(),h.push(c[1]),Te(b,g,h);return b.join("")},bundle:function(a,b){var c=a.length-1;if(c)for(var d,e,f=a[0][0],g=a[0][1],h=a[c][0]-f,l=a[c][1]-g,m=-1;++m<=c;)d=
a[m],e=m/c,d[0]=b*d[0]+(1-b)*(f+e*h),d[1]=b*d[1]+(1-b)*(g+e*l);return lg(a)},cardinal:function(a,b){return 3>a.length?yb(a):a[0]+Wd(a,Se(a,b))},"cardinal-open":function(a,b){return 4>a.length?yb(a):a[1]+Wd(a.slice(1,a.length-1),Se(a,b))},"cardinal-closed":function(a,b){return 3>a.length?yb(a):a[0]+Wd((a.push(a[0]),a),Se([a[a.length-2]].concat(a,[a[1]]),b))},monotone:function(a){if(3>a.length)a=yb(a);else{var b=a[0],c,d,e,f,g=[],h;c=0;h=a.length-1;for(var l=[],m=a[1],n=l[0]=Ue(a[0],m);++c<h;)l[c]=
(n+(n=Ue(m,m=a[c+1])))/2;h=(l[c]=n,l);l=-1;for(m=a.length-1;++l<m;)c=Ue(a[l],a[l+1]),Y(c)<N?h[l]=h[l+1]=0:(d=h[l]/c,e=h[l+1]/c,f=d*d+e*e,9<f&&(f=3*c/Math.sqrt(f),h[l]=f*d,h[l+1]=f*e));for(l=-1;++l<=m;)f=(a[Math.min(m,l+1)][0]-a[Math.max(0,l-1)][0])/(6*(1+h[l]*h[l])),g.push([f||0,h[l]*f||0]);a=b+Wd(a,g)}return a}});Pe.forEach(function(a,b){b.key=a;b.closed=/-closed$/.test(a)});var mg=[0,2/3,1/3,0],ng=[0,1/3,2/3,0],qc=[0,1/6,2/3,1/6];w.svg.line.radial=function(){var a=kg(og);return a.radius=a.x,delete a.x,
a.angle=a.y,delete a.y,a};Qe.reverse=Re;Re.reverse=Qe;w.svg.area=function(){return pg(ta)};w.svg.area.radial=function(){var a=pg(og);return a.radius=a.x,delete a.x,a.innerRadius=a.x0,delete a.x0,a.outerRadius=a.x1,delete a.x1,a.angle=a.y,delete a.y,a.startAngle=a.y0,delete a.y0,a.endAngle=a.y1,delete a.y1,a};w.svg.chord=function(){function a(f,g){var h=b(this,d,f,g),l=b(this,e,f,g);return"M"+h.p0+c(h.r,h.p1,h.a1-h.a0)+(h.a0==l.a0&&h.a1==l.a1?"Q 0,0 "+h.p0:"Q 0,0 "+l.p0+c(l.r,l.p1,l.a1-l.a0)+("Q 0,0 "+
h.p0))+"Z"}function b(a,c,d,e){var l=c.call(a,d,e);c=f.call(a,l,e);d=g.call(a,l,e)+Ac;a=h.call(a,l,e)+Ac;return{r:c,a0:d,a1:a,p0:[c*Math.cos(d),c*Math.sin(d)],p1:[c*Math.cos(a),c*Math.sin(a)]}}function c(a,b,d){return"A"+a+","+a+" 0 "+ +(d>X)+",1 "+b}var d=oe,e=pe,f=Qh,g=ig,h=jg;return a.radius=function(b){return arguments.length?(f=da(b),a):f},a.source=function(b){return arguments.length?(d=da(b),a):d},a.target=function(b){return arguments.length?(e=da(b),a):e},a.startAngle=function(b){return arguments.length?
(g=da(b),a):g},a.endAngle=function(b){return arguments.length?(h=da(b),a):h},a};w.svg.diagonal=function(){function a(e,f){var g=b.call(this,e,f),h=c.call(this,e,f),l=(g.y+h.y)/2,g=[g,{x:g.x,y:l},{x:h.x,y:l},h];return g=g.map(d),"M"+g[0]+"C"+g[1]+" "+g[2]+" "+g[3]}var b=oe,c=pe,d=qg;return a.source=function(c){return arguments.length?(b=da(c),a):b},a.target=function(b){return arguments.length?(c=da(b),a):c},a.projection=function(b){return arguments.length?(d=b,a):d},a};w.svg.diagonal.radial=function(){var a=
w.svg.diagonal(),b=qg,c=a.projection;return a.projection=function(a){return arguments.length?c(Rh(b=a)):b},a};w.svg.symbol=function(){function a(d,e){return(Jg.get(b.call(this,d,e))||rg)(c.call(this,d,e))}var b=Th,c=Sh;return a.type=function(c){return arguments.length?(b=da(c),a):b},a.size=function(b){return arguments.length?(c=da(b),a):c},a};var Jg=w.map({circle:rg,cross:function(a){a=Math.sqrt(a/5)/2;return"M"+-3*a+","+-a+"H"+-a+"V"+-3*a+"H"+a+"V"+-a+"H"+3*a+"V"+a+"H"+a+"V"+3*a+"H"+-a+"V"+a+"H"+
-3*a+"Z"},diamond:function(a){a=Math.sqrt(a/(2*Kg));var b=a*Kg;return"M0,"+-a+"L"+b+",0 0,"+a+" "+-b+",0Z"},square:function(a){a=Math.sqrt(a)/2;return"M"+-a+","+-a+"L"+a+","+-a+" "+a+","+a+" "+-a+","+a+"Z"},"triangle-down":function(a){a=Math.sqrt(a/ne);var b=a*ne/2;return"M0,"+b+"L"+a+","+-b+" "+-a+","+-b+"Z"},"triangle-up":function(a){a=Math.sqrt(a/ne);var b=a*ne/2;return"M0,"+-b+"L"+a+","+b+" "+-a+","+b+"Z"}});w.svg.symbolTypes=Jg.keys();var Cc,$d,ne=Math.sqrt(3),Kg=Math.tan(30*V),Ha=[],yg=0;Ha.call=
ra.call;Ha.empty=ra.empty;Ha.node=ra.node;Ha.size=ra.size;w.transition=function(a){return arguments.length?Cc?a.transition():a:xg.transition()};w.transition.prototype=Ha;Ha.select=function(a){var b,c,d,e=this.id,f=[];a=F(a);for(var g=-1,h=this.length;++g<h;){f.push(b=[]);for(var l=this[g],m=-1,n=l.length;++m<n;)(d=l[m])&&(c=a.call(d,d.__data__,m,g))?("__data__"in d&&(c.__data__=d.__data__),Xd(c,m,e,d.__transition__[e]),b.push(c)):b.push(null)}return id(f,e)};Ha.selectAll=function(a){var b,c,d,e,f=
this.id,g=[];a=A(a);for(var h=-1,l=this.length;++h<l;)for(var m=this[h],n=-1,p=m.length;++n<p;)if(b=m[n]){e=b.__transition__[f];c=a.call(b,b.__data__,n,h);g.push(b=[]);for(var q=-1,r=c.length;++q<r;)(d=c[q])&&Xd(d,q,f,e),b.push(d)}return id(g,f)};Ha.filter=function(a){var b,c,d,e=[];"function"!=typeof a&&(a=na(a));for(var f=0,g=this.length;g>f;f++){e.push(b=[]);c=this[f];for(var h=0,l=c.length;l>h;h++)(d=c[h])&&a.call(d,d.__data__,h,f)&&b.push(d)}return id(e,this.id)};Ha.tween=function(a,b){var c=
this.id;return 2>arguments.length?this.node().__transition__[c].tween.get(a):ia(this,null==b?function(b){b.__transition__[c].tween.remove(a)}:function(d){d.__transition__[c].tween.set(a,b)})};Ha.attr=function(a,b){function c(){this.removeAttribute(h)}function d(){this.removeAttributeNS(h.space,h.local)}function e(a){return null==a?c:(a+="",function(){var b,c=this.getAttribute(h);return c!==a&&(b=g(c,a),function(a){this.setAttribute(h,b(a))})})}function f(a){return null==a?d:(a+="",function(){var b,
c=this.getAttributeNS(h.space,h.local);return c!==a&&(b=g(c,a),function(a){this.setAttributeNS(h.space,h.local,b(a))})})}if(2>arguments.length){for(b in a)this.attr(b,a[b]);return this}var g="transform"==a?of:tc,h=w.ns.qualify(a);return Ve(this,"attr."+a,b,h.local?f:e)};Ha.attrTween=function(a,b){function c(a,d){var f=b.call(this,a,d,this.getAttribute(e));return f&&function(a){this.setAttribute(e,f(a))}}function d(a,c){var f=b.call(this,a,c,this.getAttributeNS(e.space,e.local));return f&&function(a){this.setAttributeNS(e.space,
e.local,f(a))}}var e=w.ns.qualify(a);return this.tween("attr."+a,e.local?d:c)};Ha.style=function(a,b,c){function d(){this.style.removeProperty(a)}var e=arguments.length;if(3>e){if("string"!=typeof a){2>e&&(b="");for(c in a)this.style(c,a[c],b);return this}c=""}return Ve(this,"style."+a,b,function(b){return null==b?d:(b+="",function(){var d,e=Ua.getComputedStyle(this,null).getPropertyValue(a);return e!==b&&(d=tc(e,b),function(b){this.style.setProperty(a,d(b),c)})})})};Ha.styleTween=function(a,b,c){return 3>
arguments.length&&(c=""),this.tween("style."+a,function(d,e){var f=b.call(this,d,e,Ua.getComputedStyle(this,null).getPropertyValue(a));return f&&function(b){this.style.setProperty(a,f(b),c)}})};Ha.text=function(a){return Ve(this,"text",a,Uh)};Ha.remove=function(){return this.each("end.transition",function(){var a;2>this.__transition__.count&&(a=this.parentNode)&&a.removeChild(this)})};Ha.ease=function(a){var b=this.id;return 1>arguments.length?this.node().__transition__[b].ease:("function"!=typeof a&&
(a=w.ease.apply(w,arguments)),ia(this,function(c){c.__transition__[b].ease=a}))};Ha.delay=function(a){var b=this.id;return ia(this,"function"==typeof a?function(c,d,e){c.__transition__[b].delay=+a.call(c,c.__data__,d,e)}:(a=+a,function(c){c.__transition__[b].delay=a}))};Ha.duration=function(a){var b=this.id;return ia(this,"function"==typeof a?function(c,d,e){c.__transition__[b].duration=Math.max(1,a.call(c,c.__data__,d,e))}:(a=Math.max(1,a),function(c){c.__transition__[b].duration=a}))};Ha.each=function(a,
b){var c=this.id;if(2>arguments.length){var d=$d,e=Cc;Cc=c;ia(this,function(b,d,e){$d=b.__transition__[c];a.call(b,b.__data__,d,e)});$d=d;Cc=e}else ia(this,function(d){d=d.__transition__[c];(d.event||(d.event=w.dispatch("start","end"))).on(a,b)});return this};Ha.transition=function(){for(var a,b,c,d,e=this.id,f=++yg,g=[],h=0,l=this.length;l>h;h++){g.push(a=[]);b=this[h];for(var m=0,n=b.length;n>m;m++)(c=b[m])&&(d=Object.create(c.__transition__[e]),d.delay+=d.duration,Xd(c,m,f,d)),a.push(c)}return id(g,
f)};w.svg.axis=function(){function a(m){m.each(function(){var a,m=w.select(this),n=this.__chart__||c,p=this.__chart__=c.copy(),q=null==l?p.ticks?p.ticks.apply(p,h):p.domain():l,r=null==b?p.tickFormat?p.tickFormat.apply(p,h):ta:b,v=m.selectAll(".tick").data(q,p),q=v.enter().insert("g",".domain").attr("class","tick").style("opacity",N),A=w.transition(v.exit()).style("opacity",N).remove(),z=w.transition(v).style("opacity",1),t=Td(p),m=m.selectAll(".domain").data([0]),m=(m.enter().append("path").attr("class",
"domain"),w.transition(m));q.append("line");q.append("text");var u=q.select("line"),y=z.select("line"),r=v.select("text").text(r),v=q.select("text"),x=z.select("text");switch(d){case "bottom":a=sg;u.attr("y2",e);v.attr("y",Math.max(e,0)+g);y.attr("x2",0).attr("y2",e);x.attr("x",0).attr("y",Math.max(e,0)+g);r.attr("dy",".71em").style("text-anchor","middle");m.attr("d","M"+t[0]+","+f+"V0H"+t[1]+"V"+f);break;case "top":a=sg;u.attr("y2",-e);v.attr("y",-(Math.max(e,0)+g));y.attr("x2",0).attr("y2",-e);
x.attr("x",0).attr("y",-(Math.max(e,0)+g));r.attr("dy","0em").style("text-anchor","middle");m.attr("d","M"+t[0]+","+-f+"V0H"+t[1]+"V"+-f);break;case "left":a=tg;u.attr("x2",-e);v.attr("x",-(Math.max(e,0)+g));y.attr("x2",-e).attr("y2",0);x.attr("x",-(Math.max(e,0)+g)).attr("y",0);r.attr("dy",".32em").style("text-anchor","end");m.attr("d","M"+-f+","+t[0]+"H0V"+t[1]+"H"+-f);break;case "right":a=tg,u.attr("x2",e),v.attr("x",Math.max(e,0)+g),y.attr("x2",e).attr("y2",0),x.attr("x",Math.max(e,0)+g).attr("y",
0),r.attr("dy",".32em").style("text-anchor","start"),m.attr("d","M"+f+","+t[0]+"H0V"+t[1]+"H"+f)}if(p.rangeBand)var J=p,H=J.rangeBand()/2,n=p=function(a){return J(a)+H};else n.rangeBand?n=p:A.call(a,p);q.call(a,n);z.call(a,p)})}var b,c=w.scale.linear(),d=Lg,e=6,f=6,g=3,h=[10],l=null;return a.scale=function(b){return arguments.length?(c=b,a):c},a.orient=function(b){return arguments.length?(d=b in si?b+"":Lg,a):d},a.ticks=function(){return arguments.length?(h=arguments,a):h},a.tickValues=function(b){return arguments.length?
(l=b,a):l},a.tickFormat=function(c){return arguments.length?(b=c,a):b},a.tickSize=function(b){var c=arguments.length;return c?(e=+b,f=+arguments[c-1],a):e},a.innerTickSize=function(b){return arguments.length?(e=+b,a):e},a.outerTickSize=function(b){return arguments.length?(f=+b,a):f},a.tickPadding=function(b){return arguments.length?(g=+b,a):g},a.tickSubdivide=function(){return arguments.length&&a},a};var Lg="bottom",si={top:1,right:1,bottom:1,left:1};w.svg.brush=function(){function a(f){f.each(function(){var f=
w.select(this).style("pointer-events","all").style("-webkit-tap-highlight-color","rgba(0,0,0,0)").on("mousedown.brush",e).on("touchstart.brush",e),g=f.selectAll(".background").data([0]);g.enter().append("rect").attr("class","background").style("visibility","hidden").style("cursor","crosshair");f.selectAll(".extent").data([0]).enter().append("rect").attr("class","extent").style("cursor","move");var h=f.selectAll(".resize").data(v,ta);h.exit().remove();h.enter().append("g").attr("class",function(a){return"resize "+
a}).style("cursor",function(a){return ti[a]}).append("rect").attr("x",function(a){return/[ew]$/.test(a)?-3:null}).attr("y",function(a){return/^[ns]/.test(a)?-3:null}).attr("width",6).attr("height",6).style("visibility","hidden");h.style("display",a.empty()?"none":null);var n,f=w.transition(f),g=w.transition(g);l&&(n=Td(l),g.attr("x",n[0]).attr("width",n[1]-n[0]),c(f));m&&(n=Td(m),g.attr("y",n[0]).attr("height",n[1]-n[0]),d(f));b(f)})}function b(a){a.selectAll(".resize").attr("transform",function(a){return"translate("+
n[+/e$/.test(a)]+","+p[+/^s/.test(a)]+")"})}function c(a){a.select(".extent").attr("x",n[0]);a.selectAll(".extent,.n>rect,.s>rect").attr("width",n[1]-n[0])}function d(a){a.select(".extent").attr("y",p[0]);a.selectAll(".extent,.e>rect,.w>rect").attr("height",p[1]-p[0])}function e(){function v(){var a=w.mouse(x),e=!1;y&&(a[0]+=y[0],a[1]+=y[1]);F||(w.event.altKey?(t||(t=[(n[0]+n[1])/2,(p[0]+p[1])/2]),D[0]=n[+(a[0]<t[0])],D[1]=p[+(a[1]<t[1])]):t=null);Z&&A(a,l,0)&&(c(B),e=!0);ca&&A(a,m,1)&&(d(B),e=!0);
e&&(b(B),H({type:"brush",mode:F?"move":"resize"}))}function A(a,b,c){var d,e,h=Td(b);b=h[0];var h=h[1],l=D[c],m=c?p:n,v=m[1]-m[0];return F&&(b-=l,h-=v+l),d=(c?r:q)?Math.max(b,Math.min(h,a[c])):a[c],F?e=(d+=l)+v:(t&&(l=Math.max(b,Math.min(h,2*t[c]-d))),d>l?(e=d,d=l):e=l),m[0]!=d||m[1]!=e?(c?g=null:f=null,m[0]=d,m[1]=e,!0):void 0}function z(){v();B.style("pointer-events","all").selectAll(".resize").style("display",a.empty()?"none":null);w.select("body").style("cursor",null);E.on("mousemove.brush",null).on("mouseup.brush",
null).on("touchmove.brush",null).on("touchend.brush",null).on("keydown.brush",null).on("keyup.brush",null);na();H({type:"brushend"})}var t,y,x=this,J=w.select(w.event.target),H=h.of(x,arguments),B=w.select(x),C=J.datum(),Z=!/^(n|s)$/.test(C)&&l,ca=!/^(e|w)$/.test(C)&&m,F=J.classed("extent"),na=L(),D=w.mouse(x),E=w.select(Ua).on("keydown.brush",function(){32==w.event.keyCode&&(F||(t=null,D[0]-=n[1],D[1]-=p[1],F=2),u())}).on("keyup.brush",function(){32==w.event.keyCode&&2==F&&(D[0]+=n[1],D[1]+=p[1],
F=0,u())});if(w.event.changedTouches?E.on("touchmove.brush",v).on("touchend.brush",z):E.on("mousemove.brush",v).on("mouseup.brush",z),B.interrupt().selectAll("*").interrupt(),F)D[0]=n[0]-D[0],D[1]=p[0]-D[1];else if(C){var sa=+/w$/.test(C),C=+/^n/.test(C);y=[n[1-sa]-D[0],p[1-C]-D[1]];D[0]=n[sa];D[1]=p[C]}else w.event.altKey&&(t=D.slice());B.style("pointer-events","none").selectAll(".resize").style("display",null);w.select("body").style("cursor",J.style("cursor"));H({type:"brushstart"});v()}var f,g,
h=B(a,"brushstart","brush","brushend"),l=null,m=null,n=[0,0],p=[0,0],q=!0,r=!0,v=bf[0];return a.event=function(a){a.each(function(){var a=h.of(this,arguments),b={x:n,y:p,i:f,j:g},c=this.__chart__||b;this.__chart__=b;Cc?w.select(this).transition().each("start.brush",function(){f=c.i;g=c.j;n=c.x;p=c.y;a({type:"brushstart"})}).tween("brush:brush",function(){var c=nd(n,b.x),d=nd(p,b.y);return f=g=null,function(e){n=b.x=c(e);p=b.y=d(e);a({type:"brush",mode:"resize"})}}).each("end.brush",function(){f=b.i;
g=b.j;a({type:"brush",mode:"resize"});a({type:"brushend"})}):(a({type:"brushstart"}),a({type:"brush",mode:"resize"}),a({type:"brushend"}))})},a.x=function(b){return arguments.length?(l=b,v=bf[!l<<1|!m],a):l},a.y=function(b){return arguments.length?(m=b,v=bf[!l<<1|!m],a):m},a.clamp=function(b){return arguments.length?(l&&m?(q=!!b[0],r=!!b[1]):l?q=!!b:m&&(r=!!b),a):l&&m?[q,r]:l?q:m?r:null},a.extent=function(b){var c,d,e,h,q;return arguments.length?(l&&(c=b[0],d=b[1],m&&(c=c[0],d=d[0]),f=[c,d],l.invert&&
(c=l(c),d=l(d)),c>d&&(q=c,c=d,d=q),(c!=n[0]||d!=n[1])&&(n=[c,d])),m&&(e=b[0],h=b[1],l&&(e=e[1],h=h[1]),g=[e,h],m.invert&&(e=m(e),h=m(h)),e>h&&(q=e,e=h,h=q),(e!=p[0]||h!=p[1])&&(p=[e,h])),a):(l&&(f?(c=f[0],d=f[1]):(c=n[0],d=n[1],l.invert&&(c=l.invert(c),d=l.invert(d)),c>d&&(q=c,c=d,d=q))),m&&(g?(e=g[0],h=g[1]):(e=p[0],h=p[1],m.invert&&(e=m.invert(e),h=m.invert(h)),e>h&&(q=e,e=h,h=q))),l&&m?[[c,e],[d,h]]:l?[c,d]:m&&[e,h])},a.clear=function(){return a.empty()||(n=[0,0],p=[0,0],f=g=null),a},a.empty=function(){return!!l&&
n[0]==n[1]||!!m&&p[0]==p[1]},w.rebind(a,h,"on")};var ti={n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},bf=["n e s w nw ne se sw".split(" "),["e","w"],["n","s"],[]],cf=P.format=Ag.timeFormat,Mg=cf.utc,Ng=Mg("%Y-%m-%dT%H:%M:%S.%LZ");cf.iso=Date.prototype.toISOString&&+new Date("2000-01-01T00:00:00.000Z")?We:Ng;We.parse=function(a){a=new Date(a);return isNaN(a)?null:a};We.toString=Ng.toString;P.second=ka(function(a){return new Va(1E3*
Math.floor(a/1E3))},function(a,b){a.setTime(a.getTime()+1E3*Math.floor(b))},function(a){return a.getSeconds()});P.seconds=P.second.range;P.seconds.utc=P.second.utc.range;P.minute=ka(function(a){return new Va(6E4*Math.floor(a/6E4))},function(a,b){a.setTime(a.getTime()+6E4*Math.floor(b))},function(a){return a.getMinutes()});P.minutes=P.minute.range;P.minutes.utc=P.minute.utc.range;P.hour=ka(function(a){var b=a.getTimezoneOffset()/60;return new Va(36E5*(Math.floor(a/36E5-b)+b))},function(a,b){a.setTime(a.getTime()+
36E5*Math.floor(b))},function(a){return a.getHours()});P.hours=P.hour.range;P.hours.utc=P.hour.utc.range;P.month=ka(function(a){return a=P.day(a),a.setDate(1),a},function(a,b){a.setMonth(a.getMonth()+b)},function(a){return a.getMonth()});P.months=P.month.range;P.months.utc=P.month.utc.range;var Yd=[1E3,5E3,15E3,3E4,6E4,3E5,9E5,18E5,36E5,108E5,216E5,432E5,864E5,1728E5,6048E5,2592E6,7776E6,31536E6],df=[[P.second,1],[P.second,5],[P.second,15],[P.second,30],[P.minute,1],[P.minute,5],[P.minute,15],[P.minute,
30],[P.hour,1],[P.hour,3],[P.hour,6],[P.hour,12],[P.day,1],[P.day,2],[P.week,1],[P.month,1],[P.month,3],[P.year,1]],ui=cf.multi([[".%L",function(a){return a.getMilliseconds()}],[":%S",function(a){return a.getSeconds()}],["%I:%M",function(a){return a.getMinutes()}],["%I %p",function(a){return a.getHours()}],["%a %d",function(a){return a.getDay()&&1!=a.getDate()}],["%b %d",function(a){return 1!=a.getDate()}],["%B",function(a){return a.getMonth()}],["%Y",fb]]),Vh={range:function(a,b,c){return w.range(+a,
+b,c).map(Bc)},floor:ta,ceil:ta};df.year=P.year;P.scale=function(){return Xe(w.scale.linear(),df,ui)};var Og=df.map(function(a){return[a[0].utc,a[1]]}),vi=Mg.multi([[".%L",function(a){return a.getUTCMilliseconds()}],[":%S",function(a){return a.getUTCSeconds()}],["%I:%M",function(a){return a.getUTCMinutes()}],["%I %p",function(a){return a.getUTCHours()}],["%a %d",function(a){return a.getUTCDay()&&1!=a.getUTCDate()}],["%b %d",function(a){return 1!=a.getUTCDate()}],["%B",function(a){return a.getUTCMonth()}],
["%Y",fb]]);Og.year=P.year.utc;P.scale.utc=function(){return Xe(w.scale.linear(),Og,vi)};w.text=Za(function(a){return a.responseText});w.json=function(a,b){return ib(a,"application/json",Wh,b)};w.html=function(a,b){return ib(a,"text/html",Xh,b)};w.xml=Za(function(a){return a.responseXML});"function"==typeof define&&define.amd?define(w):"object"==typeof module&&module.exports?module.exports=w:this.d3=w}();function str_repeat(a,c){for(var b=[];0<c;b[--c]=a);return b.join("")}
function sprintf(){for(var a=0,c,b=arguments[a++],d=[],e,f,g;b;){if(e=/^[^\x25]+/.exec(b))d.push(e[0]);else if(e=/^\x25{2}/.exec(b))d.push("%");else if(e=/^\x25(?:(\d+)\$)?(\+)?(0|'[^$])?(-)?(\d+)?(?:\.(\d+))?([b-fosuxX])/.exec(b)){if(null==(c=arguments[e[1]||a++])||void 0==c)throw"Too few arguments.";if(/[^s]/.test(e[7])&&"number"!=typeof c)throw"Expecting number but found "+typeof c;switch(e[7]){case "b":c=c.toString(2);break;case "c":c=String.fromCharCode(c);break;case "d":c=parseInt(c);break;
case "e":c=e[6]?c.toExponential(e[6]):c.toExponential();break;case "f":c=e[6]?parseFloat(c).toFixed(e[6]):parseFloat(c);break;case "o":c=c.toString(8);break;case "s":c=(c=String(c))&&e[6]?c.substring(0,e[6]):c;break;case "u":c=Math.abs(c);break;case "x":c=c.toString(16);break;case "X":c=c.toString(16).toUpperCase()}c=/[def]/.test(e[7])&&e[2]&&0<=c?"+"+c:c;f=e[3]?"0"==e[3]?"0":e[3].charAt(1):" ";g=e[5]-String(c).length-0;f=e[5]?str_repeat(f,g):"";d.push(""+(e[4]?c+f:f+c))}else throw"Huh ?!";b=b.substring(e[0].length)}return d.join("")}
(function(a,c){var b,d,e,f,g,h,l,m,p,q,t,y,u,C,B,I,F,A,r,v,z,H,O,T;b=function(a){return new b.prototype.init(a)};"undefined"!==typeof require&&"undefined"!==typeof exports&&"undefined"!==typeof module?module.exports=b:a.Globalize=b;b.cultures={};b.prototype={constructor:b,init:function(a){this.cultures=b.cultures;this.cultureSelector=a;return this}};b.prototype.init.prototype=b.prototype;b.cultures["default"]={name:"en",englishName:"English",nativeName:"English",isRTL:!1,language:"en",numberFormat:{pattern:["-n"],
decimals:2,",":",",".":".",groupSizes:[3],"+":"+","-":"-",NaN:"NaN",negativeInfinity:"-Infinity",positiveInfinity:"Infinity",percent:{pattern:["-n %","n %"],decimals:2,groupSizes:[3],",":",",".":".",symbol:"%"},currency:{pattern:["($n)","$n"],decimals:2,groupSizes:[3],",":",",".":".",symbol:"$"}},calendars:{standard:{name:"Gregorian_USEnglish","/":"/",":":":",firstDay:0,days:{names:"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),namesAbbr:"Sun Mon Tue Wed Thu Fri Sat".split(" "),
namesShort:"Su Mo Tu We Th Fr Sa".split(" ")},months:{names:"January February March April May June July August September October November December ".split(" "),namesAbbr:"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec ".split(" ")},AM:["AM","am","AM"],PM:["PM","pm","PM"],eras:[{name:"A.D.",start:null,offset:0}],twoDigitYearMax:2029,patterns:{d:"M/d/yyyy",D:"dddd, MMMM dd, yyyy",t:"h:mm tt",T:"h:mm:ss tt",f:"dddd, MMMM dd, yyyy h:mm tt",F:"dddd, MMMM dd, yyyy h:mm:ss tt",M:"MMMM dd",Y:"yyyy MMMM",
S:"yyyy'-'MM'-'dd'T'HH':'mm':'ss"}}},messages:{}};b.cultures["default"].calendar=b.cultures["default"].calendars.standard;b.cultures.en=b.cultures["default"];b.cultureSelector="en";d=/^0x[a-f0-9]+$/i;e=/^[+\-]?infinity$/i;f=/^[+\-]?\d*\.?\d*(e[+\-]?\d+)?$/;g=/^\s+|\s+$/g;h=function(a,b){if(a.indexOf)return a.indexOf(b);for(var c=0,d=a.length;c<d;c++)if(a[c]===b)return c;return-1};l=function(a,b){return a.substr(a.length-b.length)===b};m=function(){var a,b,d,e,f,g=arguments[0]||{},h=1,l=arguments.length,
r=!1;"boolean"===typeof g&&(r=g,g=arguments[1]||{},h=2);for("object"===typeof g||q(g)||(g={});h<l;h++)if(null!=(a=arguments[h]))for(b in a)d=g[b],e=a[b],g!==e&&(r&&e&&(t(e)||(f=p(e)))?(f?(f=!1,d=d&&p(d)?d:[]):d=d&&t(d)?d:{},g[b]=m(r,d,e)):e!==c&&(g[b]=e));return g};p=Array.isArray||function(a){return"[object Array]"===Object.prototype.toString.call(a)};q=function(a){return"[object Function]"===Object.prototype.toString.call(a)};t=function(a){return"[object Object]"===Object.prototype.toString.call(a)};
y=function(a,b){return 0===a.indexOf(b)};u=function(a){return(a+"").replace(g,"")};C=function(a){return isNaN(a)?NaN:Math[0>a?"ceil":"floor"](a)};B=function(a,b,c){var d;for(d=a.length;d<b;d+=1)a=c?"0"+a:a+"0";return a};I=function(a,b){for(var c=0,d=!1,e=0,f=a.length;e<f;e++){var g=a.charAt(e);switch(g){case "'":d?b.push("'"):c++;d=!1;break;case "\\":d&&b.push("\\");d=!d;break;default:b.push(g),d=!1}}return c};F=function(a,b){b=b||"F";var c;c=a.patterns;var d=b.length;if(1===d){c=c[b];if(!c)throw"Invalid date format string '"+
b+"'.";b=c}else 2===d&&"%"===b.charAt(0)&&(b=b.charAt(1));return b};A=function(a,b,c){function d(a,b){var c;c=a+"";return 1<b&&c.length<b?(c=q[b-2]+c,c.substr(c.length-b,b)):c}function e(){if(r||t)return r;r=u.test(b);t=!0;return r}function f(a,b){if(C)return C[b];switch(b){case 0:return a.getFullYear();case 1:return a.getMonth();case 2:return a.getDate();default:throw"Invalid part value "+b;}}var g=c.calendar,h=g.convert;if(!b||!b.length||"i"===b){if(c&&c.name.length)if(h)c=A(a,g.patterns.F,c);else{c=
new Date(a.getTime());var l=z(a,g.eras);c.setFullYear(H(a,g,l));c=c.toLocaleString()}else c=a.toString();return c}var l=g.eras,m="s"===b;b=F(g,b);c=[];var p,q=["0","00","000"],r,t,u=/([^d]|^)(d|dd)([^d]|$)/g,y=0,B=v(),C;for(!m&&h&&(C=h.fromGregorian(a));;){p=B.lastIndex;h=B.exec(b);p=b.slice(p,h?h.index:b.length);y+=I(p,c);if(!h)break;if(y%2)c.push(h[0]);else switch(p=h[0],h=p.length,p){case "ddd":case "dddd":c.push((3===h?g.days.namesAbbr:g.days.names)[a.getDay()]);break;case "d":case "dd":r=!0;
c.push(d(f(a,2),h));break;case "MMM":case "MMMM":p=f(a,1);c.push(g.monthsGenitive&&e()?g.monthsGenitive[3===h?"namesAbbr":"names"][p]:g.months[3===h?"namesAbbr":"names"][p]);break;case "M":case "MM":c.push(d(f(a,1)+1,h));break;case "y":case "yy":case "yyyy":p=C?C[0]:H(a,g,z(a,l),m);4>h&&(p%=100);c.push(d(p,h));break;case "h":case "hh":p=a.getHours()%12;0===p&&(p=12);c.push(d(p,h));break;case "H":case "HH":c.push(d(a.getHours(),h));break;case "m":case "mm":c.push(d(a.getMinutes(),h));break;case "s":case "ss":c.push(d(a.getSeconds(),
h));break;case "t":case "tt":p=12>a.getHours()?g.AM?g.AM[0]:" ":g.PM?g.PM[0]:" ";c.push(1===h?p.charAt(0):p);break;case "f":case "ff":case "fff":c.push(d(a.getMilliseconds(),3).substr(0,h));break;case "z":case "zz":p=a.getTimezoneOffset()/60;c.push((0>=p?"+":"-")+d(Math.floor(Math.abs(p)),h));break;case "zzz":p=a.getTimezoneOffset()/60;c.push((0>=p?"+":"-")+d(Math.floor(Math.abs(p)),2)+":"+d(Math.abs(a.getTimezoneOffset()%60),2));break;case "g":case "gg":g.eras&&c.push(g.eras[z(a,l)].name);break;
case "/":c.push(g["/"]);break;default:throw"Invalid date format pattern '"+p+"'.";}}return c.join("")};(function(){var a;a=function(a,b,c){var d=c.groupSizes,e=d[0],f=1,g=Math.pow(10,b),g=Math.round(a*g)/g;isFinite(g)||(g=a);a=g+"";var g="",g=a.split(/e/i),h=1<g.length?parseInt(g[1],10):0;a=g[0];g=a.split(".");a=g[0];g=1<g.length?g[1]:"";0<h?(g=B(g,h,!1),a+=g.slice(0,h),g=g.substr(h)):0>h&&(h=-h,a=B(a,h+1,!0),g=a.slice(-h,a.length)+g,a=a.slice(0,-h));g=0<b?c["."]+(g.length>b?g.slice(0,b):B(g,b)):
"";b=a.length-1;c=c[","];for(h="";0<=b;){if(0===e||e>b)return a.slice(0,b+1)+(h.length?c+h+g:g);h=a.slice(b-e+1,b+1)+(h.length?c+h:"");b-=e;f<d.length&&(e=d[f],f++)}return a.slice(0,b+1)+c+h+g};r=function(b,c,d){if(!isFinite(b))return Infinity===b?d.numberFormat.positiveInfinity:-Infinity===b?d.numberFormat.negativeInfinity:d.numberFormat.NaN;if(!c||"i"===c)return d.name.length?b.toLocaleString():b.toString();c=c||"D";d=d.numberFormat;var e=Math.abs(b),f=-1;1<c.length&&(f=parseInt(c.slice(1),10));
var g=c.charAt(0).toUpperCase(),h;switch(g){case "D":c="n";e=C(e);-1!==f&&(e=B(""+e,f,!0));0>b&&(e="-"+e);break;case "N":h=d;case "C":h=h||d.currency;case "P":h=h||d.percent;c=0>b?h.pattern[0]:h.pattern[1]||"n";-1===f&&(f=h.decimals);e=a(e*("P"===g?100:1),f,h);break;default:throw"Bad number format specifier: "+g;}b=/n|\$|-|%/g;for(h="";;){f=b.lastIndex;g=b.exec(c);h+=c.slice(f,g?g.index:c.length);if(!g)break;switch(g[0]){case "n":h+=e;break;case "$":h+=d.currency.symbol;break;case "-":/[1-9]/.test(e)&&
(h+=d["-"]);break;case "%":h+=d.percent.symbol}}return h}})();v=function(){return/\/|dddd|ddd|dd|d|MMMM|MMM|MM|M|yyyy|yy|y|hh|h|HH|H|mm|m|ss|s|tt|t|fff|ff|f|zzz|zz|z|gg|g/g};z=function(a,b){if(!b)return 0;for(var c,d=a.getTime(),e=0,f=b.length;e<f;e++)if(c=b[e].start,null===c||d>=c)return e;return 0};H=function(a,b,c,d){a=a.getFullYear();!d&&b.eras&&(a-=b.eras[c].offset);return a};(function(){var a,b,c,d,e,f,g;a=function(a,b){if(100>b){var c=new Date,d=z(c),c=H(c,a,d),d=a.twoDigitYearMax,d="string"===
typeof d?(new Date).getFullYear()%100+parseInt(d,10):d;b+=c-c%100;b>d&&(b-=100)}return b};b=function(a,b,c){var d=a.days,e=a._upperDays;e||(a._upperDays=e=[g(d.names),g(d.namesAbbr),g(d.namesShort)]);b=f(b);c?(a=h(e[1],b),-1===a&&(a=h(e[2],b))):a=h(e[0],b);return a};c=function(a,b,c){var d=a.months,e=a.monthsGenitive||a.months,l=a._upperMonths,m=a._upperMonthsGen;l||(a._upperMonths=l=[g(d.names),g(d.namesAbbr)],a._upperMonthsGen=m=[g(e.names),g(e.namesAbbr)]);b=f(b);a=h(c?l[1]:l[0],b);0>a&&(a=h(c?
m[1]:m[0],b));return a};d=function(a,b){var c=a._parseRegExp;if(c){var d=c[b];if(d)return d}else a._parseRegExp=c={};for(var d=F(a,b).replace(/([\^\$\.\*\+\?\|\[\]\(\)\{\}])/g,"\\\\$1"),e=["^"],f=[],g=0,h=0,l=v(),m;null!==(m=l.exec(d));){var p=d.slice(g,m.index),g=l.lastIndex,h=h+I(p,e);if(h%2)e.push(m[0]);else{var p=m[0],q=p.length;switch(p){case "dddd":case "ddd":case "MMMM":case "MMM":case "gg":case "g":p="(\\D+)";break;case "tt":case "t":p="(\\D*)";break;case "yyyy":case "fff":case "ff":case "f":p=
"(\\d{"+q+"})";break;case "dd":case "d":case "MM":case "M":case "yy":case "y":case "HH":case "H":case "hh":case "h":case "mm":case "m":case "ss":case "s":p="(\\d\\d?)";break;case "zzz":p="([+-]?\\d\\d?:\\d{2})";break;case "zz":case "z":p="([+-]?\\d\\d?)";break;case "/":p="(\\/)";break;default:throw"Invalid date format pattern '"+p+"'.";}p&&e.push(p);f.push(m[0])}}I(d.slice(g),e);e.push("$");d={regExp:e.join("").replace(/\s+/g,"\\s+"),groups:f};return c[b]=d};e=function(a,b,c){return a<b||a>c};f=function(a){return a.split("\u00a0").join(" ").toUpperCase()};
g=function(a){for(var b=[],c=0,d=a.length;c<d;c++)b[c]=f(a[c]);return b};O=function(f,g,h){f=u(f);h=h.calendar;g=d(h,g);var l=(new RegExp(g.regExp)).exec(f);if(null===l)return null;var m=g.groups,p=g=f=null,q=null,r=null,v=0,A,t=0,z=0,H=0;A=null;for(var B=!1,C=0,n=m.length;C<n;C++){var F=l[C+1];if(F){var O=m[C],I=O.length,T=parseInt(F,10);switch(O){case "dd":case "d":q=T;if(e(q,1,31))return null;break;case "MMM":case "MMMM":p=c(h,F,3===I);if(e(p,0,11))return null;break;case "M":case "MM":p=T-1;if(e(p,
0,11))return null;break;case "y":case "yy":case "yyyy":g=4>I?a(h,T):T;if(e(g,0,9999))return null;break;case "h":case "hh":v=T;12===v&&(v=0);if(e(v,0,11))return null;break;case "H":case "HH":v=T;if(e(v,0,23))return null;break;case "m":case "mm":t=T;if(e(t,0,59))return null;break;case "s":case "ss":z=T;if(e(z,0,59))return null;break;case "tt":case "t":B=h.PM&&(F===h.PM[0]||F===h.PM[1]||F===h.PM[2]);if(!B&&(!h.AM||F!==h.AM[0]&&F!==h.AM[1]&&F!==h.AM[2]))return null;break;case "f":case "ff":case "fff":H=
T*Math.pow(10,3-I);if(e(H,0,999))return null;break;case "ddd":case "dddd":r=b(h,F,3===I);if(e(r,0,6))return null;break;case "zzz":O=F.split(/:/);if(2!==O.length)return null;A=parseInt(O[0],10);if(e(A,-12,13))return null;O=parseInt(O[1],10);if(e(O,0,59))return null;A=60*A+(y(F,"-")?-O:O);break;case "z":case "zz":A=T;if(e(A,-12,13))return null;A*=60;break;case "g":case "gg":if(!F||!h.eras)return null;F=u(F.toLowerCase());O=0;for(I=h.eras.length;O<I;O++)if(F===h.eras[O].name.toLowerCase()){f=O;break}if(null===
f)return null}}}l=new Date;m=(C=h.convert)?C.fromGregorian(l)[0]:l.getFullYear();null===g?g=m:h.eras&&(g+=h.eras[f||0].offset);null===p&&(p=0);null===q&&(q=1);if(C){if(l=C.toGregorian(g,p,q),null===l)return null}else if(l.setFullYear(g,p,q),l.getDate()!==q||null!==r&&l.getDay()!==r)return null;B&&12>v&&(v+=12);l.setHours(v,t,z,H);null!==A&&(h=l.getMinutes()-(A+l.getTimezoneOffset()),l.setHours(l.getHours()+parseInt(h/60,10),h%60));return l}})();T=function(a,b,c){var d=b["-"];b=b["+"];var e;switch(c){case "n -":d=
" "+d,b=" "+b;case "n-":l(a,d)?e=["-",a.substr(0,a.length-d.length)]:l(a,b)&&(e=["+",a.substr(0,a.length-b.length)]);break;case "- n":d+=" ",b+=" ";case "-n":y(a,d)?e=["-",a.substr(d.length)]:y(a,b)&&(e=["+",a.substr(b.length)]);break;case "(n)":y(a,"(")&&l(a,")")&&(e=["-",a.substr(1,a.length-2)])}return e||["",a]};b.prototype.findClosestCulture=function(a){return b.findClosestCulture.call(this,a)};b.prototype.format=function(a,c,d){return b.format.call(this,a,c,d)};b.prototype.localize=function(a,
c){return b.localize.call(this,a,c)};b.prototype.parseInt=function(a,c,d){return b.parseInt.call(this,a,c,d)};b.prototype.parseFloat=function(a,c,d){return b.parseFloat.call(this,a,c,d)};b.prototype.culture=function(a){return b.culture.call(this,a)};b.addCultureInfo=function(a,b,c){var d={},e=!1;"string"!==typeof a?(c=a,a=this.culture().name,d=this.cultures[a]):"string"!==typeof b?(c=b,e=null==this.cultures[a],d=this.cultures[a]||this.cultures["default"]):(e=!0,d=this.cultures[b]);this.cultures[a]=
m(!0,{},d,c);e&&(this.cultures[a].calendar=this.cultures[a].calendars.standard)};b.findClosestCulture=function(a){var b;if(!a)return this.findClosestCulture(this.cultureSelector)||this.cultures["default"];"string"===typeof a&&(a=a.split(","));if(p(a)){var c,d=this.cultures,e=a,f,g=e.length,h=[];for(f=0;f<g;f++)a=u(e[f]),a=a.split(";"),c=u(a[0]),1===a.length?a=1:(a=u(a[1]),0===a.indexOf("q=")?(a=a.substr(2),a=parseFloat(a),a=isNaN(a)?0:a):a=1),h.push({lang:c,pri:a});h.sort(function(a,b){return a.pri<
b.pri?1:a.pri>b.pri?-1:0});for(f=0;f<g;f++)if(c=h[f].lang,b=d[c])return b;for(f=0;f<g;f++){c=h[f].lang;do{e=c.lastIndexOf("-");if(-1===e)break;c=c.substr(0,e);if(b=d[c])return b}while(1)}for(f=0;f<g;f++){c=h[f].lang;for(var l in d)if(e=d[l],e.language==c)return e}}else if("object"===typeof a)return a;return b||null};b.format=function(a,b,c){c=this.findClosestCulture(c);a instanceof Date?a=A(a,b,c):"number"===typeof a&&(a=r(a,b,c));return a};b.localize=function(a,b){return this.findClosestCulture(b).messages[a]||
this.cultures["default"].messages[a]};b.parseDate=function(a,b,c){c=this.findClosestCulture(c);var d,e;if(b){if("string"===typeof b&&(b=[b]),b.length){e=0;for(var f=b.length;e<f;e++){var g=b[e];if(g&&(d=O(a,g,c)))break}}}else for(e in b=c.calendar.patterns,b)if(d=O(a,b[e],c))break;return d||null};b.parseInt=function(a,c,d){return C(b.parseFloat(a,c,d))};b.parseFloat=function(a,b,c){"number"!==typeof b&&(c=b,b=10);var g=this.findClosestCulture(c);c=NaN;var h=g.numberFormat;-1<a.indexOf(g.numberFormat.currency.symbol)&&
(a=a.replace(g.numberFormat.currency.symbol,""),a=a.replace(g.numberFormat.currency["."],g.numberFormat["."]));-1<a.indexOf(g.numberFormat.percent.symbol)&&(a=a.replace(g.numberFormat.percent.symbol,""));a=a.replace(/ /g,"");if(e.test(a))c=parseFloat(a);else if(!b&&d.test(a))c=parseInt(a,16);else{g=T(a,h,h.pattern[0]);b=g[0];g=g[1];""===b&&"(n)"!==h.pattern[0]&&(g=T(a,h,"(n)"),b=g[0],g=g[1]);""===b&&"-n"!==h.pattern[0]&&(g=T(a,h,"-n"),b=g[0],g=g[1]);b=b||"+";var l;a=g.indexOf("e");0>a&&(a=g.indexOf("E"));
0>a?(l=g,a=null):(l=g.substr(0,a),a=g.substr(a+1));var m=h["."],p=l.indexOf(m);0>p?(g=l,l=null):(g=l.substr(0,p),l=l.substr(p+m.length));m=h[","];g=g.split(m).join("");p=m.replace(/\u00A0/g," ");m!==p&&(g=g.split(p).join(""));b+=g;null!==l&&(b+="."+l);null!==a&&(h=T(a,h,"-n"),b+="e"+(h[0]||"+")+h[1]);f.test(b)&&(c=parseFloat(b))}return c};b.culture=function(a){"undefined"!==typeof a&&(this.cultureSelector=a);return this.findClosestCulture(a)||this.cultures["default"]}})(this);
Array.indexOf||(Array.prototype.indexOf=function(a,c){for(var b=c||0;b<this.length;b++)if(this[b]===a)return b;return-1});
var Parser=function(a){function c(a){function b(){}b.prototype=a;return new b}function b(a,b,c,d){this.type_=a;this.index_=b||0;this.prio_=c||0;this.number_=void 0!==d&&null!==d?d:0;this.toString=function(){switch(this.type_){case 0:return this.number_;case 1:case 2:case 3:return this.index_;case 4:return"CALL";default:return"Invalid Token"}}}function d(a,b,c,d){this.tokens=a;this.ops1=b;this.ops2=c;this.functions=d}function e(a){return"string"===typeof a?(I.lastIndex=0,I.test(a)?"'"+a.replace(I,
function(a){var b=F[a];return"string"===typeof b?b:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+"'":"'"+a+"'"):a}function f(a,b){return Number(a)+Number(b)}function g(a,b){return a-b}function h(a,b){return a*b}function l(a,b){return a/b}function m(a,b){return a%b}function p(a,b){return""+a+b}function q(a){return-a}function t(a){return Math.random()*(a||1)}function y(a){for(var b=a=Math.floor(a);1<a;)b*=--a;return b}function u(a,b){return Math.sqrt(a*a+b*b)}function C(a,b){if("[object Array]"!=
Object.prototype.toString.call(a))return[a,b];a=a.slice();a.push(b);return a}function B(){this.success=!1;this.expression=this.errormsg="";this.tmpprio=this.tokenindex=this.tokenprio=this.tokennumber=this.pos=0;this.ops1={sin:Math.sin,cos:Math.cos,tan:Math.tan,asin:Math.asin,acos:Math.acos,atan:Math.atan,sqrt:Math.sqrt,log:Math.log,abs:Math.abs,ceil:Math.ceil,floor:Math.floor,round:Math.round,"-":q,exp:Math.exp};this.ops2={"+":f,"-":g,"*":h,"/":l,"%":m,"^":Math.pow,",":C,"||":p};this.functions={random:t,
fac:y,min:Math.min,max:Math.max,pyt:u,pow:Math.pow,atan2:Math.atan2};this.consts={E:Math.E,PI:Math.PI}}var I=/[\\\'\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,F={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r","'":"\\'","\\":"\\\\"};d.prototype={simplify:function(a){a=a||{};for(var e=[],f=[],g,h,l,m=this.tokens.length,p=0,p=0;p<m;p++)if(l=this.tokens[p],g=l.type_,0===g)e.push(l);else if(3===g&&l.index_ in a)l=new b(0,
0,0,a[l.index_]),e.push(l);else if(2===g&&1<e.length)h=e.pop(),g=e.pop(),l=this.ops2[l.index_],l=new b(0,0,0,l(g.number_,h.number_)),e.push(l);else if(1===g&&0<e.length)g=e.pop(),l=this.ops1[l.index_],l=new b(0,0,0,l(g.number_)),e.push(l);else{for(;0<e.length;)f.push(e.shift());f.push(l)}for(;0<e.length;)f.push(e.shift());return new d(f,c(this.ops1),c(this.ops2),c(this.functions))},substitute:function(a,e){e instanceof d||(e=(new B).parse(String(e)));for(var f=[],g=this.tokens.length,h,l=0,l=0;l<
g;l++)if(h=this.tokens[l],3===h.type_&&h.index_===a)for(h=0;h<e.tokens.length;h++){var m=e.tokens[h],m=new b(m.type_,m.index_,m.prio_,m.number_);f.push(m)}else f.push(h);return new d(f,c(this.ops1),c(this.ops2),c(this.functions))},evaluate:function(a){a=a||{};for(var b=[],c,d,e,f=this.tokens.length,g=0,g=0;g<f;g++)if(e=this.tokens[g],c=e.type_,0===c)b.push(e.number_);else if(2===c)d=b.pop(),c=b.pop(),e=this.ops2[e.index_],b.push(e(c,d));else if(3===c)if(e.index_ in a)b.push(a[e.index_]);else if(e.index_ in
this.functions)b.push(this.functions[e.index_]);else throw Error("undefined variable: "+e.index_);else if(1===c)c=b.pop(),e=this.ops1[e.index_],b.push(e(c));else if(4===c)if(c=b.pop(),e=b.pop(),e.apply&&e.call)"[object Array]"==Object.prototype.toString.call(c)?b.push(e.apply(void 0,c)):b.push(e.call(void 0,c));else throw Error(e+" is not a function");else throw Error("invalid Expression");if(1<b.length)throw Error("invalid Expression (parity)");return b[0]},toString:function(a){for(var b=[],c,d,
f,g=this.tokens.length,h=0,h=0;h<g;h++)if(f=this.tokens[h],c=f.type_,0===c)b.push(e(f.number_));else if(2===c)d=b.pop(),c=b.pop(),f=f.index_,a&&"^"==f?b.push("Math.pow("+c+","+d+")"):b.push("("+c+f+d+")");else if(3===c)b.push(f.index_);else if(1===c)c=b.pop(),f=f.index_,"-"===f?b.push("("+f+c+")"):b.push(f+"("+c+")");else if(4===c)c=b.pop(),f=b.pop(),b.push(f+"("+c+")");else throw Error("invalid Expression");if(1<b.length)throw Error("invalid Expression (parity)");return b[0]},variables:function(){for(var a=
this.tokens.length,b=[],c=0;c<a;c++){var d=this.tokens[c];3===d.type_&&-1==b.indexOf(d.index_)&&b.push(d.index_)}return b},toJSFunction:function(a,b){return new Function(a,"with(Parser.values) { return "+this.simplify(b).toString(!0)+"; }")}};B.parse=function(a){return(new B).parse(a)};B.evaluate=function(a,b){return B.parse(a).evaluate(b)};B.Expression=d;B.values={sin:Math.sin,cos:Math.cos,tan:Math.tan,asin:Math.asin,acos:Math.acos,atan:Math.atan,sqrt:Math.sqrt,log:Math.log,abs:Math.abs,ceil:Math.ceil,
floor:Math.floor,round:Math.round,random:t,fac:y,exp:Math.exp,min:Math.min,max:Math.max,pyt:u,pow:Math.pow,atan2:Math.atan2,E:Math.E,PI:Math.PI};B.prototype={parse:function(a){this.errormsg="";this.success=!0;var e=[],f=[];this.tmpprio=0;var g=77,h=0;this.expression=a;for(this.pos=0;this.pos<this.expression.length;)this.isOperator()?this.isSign()&&g&64?(this.isNegativeSign()&&(this.tokenprio=2,this.tokenindex="-",h++,this.addfunc(f,e,1)),g=77):this.isComment()||(0===(g&2)&&this.error_parsing(this.pos,
"unexpected operator"),h+=2,this.addfunc(f,e,2),g=77):this.isNumber()?(0===(g&1)&&this.error_parsing(this.pos,"unexpected number"),a=new b(0,0,0,this.tokennumber),f.push(a),g=50):this.isString()?(0===(g&1)&&this.error_parsing(this.pos,"unexpected string"),a=new b(0,0,0,this.tokennumber),f.push(a),g=50):this.isLeftParenth()?(0===(g&8)&&this.error_parsing(this.pos,'unexpected "("'),g&128&&(h+=2,this.tokenprio=-2,this.tokenindex=-1,this.addfunc(f,e,4)),g=333):this.isRightParenth()?(g&256?(a=new b(0,
0,0,[]),f.push(a)):0===(g&16)&&this.error_parsing(this.pos,'unexpected ")"'),g=186):this.isComma()?(0===(g&32)&&this.error_parsing(this.pos,'unexpected ","'),this.addfunc(f,e,2),h+=2,g=77):this.isConst()?(0===(g&1)&&this.error_parsing(this.pos,"unexpected constant"),a=new b(0,0,0,this.tokennumber),f.push(a),g=50):this.isOp2()?(0===(g&4)&&this.error_parsing(this.pos,"unexpected function"),this.addfunc(f,e,2),h+=2,g=8):this.isOp1()?(0===(g&4)&&this.error_parsing(this.pos,"unexpected function"),this.addfunc(f,
e,1),h++,g=8):this.isVar()?(0===(g&1)&&this.error_parsing(this.pos,"unexpected variable"),a=new b(3,this.tokenindex,0,0),f.push(a),g=186):this.isWhite()||(""===this.errormsg?this.error_parsing(this.pos,"unknown character"):this.error_parsing(this.pos,this.errormsg));for((0>this.tmpprio||10<=this.tmpprio)&&this.error_parsing(this.pos,'unmatched "()"');0<e.length;)a=e.pop(),f.push(a);h+1!==f.length&&this.error_parsing(this.pos,"parity");return new d(f,c(this.ops1),c(this.ops2),c(this.functions))},evaluate:function(a,
b){return this.parse(a).evaluate(b)},error_parsing:function(a,b){this.success=!1;this.errormsg="parse error [column "+a+"]: "+b;throw Error(this.errormsg);},addfunc:function(a,c,d){for(d=new b(d,this.tokenindex,this.tokenprio+this.tmpprio,0);0<c.length;)if(d.prio_<=c[c.length-1].prio_)a.push(c.pop());else break;c.push(d)},isNumber:function(){for(var a=!1,b="";this.pos<this.expression.length;){var c=this.expression.charCodeAt(this.pos);if(48<=c&&57>=c||46===c)b+=this.expression.charAt(this.pos),this.pos++,
this.tokennumber=parseFloat(b),a=!0;else break}return a},unescape:function(a,b){for(var c=[],d=!1,e=0;e<a.length;e++){var f=a.charAt(e);if(d){switch(f){case "'":c.push("'");break;case "\\":c.push("\\");break;case "/":c.push("/");break;case "b":c.push("\b");break;case "f":c.push("\f");break;case "n":c.push("\n");break;case "r":c.push("\r");break;case "t":c.push("\t");break;case "u":d=parseInt(a.substring(e+1,e+5),16);c.push(String.fromCharCode(d));e+=4;break;default:throw this.error_parsing(b+e,"Illegal escape sequence: '\\"+
f+"'");}d=!1}else"\\"==f?d=!0:c.push(f)}return c.join("")},isString:function(){var a=!1,b="",c=this.pos;if(this.pos<this.expression.length&&"'"==this.expression.charAt(this.pos))for(this.pos++;this.pos<this.expression.length;)if("'"!=this.expression.charAt(this.pos)||"\\"==b.slice(-1))b+=this.expression.charAt(this.pos),this.pos++;else{this.pos++;this.tokennumber=this.unescape(b,c);a=!0;break}return a},isConst:function(){var a,b;for(b in this.consts){var c=b.length;a=this.expression.substr(this.pos,
c);if(b===a)return this.tokennumber=this.consts[b],this.pos+=c,!0}return!1},isOperator:function(){var a=this.expression.charCodeAt(this.pos);if(43===a)this.tokenprio=0,this.tokenindex="+";else if(45===a)this.tokenprio=0,this.tokenindex="-";else if(124===a)if(124===this.expression.charCodeAt(this.pos+1))this.pos++,this.tokenprio=0,this.tokenindex="||";else return!1;else if(42===a)this.tokenprio=1,this.tokenindex="*";else if(47===a)this.tokenprio=2,this.tokenindex="/";else if(37===a)this.tokenprio=
2,this.tokenindex="%";else if(94===a)this.tokenprio=3,this.tokenindex="^";else return!1;this.pos++;return!0},isSign:function(){var a=this.expression.charCodeAt(this.pos-1);return 45===a||43===a?!0:!1},isPositiveSign:function(){return 43===this.expression.charCodeAt(this.pos-1)?!0:!1},isNegativeSign:function(){return 45===this.expression.charCodeAt(this.pos-1)?!0:!1},isLeftParenth:function(){return 40===this.expression.charCodeAt(this.pos)?(this.pos++,this.tmpprio+=10,!0):!1},isRightParenth:function(){return 41===
this.expression.charCodeAt(this.pos)?(this.pos++,this.tmpprio-=10,!0):!1},isComma:function(){return 44===this.expression.charCodeAt(this.pos)?(this.pos++,this.tokenprio=-1,this.tokenindex=",",!0):!1},isWhite:function(){var a=this.expression.charCodeAt(this.pos);return 32===a||9===a||10===a||13===a?(this.pos++,!0):!1},isOp1:function(){for(var a="",b=this.pos;b<this.expression.length;b++){var c=this.expression.charAt(b);if(c.toUpperCase()===c.toLowerCase()&&(b===this.pos||"_"!=c&&("0">c||"9"<c)))break;
a+=c}return 0<a.length&&a in this.ops1?(this.tokenindex=a,this.tokenprio=5,this.pos+=a.length,!0):!1},isOp2:function(){for(var a="",b=this.pos;b<this.expression.length;b++){var c=this.expression.charAt(b);if(c.toUpperCase()===c.toLowerCase()&&(b===this.pos||"_"!=c&&("0">c||"9"<c)))break;a+=c}return 0<a.length&&a in this.ops2?(this.tokenindex=a,this.tokenprio=5,this.pos+=a.length,!0):!1},isVar:function(){for(var a="",b=this.pos;b<this.expression.length;b++){var c=this.expression.charAt(b);if(c.toUpperCase()===
c.toLowerCase()&&(b===this.pos||"_"!=c&&("0">c||"9"<c)))break;a+=c}return 0<a.length?(this.tokenindex=a,this.tokenprio=4,this.pos+=a.length,!0):!1},isComment:function(){return 47===this.expression.charCodeAt(this.pos-1)&&42===this.expression.charCodeAt(this.pos)?(this.pos=this.expression.indexOf("*/",this.pos)+2,1===this.pos&&(this.pos=this.expression.length),!0):!1}};return a.Parser=B}("undefined"===typeof exports?{}:exports),COMPILED=!0,goog=goog||{};goog.global=this;
goog.exportPath_=function(a,c,b){a=a.split(".");b=b||goog.global;a[0]in b||!b.execScript||b.execScript("var "+a[0]);for(var d;a.length&&(d=a.shift());)a.length||void 0===c?b=b[d]?b[d]:b[d]={}:b[d]=c};goog.define=function(a,c){var b=c;COMPILED||goog.global.CLOSURE_DEFINES&&Object.prototype.hasOwnProperty.call(goog.global.CLOSURE_DEFINES,a)&&(b=goog.global.CLOSURE_DEFINES[a]);goog.exportPath_(a,b)};goog.DEBUG=!0;goog.LOCALE="en";goog.TRUSTED_SITE=!0;
goog.provide=function(a){if(!COMPILED){if(goog.isProvided_(a))throw Error('Namespace "'+a+'" already declared.');delete goog.implicitNamespaces_[a];for(var c=a;(c=c.substring(0,c.lastIndexOf(".")))&&!goog.getObjectByName(c);)goog.implicitNamespaces_[c]=!0}goog.exportPath_(a)};goog.setTestOnly=function(a){if(COMPILED&&!goog.DEBUG)throw a=a||"",Error("Importing test-only code into non-debug environment"+a?": "+a:".");};
COMPILED||(goog.isProvided_=function(a){return!goog.implicitNamespaces_[a]&&!!goog.getObjectByName(a)},goog.implicitNamespaces_={});goog.getObjectByName=function(a,c){for(var b=a.split("."),d=c||goog.global,e;e=b.shift();)if(goog.isDefAndNotNull(d[e]))d=d[e];else return null;return d};goog.globalize=function(a,c){var b=c||goog.global,d;for(d in a)b[d]=a[d]};
goog.addDependency=function(a,c,b){if(goog.DEPENDENCIES_ENABLED){var d;a=a.replace(/\\/g,"/");for(var e=goog.dependencies_,f=0;d=c[f];f++)e.nameToPath[d]=a,a in e.pathToNames||(e.pathToNames[a]={}),e.pathToNames[a][d]=!0;for(d=0;c=b[d];d++)a in e.requires||(e.requires[a]={}),e.requires[a][c]=!0}};goog.ENABLE_DEBUG_LOADER=!0;
goog.require=function(a){if(!COMPILED&&!goog.isProvided_(a)){if(goog.ENABLE_DEBUG_LOADER){var c=goog.getPathFromDeps_(a);if(c){goog.included_[c]=!0;goog.writeScripts_();return}}a="goog.require could not find: "+a;goog.global.console&&goog.global.console.error(a);throw Error(a);}};goog.basePath="";goog.global.CLOSURE_NO_DEPS=!0;goog.nullFunction=function(){};goog.identityFunction=function(a,c){return a};goog.abstractMethod=function(){throw Error("unimplemented abstract method");};
goog.addSingletonGetter=function(a){a.getInstance=function(){if(a.instance_)return a.instance_;goog.DEBUG&&(goog.instantiatedSingletons_[goog.instantiatedSingletons_.length]=a);return a.instance_=new a}};goog.instantiatedSingletons_=[];goog.DEPENDENCIES_ENABLED=!COMPILED&&goog.ENABLE_DEBUG_LOADER;
goog.DEPENDENCIES_ENABLED&&(goog.included_={},goog.dependencies_={pathToNames:{},nameToPath:{},requires:{},visited:{},written:{}},goog.inHtmlDocument_=function(){var a=goog.global.document;return"undefined"!=typeof a&&"write"in a},goog.findBasePath_=function(){if(goog.global.CLOSURE_BASE_PATH)goog.basePath=goog.global.CLOSURE_BASE_PATH;else if(goog.inHtmlDocument_())for(var a=goog.global.document.getElementsByTagName("script"),c=a.length-1;0<=c;--c){var b=a[c].src,d=b.lastIndexOf("?"),d=-1==d?b.length:
d;if("base.js"==b.substr(d-7,7)){goog.basePath=b.substr(0,d-7);break}}},goog.importScript_=function(a){var c=goog.global.CLOSURE_IMPORT_SCRIPT||goog.writeScriptTag_;!goog.dependencies_.written[a]&&c(a)&&(goog.dependencies_.written[a]=!0)},goog.writeScriptTag_=function(a){if(goog.inHtmlDocument_()){var c=goog.global.document;if("complete"==c.readyState){if(/\bdeps.js$/.test(a))return!1;throw Error('Cannot write "'+a+'" after document load');}c.write('<script type="text/javascript" src="'+a+'">\x3c/script>');
return!0}return!1},goog.writeScripts_=function(){function a(e){if(!(e in d.written)){if(!(e in d.visited)&&(d.visited[e]=!0,e in d.requires))for(var g in d.requires[e])if(!goog.isProvided_(g))if(g in d.nameToPath)a(d.nameToPath[g]);else throw Error("Undefined nameToPath for "+g);e in b||(b[e]=!0,c.push(e))}}var c=[],b={},d=goog.dependencies_,e;for(e in goog.included_)d.written[e]||a(e);for(e=0;e<c.length;e++)if(c[e])goog.importScript_(goog.basePath+c[e]);else throw Error("Undefined script input");
},goog.getPathFromDeps_=function(a){return a in goog.dependencies_.nameToPath?goog.dependencies_.nameToPath[a]:null},goog.findBasePath_(),goog.global.CLOSURE_NO_DEPS||goog.importScript_(goog.basePath+"deps.js"));
goog.typeOf=function(a){var c=typeof a;if("object"==c)if(a){if(a instanceof Array)return"array";if(a instanceof Object)return c;var b=Object.prototype.toString.call(a);if("[object Window]"==b)return"object";if("[object Array]"==b||"number"==typeof a.length&&"undefined"!=typeof a.splice&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("splice"))return"array";if("[object Function]"==b||"undefined"!=typeof a.call&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("call"))return"function"}else return"null";
else if("function"==c&&"undefined"==typeof a.call)return"object";return c};goog.isDef=function(a){return void 0!==a};goog.isNull=function(a){return null===a};goog.isDefAndNotNull=function(a){return null!=a};goog.isArray=function(a){return"array"==goog.typeOf(a)};goog.isArrayLike=function(a){var c=goog.typeOf(a);return"array"==c||"object"==c&&"number"==typeof a.length};goog.isDateLike=function(a){return goog.isObject(a)&&"function"==typeof a.getFullYear};goog.isString=function(a){return"string"==typeof a};
goog.isBoolean=function(a){return"boolean"==typeof a};goog.isNumber=function(a){return"number"==typeof a};goog.isFunction=function(a){return"function"==goog.typeOf(a)};goog.isObject=function(a){var c=typeof a;return"object"==c&&null!=a||"function"==c};goog.getUid=function(a){return a[goog.UID_PROPERTY_]||(a[goog.UID_PROPERTY_]=++goog.uidCounter_)};goog.hasUid=function(a){return!!a[goog.UID_PROPERTY_]};goog.removeUid=function(a){"removeAttribute"in a&&a.removeAttribute(goog.UID_PROPERTY_);try{delete a[goog.UID_PROPERTY_]}catch(c){}};
goog.UID_PROPERTY_="closure_uid_"+(1E9*Math.random()>>>0);goog.uidCounter_=0;goog.getHashCode=goog.getUid;goog.removeHashCode=goog.removeUid;goog.cloneObject=function(a){var c=goog.typeOf(a);if("object"==c||"array"==c){if(a.clone)return a.clone();var c="array"==c?[]:{},b;for(b in a)c[b]=goog.cloneObject(a[b]);return c}return a};goog.bindNative_=function(a,c,b){return a.call.apply(a.bind,arguments)};
goog.bindJs_=function(a,c,b){if(!a)throw Error();if(2<arguments.length){var d=Array.prototype.slice.call(arguments,2);return function(){var b=Array.prototype.slice.call(arguments);Array.prototype.unshift.apply(b,d);return a.apply(c,b)}}return function(){return a.apply(c,arguments)}};goog.bind=function(a,c,b){Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?goog.bind=goog.bindNative_:goog.bind=goog.bindJs_;return goog.bind.apply(null,arguments)};
goog.partial=function(a,c){var b=Array.prototype.slice.call(arguments,1);return function(){var c=b.slice();c.push.apply(c,arguments);return a.apply(this,c)}};goog.mixin=function(a,c){for(var b in c)a[b]=c[b]};goog.now=goog.TRUSTED_SITE&&Date.now||function(){return+new Date};
goog.globalEval=function(a){if(goog.global.execScript)goog.global.execScript(a,"JavaScript");else if(goog.global.eval)if(null==goog.evalWorksForGlobals_&&(goog.global.eval("var _et_ = 1;"),"undefined"!=typeof goog.global._et_?(delete goog.global._et_,goog.evalWorksForGlobals_=!0):goog.evalWorksForGlobals_=!1),goog.evalWorksForGlobals_)goog.global.eval(a);else{var c=goog.global.document,b=c.createElement("script");b.type="text/javascript";b.defer=!1;b.appendChild(c.createTextNode(a));c.body.appendChild(b);
c.body.removeChild(b)}else throw Error("goog.globalEval not available");};goog.evalWorksForGlobals_=null;goog.getCssName=function(a,c){var b=function(a){return goog.cssNameMapping_[a]||a},d=function(a){a=a.split("-");for(var c=[],d=0;d<a.length;d++)c.push(b(a[d]));return c.join("-")},d=goog.cssNameMapping_?"BY_WHOLE"==goog.cssNameMappingStyle_?b:d:function(a){return a};return c?a+"-"+d(c):d(a)};goog.setCssNameMapping=function(a,c){goog.cssNameMapping_=a;goog.cssNameMappingStyle_=c};
!COMPILED&&goog.global.CLOSURE_CSS_NAME_MAPPING&&(goog.cssNameMapping_=goog.global.CLOSURE_CSS_NAME_MAPPING);goog.getMsg=function(a,c){var b=c||{},d;for(d in b){var e=(""+b[d]).replace(/\$/g,"$$$$");a=a.replace(new RegExp("\\{\\$"+d+"\\}","gi"),e)}return a};goog.getMsgWithFallback=function(a,c){return a};goog.exportSymbol=function(a,c,b){goog.exportPath_(a,c,b)};goog.exportProperty=function(a,c,b){a[c]=b};
goog.inherits=function(a,c){function b(){}b.prototype=c.prototype;a.superClass_=c.prototype;a.prototype=new b;a.prototype.constructor=a};
goog.base=function(a,c,b){var d=arguments.callee.caller;if(goog.DEBUG&&!d)throw Error("arguments.caller not defined.  goog.base() expects not to be running in strict mode. See http://www.ecma-international.org/ecma-262/5.1/#sec-C");if(d.superClass_)return d.superClass_.constructor.apply(a,Array.prototype.slice.call(arguments,1));for(var e=Array.prototype.slice.call(arguments,2),f=!1,g=a.constructor;g;g=g.superClass_&&g.superClass_.constructor)if(g.prototype[c]===d)f=!0;else if(f)return g.prototype[c].apply(a,
e);if(a[c]===d)return a.constructor.prototype[c].apply(a,e);throw Error("goog.base called from a method of one name to a method of a different name");};goog.scope=function(a){a.call(goog.global)};goog.structs={};goog.structs.Collection=function(){};var epiviz={utils:{}};epiviz.utils.capitalizeFirstLetter=function(a){return a.charAt(0).toUpperCase()+a.slice(1)};epiviz.utils.stringContains=function(a,c){return-1!=a.indexOf(c)};epiviz.utils.stringStartsWith=function(a,c){return 0==a.indexOf(c)};
epiviz.utils.stringEndsWith=function(a,c){return a.lastIndexOf(c)==a.length-c.length};epiviz.utils.fillArray=function(a,c){a=a||0;for(var b=Array(a),d=0;d<a;++d)b.push(c);return b};epiviz.utils.indexOf=function(a,c){for(var b=0;b<a.length;++b)if(c(a[b]))return b;return-1};epiviz.utils.arraysEqual=function(a,c){return a==c?!0:a&&c&&a.length==c.length?!(a<c||c<a):!1};
epiviz.utils.elementsEqual=function(a,c){if(a==c)return!0;if(!a||!c||a.length!=c.length)return!1;var b={},d;for(d=0;d<a.length;++d)a[d]in b||(b[a[d]]=0),++b[a[d]];for(d=0;d<c.length;++d){if(!b[c[d]])return!1;--b[c[d]]}return!0};epiviz.utils.range=function(a,c){c=c||0;a=a||0;for(var b=Array(a),d=0;d<a;++d)b[d]=d+c;return b};epiviz.utils.arrayAppend=function(a,c){a.push.apply(a,c)};epiviz.utils.arrayFlip=function(a){for(var c={},b=0;b<a.length;++b)c[a[b]]=b;return c};
epiviz.utils.indexOfMin=function(a,c){for(var b=null,d=null,e=0;e<a.length;++e)for(var f=c?e+1:0;f<a[e].length;++f)if(null==d||a[e][f]<d)d=a[e][f],b=[e,f];return{min:d,index:b}};epiviz.utils.mapCopy=function(a){var c={},b;for(b in a)a.hasOwnProperty(b)&&(c[b]=a[b]);return c};epiviz.utils.mapEquals=function(a,c){if(a==c)return!0;if(!a||!c)return!1;for(var b in a)if(a.hasOwnProperty(b)&&(!c.hasOwnProperty(b)||a[b]!=c[b]))return!1;for(b in c)if(c.hasOwnProperty(b)&&!a.hasOwnProperty(b))return!1;return!0};
epiviz.utils.mapCombine=function(a,c){var b={},d;if(c)for(d in c)c.hasOwnProperty(d)&&(b[d]=c[d]);if(a)for(d in a)a.hasOwnProperty(d)&&(b[d]=a[d]);return b};epiviz.utils.mapJoin=function(a,c,b){c||""===c||(c=":");b||""===b||(b=",");var d="",e;for(e in a)a.hasOwnProperty(e)&&(d&&(d+=b),d+=e+c+a[e]);return d};epiviz.utils.mapKeyIntersection=function(a,c){var b=[];if(!a||!c)return b;for(var d in a)a.hasOwnProperty(d)&&d in c&&b.push(d);return b};
epiviz.utils.evaluateFullyQualifiedTypeName=function(a){try{for(var c=a.split("."),b=c.pop(),d=window,e=0;e<c.length;++e)d=d[c[e]];var f=d[b];return"function"!==typeof f?null:f}catch(g){return console.error("Unknown type name: "+a),null}};epiviz.utils.applyConstructor=function(a,c){var b;b=function(){};b.prototype=a.prototype;b=new b;b.constructor=a;a.apply(b,c);return b};
epiviz.utils.getInternetExplorerVersion=function(){var a=-1;if("Microsoft Internet Explorer"==navigator.appName){var c=/MSIE ([0-9]{1,}[.0-9]{0,})/.exec(navigator.userAgent);null!=c&&(a=parseFloat(c[1]))}return a};epiviz.utils.generatePseudoGUID=function(a){for(var c="",b=0;b<a;++b)c+="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ"[Math.round(61*Math.random())];return c};epiviz.utils.colorize=function(a,c,b,d,e,f){return d3.scale.linear().domain([a,b,c]).range([d,f,e])};
epiviz.utils.colorizeBinary=function(a,c,b,d){return d3.scale.linear().domain([a,c]).range([b,d])};Array.indexOf||(Array.prototype.indexOf=function(a,c){for(var b=c||0;b<this.length;b++)if(this[b]===a)return b;return-1});
epiviz.utils.ExpressionParser=function(a){function c(a){function b(){}b.prototype=a;return new b}function b(a,b,c,d){this.type_=a;this.index_=b||0;this.prio_=c||0;this.number_=void 0!==d&&null!==d?d:0;this.toString=function(){switch(this.type_){case 0:return this.number_;case 1:case 2:case 3:return this.index_;case 4:return"CALL";default:return"Invalid Token"}}}function d(a,b,c,d){this.tokens=a;this.ops1=b;this.ops2=c;this.functions=d}function e(a){return"string"===typeof a?(I.lastIndex=0,I.test(a)?
"'"+a.replace(I,function(a){var b=F[a];return"string"===typeof b?b:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+"'":"'"+a+"'"):a}function f(a,b){return Number(a)+Number(b)}function g(a,b){return a-b}function h(a,b){return a*b}function l(a,b){return a/b}function m(a,b){return a%b}function p(a,b){return""+a+b}function q(a){return-a}function t(a){return Math.random()*(a||1)}function y(a){for(var b=a=Math.floor(a);1<a;)b*=--a;return b}function u(a,b){return Math.sqrt(a*a+b*b)}function C(a,
b){if("[object Array]"!=Object.prototype.toString.call(a))return[a,b];a=a.slice();a.push(b);return a}function B(){this.success=!1;this.expression=this.errormsg="";this.tmpprio=this.tokenindex=this.tokenprio=this.tokennumber=this.pos=0;this.ops1={sin:Math.sin,cos:Math.cos,tan:Math.tan,asin:Math.asin,acos:Math.acos,atan:Math.atan,sqrt:Math.sqrt,log:Math.log,abs:Math.abs,ceil:Math.ceil,floor:Math.floor,round:Math.round,"-":q,exp:Math.exp};this.ops2={"+":f,"-":g,"*":h,"/":l,"%":m,"^":Math.pow,",":C,"||":p};
this.functions={random:t,fac:y,min:Math.min,max:Math.max,pyt:u,pow:Math.pow,atan2:Math.atan2};this.consts={E:Math.E,PI:Math.PI}}var I=/[\\\'\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,F={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r","'":"\\'","\\":"\\\\"};d.prototype={simplify:function(a){a=a||{};for(var e=[],f=[],g,h,l,m=this.tokens.length,p=0,p=0;p<m;p++)if(l=this.tokens[p],g=l.type_,0===g)e.push(l);else if(3===g&&
l.index_ in a)l=new b(0,0,0,a[l.index_]),e.push(l);else if(2===g&&1<e.length)h=e.pop(),g=e.pop(),l=this.ops2[l.index_],l=new b(0,0,0,l(g.number_,h.number_)),e.push(l);else if(1===g&&0<e.length)g=e.pop(),l=this.ops1[l.index_],l=new b(0,0,0,l(g.number_)),e.push(l);else{for(;0<e.length;)f.push(e.shift());f.push(l)}for(;0<e.length;)f.push(e.shift());return new d(f,c(this.ops1),c(this.ops2),c(this.functions))},substitute:function(a,e){e instanceof d||(e=(new B).parse(String(e)));for(var f=[],g=this.tokens.length,
h,l=0,l=0;l<g;l++)if(h=this.tokens[l],3===h.type_&&h.index_===a)for(h=0;h<e.tokens.length;h++){var m=e.tokens[h],m=new b(m.type_,m.index_,m.prio_,m.number_);f.push(m)}else f.push(h);return new d(f,c(this.ops1),c(this.ops2),c(this.functions))},evaluate:function(a){a=a||{};for(var b=[],c,d,e,f=this.tokens.length,g=0,g=0;g<f;g++)if(e=this.tokens[g],c=e.type_,0===c)b.push(e.number_);else if(2===c)d=b.pop(),c=b.pop(),e=this.ops2[e.index_],b.push(e(c,d));else if(3===c)if(e.index_ in a)b.push(a[e.index_]);
else if(e.index_ in this.functions)b.push(this.functions[e.index_]);else throw Error("undefined variable: "+e.index_);else if(1===c)c=b.pop(),e=this.ops1[e.index_],b.push(e(c));else if(4===c)if(c=b.pop(),e=b.pop(),e.apply&&e.call)"[object Array]"==Object.prototype.toString.call(c)?b.push(e.apply(void 0,c)):b.push(e.call(void 0,c));else throw Error(e+" is not a function");else throw Error("invalid Expression");if(1<b.length)throw Error("invalid Expression (parity)");return b[0]},evaluateArr:function(a){for(var b=
[],c=!1;!c;){var d={},e;for(e in a)if(a.hasOwnProperty(e)){if(b.length>=a[e].length){c=!0;break}d[e]=a[e][b.length]}c||b.push(this.evaluate(d))}return b},toString:function(a){for(var b=[],c,d,f,g=this.tokens.length,h=0,h=0;h<g;h++)if(f=this.tokens[h],c=f.type_,0===c)b.push(e(f.number_));else if(2===c)d=b.pop(),c=b.pop(),f=f.index_,a&&"^"==f?b.push("Math.pow("+c+","+d+")"):b.push("("+c+f+d+")");else if(3===c)b.push(f.index_);else if(1===c)c=b.pop(),f=f.index_,"-"===f?b.push("("+f+c+")"):b.push(f+"("+
c+")");else if(4===c)c=b.pop(),f=b.pop(),b.push(f+"("+c+")");else throw Error("invalid Expression");if(1<b.length)throw Error("invalid Expression (parity)");return b[0]},variables:function(){for(var a=this.tokens.length,b=[],c=0;c<a;c++){var d=this.tokens[c];3===d.type_&&-1==b.indexOf(d.index_)&&b.push(d.index_)}return b},toJSFunction:function(a,b){return new Function(a,"with(Parser.values) { return "+this.simplify(b).toString(!0)+"; }")}};B.parse=function(a){return(new B).parse(a)};B.evaluate=function(a,
b){return B.parse(a).evaluate(b)};B.Expression=d;B.values={sin:Math.sin,cos:Math.cos,tan:Math.tan,asin:Math.asin,acos:Math.acos,atan:Math.atan,sqrt:Math.sqrt,log:Math.log,abs:Math.abs,ceil:Math.ceil,floor:Math.floor,round:Math.round,random:t,fac:y,exp:Math.exp,min:Math.min,max:Math.max,pyt:u,pow:Math.pow,atan2:Math.atan2,E:Math.E,PI:Math.PI};B.prototype={parse:function(a){this.errormsg="";this.success=!0;var e=[],f=[];this.tmpprio=0;var g=77,h=0;this.expression=a;for(this.pos=0;this.pos<this.expression.length;)this.isOperator()?
this.isSign()&&g&64?(this.isNegativeSign()&&(this.tokenprio=2,this.tokenindex="-",h++,this.addfunc(f,e,1)),g=77):this.isComment()||(0===(g&2)&&this.error_parsing(this.pos,"unexpected operator"),h+=2,this.addfunc(f,e,2),g=77):this.isNumber()?(0===(g&1)&&this.error_parsing(this.pos,"unexpected number"),a=new b(0,0,0,this.tokennumber),f.push(a),g=50):this.isString()?(0===(g&1)&&this.error_parsing(this.pos,"unexpected string"),a=new b(0,0,0,this.tokennumber),f.push(a),g=50):this.isLeftParenth()?(0===
(g&8)&&this.error_parsing(this.pos,'unexpected "("'),g&128&&(h+=2,this.tokenprio=-2,this.tokenindex=-1,this.addfunc(f,e,4)),g=333):this.isRightParenth()?(g&256?(a=new b(0,0,0,[]),f.push(a)):0===(g&16)&&this.error_parsing(this.pos,'unexpected ")"'),g=186):this.isComma()?(0===(g&32)&&this.error_parsing(this.pos,'unexpected ","'),this.addfunc(f,e,2),h+=2,g=77):this.isConst()?(0===(g&1)&&this.error_parsing(this.pos,"unexpected constant"),a=new b(0,0,0,this.tokennumber),f.push(a),g=50):this.isOp2()?(0===
(g&4)&&this.error_parsing(this.pos,"unexpected function"),this.addfunc(f,e,2),h+=2,g=8):this.isOp1()?(0===(g&4)&&this.error_parsing(this.pos,"unexpected function"),this.addfunc(f,e,1),h++,g=8):this.isVar()?(0===(g&1)&&this.error_parsing(this.pos,"unexpected variable"),a=new b(3,this.tokenindex,0,0),f.push(a),g=186):this.isWhite()||(""===this.errormsg?this.error_parsing(this.pos,"unknown character"):this.error_parsing(this.pos,this.errormsg));for((0>this.tmpprio||10<=this.tmpprio)&&this.error_parsing(this.pos,
'unmatched "()"');0<e.length;)a=e.pop(),f.push(a);h+1!==f.length&&this.error_parsing(this.pos,"parity");return new d(f,c(this.ops1),c(this.ops2),c(this.functions))},evaluate:function(a,b){return this.parse(a).evaluate(b)},error_parsing:function(a,b){this.success=!1;this.errormsg="parse error [column "+a+"]: "+b;throw Error(this.errormsg);},addfunc:function(a,c,d){for(d=new b(d,this.tokenindex,this.tokenprio+this.tmpprio,0);0<c.length;)if(d.prio_<=c[c.length-1].prio_)a.push(c.pop());else break;c.push(d)},
isNumber:function(){for(var a=!1,b="";this.pos<this.expression.length;){var c=this.expression.charCodeAt(this.pos);if(48<=c&&57>=c||46===c)b+=this.expression.charAt(this.pos),this.pos++,this.tokennumber=parseFloat(b),a=!0;else break}return a},unescape:function(a,b){for(var c=[],d=!1,e=0;e<a.length;e++){var f=a.charAt(e);if(d){switch(f){case "'":c.push("'");break;case "\\":c.push("\\");break;case "/":c.push("/");break;case "b":c.push("\b");break;case "f":c.push("\f");break;case "n":c.push("\n");break;
case "r":c.push("\r");break;case "t":c.push("\t");break;case "u":d=parseInt(a.substring(e+1,e+5),16);c.push(String.fromCharCode(d));e+=4;break;default:throw this.error_parsing(b+e,"Illegal escape sequence: '\\"+f+"'");}d=!1}else"\\"==f?d=!0:c.push(f)}return c.join("")},isString:function(){var a=!1,b="",c=this.pos;if(this.pos<this.expression.length&&"'"==this.expression.charAt(this.pos))for(this.pos++;this.pos<this.expression.length;)if("'"!=this.expression.charAt(this.pos)||"\\"==b.slice(-1))b+=this.expression.charAt(this.pos),
this.pos++;else{this.pos++;this.tokennumber=this.unescape(b,c);a=!0;break}return a},isConst:function(){var a,b;for(b in this.consts){var c=b.length;a=this.expression.substr(this.pos,c);if(b===a)return this.tokennumber=this.consts[b],this.pos+=c,!0}return!1},isOperator:function(){var a=this.expression.charCodeAt(this.pos);if(43===a)this.tokenprio=0,this.tokenindex="+";else if(45===a)this.tokenprio=0,this.tokenindex="-";else if(124===a)if(124===this.expression.charCodeAt(this.pos+1))this.pos++,this.tokenprio=
0,this.tokenindex="||";else return!1;else if(42===a)this.tokenprio=1,this.tokenindex="*";else if(47===a)this.tokenprio=2,this.tokenindex="/";else if(37===a)this.tokenprio=2,this.tokenindex="%";else if(94===a)this.tokenprio=3,this.tokenindex="^";else return!1;this.pos++;return!0},isSign:function(){var a=this.expression.charCodeAt(this.pos-1);return 45===a||43===a?!0:!1},isPositiveSign:function(){return 43===this.expression.charCodeAt(this.pos-1)?!0:!1},isNegativeSign:function(){return 45===this.expression.charCodeAt(this.pos-
1)?!0:!1},isLeftParenth:function(){return 40===this.expression.charCodeAt(this.pos)?(this.pos++,this.tmpprio+=10,!0):!1},isRightParenth:function(){return 41===this.expression.charCodeAt(this.pos)?(this.pos++,this.tmpprio-=10,!0):!1},isComma:function(){return 44===this.expression.charCodeAt(this.pos)?(this.pos++,this.tokenprio=-1,this.tokenindex=",",!0):!1},isWhite:function(){var a=this.expression.charCodeAt(this.pos);return 32===a||9===a||10===a||13===a?(this.pos++,!0):!1},isOp1:function(){for(var a=
"",b=this.pos;b<this.expression.length;b++){var c=this.expression.charAt(b);if(c.toUpperCase()===c.toLowerCase()&&(b===this.pos||"_"!=c&&("0">c||"9"<c)))break;a+=c}return 0<a.length&&a in this.ops1?(this.tokenindex=a,this.tokenprio=5,this.pos+=a.length,!0):!1},isOp2:function(){for(var a="",b=this.pos;b<this.expression.length;b++){var c=this.expression.charAt(b);if(c.toUpperCase()===c.toLowerCase()&&(b===this.pos||"_"!=c&&("0">c||"9"<c)))break;a+=c}return 0<a.length&&a in this.ops2?(this.tokenindex=
a,this.tokenprio=5,this.pos+=a.length,!0):!1},isVar:function(){for(var a="",b=this.pos;b<this.expression.length;b++){var c=this.expression.charAt(b);if(c.toUpperCase()===c.toLowerCase()&&(b===this.pos||"_"!=c&&("0">c||"9"<c)))break;a+=c}b=this.pos;c=this.expression.indexOf("}",this.pos);"{"==this.expression.charAt(b)&&c>b&&(a=this.expression.substring(b,c+1));return 0<a.length?(this.tokenindex=a,this.tokenprio=4,this.pos+=a.length,!0):!1},isComment:function(){return 47===this.expression.charCodeAt(this.pos-
1)&&42===this.expression.charCodeAt(this.pos)?(this.pos=this.expression.indexOf("*/",this.pos)+2,1===this.pos&&(this.pos=this.expression.length),!0):!1}};return a.Parser=B}("undefined"===typeof exports?{}:exports);epiviz.utils.fn={};epiviz.utils.fn.farbtastic=function(a){epiviz.utils.farbtastic(this,a);return this};epiviz.utils.farbtastic=function(a,c){a=$(a).get(0);return a.farbtastic||(a.farbtastic=new epiviz.utils._farbtastic(a,c))};
epiviz.utils._farbtastic=function(a,c){var b=this;$(a).html('<div class="farbtastic"><div class="color"></div><div class="wheel"></div><div class="overlay"></div><div class="h-marker marker"></div><div class="sl-marker marker"></div></div>');var d=$(".farbtastic",a);b.wheel=$(".wheel",a).get(0);b.radius=84;b.square=100;b.width=194;navigator.appVersion.match(/MSIE [0-6]\./)&&$("*",d).each(function(){if("none"!=this.currentStyle.backgroundImage){var a=this.currentStyle.backgroundImage,a=this.currentStyle.backgroundImage.substring(5,
a.length-2);$(this).css({backgroundImage:"none",filter:"progid:DXImageTransform.Microsoft.AlphaImageLoader(enabled=true, sizingMethod=crop, src='"+a+"')"})}});b.linkTo=function(a){"object"==typeof b.callback&&$(b.callback).unbind("keyup",b.updateValue);b.color=null;if("function"==typeof a)b.callback=a;else if("object"==typeof a||"string"==typeof a)b.callback=$(a),b.callback.bind("keyup",b.updateValue),b.callback.get(0).value&&b.setColor(b.callback.get(0).value);return this};b.updateValue=function(a){this.value&&
this.value!=b.color&&b.setColor(this.value)};b.setColor=function(a){var c=b.unpack(a);b.color!=a&&c&&(b.color=a,b.rgb=c,b.hsl=b.RGBToHSL(b.rgb),b.updateDisplay());return this};b.setHSL=function(a){b.hsl=a;b.rgb=b.HSLToRGB(a);b.color=b.pack(b.rgb);b.updateDisplay();return this};b.widgetCoords=function(a){var c,d,h=a.target||a.srcElement,l=b.wheel;if("undefined"!=typeof a.offsetX){var m={x:a.offsetX,y:a.offsetY};for(a=h;a;)a.mouseX=m.x,a.mouseY=m.y,m.x+=a.offsetLeft,m.y+=a.offsetTop,a=a.offsetParent;
a=l;for(m=l=0;a;){if("undefined"!=typeof a.mouseX){c=a.mouseX-l;d=a.mouseY-m;break}l+=a.offsetLeft;m+=a.offsetTop;a=a.offsetParent}for(a=h;a;)a.mouseX=void 0,a.mouseY=void 0,a=a.offsetParent}else m=b.absolutePosition(l),c=(a.pageX||0*(a.clientX+$("html").get(0).scrollLeft))-m.x,d=(a.pageY||0*(a.clientY+$("html").get(0).scrollTop))-m.y;return{x:c-b.width/2,y:d-b.width/2}};b.mousedown=function(a){document.dragging||($(document).bind("mousemove",b.mousemove).bind("mouseup",b.mouseup),document.dragging=
!0);var c=b.widgetCoords(a);b.circleDrag=2*Math.max(Math.abs(c.x),Math.abs(c.y))>b.square;b.mousemove(a);return!1};b.mousemove=function(a){var c=b.widgetCoords(a);b.circleDrag?(a=Math.atan2(c.x,-c.y)/6.28,0>a&&(a+=1),b.setHSL([a,b.hsl[1],b.hsl[2]])):(a=Math.max(0,Math.min(1,-(c.x/b.square)+.5)),c=Math.max(0,Math.min(1,-(c.y/b.square)+.5)),b.setHSL([b.hsl[0],a,c]));return!1};b.mouseup=function(){$(document).unbind("mousemove",b.mousemove);$(document).unbind("mouseup",b.mouseup);document.dragging=!1};
b.updateDisplay=function(){var a=6.28*b.hsl[0];$(".h-marker",d).css({left:Math.round(Math.sin(a)*b.radius+b.width/2)+"px",top:Math.round(-Math.cos(a)*b.radius+b.width/2)+"px"});$(".sl-marker",d).css({left:Math.round(b.square*(.5-b.hsl[1])+b.width/2)+"px",top:Math.round(b.square*(.5-b.hsl[2])+b.width/2)+"px"});$(".color",d).css("backgroundColor",b.pack(b.HSLToRGB([b.hsl[0],1,.5])));"object"==typeof b.callback?($(b.callback).css({backgroundColor:b.color,color:.5<b.hsl[2]?"#000":"#fff"}),$(b.callback).each(function(){this.value&&
this.value!=b.color&&(this.value=b.color)})):"function"==typeof b.callback&&b.callback.call(b,b.color)};b.absolutePosition=function(a){var c={x:a.offsetLeft,y:a.offsetTop};a.offsetParent&&(a=b.absolutePosition(a.offsetParent),c.x+=a.x,c.y+=a.y);return c};b.pack=function(a){var b=Math.round(255*a[0]),c=Math.round(255*a[1]);a=Math.round(255*a[2]);return"#"+(16>b?"0":"")+b.toString(16)+(16>c?"0":"")+c.toString(16)+(16>a?"0":"")+a.toString(16)};b.unpack=function(a){if(7==a.length)return[parseInt("0x"+
a.substring(1,3))/255,parseInt("0x"+a.substring(3,5))/255,parseInt("0x"+a.substring(5,7))/255];if(4==a.length)return[parseInt("0x"+a.substring(1,2))/15,parseInt("0x"+a.substring(2,3))/15,parseInt("0x"+a.substring(3,4))/15]};b.HSLToRGB=function(a){var b,c=a[0];b=a[1];a=a[2];b=.5>=a?a*(b+1):a+b-a*b;a=2*a-b;return[this.hueToRGB(a,b,c+.33333),this.hueToRGB(a,b,c),this.hueToRGB(a,b,c-.33333)]};b.hueToRGB=function(a,b,c){c=0>c?c+1:1<c?c-1:c;return 1>6*c?a+(b-a)*c*6:1>2*c?b:2>3*c?a+(b-a)*(.66666-c)*6:a};
b.RGBToHSL=function(a){var b,c,d,l,m=a[0],p=a[1],q=a[2];b=Math.min(m,Math.min(p,q));a=Math.max(m,Math.max(p,q));c=a-b;l=(b+a)/2;d=0;0<l&&1>l&&(d=c/(.5>l?2*l:2-2*l));b=0;0<c&&(a==m&&a!=p&&(b+=(p-q)/c),a==p&&a!=q&&(b+=2+(q-m)/c),a==q&&a!=m&&(b+=4+(m-p)/c),b/=6);return[b,d,l]};$("*",d).mousedown(b.mousedown);b.setColor("#000000");c&&b.linkTo(c)};epiviz.utils.Iterable=function(){};epiviz.utils.Iterable.prototype.foreach=function(a){};epiviz.utils.IterableArray=function(a){this._array=a};
epiviz.utils.IterableArray.prototype.foreach=function(a){for(var c=0;c<this._array.length&&!a(this._array[c]);++c);};
epiviz.Config=function(a){this.chartSaverLocation=this.dataServerLocation="";this.zoominRatio=.8;this.zoomoutRatio=1.2;this.navigationStepRatio=.2;this.navigationDelay=100;this.defaultWorkspaceSettings={name:epiviz.workspaces.Workspace.DEFAULT_WORKSPACE_NAME,content:{range:{seqName:"chr11",start:998E5,width:3583180},measurements:[],charts:{track:[],plot:[]}}};this.dataProviders=[sprintf("epiviz.data.WebServerDataProvider,%s,%s",epiviz.data.WebServerDataProvider.DEFAULT_ID,epiviz.data.WebServerDataProvider.DEFAULT_SERVER_ENDPOINT)];
this.workspacesDataProvider=sprintf("epiviz.data.WebServerDataProvider,%s,%s","workspaces_provider",epiviz.data.WebServerDataProvider.DEFAULT_SERVER_ENDPOINT);this.cacheUpdateIntervalMilliseconds=3E4;this.maxSearchResults=12;this.chartTypes=[];this.chartSettings={plot:{width:600,height:400,margins:new epiviz.ui.charts.Margins(10,5,5,5),colors:new epiviz.ui.charts.ColorPalette(epiviz.Config.COLORS_BRIGHT)},track:{width:"100%",height:120,margins:new epiviz.ui.charts.Margins(10,5,5,5),colors:new epiviz.ui.charts.ColorPalette(epiviz.Config.COLORS_BRIGHT)}};
this.chartCustomSettings={};this.clustering={algorithms:["epiviz.ui.charts.transform.clustering.NoneClustering","epiviz.ui.charts.transform.clustering.AgglomerativeClustering"],metrics:["epiviz.ui.charts.transform.clustering.EuclideanMetric"],linkages:["epiviz.ui.charts.transform.clustering.CompleteLinkage"]};if(a){for(var c in a)a.hasOwnProperty(c)&&(this[c]=a[c]);if((a=epiviz.ui.WebArgsManager.WEB_ARGS["websocket-host"])&&a.length)for(c=0;c<a.length;++c)this.dataProviders.push(sprintf("epiviz.data.WebsocketDataProvider,%s,%s",
epiviz.data.WebsocketDataProvider.DEFAULT_ID+"-"+c,a[c]))}};epiviz.Config.EPIVIZ_V1_COLORS="#025167 #e7003e #ffcd00 #057d9f #970026 #ffe373 #ff8100".split(" ");epiviz.Config.COLORS_BRIGHT="#1859a9 #ed2d2e #008c47 #010101 #f37d22 #662c91 #a11d20 #b33893".split(" ");epiviz.Config.COLORS_LIGHT="#b8d2eb #f2aeac #d8e4aa #cccccc #f2d1b0 #d4b2d3 #ddb8a9 #ebbfd9".split(" ");epiviz.Config.COLORS_MEDIUM="#599ad3 #f1595f #79c36a #727272 #f9a65a #9e66ab #cd7058 #d77fb3".split(" ");
epiviz.Config.ChartPropertySettings={WIDTH:"width",HEIGHT:"height",MARGINS:"margins",COLORS:"colors"};goog.structs.IntervalTree=function(){this.comparator_=goog.structs.IntervalTree.Interval.compare};goog.structs.IntervalTree.prototype.root_=null;goog.structs.IntervalTree.prototype.comparator_=null;goog.structs.IntervalTree.prototype.minNode_=null;goog.structs.IntervalTree.prototype.maxNode_=null;
goog.structs.IntervalTree.prototype.add=function(a){if(null==this.root_)return this.maxNode_=this.minNode_=this.root_=new goog.structs.IntervalTree.Node(a,a.end()),!0;var c=null;this.traverse_(function(b){var d=null;0<this.comparator_(b.value,a)?(d=b.left,null==b.left&&(c=new goog.structs.IntervalTree.Node(a,a.end(),b),b.left=c,b==this.minNode_&&(this.minNode_=c))):0>this.comparator_(b.value,a)&&(d=b.right,null==b.right&&(c=new goog.structs.IntervalTree.Node(a,a.end(),b),b.right=c,b==this.maxNode_&&
(this.maxNode_=c)));return d});c&&(this.traverse_(function(a){a.count++;a.updateMaxEndpoint();return a.parent},c.parent),this.balance_(c.parent));return!!c};goog.structs.IntervalTree.prototype.remove=function(a){var c=null;this.traverse_(function(b){var d=null;0<this.comparator_(b.value,a)?d=b.left:0>this.comparator_(b.value,a)?d=b.right:(c=b.value,this.removeNode_(b));return d});return c};goog.structs.IntervalTree.prototype.clear=function(){this.maxNode_=this.minNode_=this.root_=null};
goog.structs.IntervalTree.prototype.contains=function(a){var c=!1;this.traverse_(function(b){var d=null,e=this.comparator_(b.value,a);0<e?d=b.left:0>e?d=b.right:c=!0;return d});return c};goog.structs.IntervalTree.prototype.getCount=function(){return this.root_?this.root_.count:0};goog.structs.IntervalTree.prototype.overlaps=function(a){return this.overlaps_(this.root_,a)};goog.structs.IntervalTree.prototype.mergeWith=function(a){var c=this;a.inOrderTraverse(function(a){c.contains(a)||c.add(a)});return this};
goog.structs.IntervalTree.prototype.overlaps_=function(a,c){if(null==a||c.start()>a.maxEndpoint)return[];var b=[];null!=a.left&&(b=b.concat(this.overlaps_(a.left,c)));a.value.overlapsWith(c)&&b.push(a.value);if(c.end()<a.value.start())return b;null!=a.right&&(b=b.concat(this.overlaps_(a.right,c)));return b};goog.structs.IntervalTree.prototype.getKthValue=function(a){return 0>a||a>=this.getCount()?null:this.getKthNode_(a).value};goog.structs.IntervalTree.prototype.getMinimum=function(){return this.getMinNode_().value};
goog.structs.IntervalTree.prototype.getMaximum=function(){return this.getMaxNode_().value};goog.structs.IntervalTree.prototype.getHeight=function(){return this.root_?this.root_.height:0};goog.structs.IntervalTree.prototype.getValues=function(){var a=[];this.inOrderTraverse(function(c){a.push(c)});return a};
goog.structs.IntervalTree.prototype.inOrderTraverse=function(a,c){if(this.root_){var b;c?this.traverse_(function(a){var d=null;0<this.comparator_(a.value,c)?(d=a.left,b=a):0>this.comparator_(a.value,c)?d=a.right:b=a;return d}):b=this.getMinNode_();for(var d=b,e=b.left?b.left:b;null!=d;)if(null!=d.left&&d.left!=e&&d.right!=e)d=d.left;else{if(d.right!=e&&a(d))break;var f=d,d=null!=d.right&&d.right!=e?d.right:d.parent,e=f}}};
goog.structs.IntervalTree.prototype.reverseOrderTraverse=function(a,c){if(this.root_){var b;c?this.traverse_(goog.bind(function(a){var d=null;0<this.comparator_(a.value,c)?d=a.left:(0>this.comparator_(a.value,c)&&(d=a.right),b=a);return d},this)):b=this.getMaxNode_();for(var d=b,e=b.right?b.right:b;null!=d;)if(null!=d.right&&d.right!=e&&d.left!=e)d=d.right;else{if(d.left!=e&&a(d.value))break;var f=d,d=null!=d.left&&d.left!=e?d.left:d.parent,e=f}}};
goog.structs.IntervalTree.prototype.traverse_=function(a,c,b){c=c?c:this.root_;for(b=b?b:null;c&&c!=b;)c=a.call(this,c)};
goog.structs.IntervalTree.prototype.balance_=function(a){this.traverse_(function(a){var b=a.left?a.left.height:0,d=a.right?a.right.height:0;1<b-d?(a.left.right&&(!a.left.left||a.left.left.height<a.left.right.height)&&this.leftRotate_(a.left),this.rightRotate_(a)):1<d-b&&(a.right.left&&(!a.right.right||a.right.right.height<a.right.left.height)&&this.rightRotate_(a.right),this.leftRotate_(a));b=a.left?a.left.height:0;d=a.right?a.right.height:0;a.height=Math.max(b,d)+1;return a.parent},a)};
goog.structs.IntervalTree.prototype.leftRotate_=function(a){a.isLeftChild()?(a.parent.left=a.right,a.right.parent=a.parent):a.isRightChild()?(a.parent.right=a.right,a.right.parent=a.parent):(this.root_=a.right,this.root_.parent=null);var c=a.right;a.right=a.right.left;null!=a.right&&(a.right.parent=a);c.left=a;a.parent=c;c.count=a.count;a.count-=(c.right?c.right.count:0)+1;a.updateMaxEndpoint();c.updateMaxEndpoint()};
goog.structs.IntervalTree.prototype.rightRotate_=function(a){a.isLeftChild()?(a.parent.left=a.left,a.left.parent=a.parent):a.isRightChild()?(a.parent.right=a.left,a.left.parent=a.parent):(this.root_=a.left,this.root_.parent=null);var c=a.left;a.left=a.left.right;null!=a.left&&(a.left.parent=a);c.right=a;a.parent=c;c.count=a.count;a.count-=(c.left?c.left.count:0)+1;a.updateMaxEndpoint();c.updateMaxEndpoint()};
goog.structs.IntervalTree.prototype.removeNode_=function(a){if(null!=a.left||null!=a.right){var c=null,b,d;if(null!=a.left){b=this.getMaxNode_(a.left);d=b.parent;this.traverse_(function(a){a.count--;return a.parent},b);if(b!=a.left){if(b.parent.right=b.left)b.left.parent=b.parent;b.left=a.left;b.left.parent=b;c=b.parent}b.parent=a.parent;b.right=a.right;b.right&&(b.right.parent=b);a==this.maxNode_&&(this.maxNode_=b)}else{b=this.getMinNode_(a.right);d=b.parent;this.traverse_(function(a){a.count--;
return a.parent},b);if(b!=a.right){if(b.parent.left=b.right)b.right.parent=b.parent;b.right=a.right;b.right.parent=b;c=b.parent}b.parent=a.parent;b.left=a.left;b.left&&(b.left.parent=b);a==this.minNode_&&(this.minNode_=b)}b.count=a.count;a.isLeftChild()?a.parent.left=b:a.isRightChild()?a.parent.right=b:this.root_=b;null!=d&&this.traverse_(function(a){a.updateMaxEndpoint();return a.parent},d);this.balance_(c?c:b)}else this.traverse_(function(a){a.count--;return a.parent},a.parent),c=a.parent,a.isLeftChild()?
(this.special=1,a.parent.left=null,a==this.minNode_&&(this.minNode_=a.parent),this.balance_(a.parent)):a.isRightChild()?(a.parent.right=null,a==this.maxNode_&&(this.maxNode_=a.parent),this.balance_(a.parent)):this.clear(),null!=c&&this.traverse_(function(a){a.updateMaxEndpoint();return a.parent},c)};goog.structs.IntervalTree.prototype.getKthNode_=function(a,c){var b=c||this.root_,d=b.left?b.left.count:0;return a<d?this.getKthNode_(a,b.left):a==d?b:this.getKthNode_(a-d-1,b.right)};
goog.structs.IntervalTree.prototype.getMinNode_=function(a){if(!a)return this.minNode_;var c=a;this.traverse_(function(a){var d=null;a.left&&(d=c=a.left);return d},a);return c};goog.structs.IntervalTree.prototype.getMaxNode_=function(a){if(!a)return this.maxNode_;var c=a;this.traverse_(function(a){var d=null;a.right&&(d=c=a.right);return d},a);return c};goog.structs.IntervalTree.Node=function(a,c,b){this.value=a;this.parent=b?b:null;this.count=1;this.maxEndpoint=c};
goog.structs.IntervalTree.Node.prototype.left=null;goog.structs.IntervalTree.Node.prototype.right=null;goog.structs.IntervalTree.Node.prototype.height=1;goog.structs.IntervalTree.Node.prototype.isRightChild=function(){return!!this.parent&&this.parent.right==this};
goog.structs.IntervalTree.Node.prototype.updateMaxEndpoint=function(){this.maxEndpoint=this.value.end();this.right&&this.right.maxEndpoint>this.maxEndpoint&&(this.maxEndpoint=this.right.maxEndpoint);this.left&&this.left.maxEndpoint>this.maxEndpoint&&(this.maxEndpoint=this.left.maxEndpoint)};goog.structs.IntervalTree.Node.prototype.isLeftChild=function(){return!!this.parent&&this.parent.left==this};goog.structs.IntervalTree.Interval=function(){};
goog.structs.IntervalTree.Interval.prototype.overlapsWith=function(a){return!(this.start()>a.end()||this.end()<a.start())};goog.structs.IntervalTree.Interval.prototype.compareTo=function(a){return this.start()<a.start()?-1:this.start()>a.start()?1:this.end()>a.end()?-1:this.end()<a.end()?1:0};goog.structs.IntervalTree.Interval.compare=function(a,c){return a.compareTo(c)};epiviz.events={};epiviz.events.EventListener=function(a){this._id=epiviz.events.EventListener._nextId++;this._updateCallback=a};
epiviz.events.EventListener._nextId=0;epiviz.events.EventListener.prototype.update=function(a){this._updateCallback(a)};epiviz.events.EventListener.prototype.id=function(){return this._id};epiviz.events.Event=function(){this._count=0;this._listeners={};this._firing=!1};epiviz.events.Event.prototype.addListener=function(a){this._listeners[a.id()]||++this._count;this._listeners[a.id()]=a};
epiviz.events.Event.prototype.removeListener=function(a){this._listeners[a.id()]&&(delete this._listeners[a.id()],--this._count)};epiviz.events.Event.prototype.notify=function(a){if(!this._firing&&0!=this._count){this._firing=!0;for(var c in this._listeners)this._listeners.hasOwnProperty(c)&&this._listeners[c].update(a);this._firing=!1}};epiviz.events.Event.prototype.isFiring=function(){return this._firing};epiviz.events.EventResult=function(){this.value=this.errorMessage=this.success=null};
epiviz.data={};epiviz.data.MessageType={REQUEST:"request",RESPONSE:"response"};epiviz.data.Request=function(a,c,b){this._id=a;this._args=c;this._method=b};epiviz.data.Request.Method={GET:"get",POST:"post"};
epiviz.data.Request.Action={GET_ROWS:"getRows",GET_VALUES:"getValues",GET_MEASUREMENTS:"getMeasurements",SEARCH:"search",GET_SEQINFOS:"getSeqInfos",SAVE_WORKSPACE:"saveWorkspace",DELETE_WORKSPACE:"deleteWorkspace",GET_WORKSPACES:"getWorkspaces",ADD_MEASUREMENTS:"addMeasurements",REMOVE_MEASUREMENTS:"removeMeasurements",ADD_SEQINFOS:"addSeqInfos",REMOVE_SEQNAMES:"removeSeqNames",ADD_CHART:"addChart",REMOVE_CHART:"removeChart",CLEAR_DATASOURCE_GROUP_CACHE:"clearDatasourceGroupCache",FLUSH_CACHE:"flushCache",
NAVIGATE:"navigate",REDRAW:"redraw",GET_CURRENT_LOCATION:"getCurrentLocation",WRITE_DEBUG_MSG:"writeMsg"};epiviz.data.Request.createRequest=function(a,c){return new epiviz.data.Request(epiviz.data.Request._nextId++,a,c||epiviz.data.Request.Method.GET)};epiviz.data.Request.fromRawObject=function(a){return new epiviz.data.Request(a.requestId,a.data)};epiviz.data.Request._nextId=0;epiviz.data.Request.prototype.id=function(){return this._id};epiviz.data.Request.prototype.type=function(){return epiviz.data.MessageType.REQUEST};
epiviz.data.Request.prototype.method=function(){return this._method};epiviz.data.Request.prototype.joinArgs=function(a,c){a=a||"=";c=c||"&";var b=sprintf("requestId%s%s",a,this._id),d;for(d in this._args)if(this._args.hasOwnProperty(d))if(Array.isArray(this._args[d]))for(var e=0;e<this._args[d].length;++e)b+=sprintf("%s%s[]%s%s",c,d,a,this._args[d][e]);else b+=sprintf("%s%s%s%s",c,d,a,this._args[d]||"");return b};
epiviz.data.Request.prototype.isEmpty=function(){for(var a in this._args)if(this._args.hasOwnProperty(a))return!1;return!0};epiviz.data.Request.prototype.get=function(a){return a in this._args?this._args[a]:null};epiviz.data.Request.prototype.raw=function(){return{requestId:this._id,type:this.type(),data:epiviz.utils.mapCopy(this._args)}};epiviz.data.Request.emptyRequest=function(){return epiviz.data.Request.createRequest({})};
epiviz.data.Request.getRows=function(a,c){return epiviz.data.Request.createRequest({version:epiviz.EpiViz.VERSION,action:epiviz.data.Request.Action.GET_ROWS,datasource:a.id(),seqName:c.seqName(),start:c.start(),end:c.end(),metadata:a.metadata()})};epiviz.data.Request.getValues=function(a,c){return epiviz.data.Request.createRequest({version:epiviz.EpiViz.VERSION,action:epiviz.data.Request.Action.GET_VALUES,datasource:a.datasource().id(),measurement:a.id(),seqName:c.seqName(),start:c.start(),end:c.end()})};
epiviz.data.Request.getMeasurements=function(){return epiviz.data.Request.createRequest({version:epiviz.EpiViz.VERSION,action:epiviz.data.Request.Action.GET_MEASUREMENTS})};epiviz.data.Request.search=function(a,c){return epiviz.data.Request.createRequest({version:epiviz.EpiViz.VERSION,action:epiviz.data.Request.Action.SEARCH,q:a||"",maxResults:c})};epiviz.data.Request.getSeqInfos=function(){return epiviz.data.Request.createRequest({version:epiviz.EpiViz.VERSION,action:epiviz.data.Request.Action.GET_SEQINFOS})};
epiviz.data.Request.saveWorkspace=function(a){return epiviz.data.Request.createRequest({version:epiviz.EpiViz.VERSION,action:epiviz.data.Request.Action.SAVE_WORKSPACE,id:a.id(),name:a.name(),content:encodeURIComponent(JSON.stringify(a.raw().content))},epiviz.data.Request.Method.POST)};epiviz.data.Request.deleteWorkspace=function(a){return epiviz.data.Request.createRequest({version:epiviz.EpiViz.VERSION,action:epiviz.data.Request.Action.DELETE_WORKSPACE,id:a.id()},epiviz.data.Request.Method.POST)};
epiviz.data.Request.getWorkspaces=function(a,c){return epiviz.data.Request.createRequest({version:epiviz.EpiViz.VERSION,action:epiviz.data.Request.Action.GET_WORKSPACES,q:a||"",ws:c})};epiviz.data.RequestStack=function(){this._requests=[];this._callbacks={};this._dataMap={}};epiviz.data.RequestStack.prototype.pushRequest=function(a,c){this._requests.push(a);this._callbacks[a.id()]=c};
epiviz.data.RequestStack.prototype.serveData=function(a){if(this._callbacks[a.id()])if(0<this._requests.length&&this._requests[0].id()==a.id()){var c=this._callbacks[a.id()];delete this._callbacks[a.id()];this._requests=this._requests.slice(1);for(c(a.data());0<this._requests.length&&this._requests[0].id()in this._dataMap;)c=this._callbacks[this._requests[0].id()],a=this._dataMap[this._requests[0].id()],delete this._callbacks[this._requests[0].id()],delete this._dataMap[this._requests[0].id()],this._requests=
this._requests.slice(1),c(a)}else this._dataMap[a.id()]=a.data()};epiviz.data.RequestStack.prototype.clear=function(){this._requests=[];this._callbacks={};this._dataMap={}};epiviz.data.Response=function(a,c){this._id=a;this._data=c};epiviz.data.Response.prototype.id=function(){return this._id};epiviz.data.Response.prototype.data=function(){return this._data};epiviz.data.Response.prototype.type=function(){return epiviz.data.MessageType.RESPONSE};
epiviz.data.Response.prototype.raw=function(){return{requestId:this._id,type:this.type(),data:this._data}};epiviz.data.Response.fromRawObject=function(a){return new epiviz.data.Response(a.requestId,a.data)};epiviz.measurements={};
epiviz.measurements.Measurement=function(a,c,b,d,e,f,g,h,l,m,p,q){var t=epiviz.measurements.Measurement.Type;this._id=a;this._name=c;this._type=b;this._datasource=b==t.RANGE?this:new epiviz.measurements.Measurement(d,d,t.RANGE,d,e,f,null,"Blocks Track",null,null,null,q);this._datasourceGroup=e;this._dataprovider=f;this._formula=g||null;this._defaultChartType=h||null;this._annotation=l||null;this._minValue=m||0===m?m:null;this._maxValue=p||0===p?p:null;this._metadata=q||null};
epiviz.measurements.Measurement.Type={FEATURE:"feature",RANGE:"range"};epiviz.measurements.Measurement.prototype.id=function(){return this._id};epiviz.measurements.Measurement.prototype.name=function(){return this._name};epiviz.measurements.Measurement.prototype.type=function(){return this._type};epiviz.measurements.Measurement.prototype.datasource=function(){return this._datasource};epiviz.measurements.Measurement.prototype.datasourceId=function(){return this._datasource.id()};
epiviz.measurements.Measurement.prototype.datasourceGroup=function(){return this._datasourceGroup};epiviz.measurements.Measurement.prototype.dataprovider=function(){return this._dataprovider};epiviz.measurements.Measurement.prototype.formula=function(){return this._formula};
epiviz.measurements.Measurement.prototype.formulaStr=function(){if(!this._formula)return"";var a=this._formula.referredMeasurements,c=this._formula.expression.toString(),b;for(b in a)a.hasOwnProperty(b)&&(c=c.replace(new RegExp("\\{"+b+"\\}","g")," {"+a[b].name()+"} "));return c};
epiviz.measurements.Measurement.prototype.evaluate=function(a){var c={},b;for(b in this._formula.referredMeasurements)if(this._formula.referredMeasurements.hasOwnProperty(b)){var d=this._formula.referredMeasurements[b];c["{"+b+"}"]=d.isComputed()?d.evaluate(a):a.get(d)}return this._formula.expression.evaluate(c)};
epiviz.measurements.Measurement.prototype.evaluateArr=function(a){var c={},b;for(b in this._formula.referredMeasurements)if(this._formula.referredMeasurements.hasOwnProperty(b)){var d=this._formula.referredMeasurements[b];c["{"+b+"}"]=d.isComputed()?d.evaluateArr(a):a.get(d)}return this._formula.expression.evaluateArr(c)};epiviz.measurements.Measurement.prototype.defaultChartType=function(){return this._defaultChartType};epiviz.measurements.Measurement.prototype.annotation=function(){return this._annotation};
epiviz.measurements.Measurement.prototype.minValue=function(){return this._minValue};epiviz.measurements.Measurement.prototype.maxValue=function(){return this._maxValue};epiviz.measurements.Measurement.prototype.metadata=function(){return this._metadata};
epiviz.measurements.Measurement.prototype.componentMeasurements=function(){var a=new epiviz.measurements.MeasurementSet;if(!this._formula)return a.add(this),a;for(var c in this._formula.referredMeasurements)this._formula.referredMeasurements.hasOwnProperty(c)&&a.addAll(this._formula.referredMeasurements[c].componentMeasurements());return a};epiviz.measurements.Measurement.prototype.isComputed=function(){return this._formula?!0:!1};
epiviz.measurements.Measurement.prototype.raw=function(a){if(this._formula){var c=this._formula.referredMeasurements,b={},d;for(d in c)c.hasOwnProperty(d)&&(b[d]=a.get(c[d]))}return{id:this._id,name:this._name,type:this._type,datasourceId:this._datasource._id,datasourceGroup:this._datasourceGroup,dataprovider:this._dataprovider,formula:this._formula?{expression:this._formula.expression.toString(),referredMeasurements:b}:null,defaultChartType:this._defaultChartType,annotation:this._annotation,minValue:this._minValue,
maxValue:this._maxValue,metadata:this._metadata}};epiviz.measurements.Measurement.prototype.toString=function(){return this.name()};
epiviz.measurements.Measurement.fromRawObject=function(a,c){var b=null;if(a.formula){for(var b=epiviz.utils.ExpressionParser.parse(a.formula.expression),d={},e=b.variables(),f=0;f<e.length;++f)if(epiviz.utils.stringStartsWith(e[f],"{")&&epiviz.utils.stringEndsWith(e[f],"}")){var g=parseInt(e[f].substring(1,e[f].length-1));d[g]=c[a.formula.referredMeasurements[g]]}b={expression:b,referredMeasurements:d}}return new epiviz.measurements.Measurement(a.id,a.name,a.type,a.datasourceId,a.datasourceGroup,
a.dataprovider,b,a.defaultChartType,a.annotation,a.minValue,a.maxValue,a.metadata)};epiviz.measurements.MeasurementSet=function(a){this._measurementTree={};this._size=0;this._order=[];a&&this.addAll(a)};
epiviz.measurements.MeasurementSet.prototype.add=function(a){a.dataprovider()in this._measurementTree||(this._measurementTree[a.dataprovider()]={});a.type()in this._measurementTree[a.dataprovider()]||(this._measurementTree[a.dataprovider()][a.type()]={});a.datasourceGroup()in this._measurementTree[a.dataprovider()][a.type()]||(this._measurementTree[a.dataprovider()][a.type()][a.datasourceGroup()]={});a.datasource().id()in this._measurementTree[a.dataprovider()][a.type()][a.datasourceGroup()]||(this._measurementTree[a.dataprovider()][a.type()][a.datasourceGroup()][a.datasource().id()]=
{});if(a.id()in this._measurementTree[a.dataprovider()][a.type()][a.datasourceGroup()][a.datasource().id()])return!1;this._measurementTree[a.dataprovider()][a.type()][a.datasourceGroup()][a.datasource().id()][a.id()]={measurement:a,index:this._order.length};this._order.push({measurement:a,contained:!0});++this._size;return!0};
epiviz.measurements.MeasurementSet.prototype.remove=function(a){if(!(a.dataprovider()in this._measurementTree&&a.type()in this._measurementTree[a.dataprovider()]&&a.datasourceGroup()in this._measurementTree[a.dataprovider()][a.type()]&&a.datasource().id()in this._measurementTree[a.dataprovider()][a.type()][a.datasourceGroup()]&&a.id()in this._measurementTree[a.dataprovider()][a.type()][a.datasourceGroup()][a.datasource().id()]))return!1;this._order[this._measurementTree[a.dataprovider()][a.type()][a.datasourceGroup()][a.datasource().id()][a.id()].index].contained=
!1;delete this._measurementTree[a.dataprovider()][a.type()][a.datasourceGroup()][a.datasource().id()][a.id()];--this._size;return!0};epiviz.measurements.MeasurementSet.prototype.addAll=function(a){if(!a||!a.size())return!1;var c=!1,b=this;a.foreach(function(a){b.add(a)&&(c=!0);return!1});return c};epiviz.measurements.MeasurementSet.prototype.removeAll=function(a){var c=!1,b=this;a.foreach(function(a){b.remove(a)&&(c=!0);return!1});return c};
epiviz.measurements.MeasurementSet.prototype.foreach=function(a,c){for(var b=this.iterator(),d=b.first(),e=0;null!==d&&(c&&!c(d)||!a(d,e));d=b.next(),++e);};epiviz.measurements.MeasurementSet.prototype.iterator=function(){return new epiviz.measurements.MeasurementSet.Iterator(this)};epiviz.measurements.MeasurementSet.prototype.subset=function(a){var c=new epiviz.measurements.MeasurementSet;this.foreach(function(a){c.add(a)},a);return c};epiviz.measurements.MeasurementSet.prototype.size=function(){return this._size};
epiviz.measurements.MeasurementSet.prototype.contains=function(a){return a.dataprovider()in this._measurementTree&&a.type()in this._measurementTree[a.dataprovider()]&&a.datasourceGroup()in this._measurementTree[a.dataprovider()][a.type()]&&a.datasource().id()in this._measurementTree[a.dataprovider()][a.type()][a.datasourceGroup()]?a.id()in this._measurementTree[a.dataprovider()][a.type()][a.datasourceGroup()][a.datasource().id()]:!1};epiviz.measurements.MeasurementSet.prototype.first=function(){return this.iterator().first()};
epiviz.measurements.MeasurementSet.prototype.get=function(a){if(a>=this._size||0>a)return null;if(this._size==this._order.length)return this._order[a].measurement;var c=null;this.foreach(function(b,d){return d==a?(c=b,!0):!1});return c};epiviz.measurements.MeasurementSet.prototype.toArray=function(){var a=Array(this._size);this.foreach(function(c,b){a[b]=c});return a};epiviz.measurements.MeasurementSet.prototype.raw=function(){var a=Array(this._size);this.foreach(function(c,b){a[b]=c.raw()});return a};
epiviz.measurements.MeasurementSet.Iterator=function(a){this._parent=a;this._lastIndex=null};epiviz.measurements.MeasurementSet.Iterator.prototype.first=function(){if(0==this._parent.size())return null;for(var a=0;a<this._parent._order.length;++a)if(this._parent._order[a].contained)return this._lastIndex=a,this._parent._order[a].measurement;throw Error("Inconsistent MeasurementSet with size() > 0 and no first element");};
epiviz.measurements.MeasurementSet.Iterator.prototype.next=function(){if(null===this._lastIndex)throw Error("Iterator.next() called before calling Iterator.first()");for(var a=this._lastIndex+1;a<this._parent._order.length;++a)if(this._parent._order[a].contained)return this._lastIndex=a,this._parent._order[a].measurement;this._lastIndex=this._parent._order.length;return null};epiviz.measurements.MeasurementHashtable=function(){this._size=0;this._measurementTree={};this._order=[]};
epiviz.measurements.MeasurementHashtable.prototype.put=function(a,c){if(this.contains(a)){var b=this._measurementTree[a.dataprovider()][a.type()][a.datasourceGroup()][a.datasource().id()][a.id()];this._measurementTree[a.dataprovider()][a.type()][a.datasourceGroup()][a.datasource().id()][a.id()]={key:a,value:c,index:b.index};this._order[b.index]={key:a,value:c,contained:!0}}else a.dataprovider()in this._measurementTree||(this._measurementTree[a.dataprovider()]={}),a.type()in this._measurementTree[a.dataprovider()]||
(this._measurementTree[a.dataprovider()][a.type()]={}),a.datasourceGroup()in this._measurementTree[a.dataprovider()][a.type()]||(this._measurementTree[a.dataprovider()][a.type()][a.datasourceGroup()]={}),a.datasource().id()in this._measurementTree[a.dataprovider()][a.type()][a.datasourceGroup()]||(this._measurementTree[a.dataprovider()][a.type()][a.datasourceGroup()][a.datasource().id()]={}),this._measurementTree[a.dataprovider()][a.type()][a.datasourceGroup()][a.datasource().id()][a.id()]={key:a,
value:c,index:this._order.length},this._order.push({key:a,value:c,contained:!0}),++this._size};epiviz.measurements.MeasurementHashtable.prototype.get=function(a){return this.contains(a)?this._measurementTree[a.dataprovider()][a.type()][a.datasourceGroup()][a.datasource().id()][a.id()].value:null};
epiviz.measurements.MeasurementHashtable.prototype.remove=function(a){if(!this.contains(a))return!1;var c=this._measurementTree[a.dataprovider()][a.type()][a.datasourceGroup()][a.datasource().id()][a.id()];delete this._measurementTree[a.dataprovider()][a.type()][a.datasourceGroup()][a.datasource().id()][a.id()];this._order[c.index].contained=!1;--this._size;return!0};
epiviz.measurements.MeasurementHashtable.prototype.contains=function(a){return a.dataprovider()in this._measurementTree&&a.type()in this._measurementTree[a.dataprovider()]&&a.datasourceGroup()in this._measurementTree[a.dataprovider()][a.type()]&&a.datasource().id()in this._measurementTree[a.dataprovider()][a.type()][a.datasourceGroup()]?a.id()in this._measurementTree[a.dataprovider()][a.type()][a.datasourceGroup()][a.datasource().id()]:!1};
epiviz.measurements.MeasurementHashtable.prototype.clear=function(){this._size=0;this._measurementTree={};this._order=[]};epiviz.measurements.MeasurementHashtable.prototype.isEmpty=function(){return 0==this._size};epiviz.measurements.MeasurementHashtable.prototype.size=function(){return this._size};epiviz.measurements.MeasurementHashtable.prototype.foreach=function(a,c){for(var b=this.iterator(),d=b.first(),e=0;null!==d&&(c&&!c(d.key)||!a(d.key,d.value,e));d=b.next(),++e);};
epiviz.measurements.MeasurementHashtable.prototype.first=function(){return this.iterator().first()};epiviz.measurements.MeasurementHashtable.prototype.iterator=function(){return new epiviz.measurements.MeasurementHashtable.Iterator(this)};epiviz.measurements.MeasurementHashtable.Iterator=function(a){this._parent=a;this._lastIndex=null};
epiviz.measurements.MeasurementHashtable.Iterator.prototype.first=function(){if(0==this._parent.size())return null;for(var a=0;a<this._parent._order.length;++a)if(this._parent._order[a].contained)return this._lastIndex=a,{key:this._parent._order[a].key,value:this._parent._order[a].value};throw Error("Inconsistent MeasurementHashtable with size() > 0 and no first element");};
epiviz.measurements.MeasurementHashtable.Iterator.prototype.next=function(){if(null===this._lastIndex)throw Error("Iterator.next() called before calling Iterator.first()");for(var a=this._lastIndex+1;a<this._parent._order.length;++a)if(this._parent._order[a].contained)return this._lastIndex=a,{key:this._parent._order[a].key,value:this._parent._order[a].value};this._lastIndex=this._parent._order.length;return null};
epiviz.measurements.MeasurementsManager=function(){this._requestMeasurements=new epiviz.events.Event;this._measurementsAdded=new epiviz.events.Event;this._measurementsRemoved=new epiviz.events.Event;this._computedMeasurementsAdded=new epiviz.events.Event;this._computedMeasurementsRemoved=new epiviz.events.Event;this._measurements=new epiviz.measurements.MeasurementSet;this._computedMeasurements=new epiviz.measurements.MeasurementSet};epiviz.measurements.MeasurementsManager.prototype.initialize=function(){this._requestMeasurements.notify()};
epiviz.measurements.MeasurementsManager.prototype.onRequestMeasurements=function(){return this._requestMeasurements};epiviz.measurements.MeasurementsManager.prototype.onMeasurementsAdded=function(){return this._measurementsAdded};epiviz.measurements.MeasurementsManager.prototype.onMeasurementsRemoved=function(){return this._measurementsRemoved};epiviz.measurements.MeasurementsManager.prototype.onComputedMeasurementsAdded=function(){return this._computedMeasurementsAdded};
epiviz.measurements.MeasurementsManager.prototype.onComputedMeasurementsRemoved=function(){return this._computedMeasurementsRemoved};epiviz.measurements.MeasurementsManager.prototype.measurements=function(){return this._measurements};epiviz.measurements.MeasurementsManager.prototype.computedMeasurements=function(){return this._computedMeasurements};
epiviz.measurements.MeasurementsManager.prototype.addMeasurements=function(a){if(a&&a.size()){var c=this;this._measurements.addAll(a);var b=new epiviz.measurements.MeasurementSet;a.foreach(function(a){a.isComputed()&&(b.add(a),c._computedMeasurements.add(a))});this._measurementsAdded.notify(a);0<b.size()&&this._computedMeasurementsAdded.notify(b)}};
epiviz.measurements.MeasurementsManager.prototype.removeMeasurements=function(a){var c=this;this._measurements.removeAll(a);var b=new epiviz.measurements.MeasurementSet;a.foreach(function(a){a.isComputed()&&(b.add(a),c._computedMeasurements.remove(a))});this._measurementsRemoved.notify(a);0<b.size()&&this._computedMeasurementsRemoved.notify(b)};epiviz.measurements.MeasurementsManager.prototype.addMeasurement=function(a){var c=new epiviz.measurements.MeasurementSet;c.add(a);this.addMeasurements(c)};
epiviz.measurements.MeasurementsManager.prototype.removeMeasurement=function(a){var c=new epiviz.measurements.MeasurementSet;c.add(a);this.removeMeasurements(c)};
epiviz.data.DataProvider=function(a){this._id=a;this._requestAddSeqInfos=new epiviz.events.Event;this._requestRemoveSeqNames=new epiviz.events.Event;this._requestAddMeasurements=new epiviz.events.Event;this._requestRemoveMeasurements=new epiviz.events.Event;this._requestAddChart=new epiviz.events.Event;this._requestRemoveChart=new epiviz.events.Event;this._requestFlushCache=new epiviz.events.Event;this._requestClearDatasourceGroupCache=new epiviz.events.Event;this._requestNavigate=new epiviz.events.Event;
this._requestRedraw=new epiviz.events.Event;this._requestCurrentLocation=new epiviz.events.Event};epiviz.data.DataProvider.prototype.id=function(){return this._id};epiviz.data.DataProvider.prototype.getData=function(a,c){c(epiviz.data.Response.fromRawObject({requestId:a.id(),data:null}))};epiviz.data.DataProvider.prototype.onRequestAddSeqInfos=function(){return this._requestAddSeqInfos};epiviz.data.DataProvider.prototype.onRequestRemoveSeqNames=function(){return this._requestRemoveSeqNames};
epiviz.data.DataProvider.prototype.onRequestAddMeasurements=function(){return this._requestAddMeasurements};epiviz.data.DataProvider.prototype.onRequestRemoveMeasurements=function(){return this._requestRemoveMeasurements};epiviz.data.DataProvider.prototype.onRequestAddChart=function(){return this._requestAddChart};epiviz.data.DataProvider.prototype.onRequestRemoveChart=function(){return this._requestRemoveChart};epiviz.data.DataProvider.prototype.onRequestFlushCache=function(){return this._requestFlushCache};
epiviz.data.DataProvider.prototype.onRequestClearDatasourceGroupCache=function(){return this._requestClearDatasourceGroupCache};epiviz.data.DataProvider.prototype.onRequestNavigate=function(){return this._requestNavigate};epiviz.data.DataProvider.prototype.onRequestRedraw=function(){return this._requestRedraw};epiviz.data.DataProvider.prototype.onRequestCurrentLocation=function(){return this._requestCurrentLocation};
epiviz.data.DataProviderFactory=function(a){this._config=a;this._providers={};for(var c=this._size=0;c<this._config.dataProviders.length;++c){a=this._config.dataProviders[c].split(",");var b=epiviz.utils.evaluateFullyQualifiedTypeName(a[0]);b&&(a=epiviz.utils.applyConstructor(b,a.slice(1)),this._providers[a.id()]=a,++this._size)}a=new epiviz.data.EmptyResponseDataProvider;this._providers[a.id()]=a;++this._size;a=this._config.workspacesDataProvider.split(",");c=epiviz.utils.evaluateFullyQualifiedTypeName(a[0]);
this._workspacesDataProvider=epiviz.utils.applyConstructor(c,a.slice(1))};epiviz.data.DataProviderFactory.prototype.foreach=function(a){for(var c in this._providers)if(this._providers.hasOwnProperty(c)&&a(this._providers[c]))break};epiviz.data.DataProviderFactory.prototype.isEmpty=function(){return!this._size};epiviz.data.DataProviderFactory.prototype.size=function(){return this._size};epiviz.data.DataProviderFactory.prototype.get=function(a){return a in this._providers?this._providers[a]:null};
epiviz.data.DataProviderFactory.prototype.workspacesDataProvider=function(){return this._workspacesDataProvider};
epiviz.data.Cache=function(a,c){this._config=a;this._dataProviderFactory=c;this._data={};this._measurementRequestStackMap=new epiviz.measurements.MeasurementHashtable;this._measurementPendingRequestsMap=new epiviz.measurements.MeasurementHashtable;this._lastRequest=null;if(0<this._config.cacheUpdateIntervalMilliseconds){var b=this;this._intervalId=window.setTimeout(function(){b._clearUnneededData()},a.cacheUpdateIntervalMilliseconds)}};
epiviz.data.Cache.prototype.getData=function(a,c,b){var d=epiviz.measurements.Measurement.Type,e=this;this._lastRequest=epiviz.datatypes.GenomicRange.fromStartEnd(a.seqName(),a.start()-a.width(),a.end()+a.width());0<this._config.cacheUpdateIntervalMilliseconds&&(window.clearInterval(this._intervalId),this._intervalId=window.setTimeout(function(){e._clearUnneededData()},this._config.cacheUpdateIntervalMilliseconds));var f=this._extractComputedMeasurements(c);this._updateComputedMeasurementsData(f);
this._serveAvailableData(a,c,b);f=[a,epiviz.datatypes.GenomicRange.fromStartEnd(a.seqName(),Math.max(a.start()-a.width(),0),a.start()),new epiviz.datatypes.GenomicRange(a.seqName(),a.end(),a.width())];this._calcMeasurementNeededRanges(f,c).foreach(function(f,h){var l=e._measurementRequestStackMap.get(f);l||(l=new epiviz.data.RequestStack,e._measurementRequestStackMap.put(f,l));var m;if(0==h.length)m=epiviz.data.Request.emptyRequest(),l.pushRequest(m,function(){e._handleResponse(b,a,c,m,null,f,null)}),
l.serveData(new epiviz.data.Response(m.id(),{}));else for(var p=0;p<h.length;++p){m=f.type()==d.RANGE?epiviz.data.Request.getRows(f,h[p]):epiviz.data.Request.getValues(f,h[p]);(function(d,h){l.pushRequest(h,function(l){e._handleResponse(b,a,c,h,d,f,l)})})(h[p],m);var q=e._measurementPendingRequestsMap.get(f);q||(q={},e._measurementPendingRequestsMap.put(f,q));q[m.id()]=h[p];(e._dataProviderFactory.get(f.dataprovider())||e._dataProviderFactory.get(epiviz.data.EmptyResponseDataProvider.DEFAULT_ID)).getData(m,
function(a){l.serveData(a)})}})};
epiviz.data.Cache.prototype._handleResponse=function(a,c,b,d,e,f,g){e&&(e=f.type()==epiviz.measurements.Measurement.Type.RANGE?new epiviz.datatypes.GenomicRangeArray(f,e,g.globalStartIndex,g.values,g.useOffset):new epiviz.datatypes.FeatureValueArray(f,e,g.globalStartIndex,g.values),this._mergeData(f,e));e=this._extractComputedMeasurements(b);this._updateComputedMeasurementsData(e);delete this._measurementPendingRequestsMap.get(f)[d.id()];this._serveAvailableData(c,b,a)};
epiviz.data.Cache.prototype._serveAvailableData=function(a,c,b){var d=epiviz.measurements.Measurement.Type,e=this,f=[],g;for(g in c)if(c.hasOwnProperty(g)){var h=c[g],l=!0,m=new epiviz.measurements.MeasurementHashtable;(function(b){h.foreach(function(c){var f=e._data[c.datasourceGroup()];if(!f||!f.rowData()||c.type()==d.FEATURE&&!f.values(c))return l=!1,!0;var g=f.rowData(),f=c.type()==d.FEATURE?f.values(c):null,g=a.subtract(g.boundaries());if(g.length||f&&(g=a.subtract(f.boundaries()),g.length))return l=
!1,!0;b.put(c,new epiviz.datatypes.GenomicDataMeasurementWrapper(c,e._data[c.datasourceGroup()]));return!1})})(m);l&&(b(g,m),f.push(g))}for(b=0;b<f.length;++b)delete c[f[b]]};
epiviz.data.Cache.prototype._calcMeasurementNeededRanges=function(a,c){var b=epiviz.measurements.Measurement.Type,d=this,e=new epiviz.measurements.MeasurementHashtable,f;for(f in c)if(c.hasOwnProperty(f)){var g=new epiviz.measurements.MeasurementSet;(function(a){c[f].foreach(function(b){b.componentMeasurements().foreach(function(b){a.add(b);a.add(b.datasource())});b.isComputed()||a.add(b.datasource())})})(g);g.foreach(function(c){var f=null,f=d._data[c.datasourceGroup()];if(!f||c.type()==b.FEATURE&&
!f.values(c))f=a.slice(0);else{var g=c.type()==b.FEATURE?f.values(c):f.rowData();if(g)for(var f=[],g=g.boundaries(),p=0;p<a.length;++p)f=f.concat(a[p].subtract(g));else f=a.slice(0)}if(g=d._measurementPendingRequestsMap.get(c))for(p=0;p<f.length;++p)for(var q in g)if(g.hasOwnProperty(q)){var t=f[p].subtract(g[q]);Array.prototype.splice.apply(f,[p,1].concat(t));if(p>=f.length)break}e.put(c,f)})}return e};
epiviz.data.Cache.prototype._extractComputedMeasurements=function(a){var c=new epiviz.measurements.MeasurementSet,b;for(b in a)a.hasOwnProperty(b)&&a[b].foreach(function(a){a.isComputed()&&c.add(a)});return c};epiviz.data.Cache.prototype._mergeData=function(a,c){var b=epiviz.measurements.Measurement.Type,d=this._data[a.datasourceGroup()];d||(d=new epiviz.datatypes.PartialSummarizedExperiment,this._data[a.datasourceGroup()]=d);a.type()==b.RANGE?d.addRowData(c):d.addValues(c)};
epiviz.data.Cache.prototype._clearUnneededData=function(){if(this._lastRequest){console.log(sprintf("Clearing data outside of range [%7s%10s%10s]",this._lastRequest.seqName(),this._lastRequest.start(),this._lastRequest.end()));var a={},c;for(c in this._data)this._data.hasOwnProperty(c)&&(a[c]=this._data[c].trim(this._lastRequest));this._data=a}};
epiviz.data.Cache.prototype._updateComputedMeasurementsData=function(a){var c=this,b=epiviz.datatypes.GenomicRange;a.foreach(function(a){var e=c._data[a.datasourceGroup()];if(!e)return!1;var f=a.componentMeasurements(),g=null,h=null,l=null;f.foreach(function(a){a=e.values(a);if(!a||!a.boundaries())return l=h=g=null,!0;if(null===l)return g=a.globalStartIndex(),h=a.size(),l=a.boundaries(),null===g;if(a.boundaries().seqName()!=l.seqName())return h=0,!0;if(g<a.globalStartIndex()){h-=a.globalStartIndex()-
g;if(0>h)return h=0,!0;g=a.globalStartIndex();var c=a.boundaries().start(),d=l.end();h>a.size()&&(h=a.size(),d=a.boundaries().end());l=b.fromStartEnd(l.seqName(),c,d)}else if(c=a.size()-g+a.globalStartIndex(),h>c){h=c;if(0>=h)return h=0,!0;l=b.fromStartEnd(l.seqName(),l.start(),a.boundaries().end())}return 0==h?!0:!1});if(null===l)return!1;var m=e.values(a);if(m&&(null===g||m.globalStartIndex()<g&&m.globalStartIndex()+m.size()>g+h))return!1;var p=new epiviz.measurements.MeasurementHashtable,q=null;
if(m&&m.size())return f.foreach(function(a){var b=e.values(a),c=[];if(null!==g)for(var d=g;d<m.globalStartIndex();++d)c.push(b.getByGlobalIndex(d));p.put(a,c)}),q=new epiviz.datatypes.FeatureValueArray(a,b.fromStartEnd(l.seqName(),l.start(),m.boundaries().start()),g,a.evaluateArr(p)),c._mergeData(a,q),p=new epiviz.measurements.MeasurementHashtable,f.foreach(function(a){var b=e.values(a),c=[];if(null!==g)for(var d=m.globalStartIndex()+m.size();d<g+h;++d)c.push(b.getByGlobalIndex(d));p.put(a,c)}),q=
new epiviz.datatypes.FeatureValueArray(a,b.fromStartEnd(l.seqName(),m.boundaries().end(),l.end()),m.globalStartIndex()+m.size(),a.evaluateArr(p)),c._mergeData(a,q),!1;p=new epiviz.measurements.MeasurementHashtable;f.foreach(function(a){var b=e.values(a),c=[];if(null!==g)for(var d=g;d<g+h;++d)c.push(b.getByGlobalIndex(d));p.put(a,c)});q=new epiviz.datatypes.FeatureValueArray(a,l,g,a.evaluateArr(p));c._mergeData(a,q);return!1})};
epiviz.data.Cache.prototype.flush=function(){this._data={};this._measurementRequestStackMap.foreach(function(a,c){c.clear()});this._measurementPendingRequestsMap.clear()};
epiviz.data.Cache.prototype.clearDatasourceGroupCache=function(a){delete this._data[a];this._measurementRequestStackMap.foreach(function(b,c){b.datasourceGroup()==a&&c.clear()});var c=[];this._measurementPendingRequestsMap.foreach(function(b,e){b.datasourceGroup()==a&&c.push(b)});for(var b=0;b<c.length;++b)this._measurementPendingRequestsMap.put(c[b],{})};
epiviz.data.DataManager=function(a,c){this._config=a;this._measurements=new epiviz.measurements.MeasurementSet;this._dataProviderFactory=c;this._cache=new epiviz.data.Cache(a,c);this._requestAddMeasurements=new epiviz.events.Event;this._requestRemoveMeasurements=new epiviz.events.Event;this._requestAddChart=new epiviz.events.Event;this._requestRemoveChart=new epiviz.events.Event;this._requestAddSeqInfos=new epiviz.events.Event;this._requestRemoveSeqNames=new epiviz.events.Event;this._requestNavigate=
new epiviz.events.Event;this._requestRedraw=new epiviz.events.Event;this._flushCache=new epiviz.events.Event;this._clearDatasourceGroupCache=new epiviz.events.Event;this._requestCurrentLocation=new epiviz.events.Event;this._registerProviderAddMeasurements();this._registerProviderRemoveMeasurements();this._registerProviderAddChart();this._registerProviderRemoveChart();this._registerProviderAddSeqInfos();this._registerProviderRemoveSeqNames();this._registerProviderNavigate();this._registerProviderRedraw();
this._registerProviderFlushCache();this._registerProviderClearDatasourceGroupCache();this._registerProviderGetCurrentLocation()};epiviz.data.DataManager.prototype.onRequestAddMeasurements=function(){return this._requestAddMeasurements};epiviz.data.DataManager.prototype.onRequestRemoveMeasurements=function(){return this._requestRemoveMeasurements};epiviz.data.DataManager.prototype.onRequestAddChart=function(){return this._requestAddChart};epiviz.data.DataManager.prototype.onRequestRemoveChart=function(){return this._requestRemoveChart};
epiviz.data.DataManager.prototype.onRequestAddSeqInfos=function(){return this._requestAddSeqInfos};epiviz.data.DataManager.prototype.onRequestRemoveSeqNames=function(){return this._requestRemoveSeqNames};epiviz.data.DataManager.prototype.onRequestNavigate=function(){return this._requestNavigate};epiviz.data.DataManager.prototype.onRequestRedraw=function(){return this._requestRedraw};epiviz.data.DataManager.prototype.onClearDatasourceGroupCache=function(){return this._clearDatasourceGroupCache};
epiviz.data.DataManager.prototype.onFlushCache=function(){return this._flushCache};epiviz.data.DataManager.prototype.onRequestCurrentLocation=function(){return this._requestCurrentLocation};
epiviz.data.DataManager.prototype.getSeqInfos=function(a){var c=this,b=0,d={},e=[];this._dataProviderFactory.foreach(function(f){f.getData(epiviz.data.Request.getSeqInfos(),function(f){if(f=f.data())for(var h=0;h<f.length;++h)f[h][0]in d||(e.push(epiviz.datatypes.SeqInfo.fromRawObject(f[h])),d[f[h][0]]=!0);++b<c._dataProviderFactory.size()||a(e.sort(epiviz.datatypes.SeqInfo.compare))})})};
epiviz.data.DataManager.prototype.getMeasurements=function(a){var c=this,b=new epiviz.measurements.MeasurementSet,d=0;this._dataProviderFactory.foreach(function(e){e.getData(epiviz.data.Request.getMeasurements(),function(f){if(f=f.data())for(var g=f.id?f.id.length||0:0,h=0;h<g;++h)b.add(new epiviz.measurements.Measurement(f.id[h],f.name[h],f.type[h],f.datasourceId[h],f.datasourceGroup[h],e.id(),null,f.defaultChartType[h],f.annotation[h],f.minValue[h],f.maxValue[h],f.metadata[h]));++d<c._dataProviderFactory.size()||
a(b)})})};epiviz.data.DataManager.prototype.getData=function(a,c,b){this._cache.getData(a,c,b)};
epiviz.data.DataManager.prototype.getWorkspaces=function(a,c,b){var d=this._dataProviderFactory.workspacesDataProvider();if(!d)throw Error("Invalid data provider for workspaces (see Config.workspaceDataProvider)");d.getData(epiviz.data.Request.getWorkspaces(c,b),function(b){b=b.data();var c=[];if(b&&b.length)for(var d=0;d<b.length;++d)c.push({id:b[d].id,name:b[d].name,content:JSON.parse(b[d].content)});a(c)})};
epiviz.data.DataManager.prototype.saveWorkspace=function(a,c){var b=this._dataProviderFactory.workspacesDataProvider();if(!b)throw Error("Invalid data provider for workspaces (see Config.workspaceDataProvider)");b.getData(epiviz.data.Request.saveWorkspace(a),function(a){a=a.data();c(a)})};
epiviz.data.DataManager.prototype.deleteWorkspace=function(a){var c=this._dataProviderFactory.workspacesDataProvider();if(!c)throw Error("Invalid data provider for workspaces (see Config.workspaceDataProvider)");c.getData(epiviz.data.Request.deleteWorkspace(a),function(a){a.data()})};
epiviz.data.DataManager.prototype.search=function(a,c){var b=this,d=this._dataProviderFactory.size(),e=[];this._dataProviderFactory.foreach(function(f){f.getData(epiviz.data.Request.search(c,b._config.maxSearchResults),function(b){(b=b.data())&&epiviz.utils.arrayAppend(e,b);--d;d||a(e)})})};epiviz.data.DataManager.prototype.flushCache=function(){this._cache.flush();this._flushCache.notify()};
epiviz.data.DataManager.prototype.clearDatasourceGroupCache=function(a){this._cache.clearDatasourceGroupCache(a);this._clearDatasourceGroupCache.notify({datasourceGroup:a})};epiviz.data.DataManager.prototype._registerProviderAddMeasurements=function(){var a=this;this._dataProviderFactory.foreach(function(c){c.onRequestAddMeasurements().addListener(new epiviz.events.EventListener(function(b){a._requestAddMeasurements.notify(b)}))})};
epiviz.data.DataManager.prototype._registerProviderRemoveMeasurements=function(){var a=this;this._dataProviderFactory.foreach(function(c){c.onRequestRemoveMeasurements().addListener(new epiviz.events.EventListener(function(b){a._requestRemoveMeasurements.notify(b)}))})};epiviz.data.DataManager.prototype._registerProviderAddChart=function(){var a=this;this._dataProviderFactory.foreach(function(c){c.onRequestAddChart().addListener(new epiviz.events.EventListener(function(b){a._requestAddChart.notify(b)}))})};
epiviz.data.DataManager.prototype._registerProviderRemoveChart=function(){var a=this;this._dataProviderFactory.foreach(function(c){c.onRequestRemoveChart().addListener(new epiviz.events.EventListener(function(b){a._requestRemoveChart.notify(b)}))})};
epiviz.data.DataManager.prototype._registerProviderAddSeqInfos=function(){var a=this;this._dataProviderFactory.foreach(function(c){c.onRequestAddSeqInfos().addListener(new epiviz.events.EventListener(function(b){for(var c=[],e=0;e<b.seqInfos.length;++e)c.push(epiviz.datatypes.SeqInfo.fromRawObject(b.seqInfos[e]));a._requestAddSeqInfos.notify({seqInfos:c,result:b.result})}))})};epiviz.data.DataManager.prototype._registerProviderRemoveSeqNames=function(){var a=this;this._dataProviderFactory.foreach(function(c){c.onRequestRemoveSeqNames().addListener(new epiviz.events.EventListener(function(b){a._requestRemoveSeqNames.notify(b)}))})};
epiviz.data.DataManager.prototype._registerProviderNavigate=function(){var a=this;this._dataProviderFactory.foreach(function(c){c.onRequestNavigate().addListener(new epiviz.events.EventListener(function(b){a._requestNavigate.notify(b)}))})};epiviz.data.DataManager.prototype._registerProviderRedraw=function(){var a=this;this._dataProviderFactory.foreach(function(c){c.onRequestRedraw().addListener(new epiviz.events.EventListener(function(b){a._requestRedraw.notify(b)}))})};
epiviz.data.DataManager.prototype._registerProviderClearDatasourceGroupCache=function(){var a=this;this._dataProviderFactory.foreach(function(c){c.onRequestClearDatasourceGroupCache().addListener(new epiviz.events.EventListener(function(b){a.clearDatasourceGroupCache(b.datasourceGroup);b.result.success=!0}))})};
epiviz.data.DataManager.prototype._registerProviderFlushCache=function(){var a=this;this._dataProviderFactory.foreach(function(c){c.onRequestFlushCache().addListener(new epiviz.events.EventListener(function(b){a.flushCache();b.result.success=!0}))})};epiviz.data.DataManager.prototype._registerProviderGetCurrentLocation=function(){var a=this;this._dataProviderFactory.foreach(function(c){c.onRequestCurrentLocation().addListener(new epiviz.events.EventListener(function(b){a._requestCurrentLocation.notify(b)}))})};
epiviz.data.EmptyResponseDataProvider=function(){epiviz.data.DataProvider.call(this,epiviz.data.EmptyResponseDataProvider.DEFAULT_ID)};epiviz.data.EmptyResponseDataProvider.prototype=epiviz.utils.mapCopy(epiviz.data.DataProvider.prototype);epiviz.data.EmptyResponseDataProvider.constructor=epiviz.data.EmptyResponseDataProvider;epiviz.data.EmptyResponseDataProvider.DEFAULT_ID="empty";
epiviz.data.EmptyResponseDataProvider.prototype.getData=function(a,c){var b=a.id();switch(a.get("action")){case epiviz.data.Request.Action.GET_ROWS:c(epiviz.data.Response.fromRawObject({data:{values:{id:null,start:[],end:[],strand:[],metadata:{my_metadata:[]}},globalStartIndex:null,useOffset:!1},requestId:b}));break;case epiviz.data.Request.Action.GET_VALUES:c(epiviz.data.Response.fromRawObject({data:{values:[],globalStartIndex:null},requestId:b}));break;case epiviz.data.Request.Action.GET_MEASUREMENTS:c(epiviz.data.Response.fromRawObject({requestId:a.id(),
data:{id:[],name:[],type:[],datasourceId:[],datasourceGroup:[],defaultChartType:[],annotation:[],minValue:[],maxValue:[],metadata:[]}}));break;case epiviz.data.Request.Action.GET_SEQINFOS:c(epiviz.data.Response.fromRawObject({requestId:a.id(),data:[]}));break;case epiviz.data.Request.Action.SEARCH:c(epiviz.data.Response.fromRawObject({requestId:a.id(),data:[]}));break;case epiviz.data.Request.Action.SAVE_WORKSPACE:c(epiviz.data.Response.fromRawObject({requestId:a.id(),data:[]}));break;case epiviz.data.Request.Action.DELETE_WORKSPACE:c(epiviz.data.Response.fromRawObject({requestId:a.id(),
data:[]}));break;case epiviz.data.Request.Action.GET_WORKSPACES:c(epiviz.data.Response.fromRawObject({requestId:a.id(),data:[]}));break;default:epiviz.data.DataProvider.prototype.getData.call(this,a,c)}};
epiviz.data.WebsocketDataProvider=function(a,c){epiviz.data.DataProvider.call(this,a||epiviz.data.WebsocketDataProvider.DEFAULT_ID);this._websocketHost=c;this._socket=null;this._useUI="true"!=epiviz.ui.WebArgsManager.WEB_ARGS.websocketNoUI;this._debug="true"==epiviz.ui.WebArgsManager.WEB_ARGS.debug;this._callbacks={};this._requestsStack=[];this._initialize()};epiviz.data.WebsocketDataProvider.prototype=epiviz.utils.mapCopy(epiviz.data.DataProvider.prototype);
epiviz.data.WebsocketDataProvider.constructor=epiviz.data.WebsocketDataProvider;epiviz.data.WebsocketDataProvider.DEFAULT_ID="websocket";
epiviz.data.WebsocketDataProvider.prototype._initialize=function(){if(this._websocketHost&&"None"!=this._websocketHost)try{this._socket=new WebSocket(this._websocketHost);this._log("WebSocket - status "+this._socket.readyState);var a=this;this._socket.onopen=function(){a._onSocketOpen()};this._socket.onmessage=function(b){a._onSocketMessage(b)};this._socket.onclose=function(){a._onSocketClose()}}catch(c){this._log(c.toString())}};
epiviz.data.WebsocketDataProvider.prototype._onSocketOpen=function(){for(var a=0;a<this._requestsStack.length;++a)this._socket.send(this._requestsStack[a]);this._requestsStack=[]};epiviz.data.WebsocketDataProvider.prototype._onSocketClose=function(){this._socket=null};epiviz.data.WebsocketDataProvider.prototype._sendMessage=function(a){this.connected()&&this._socket.readyState?this._socket.send(a):this._requestsStack.push(a)};
epiviz.data.WebsocketDataProvider.prototype._onSocketMessage=function(a){this._log("Local Controller Received: "+a.data);var c=JSON.parse(a.data);if(c.type==epiviz.data.MessageType.RESPONSE)a=epiviz.data.Response.fromRawObject(c),c=this._callbacks[a.id()],delete this._callbacks[a.id()],c(a);else if(c.type==epiviz.data.MessageType.REQUEST)switch(a=epiviz.data.Request.Action,c=epiviz.data.Request.fromRawObject(c),c.get("action")){case a.ADD_MEASUREMENTS:this._addMeasurements(c);break;case a.REMOVE_MEASUREMENTS:this._removeMeasurements(c);
break;case a.ADD_SEQINFOS:this._addSeqInfos(c);break;case a.REMOVE_SEQNAMES:this._removeSeqNames(c);break;case a.ADD_CHART:this._addChart(c);break;case a.REMOVE_CHART:this._removeChart(c);break;case a.CLEAR_DATASOURCE_GROUP_CACHE:this._clearDatasourceGroupCache(c);break;case a.FLUSH_CACHE:this._flushCache(c);break;case a.NAVIGATE:this._navigate(c);break;case a.REDRAW:this._redraw(c);break;case a.GET_CURRENT_LOCATION:this._getCurrentLocation(c);break;case a.WRITE_DEBUG_MSG:this._writeDebugMsg(c)}};
epiviz.data.WebsocketDataProvider.prototype._log=function(a){this._debug&&console.log(a)};epiviz.data.WebsocketDataProvider.prototype._fireEvent=function(a,c){this._useUI?a.notify(c):c.result.success=!0};epiviz.data.WebsocketDataProvider.prototype.connected=function(){return null!=this._socket};epiviz.data.WebsocketDataProvider.prototype.getData=function(a,c){var b=JSON.stringify(a.raw());this._callbacks[a.id()]=c;this._sendMessage(b)};
epiviz.data.WebsocketDataProvider.prototype._addMeasurements=function(a){for(var c=new epiviz.events.EventResult,b=new epiviz.measurements.MeasurementSet,d=JSON.parse(a.get("measurements")),e=0;e<d.length;++e)b.add(new epiviz.measurements.Measurement(d[e].id,d[e].name,d[e].type,d[e].datasourceId,d[e].datasourceGroup,this.id(),null,d[e].defaultChartType,d[e].annotation,d[e].minValue,d[e].maxValue,d[e].metadata));this._fireEvent(this.onRequestAddMeasurements(),{measurements:b,result:c});a=new epiviz.data.Response(a.id(),
c);this._sendMessage(JSON.stringify(a.raw()))};
epiviz.data.WebsocketDataProvider.prototype._removeMeasurements=function(a){for(var c=new epiviz.events.EventResult,b=new epiviz.measurements.MeasurementSet,d=JSON.parse(a.get("measurements")),e=0;e<d.length;++e)b.add(new epiviz.measurements.Measurement(d[e].id,d[e].name,d[e].type,d[e].datasourceId,d[e].datasourceGroup,this.id(),null,d[e].defaultChartType,d[e].annotation,d[e].minValue,d[e].maxValue,d[e].metadata));this._fireEvent(this.onRequestRemoveMeasurements(),{measurements:b,result:c});a=new epiviz.data.Response(a.id(),
c);this._sendMessage(JSON.stringify(a.raw()))};epiviz.data.WebsocketDataProvider.prototype._addSeqInfos=function(a){var c=new epiviz.events.EventResult,b=JSON.parse(a.get("seqInfos"));this._fireEvent(this.onRequestAddSeqInfos(),{seqInfos:b,result:c});a=new epiviz.data.Response(a.id(),c);this._sendMessage(JSON.stringify(a.raw()))};
epiviz.data.WebsocketDataProvider.prototype._removeSeqNames=function(a){var c=new epiviz.events.EventResult,b=JSON.parse(a.get("seqNames"));this._fireEvent(this.onRequestRemoveSeqNames(),{seqNames:b,result:c});a=new epiviz.data.Response(a.id(),c);this._sendMessage(JSON.stringify(a.raw()))};
epiviz.data.WebsocketDataProvider.prototype._addChart=function(a){for(var c=new epiviz.events.EventResult,b=new epiviz.measurements.MeasurementSet,d=JSON.parse(a.get("measurements")),e=0;e<d.length;++e)b.add(new epiviz.measurements.Measurement(d[e].id,d[e].name,d[e].type,d[e].datasourceId,d[e].datasourceGroup,this.id(),null,d[e].defaultChartType,d[e].annotation,d[e].minValue,d[e].maxValue,d[e].metadata));this._fireEvent(this.onRequestAddChart(),{type:a.get("type"),measurements:b,result:c});a=new epiviz.data.Response(a.id(),
c);this._sendMessage(JSON.stringify(a.raw()))};epiviz.data.WebsocketDataProvider.prototype._removeChart=function(a){var c=a.get("chartId"),b=new epiviz.events.EventResult;this._fireEvent(this.onRequestRemoveChart(),{id:c,result:b});a=new epiviz.data.Response(a.id(),b);this._sendMessage(JSON.stringify(a.raw()))};
epiviz.data.WebsocketDataProvider.prototype._clearDatasourceGroupCache=function(a){var c=new epiviz.events.EventResult;this._fireEvent(this.onRequestClearDatasourceGroupCache(),{datasourceGroup:a.get("datasourceGroup"),result:c});a=new epiviz.data.Response(a.id(),c);this._sendMessage(JSON.stringify(a.raw()))};
epiviz.data.WebsocketDataProvider.prototype._flushCache=function(a){var c=new epiviz.events.EventResult;this._fireEvent(this.onRequestFlushCache(),{result:c});a=new epiviz.data.Response(a.id(),c);this._sendMessage(JSON.stringify(a.raw()))};
epiviz.data.WebsocketDataProvider.prototype._navigate=function(a){var c=JSON.parse(a.get("range")),b=new epiviz.events.EventResult;this._fireEvent(this.onRequestNavigate(),{range:epiviz.datatypes.GenomicRange.fromStartEnd(c.seqName,c.start,c.end),result:b});a=new epiviz.data.Response(a.id(),b);this._sendMessage(JSON.stringify(a.raw()))};
epiviz.data.WebsocketDataProvider.prototype._redraw=function(a){var c=new epiviz.events.EventResult;this._fireEvent(this.onRequestRedraw(),{result:c});a=new epiviz.data.Response(a.id(),c);this._sendMessage(JSON.stringify(a.raw()))};epiviz.data.WebsocketDataProvider.prototype._getCurrentLocation=function(a){var c=new epiviz.events.EventResult;this._fireEvent(this.onRequestCurrentLocation(),{result:c});a=new epiviz.data.Response(a.id(),c);this._sendMessage(JSON.stringify(a.raw()))};
epiviz.data.WebsocketDataProvider.prototype._writeDebugMsg=function(a){var c=a.get("msg"),b=document.createElement("pre");b.innerHTML=c.replace(/&/g,"&amp;").replace(/\\</g,"&lt;");a=new epiviz.data.Response(a.id(),{msg:"that msg"});document.getElementById("chart-container").appendChild(b);this._sendMessage(JSON.stringify(a.raw()))};epiviz.data.WebServerDataProvider=function(a,c){epiviz.data.DataProvider.call(this,a||epiviz.data.WebServerDataProvider.DEFAULT_ID);this._serverEndpoint=c||epiviz.data.WebServerDataProvider.DEFAULT_SERVER_ENDPOINT};
epiviz.data.WebServerDataProvider.prototype=epiviz.utils.mapCopy(epiviz.data.DataProvider.prototype);epiviz.data.WebServerDataProvider.constructor=epiviz.data.WebServerDataProvider;epiviz.data.WebServerDataProvider.DEFAULT_ID="umd";epiviz.data.WebServerDataProvider.DEFAULT_SERVER_ENDPOINT="data/main.php";
epiviz.data.WebServerDataProvider.prototype.getData=function(a,c){if(!a.isEmpty())if(a.method()==epiviz.data.Request.Method.GET){var b=sprintf("%s?%s",this._serverEndpoint,a.joinArgs());epiviz.data.WebServerDataProvider.makeGetRequest(b,function(a){c(epiviz.data.Response.fromRawObject(a))})}else epiviz.data.WebServerDataProvider.makePostRequest(this._serverEndpoint,a.joinArgs(),function(a){c(epiviz.data.Response.fromRawObject(a))})};
epiviz.data.WebServerDataProvider.makeGetRequest=function(a,c){var b=$.ajax({type:"get",url:a,dataType:"json",async:!0,cache:!1,processData:!0});b.done(function(a){c(a)});b.fail(function(a,b,c){});b.always(function(){})};
epiviz.data.WebServerDataProvider.makePostRequest=function(a,c,b){a=$.ajax({type:"post",url:a,data:c,dataType:"json",async:!0,cache:!1,processData:!0});a.done(function(a,c,f){b(a)});a.fail(function(a,b,c){console.error("The following error occured: "+b,c);$("#php-response").append(a.responseText)});a.always(function(){})};
epiviz.data.MockDataProvider=function(a){epiviz.data.DataProvider.call(this,a||epiviz.data.MockDataProvider.DEFAULT_ID);this._measurements=new epiviz.measurements.MeasurementSet;this._m2=this._m1=null;this._values=new epiviz.measurements.MeasurementHashtable;this._coveredRegions=[epiviz.datatypes.GenomicRange.fromStartEnd("chr6",103839409,107422589),epiviz.datatypes.GenomicRange.fromStartEnd("myChr",103839409,107422589)];this._addSeqnamesButton=$("#button-mock-add-seqnames");this._removeSeqnamesButton=
$("#button-mock-remove-seqnames");this._addMeasurementsButton=$("#button-mock-add-measurements");this._removeMeasurementsButton=$("#button-mock-remove-measurements");this._addChartButton=$("#button-mock-add-chart");this._removeChartButton=$("#button-mock-remove-chart");this._clearCacheButton=$("#button-mock-clear-cache");this._navigateButton=$("#button-mock-navigate");this._initialize();this._initializeButtonHandlers()};epiviz.data.MockDataProvider.prototype=epiviz.utils.mapCopy(epiviz.data.DataProvider.prototype);
epiviz.data.MockDataProvider.constructor=epiviz.data.MockDataProvider;epiviz.data.MockDataProvider.DEFAULT_ID="mock-provider";
epiviz.data.MockDataProvider.prototype._initialize=function(){var a=new epiviz.measurements.Measurement("column_1_feature","Mock Feature Measurement 1",epiviz.measurements.Measurement.Type.FEATURE,"mock_gene_expression","affymetrix_probeset",this.id(),null,"Scatter Plot",null,-5,25,["probe"]),c=new epiviz.measurements.Measurement("table_2_range","Mock Range Measurement 2",epiviz.measurements.Measurement.Type.RANGE,"table_2_range","some_datasource_group",this.id(),null,"Blocks Track",null,null,null,
null);this._m1=a;this._m2=c;this._measurements.add(a);this._values.put(a,{chr6:{values:[-1.8223838498414,-.61258676716977,-.47866833545712,-.054737753101232,-.17442192545694,-.40962816952573,3.1485057281967,3.4216926668387,1.2040975523491,6.1801932225364,6.2102197272821,2.884041505725,4.5749627572691,12.327818860502,2.1696605100473,1.6726685919334,1.3730964627525,2.572793075785,.66402453937773,.29669898727439,3.1745684364685,2.0365248658682],globalStartIndex:25879}});this._values.put(a.datasource(),
{chr6:{values:{id:[25879,25880,25881,25882,25883,25884,25885,25886,25887,25888,25889,25890,25891,25892,25893,25894,25895,25896,25897,25898,25899,25900],start:[105175968,105404923,105544697,105544697,105585562,105606155,105725440,105725440,106534195,106534195,106632351,106632351,106632351,106959730,107019846,107019846,107077453,107077453,107077453,107077489,107349417,107386386],end:[105307794,105531207,105585049,105585049,105617820,105627735,105850959,105850959,106557813,106557813,106773666,106773666,
106773666,107018326,107077362,107077362,107116292,107116292,107116292,107101698,107372546,107436473],strand:"*",metadata:{probe:"227471_at 229349_at 223853_at 228783_at 232492_at 219926_at 204117_at 37950_at 217192_s_at 228964_at 202511_s_at 202512_s_at 210639_s_at 212543_at 1555679_a_at 224509_s_at 218948_at 218949_s_at 241933_at 233089_at 223576_at 227920_at".split(" ")}},globalStartIndex:25879}});this._values.put(c,{chr6:{values:{id:[10693,10694,10695,10696,10697,10698,10699,10700,10701,10702],
start:[101857270,105250651,105309133,105411671,105596427,105627861,105856970,105962958,106046989,106105087],end:[105211359,105271461,105383016,105571044,105627384,105719343,105932269,105994851,106071935,106148917],strand:"*"},globalStartIndex:10693},myChr:{values:{id:[10703,10704,10705,10706,10707,10708,10709,10710,10711],start:[106196924,106299261,106341705,106458601,106568336,106773852,107067335,107303124,107374709],end:[106234848,106319337,106416368,106529963,106596204,106803274,107077437,107342199,
107384388],strand:"*"},globalStartIndex:10703}})};
epiviz.data.MockDataProvider.prototype._initializeButtonHandlers=function(){var a=this;this._addSeqnamesButton.button().click(function(){var b=new epiviz.events.EventResult;a.onRequestAddSeqInfos().notify({seqInfos:[["otherChr",1,1E9],["andYetAnotherChr",1,1E9]],result:b});alert("Adding seqnames was "+(b.success?"successful!":"unsuccessful. Error: "+b.errorMessage))});this._removeSeqnamesButton.button().click(function(){var b=new epiviz.events.EventResult;a.onRequestRemoveSeqNames().notify({seqNames:["chr1",
"andYetAnotherChr"],result:b});alert("Removing seqnames was "+(b.success?"successful!":"unsuccessful. Error: "+b.errorMessage))});this._addMeasurementsButton.button().click(function(){var b=new epiviz.events.EventResult,c=new epiviz.measurements.MeasurementSet;c.add(a._m2);a._measurements.add(a._m2);a.onRequestAddMeasurements().notify({measurements:c,result:b});alert("Adding measurements was "+(b.success?"successful!":"unsuccessful. Error: "+b.errorMessage))});this._removeMeasurementsButton.button().click(function(){var b=
new epiviz.events.EventResult,c=new epiviz.measurements.MeasurementSet;c.add(a._m2);a._measurements.remove(a._m2);a.onRequestRemoveMeasurements().notify({measurements:c,result:b});alert("Removing measurements was "+b.success?"successful!":"unsuccessful. Error: "+b.errorMessage)});var c=[];this._addChartButton.button().click(function(){var b=new epiviz.events.EventResult,d=new epiviz.measurements.MeasurementSet;d.add(a._m2);a.onRequestAddChart().notify({type:"epiviz.plugins.charts.BlocksTrack",measurements:d,
result:b});alert("Adding chart was "+(b.success?"successful! Chart id is: "+b.value.id:"unsuccessful. Error: "+b.errorMessage));b.success&&c.push(b.value.id)});this._removeChartButton.button().click(function(){if(c.length){var b=c.pop(),d=new epiviz.events.EventResult;a.onRequestRemoveChart().notify({id:b,result:d});alert("Removing chart was "+(d.success?"successful!":"unsuccessful. Error: "+d.errorMessage))}});this._clearCacheButton.button().click(function(){});this._navigateButton.button().click(function(){var b=
new epiviz.events.EventResult;a.onRequestNavigate().notify({range:epiviz.datatypes.GenomicRange.fromStartEnd("chr6",103839409,107422589),result:b});alert("Navigate was "+(b.success?"successful!":"unsuccessful. Error: "+b.errorMessage))})};epiviz.data.MockDataProvider.prototype.connected=function(){return!0};
epiviz.data.MockDataProvider.prototype.getData=function(a,c){var b=a.id(),d=a.get("action"),e=a.get("chr"),f=a.get("start"),g=a.get("end"),h=a.get("datasource");switch(d){case epiviz.data.Request.Action.GET_ROWS:d=this._measurements.subset(function(a){return a.datasource().datasourceId()==h}).first();if(!d)break;d=d.datasource();d=this._values.get(d)[e];if(!d||e!=this._coveredRegions[0].seqName()&&e!=this._coveredRegions[1].seqName()||f>this._coveredRegions[0].end()||g<this._coveredRegions[0].start()){c(epiviz.data.Response.fromRawObject({data:{values:{id:[],
start:[],end:[],strand:"*",metadata:{probe:[]}},globalStartIndex:null},requestId:b}));break}c(epiviz.data.Response.fromRawObject({requestId:a.id(),data:d}));break;case epiviz.data.Request.Action.GET_VALUES:d=this._measurements.subset(function(a){return a.datasource().datasourceId()==h}).first();if(!d)break;d=this._values.get(d)[e];if(!d||e!=this._coveredRegions[0].seqName()&&e!=this._coveredRegions[1].seqName()||f>this._coveredRegions[0].end()||g<this._coveredRegions[0].start()){c(epiviz.data.Response.fromRawObject({data:{values:[],
globalStartIndex:null},requestId:b}));break}d.requestId=b;c(epiviz.data.Response.fromRawObject({requestId:a.id(),data:d}));break;case epiviz.data.Request.Action.GET_MEASUREMENTS:c(epiviz.data.Response.fromRawObject({requestId:a.id(),type:epiviz.data.MessageType.RESPONSE,data:{id:[this._m1.id(),this._m2.id()],name:[this._m1.name(),this._m2.name()],type:[this._m1.type(),this._m2.type()],datasourceId:[this._m1.datasourceId(),this._m2.datasourceId()],datasourceGroup:[this._m1.datasourceGroup(),this._m2.datasourceGroup()],
defaultChartType:[this._m1.defaultChartType(),this._m2.defaultChartType()],annotation:[this._m1.annotation(),this._m2.annotation()],minValue:[this._m1.minValue(),this._m2.minValue()],maxValue:[this._m1.maxValue(),this._m2.maxValue()],metadata:[this._m1.metadata(),this._m2.metadata()]}}));break;case epiviz.data.Request.Action.GET_SEQINFOS:c(epiviz.data.Response.fromRawObject({requestId:a.id(),data:[["chr1",1,248956422],["chr11",1,135086622],["myChr",1,1E9]]}));break;default:epiviz.data.DataProvider.prototype.getData.call(this,
a,c)}};epiviz.datatypes={};epiviz.datatypes.SeqInfo=function(a,c,b){this.seqName=a;this.min=c;this.max=b};epiviz.datatypes.SeqInfo.prototype.raw=function(){return[this.seqName,this.min,this.max]};epiviz.datatypes.SeqInfo.fromRawObject=function(a){return new epiviz.datatypes.SeqInfo(a[0],a[1],a[2])};
epiviz.datatypes.SeqInfo.compare=function(a,c){var b=a.seqName.replace(/\D/g,""),d=c.seqName.replace(/\D/g,"");return""==b||""==d||!epiviz.utils.stringStartsWith(a.seqName,b)&&!epiviz.utils.stringEndsWith(a.seqName,b)||!epiviz.utils.stringStartsWith(c.seqName,d)&&!epiviz.utils.stringEndsWith(c.seqName,d)?a.seqName<c.seqName?-1:a.seqName>c.seqName?1:0:parseInt(b)-parseInt(d)};
epiviz.datatypes.GenomicArray=function(a,c,b,d){this._measurement=a;this._boundaries=c;this._globalStartIndex=b;this._values=d};epiviz.datatypes.GenomicArray.prototype.boundaries=function(){return this._boundaries};epiviz.datatypes.GenomicArray.prototype.globalStartIndex=function(){return this._globalStartIndex};epiviz.datatypes.GenomicArray.prototype.measurement=function(){return this._measurement};
epiviz.datatypes.GenomicArray.prototype.get=function(a){throw Error("unimplemented abstract method");};epiviz.datatypes.GenomicArray.prototype.size=function(){throw Error("unimplemented abstract method");};epiviz.datatypes.GenomicArray.prototype.getByGlobalIndex=function(a){return this.get(a-this._globalStartIndex)};epiviz.datatypes.GenomicArray.prototype.concatValues=function(a,c){throw Error("unimplemented abstract method");};
epiviz.datatypes.GenomicArray.prototype.createNew=function(a,c,b,d){throw Error("unimplemented abstract method");};
epiviz.datatypes.GenomicArray.prototype.merge=function(a){if(!a||void 0==a.boundaries())return this;if(this.boundaries().seqName()!=a.boundaries().seqName()||this.boundaries().start()>a.boundaries().end()||a.boundaries().start()>this.boundaries().end())throw Error("Two genomic arrays can only be merged if they overlap or are in continuation to one another");var c=this.boundaries().start()<a.boundaries().start()?this:a,b=c==this?a:this;if(c.boundaries().end()>=b.boundaries().end())return c;var d=void 0!=
c.globalStartIndex()&&void 0!=b.globalStartIndex()?c.globalStartIndex()+c.size()-b.globalStartIndex():0;a=c.measurement();var e=void 0!=c.globalStartIndex()?c.globalStartIndex():b.globalStartIndex(),f=epiviz.datatypes.GenomicRange.fromStartEnd(c.boundaries().seqName(),c.boundaries().start(),b.boundaries().end()),c=c.concatValues(b,d);return this.createNew(a,f,e,c)};
epiviz.datatypes.GenomicRangeArray=function(a,c,b,d,e){epiviz.datatypes.GenomicArray.call(this,a,c,b,d);this._id=d.id;this._start=d.start;this._end=d.end;this._strand=d.strand||null;this._metadata=d.metadata;if(e)for(a=1;a<this._start.length;++a)this._start[a]+=this._start[a-1],this._end&&(this._end[a]+=this._end[a-1])};epiviz.datatypes.GenomicRangeArray.prototype=epiviz.utils.mapCopy(epiviz.datatypes.GenomicArray.prototype);epiviz.datatypes.GenomicRangeArray.constructor=epiviz.datatypes.GenomicRangeArray;
epiviz.datatypes.GenomicRangeArray.prototype.createNew=function(a,c,b,d){return new epiviz.datatypes.GenomicRangeArray(a,c,b,d)};epiviz.datatypes.GenomicRangeArray.prototype.get=function(a){return 0>a||a>=this.size()?null:new epiviz.datatypes.GenomicRangeArray.Item(this,a)};epiviz.datatypes.GenomicRangeArray.prototype.size=function(){return this._start?this._start.length:0};
epiviz.datatypes.GenomicRangeArray.prototype.concatValues=function(a,c){var b=null;if(Array.isArray(this._strand)||Array.isArray(a._strand)||this._strand!=a._strand)var b=Array.isArray(this._strand)?this._strand:epiviz.utils.fillArray(this.size(),this._strand),d=Array.isArray(a._strand)?a._strand:epiviz.utils.fillArray(a.size(),a._strand),b=b.concat(d.slice(c));else b=this._strand;var d=this._id?this._id.concat(a._id.slice(c)):null,e=this._start.concat(a._start.slice(c)),f=this._end?this._end.concat(a._end.slice(c)):
null,g={},h;for(h in this._metadata)this._metadata.hasOwnProperty(h)&&(g[h]=this._metadata[h].concat(a._metadata[h].slice(c)));return{id:d,start:e,end:f,strand:b,metadata:g}};
epiviz.datatypes.GenomicRangeArray.prototype.trim=function(a){if(void 0==this.globalStartIndex()||!this.size()||!a||!this.boundaries()||this.boundaries().seqName()!=a.seqName())return null;var c=Math.max(this.boundaries().start(),a.start()),b=Math.min(this.boundaries().end(),a.end());if(b<=c)return null;a=epiviz.datatypes.GenomicRange.fromStartEnd(a.seqName(),c,b);for(var b=c=-1,d=0;d<this.size();++d)0>c&&this.end(d)>=a.start()&&(c=d),this._start[d]<a.end()&&(b=d+1);if(b<=c)return null;var e;if(0<=
c&&b>=c){d={id:this._id?this._id.slice(c,b):null,start:this._start.slice(c,b),end:this._end?this._end.slice(c,b):null,strand:Array.isArray(this._strand)?this._strand.slice(c,b):this._strand,metadata:{}};for(e in this._metadata)this._metadata.hasOwnProperty(e)&&(d.metadata[e]=this._metadata[e].slice(c,b));e=this.globalStartIndex()+c}else{d={id:this._id?[]:null,start:[],end:this._end?[]:null,strand:Array.isArray(this._strand)?[]:this._strand,metadata:{}};for(e in this._metadata)this._metadata.hasOwnProperty(e)&&
(d.metadata[e]=[]);e=null}return new epiviz.datatypes.GenomicRangeArray(this.measurement(),a,e,d)};epiviz.datatypes.GenomicRangeArray.prototype.ranges=function(){return this};epiviz.datatypes.GenomicRangeArray.prototype.foreach=function(a){for(var c=this.size(),b=0;b<c&&!a(this.get(b));++b);};epiviz.datatypes.GenomicRangeArray.prototype.metadataColumns=function(){return this._metadata?Object.keys(this._metadata):[]};
epiviz.datatypes.GenomicRangeArray.prototype.id=function(a){return this._id?this._id[a]:this.globalStartIndex()+a};epiviz.datatypes.GenomicRangeArray.prototype.start=function(a){return this._start[a]};epiviz.datatypes.GenomicRangeArray.prototype.end=function(a){return this._end?this._end[a]:this._start[a]};epiviz.datatypes.GenomicRangeArray.prototype.strand=function(a){return Array.isArray(this._strand)?this._strand[a]:this._strand};
epiviz.datatypes.GenomicRangeArray.prototype.metadata=function(a,c){return this._metadata&&this._metadata[a]?this._metadata[a][c]:null};epiviz.datatypes.GenomicRangeArray.prototype.rowMetadata=function(a){var c={},b;for(b in this._metadata)this._metadata.hasOwnProperty(b)&&(c[b]=this._metadata[b][a]);return c};
epiviz.datatypes.GenomicRangeArray.prototype.toString=function(){var a,c,b;this.boundaries()?(a=this.boundaries().seqName(),c=this.boundaries().start(),b=this.boundaries().end()):a=c=b="*";a=sprintf("%25s",this.measurement().name().substr(0,22))+sprintf(" [%6s%10s%10s]",a,c,b);c=sprintf("%10s:","id");b=sprintf("%10s:","idx");var d=sprintf("%10s:","chr"),e=sprintf("%10s:","start"),f=sprintf("%10s:","end");if(void 0!=this.globalStartIndex())for(var g=this.globalStartIndex();g<this.globalStartIndex()+
this.size();++g){var h=this.getByGlobalIndex(g);c+=sprintf("%10s",h.id());b+=sprintf("%10s",g);d+=sprintf("%10s",h.seqName());e+=sprintf("%10s",h.start());f+=sprintf("%10s",h.end())}return[a,c,b,d,e,f].join("\n")};epiviz.datatypes.GenomicRangeArray.Item=function(a,c){this._index=c;this._parent=a};epiviz.datatypes.GenomicRangeArray.Item.prototype.parent=function(){return this._parent};epiviz.datatypes.GenomicRangeArray.Item.prototype.id=function(){return this._parent.id(this._index)};
epiviz.datatypes.GenomicRangeArray.Item.prototype.seqName=function(){return this._parent.boundaries().seqName()};epiviz.datatypes.GenomicRangeArray.Item.prototype.start=function(){return this._parent.start(this._index)};epiviz.datatypes.GenomicRangeArray.Item.prototype.end=function(){return this._parent.end(this._index)};epiviz.datatypes.GenomicRangeArray.Item.prototype.index=function(){return this._index};
epiviz.datatypes.GenomicRangeArray.Item.prototype.globalIndex=function(){return this._index+this._parent.globalStartIndex()};epiviz.datatypes.GenomicRangeArray.Item.prototype.equals=function(a){return a?this==a?!0:a.seqName()==this.seqName()&&a.start()==this.start()&&a.end()==this.end():!1};epiviz.datatypes.GenomicRangeArray.Item.prototype.strand=function(){return this._parent.strand(this._index)};
epiviz.datatypes.GenomicRangeArray.Item.prototype.metadata=function(a){return this._parent.metadata(a,this._index)};epiviz.datatypes.GenomicRangeArray.Item.prototype.rowMetadata=function(){return this._parent.rowMetadata(this._index)};epiviz.datatypes.GenomicRangeArray.Item.prototype.overlapsWith=function(a){return a?this==a?!0:this.seqName()!=a.seqName()?!1:this.start()<a.end()&&this.end()>a.start():!1};
epiviz.datatypes.FeatureValueArray=function(a,c,b,d){epiviz.datatypes.GenomicArray.call(this,a,c,b,d)};epiviz.datatypes.FeatureValueArray.prototype=epiviz.utils.mapCopy(epiviz.datatypes.GenomicArray.prototype);epiviz.datatypes.FeatureValueArray.constructor=epiviz.datatypes.FeatureValueArray;epiviz.datatypes.FeatureValueArray.prototype.createNew=function(a,c,b,d){return new epiviz.datatypes.FeatureValueArray(a,c,b,d)};epiviz.datatypes.FeatureValueArray.prototype.get=function(a){return this._values[a]};
epiviz.datatypes.FeatureValueArray.prototype.size=function(){return this._values?this._values.length:0};epiviz.datatypes.FeatureValueArray.prototype.concatValues=function(a,c){if(!a||!a.size())return this._values;this._values||(this._values=[]);return this._values.concat(a._values.slice(c))};
epiviz.datatypes.FeatureValueArray.prototype.trim=function(a,c,b){if(void 0==this.globalStartIndex()||!this.size()||void 0==c||!a||!this.boundaries()||this.boundaries().seqName()!=a.seqName())return null;var d=Math.max(this.boundaries().start(),a.start()),e=Math.min(this.boundaries().end(),a.end());if(e<=d)return null;a=epiviz.datatypes.GenomicRange.fromStartEnd(a.seqName(),d,e);d=Math.max(c,this.globalStartIndex())-this.globalStartIndex();c=Math.min(c+b,this.globalStartIndex()+this.size())-this.globalStartIndex();
if(c<=d)return null;c=this._values.slice(d,c);return new epiviz.datatypes.FeatureValueArray(this.measurement(),a,d+this.globalStartIndex(),c)};
epiviz.datatypes.FeatureValueArray.prototype.toString=function(){var a,c,b;this.boundaries()?(a=this.boundaries().seqName(),c=this.boundaries().start(),b=this.boundaries().end()):a=c=b="*";a=sprintf("%25s",this.measurement().name().substr(0,22))+sprintf(" [%6s%10s%10s]",a,c,b);c=sprintf("%10s:","idx");b=sprintf("%10s:","val");if(void 0!=this.globalStartIndex())for(var d=this.globalStartIndex();d<this.globalStartIndex()+this.size();++d){var e=this.getByGlobalIndex(d);c+=sprintf("%10s",d);b+=sprintf("%10s",
e)}return[a,c,b].join("\n")};epiviz.datatypes.PartialSummarizedExperiment=function(){this._rowData=null;this._values=new epiviz.measurements.MeasurementHashtable};epiviz.datatypes.PartialSummarizedExperiment.prototype.ranges=function(){return this.rowData()};epiviz.datatypes.PartialSummarizedExperiment.prototype.rowData=function(){return this._rowData};
epiviz.datatypes.PartialSummarizedExperiment.prototype.addRowData=function(a){a&&(!this._rowData||this._rowData.boundaries().seqName()!=a.boundaries().seqName()||this._rowData.boundaries().start()>a.boundaries().end()||this._rowData.boundaries().end()<a.boundaries().start()?this._rowData=a:this._rowData=this._rowData.merge(a))};
epiviz.datatypes.PartialSummarizedExperiment.prototype.addValues=function(a){if(a){var c=this._values.get(a.measurement());!c||c.boundaries().seqName()!=a.boundaries().seqName()||c.boundaries().start()>a.boundaries().end()||c.boundaries().end()<a.boundaries().start()?this._values.put(a.measurement(),a):this._values.put(a.measurement(),c.merge(a))}};
epiviz.datatypes.PartialSummarizedExperiment.prototype.trim=function(a){var c=new epiviz.datatypes.PartialSummarizedExperiment;this._rowData&&c.addRowData(this._rowData.trim(a));c.rowData()&&this._values.foreach(function(b,d){c.addValues(d.trim(a,c.rowData().globalStartIndex(),c.rowData().size()))});return c};epiviz.datatypes.PartialSummarizedExperiment.prototype.values=function(a){return this._values.get(a)};
epiviz.datatypes.PartialSummarizedExperiment.prototype.calcMinGlobalIndex=function(){var a=this._rowData?this._rowData.globalStartIndex():null;this._values&&this._values.foreach(function(c,b){b&&void 0!=b.globalStartIndex()&&(void 0==a||a>b.globalStartIndex())&&(a=b.globalStartIndex())});return a};
epiviz.datatypes.PartialSummarizedExperiment.prototype.calcMaxGlobalIndex=function(){var a=this._rowData&&void 0!=this._rowData.globalStartIndex()?this._rowData.globalStartIndex()+this._rowData.size():null;this._values&&this._values.foreach(function(c,b){b&&void 0!=b.globalStartIndex()&&(void 0==a||a<b.globalStartIndex()+b.size())&&(a=b.globalStartIndex()+b.size())});return a};
epiviz.datatypes.PartialSummarizedExperiment.prototype.toString=function(){var a="",c=this.calcMinGlobalIndex(),b=this.calcMaxGlobalIndex(),a=a+sprintf("%25s",this._rowData&&this._rowData.measurement()?this._rowData.measurement().name().substr(0,22):"[undefined datasource]"),d,e,f,g,h;this._rowData&&this._rowData.boundaries()?(d=this._rowData.boundaries().seqName(),e=this._rowData.boundaries().start(),f=this._rowData.boundaries().end(),g=void 0!=this._rowData.globalStartIndex()?this._rowData.globalStartIndex():
"*",h=this._rowData.size()):(d=e=f=g="*",h=0);var a=a+sprintf(" [%6s%10s%10s] [globalStartIndex: %10s] [size: %7s]\n",d,e,f,g,h),l=sprintf("%15s%15s%15s%15s%15s","id","idx","chr","start","end");this._values&&this._values.foreach(function(b,c){a+=sprintf("%25s",b.name().substr(0,22));c&&c.boundaries()?(d=c.boundaries().seqName(),e=c.boundaries().start(),f=c.boundaries().end()):d=e=f="*";a+=sprintf(" [%6s%10s%10s] [globalStartIndex: %10s] [size: %7s]\n",d,e,f,void 0!=c.globalStartIndex()?c.globalStartIndex():
"*",c.size());l+=sprintf("%25s",b.name().substr(0,22))});for(var a=a+(l+"\n"),m=c;m<b;++m)this._rowData&&void 0!=this._rowData.globalStartIndex()&&this._rowData.globalStartIndex()<=m&&this._rowData.globalStartIndex()+this._rowData.size()>m?(g=this._rowData.getByGlobalIndex(m),c=g.id(),d=g.seqName(),e=g.start(),f=g.end()):c=d=e=f="*",a+=sprintf("%15s%15s%15s%15s%15s",c,m,d,e,f),this._values&&this._values.foreach(function(b,c){a=c&&void 0!=c.globalStartIndex()&&c.globalStartIndex()<=m&&c.globalStartIndex()+
c.size()>m?a+sprintf("%25s",c.getByGlobalIndex(m)):a+sprintf("%25s","*")}),a+="\n";return a};epiviz.datatypes.GenomicDataMeasurementWrapper=function(a,c){this._measurement=a;this._container=c;this._globalStartIndex=this._size=null};
epiviz.datatypes.GenomicDataMeasurementWrapper.prototype.get=function(a){var c=this._container.rowData(),b=null,d=this.globalStartIndex(),e=null,f=b=null,g=this.size();if(!g||a>=g||0>a)return new epiviz.datatypes.GenomicDataMeasurementWrapper.ValueItem(f,e,b);void 0!=d&&(this._measurement.type()==epiviz.measurements.Measurement.Type.FEATURE&&(b=this._container.values(this._measurement),e=d-b.globalStartIndex()+a,b=b.get(e)),e=d-c.globalStartIndex()+a,e=c.get(e),f=d+a);return new epiviz.datatypes.GenomicDataMeasurementWrapper.ValueItem(f,
e,b)};epiviz.datatypes.GenomicDataMeasurementWrapper.prototype.measurement=function(){return this._measurement};
epiviz.datatypes.GenomicDataMeasurementWrapper.prototype.globalStartIndex=function(){if(null!==this._globalStartIndex)return this._globalStartIndex;var a=null,c=this._container.rowData().globalStartIndex();if(null===c)return c;if(this._measurement.type()==epiviz.measurements.Measurement.Type.FEATURE){a=this._container.values(this._measurement);if(!a.globalStartIndex())return a.globalStartIndex();c=Math.max(c,a.globalStartIndex())}return this._globalStartIndex=c};
epiviz.datatypes.GenomicDataMeasurementWrapper.prototype.size=function(){if(null!==this._size)return this._size;var a=this.globalStartIndex();if(void 0==a)return 0;var c=this._container.rowData(),b=this._container.values(this._measurement),c=c.size()-a+c.globalStartIndex();this._measurement.type()==epiviz.measurements.Measurement.Type.FEATURE&&(c=Math.min(c,b.size()-a+b.globalStartIndex()));return this._size=Math.max(0,c)};
epiviz.datatypes.GenomicDataMeasurementWrapper.prototype.getByGlobalIndex=function(a){var c=this.globalStartIndex();return c?this.get(a-c):new epiviz.datatypes.GenomicDataMeasurementWrapper.ValueItem(null,null,null)};
epiviz.datatypes.GenomicDataMeasurementWrapper.prototype.binarySearchStarts=function(a){var c=this._container.rowData();if(0==this.size()||!c||0==c.size()||c.start(0)>=a.end()||c.start(c.size()-1)<=a.start())return{index:null,length:0};for(var b=0,d=c.size()-1,e,f=null;b<=d;)e=Math.floor(.5*(b+d)),c.start(e)==a.start()?(f=e,d=e-1):c.start(e)<a.start()?b=e+1:d=e-1;null===f&&(f=b);for(var b=0,d=c.size()-1,g=null;b<=d;)e=Math.floor(.5*(b+d)),c.start(e)==a.end()?(g=e,b=e+1):c.start(e)<a.end()?b=e+1:d=
e-1;null===g&&(g=b-1);a=Math.max(f+c.globalStartIndex(),this.globalStartIndex());c=Math.min(g+c.globalStartIndex(),this.globalStartIndex()+this.size()-1);return{index:a-this.globalStartIndex(),length:c-a+1}};epiviz.datatypes.GenomicDataMeasurementWrapper.ValueItem=function(a,c,b){this.globalIndex=a;this.rowItem=c;this.value=0===b||b?b:null};epiviz.ui={};epiviz.ui.controls={};epiviz.ui.controls.Control=function(a){this._container=a};epiviz.ui.controls.Control.prototype.initialize=function(){};
epiviz.ui.controls.Dialog=function(a,c){this._container=$("#dialogs");this._title=a;this._id=epiviz.ui.controls.Dialog.generateId();this._handlers=c;this._container.append(sprintf('<div id="%s" title="%s" style="display: none;"></div>',this._id,this._title));this._dialog=null};epiviz.ui.controls.Dialog._nextIdIndex=0;epiviz.ui.controls.Dialog.generateId=function(){return sprintf("dialog-%s",epiviz.utils.generatePseudoGUID(5))};epiviz.ui.controls.Dialog.prototype.show=function(){};
epiviz.ui.charts={};epiviz.ui.charts.transform={};epiviz.ui.charts.transform.clustering={};epiviz.ui.charts.transform.clustering.ClusterNode=function(){};epiviz.ui.charts.transform.clustering.ClusterNode.prototype.weight=function(){};epiviz.ui.charts.transform.clustering.ClusterNode.prototype.children=function(){};epiviz.ui.charts.transform.clustering.ClusterNode.prototype.data=function(){};epiviz.ui.charts.transform.clustering.ClusterNode.prototype.sort=function(a){};
epiviz.ui.charts.transform.clustering.ClusterNode.prototype.copy=function(){};epiviz.ui.charts.transform.clustering.ClusterNode.prototype.distance=function(){};epiviz.ui.charts.transform.clustering.ClusterNode.prototype.sorted=function(){};epiviz.ui.charts.transform.clustering.ClusterSubtree=function(a,c){this._children=a;this._weight=null;this._distance=c;this._sorted=!1};
epiviz.ui.charts.transform.clustering.ClusterSubtree.prototype.weight=function(){if(void 0==this._weight){for(var a=0,c=0;c<this._children.length;++c)a+=this._children[c].weight();this._weight=a}return this._weight};epiviz.ui.charts.transform.clustering.ClusterSubtree.prototype.children=function(){return this._children};epiviz.ui.charts.transform.clustering.ClusterSubtree.prototype.data=function(){for(var a=[],c=0;c<this._children.length;++c)a=a.concat(this._children[c].data());return a};
epiviz.ui.charts.transform.clustering.ClusterSubtree.prototype.sort=function(a){if(!this.sorted()&&(this._children.sort(function(a,c){return a.weight()-c.weight()}),a)){for(var c=0;c<this._children.length;++c)this._children[c].sort(a);this._sorted=!0}};epiviz.ui.charts.transform.clustering.ClusterSubtree.prototype.copy=function(){for(var a=[],c=0;c<this._children.length;++c)a.push(this._children[c].copy());return new epiviz.ui.charts.transform.clustering.ClusterSubtree(a)};
epiviz.ui.charts.transform.clustering.ClusterSubtree.prototype.distance=function(){return this._distance};epiviz.ui.charts.transform.clustering.ClusterSubtree.prototype.sorted=function(){return this._sorted};epiviz.ui.charts.transform.clustering.ClusterLeaf=function(a){this._dataIndex=a};epiviz.ui.charts.transform.clustering.ClusterLeaf.prototype.weight=function(){return 1};epiviz.ui.charts.transform.clustering.ClusterLeaf.prototype.children=function(){return[]};
epiviz.ui.charts.transform.clustering.ClusterLeaf.prototype.data=function(){return[this._dataIndex]};epiviz.ui.charts.transform.clustering.ClusterLeaf.prototype.sort=function(){};epiviz.ui.charts.transform.clustering.ClusterLeaf.prototype.copy=function(){return new epiviz.ui.charts.transform.clustering.ClusterLeaf(this._dataIndex)};epiviz.ui.charts.transform.clustering.ClusterLeaf.prototype.distance=function(){return 0};epiviz.ui.charts.transform.clustering.ClusterLeaf.prototype.sorted=function(){return!0};
epiviz.ui.charts.transform.clustering.ClusterTree=function(a,c){this._root=a;this._data=c};epiviz.ui.charts.transform.clustering.ClusterTree.prototype.root=function(){return this._root};epiviz.ui.charts.transform.clustering.ClusterTree.prototype.orderedData=function(){this._root.sorted()||this._root.sort(!0);for(var a=this._root.data(),c=[],b=0;b<a.length;++b)c.push(this._data[a[b]]);return c};epiviz.ui.charts.transform.clustering.ClusteringMetric=function(){};
epiviz.ui.charts.transform.clustering.ClusteringMetric.prototype.distance=function(a,c){};epiviz.ui.charts.transform.clustering.ClusteringMetric.prototype.id=function(){};epiviz.ui.charts.transform.clustering.ClusteringLinkage=function(){};epiviz.ui.charts.transform.clustering.ClusteringLinkage.prototype.link=function(a,c){};epiviz.ui.charts.transform.clustering.ClusteringLinkage.prototype.id=function(){};epiviz.ui.charts.transform.clustering.HierarchicalClusteringAlgorithm=function(){};
epiviz.ui.charts.transform.clustering.HierarchicalClusteringAlgorithm.prototype.cluster=function(a,c,b){};epiviz.ui.charts.transform.clustering.HierarchicalClusteringAlgorithm.prototype.id=function(){};epiviz.ui.charts.transform.clustering.EuclideanMetric=function(){};
epiviz.ui.charts.transform.clustering.EuclideanMetric.prototype.distance=function(a,c){if(void 0==a||void 0==c)return null;var b=a.length,d=0,e=0,f=0,g;for(g=0;g<b;++g)if(void 0!=a[g]&&void 0!=c[g]){++d;var h=a[g]-c[g],e=e+h,f=f+h*h}0<d&&(e/=d);return f+(b-d)*e*e};epiviz.ui.charts.transform.clustering.EuclideanMetric.prototype.id=function(){return"euclidean"};epiviz.ui.charts.transform.clustering.CompleteLinkage=function(){};
epiviz.ui.charts.transform.clustering.CompleteLinkage.prototype.link=function(a,c){var b=Array(a.length-1);if(c[0]<c[1]){var d=c[0];c[0]=c[1];c[1]=d}for(var e=d=0;d<a.length;++d,++e)if(d==c[0]||d==c[1])--e;else{b[e]=a[d].slice(0);b[e].splice(c[0],1);b[e].splice(c[1],1);var f=[d<c[0]?a[d][c[0]]:a[c[0]][d],d<c[1]?a[d][c[1]]:a[c[1]][d]];b[e].push(Math.max(f[0],f[1]))}b[b.length-1]=Array(b.length);return b};epiviz.ui.charts.transform.clustering.CompleteLinkage.prototype.id=function(){return"complete"};
epiviz.ui.charts.transform.clustering.NoneClustering=function(){};epiviz.ui.charts.transform.clustering.NoneClustering.prototype.cluster=function(a,c,b){c=[];for(b=0;b<a.length;++b)c.push(new epiviz.ui.charts.transform.clustering.ClusterLeaf(b));c=new epiviz.ui.charts.transform.clustering.ClusterSubtree(c,0);return new epiviz.ui.charts.transform.clustering.ClusterTree(c,a)};epiviz.ui.charts.transform.clustering.NoneClustering.prototype.id=function(){return"none"};
epiviz.ui.charts.transform.clustering.AgglomerativeClustering=function(){};
epiviz.ui.charts.transform.clustering.AgglomerativeClustering.prototype.cluster=function(a,c,b){var d,e,f=Array(a.length);for(d=0;d<a.length;++d)for(f[d]=Array(a.length),e=d+1;e<a.length;++e)f[d][e]=c.distance(a[d],a[e]);c=[];for(d=0;d<a.length;++d)c.push(new epiviz.ui.charts.transform.clustering.ClusterLeaf(d));for(;1<c.length;){e=epiviz.utils.indexOfMin(f,!0);d=e.index;e=new epiviz.ui.charts.transform.clustering.ClusterSubtree([c[d[0]],c[d[1]]],e.min);if(d[0]<d[1]){var g=d[0];d[0]=d[1];d[1]=g}c.splice(d[0],
1);c.splice(d[1],1);c.push(e);f=b.link(f,d)}return new epiviz.ui.charts.transform.clustering.ClusterTree(c[0],a)};epiviz.ui.charts.transform.clustering.AgglomerativeClustering.prototype.id=function(){return"agglomerative"};
epiviz.ui.charts.transform.clustering.ClusteringAlgorithmFactory=function(a){this._config=a;this._algorithms={};this._metrics={};this._linkages={};var c;for(c=0;c<a.clustering.algorithms.length;++c){var b=epiviz.utils.evaluateFullyQualifiedTypeName(a.clustering.algorithms[c]),b=epiviz.utils.applyConstructor(b);this._algorithms[b.id()]=b}for(c=0;c<a.clustering.metrics.length;++c)b=epiviz.utils.evaluateFullyQualifiedTypeName(a.clustering.metrics[c]),b=epiviz.utils.applyConstructor(b),this._metrics[b.id()]=
b;for(c=0;c<a.clustering.linkages.length;++c)b=epiviz.utils.evaluateFullyQualifiedTypeName(a.clustering.linkages[c]),b=epiviz.utils.applyConstructor(b),this._linkages[b.id()]=b};epiviz.ui.charts.transform.clustering.ClusteringAlgorithmFactory._instance=null;epiviz.ui.charts.transform.clustering.ClusteringAlgorithmFactory.instance=function(){return epiviz.ui.charts.transform.clustering.ClusteringAlgorithmFactory._instance};
epiviz.ui.charts.transform.clustering.ClusteringAlgorithmFactory.initialize=function(a){epiviz.ui.charts.transform.clustering.ClusteringAlgorithmFactory._instance=new epiviz.ui.charts.transform.clustering.ClusteringAlgorithmFactory(a)};epiviz.ui.charts.transform.clustering.ClusteringAlgorithmFactory.prototype.algorithm=function(a){return this._algorithms[a]};epiviz.ui.charts.transform.clustering.ClusteringAlgorithmFactory.prototype.metric=function(a){return this._metrics[a]};
epiviz.ui.charts.transform.clustering.ClusteringAlgorithmFactory.prototype.linkage=function(a){return this._linkages[a]};epiviz.ui.charts.transform.clustering.ClusteringAlgorithmFactory.prototype.algorithms=function(){return Object.keys(this._algorithms)};epiviz.ui.charts.transform.clustering.ClusteringAlgorithmFactory.prototype.metrics=function(){return Object.keys(this._metrics)};epiviz.ui.charts.transform.clustering.ClusteringAlgorithmFactory.prototype.linkages=function(){return Object.keys(this._linkages)};
epiviz.ui.charts.Margins=function(a,c,b,d){this._top=a;this._left=c;this._bottom=b;this._right=d};epiviz.ui.charts.Margins.ZERO_MARGIN=new epiviz.ui.charts.Margins(0,0,0,0);epiviz.ui.charts.Margins.prototype.top=function(){return this._top};epiviz.ui.charts.Margins.prototype.left=function(){return this._left};epiviz.ui.charts.Margins.prototype.bottom=function(){return this._bottom};epiviz.ui.charts.Margins.prototype.right=function(){return this._right};
epiviz.ui.charts.Margins.prototype.sumAxis=function(a){switch(a){case epiviz.ui.charts.Axis.X:return this._left+this._right;case epiviz.ui.charts.Axis.Y:return this._top+this._bottom;default:throw Error("Invalid argument: "+a);}};epiviz.ui.charts.Margins.prototype.raw=function(){return{top:this._top,left:this._left,bottom:this._bottom,right:this._right}};epiviz.ui.charts.Margins.fromRawObject=function(a){return new epiviz.ui.charts.Margins(a.top,a.left,a.bottom,a.right)};
epiviz.ui.charts.Margins.prototype.copy=function(){return new epiviz.ui.charts.Margins(this._top,this._left,this._bottom,this._right)};epiviz.ui.charts.Margins.prototype.equals=function(a){return a?this==a?!0:this._top==a._top&&this._left==a._left&&this._bottom==a._bottom&&this._right==a._right:!1};epiviz.ui.charts.ColorPalette=function(a){this._colors=a};epiviz.ui.charts.ColorPalette.prototype.get=function(a){return this._colors[a%this._colors.length]};
epiviz.ui.charts.ColorPalette.prototype.size=function(){return this._colors.length};epiviz.ui.charts.ColorPalette.prototype.equals=function(a){return this==a?!0:a?epiviz.utils.arraysEqual(this._colors,a._colors):!1};epiviz.ui.charts.ColorPalette.prototype.copy=function(){return new epiviz.ui.charts.ColorPalette(this._colors.slice(0))};epiviz.ui.charts.ColorPalette.prototype.raw=function(){return this._colors};epiviz.ui.charts.ColorPalette.fromRawObject=function(a){return new epiviz.ui.charts.ColorPalette(a)};
epiviz.ui.charts.Axis={X:"x",Y:"y"};epiviz.ui.charts.ChartProperties=function(a,c,b,d,e,f,g){this.width=a;this.height=c;this.margins=b;this.measurements=d;this.colors=e;this.customSettingsValues=f||{};this.customSettingsDefs=g||[]};
epiviz.ui.charts.ChartProperties.prototype.copy=function(){return new epiviz.ui.charts.ChartProperties(this.width,this.height,this.margins?this.margins.copy():this.margins,this.measurements?new epiviz.measurements.MeasurementSet(this.measurements):this.measurements,this.colors?this.colors.copy():this.colors,this.customSettingsValues?epiviz.utils.mapCopy(this.customSettingsValues):this.customSettingsValues,this.customSettingsDefs?this.customSettingsDefs.slice(0):this.customSettingsDefs)};
epiviz.ui.charts.UiObject=function(a,c,b,d,e,f,g,h){this.id=a;this.start=c;this.end=b;this.values=d;this.seriesIndex=e;this.valueItems=f;this.measurements=g;this.cssClasses=h};
epiviz.ui.charts.UiObject.prototype.overlapsWith=function(a){if(!a)return!1;if(this===a)return!0;var c,b,d,e,f;if(!this.measurements||!this.measurements.length){if(!a.measurements||!a.measurements.length)return this.start<a.end&&this.end>a.start;for(b=0;b<a.valueItems[0].length;++b)if(f=a.valueItems[0][b].rowItem,this.start<f.end()&&this.end>f.start())return!0;return!1}var g=epiviz.utils.mapKeyIntersection(this.valueItems[0][0].rowItem.rowMetadata(),a.valueItems[0][0].rowItem.rowMetadata());if(g.length){for(c=
0;c<this.valueItems[0].length;++c)for(b=0;b<a.valueItems[0].length;++b){e=this.valueItems[0][c].rowItem;f=a.valueItems[0][b].rowItem;var h=!0;for(d=0;d<g.length;++d)if(e.metadata(g[d])!=f.metadata(g[d])){h=!1;break}if(h)return!0}return!1}for(c=0;c<this.valueItems[0].length;++c)for(b=0;b<a.valueItems[0].length;++b)if(e=this.valueItems[0][c].rowItem,f=a.valueItems[0][b].rowItem,e.overlapsWith(f))return!0;return!1};
epiviz.ui.charts.CustomSetting=function(a,c,b,d,e){this.id=a;this.type=c;this.defaultValue=b;this.label=d||a;this.possibleValues=e||null};epiviz.ui.charts.CustomSetting.Type={NUMBER:"number",STRING:"string",ARRAY:"array",BOOLEAN:"boolean",CATEGORICAL:"categorical"};epiviz.ui.charts.CustomSetting.DEFAULT="default";
epiviz.ui.charts.Chart=function(a,c,b){this._id=a;this._container=c;this._properties=b;this._customSettingsValues={};for(a=0;a<b.customSettingsDefs.length;++a){c=b.customSettingsDefs[a];var d=b.customSettingsValues[c.id];switch(c.type){case epiviz.ui.charts.CustomSetting.Type.BOOLEAN:this._customSettingsValues[c.id]=!1===d||d?d:c.defaultValue;break;case epiviz.ui.charts.CustomSetting.Type.NUMBER:this._customSettingsValues[c.id]=0===d||d?d:c.defaultValue;break;case epiviz.ui.charts.CustomSetting.Type.STRING:this._customSettingsValues[c.id]=
""===d||d?d:c.defaultValue;break;default:this._customSettingsValues[c.id]=d||c.defaultValue}}this._svgId=sprintf("%s-svg",this._id);this._svg=null;this._loaderTimeout=0;this._lastData=this._lastRange=null;this._nBins=100;this._binSize=null;this._showTooltip=!0;this._hover=new epiviz.events.Event;this._unhover=new epiviz.events.Event;this._select=new epiviz.events.Event;this._deselect=new epiviz.events.Event;this._save=new epiviz.events.Event;this._remove=new epiviz.events.Event;this._colorsChanged=
new epiviz.events.Event;this._customSettingsChanged=new epiviz.events.Event;this._sizeChanged=new epiviz.events.Event;this._marginsChanged=new epiviz.events.Event};epiviz.ui.charts.Chart.SVG_MARGIN=20;
epiviz.ui.charts.Chart.prototype._initialize=function(){"100%"==this._properties.height&&(this._properties.height=this._container.height()-epiviz.ui.charts.Chart.SVG_MARGIN);"100%"==this._properties.width&&(this._properties.width=this._container.width()-epiviz.ui.charts.Chart.SVG_MARGIN);var a=this.width(),c=this.height();this._addChartButtons();this._container.append(sprintf('<svg id="%s" class="base-chart" width="%s" height="%s"></svg>',this._svgId,a,c));this._svg=d3.select("#"+this._svgId);this._addStyles();
this._addFilters();this._addResizable();this._addTooltip();this._widthDif=$("#"+this._svgId).width()-(this._container.width()-epiviz.ui.charts.Chart.SVG_MARGIN);this._heightDif=c-(this._container.height()-epiviz.ui.charts.Chart.SVG_MARGIN);this._properties.width=a;this._properties.height=c;var b=this;this._container.click(function(){b._deselect.notify()})};epiviz.ui.charts.Chart.prototype._addResizable=function(){var a=this;this._container.resizable({stop:function(c,b){a.containerResize()}})};
epiviz.ui.charts.Chart.prototype._addTooltip=function(){var a=this;this._container.tooltip({items:".item",content:function(){if(!a._showTooltip)return!1;for(var c=d3.select(this).data()[0],b=c.measurements[0].metadata(),d=sprintf("<th><b>Start</b></th><th><b>End</b></th>%s%s",b?"<th><b>"+b.join("</b></th><th><b>")+"</b></th>":"",c.values?"<th><b>"+c.measurements.join("</b></th><th><b>")+"</b></th>":""),e="",f=0;f<c.valueItems[0].length&&10>f;++f){var g="",h=c.valueItems[0][f].rowItem,g=g+sprintf("<td>%s</td><td>%s</td>",
Globalize.format(h.start(),"n0"),Globalize.format(h.end(),"n0")),h=h.rowMetadata();if(b&&h)for(var l=0;l<b.length;++l)var m=h[b[l]]||"",g=g+sprintf("<td>%s</td>",15>=m.length?m:m.substr(0,15)+"...");if(c.values)for(h=0;h<c.measurements.length;++h)g+=sprintf("<td>%s</td>",Globalize.format(c.valueItems[h][f].value,"n3"));e+=sprintf("<tr>%s</tr>",g)}f<c.valueItems[0].length&&(e+=sprintf('<tr><td colspan="%s" style="text-align: center;">...</td></tr>',2+(b?b.length:0)+(c.values?c.measurements.length:
0)));return sprintf('<table class="tooltip-table"><thead><tr>%s</tr></thead><tbody>%s</tbody></table>',d,e)},track:!0,show:!1})};
epiviz.ui.charts.Chart.prototype._addChartButtons=function(){var a=this,c=sprintf("%s-save",this._id);this._container.append(sprintf('<button id="%s" style="position: absolute; top: 5px; right: 35px">Save</button>',c));var b=$("#"+c);b.button({icons:{primary:"ui-icon ui-icon-disk"},text:!1}).click(function(){a._save.notify(a._id);return!1});c=sprintf("%s-remove",this._id);this._container.append(sprintf('<button id="%s" style="position: absolute; top: 5px; right: 5px">Remove</button>',c));var d=$("#"+
c);d.button({icons:{primary:"ui-icon ui-icon-cancel"},text:!1}).click(function(){a._remove.notify(a._id);return!1});c=sprintf("%s-color-picker",this._id);this._container.append(sprintf('<button id="%s" style="position: absolute; top: 5px; right: 65px">Colors</button>',c));var e=$("#"+c);e.button({icons:{primary:"ui-icon ui-icon-colorpicker"},text:!1}).click(function(){var b=a.colorMap();(new epiviz.ui.controls.ColorPickerDialog({ok:function(b){a.setColorMap(b)},cancel:function(){},reset:function(){}},
b)).show();return!1});c=sprintf("%s-custom-settings",this._id);this._container.append(sprintf('<button id="%s" style="position: absolute; top: 5px; right: 95px">Custom settings</button>',c));var f=$("#"+c);f.button({icons:{primary:"ui-icon ui-icon-gear"},text:!1}).click(function(){var b=epiviz.ui.charts.ChartType.CustomSettings;(new epiviz.ui.controls.CustomSettingsDialog("Edit custom settings",{ok:function(c){a._customSettingsValues=c;b.MARGIN_TOP in c&&b.MARGIN_BOTTOM in c&&b.MARGIN_LEFT in c&&
b.MARGIN_RIGHT in c&&(a._properties.margins=new epiviz.ui.charts.Margins(c[b.MARGIN_TOP],c[b.MARGIN_LEFT],c[b.MARGIN_BOTTOM],c[b.MARGIN_RIGHT]),a._marginsChanged.notify({id:a._id,margins:a._properties.margins}));a.draw();a._customSettingsChanged.notify({id:a._id,customSettingsValues:c})},cancel:function(){}},a.properties().customSettingsDefs,a._customSettingsValues)).show();return!1});c=sprintf("%s-tooltip-button",this._id);this._container.append(sprintf('<div id="%1$s-container" style="position: absolute; top: 7px; right: 125px"><input type="checkbox" id="%1$s" checked="checked" /><label for="%1$s" >Toggle Tooltip</label></div>',
c));var g=$("#"+c),h=$("#"+c+"-container");g.button({text:!1,icons:{primary:"ui-icon-comment"}}).click(function(){a._showTooltip=g.is(":checked")});this._container.mousemove(function(){b.show();d.show();e.show();f.show();h.show()}).mouseleave(function(){b.hide();d.hide();e.hide();f.hide();h.hide()})};epiviz.ui.charts.Chart.prototype._addStyles=function(){this._container.find("svg").append('<style type="text/css"></style>')};
epiviz.ui.charts.Chart.prototype._addFilters=function(){var a=this._svg.append("defs"),c=a.append("filter").attr("id",this._id+"-glow");c.append("feGaussianBlur").attr("id","gaussianBlur").attr("stdDeviation","2").attr("result","blurResult");c.append("feComposite").attr("id","composite").attr("in","SourceGraphic").attr("in2","blurResult").attr("operator","over");c=a.append("filter").attr("id",this._id+"-contour");c.append("feGaussianBlur").attr("in","SourceAlpha").attr("stdDeviation","1").attr("result",
"blur");c.append("feColorMatrix").attr("values","1 0 0 0 0 0 1 0 0 0 0 0 1 0 0 0 0 0 10 -1 ").attr("result","colorMatrix");c.append("feFlood").attr("result","fillColor").attr("flood-color","#800000").attr("in","blur");c.append("feComposite").attr("result","composite").attr("in","fillColor").attr("in2","colorMatrix").attr("operator","atop");c.append("feComposite").attr("in","SourceGraphic").attr("in2","composite").attr("operator","atop");a=a.append("filter").attr("id",this._id+"-dropshadow").attr("filterUnits",
"userSpaceOnUse").attr("color-interpolation-filters","sRGB");c=a.append("feComponentTransfer").attr("in","SourceAlpha");c.append("feFuncR").attr("type","discrete").attr("tableValues","1");c.append("feFuncG").attr("type","discrete").attr("tableValues",198/255);c.append("feFuncB").attr("type","discrete").attr("tableValues","0");a.append("feGaussianBlur").attr("stdDeviation","2");a.append("feOffset").attr("dx","0").attr("dy","0").attr("result","shadow");a.append("feComposite").attr("in","SourceGraphic").attr("in2",
"shadow").attr("operator","over")};
epiviz.ui.charts.Chart.prototype.addLoaderAnimation=function(){this._loaderTimeout&&clearTimeout(this._loaderTimeout);var a=this;this._loaderTimeout=setTimeout(function(){a._container.find(".chart-loader").remove();a._container.find(".chart-loader-background").remove();a._container.append(sprintf('<div class="loader-icon %s" style="top: %spx; left: %spx;"></div>',"chart-loader",Math.floor(.5*a.height()),Math.floor(.5*a.width())));a._container.find(".chart-loader").activity({segments:8,steps:5,opacity:.3,
width:4,space:0,length:10,color:"#0b0b0b",speed:1});a._svg.append("rect").attr("class","chart-loader-background").attr("x",0).attr("y",0).attr("width","100%").attr("height","100%").attr("fill","#ffffff").attr("opacity",.7)},500)};epiviz.ui.charts.Chart.prototype.removeLoaderAnimation=function(){this._loaderTimeout&&clearTimeout(this._loaderTimeout);this._container.find(".chart-loader").remove();this._container.find(".chart-loader-background").remove()};
epiviz.ui.charts.Chart.prototype._clearAxes=function(a){a=a||this._svg;a.selectAll(".xAxis").remove();a.selectAll(".yAxis").remove()};
epiviz.ui.charts.Chart.prototype._drawAxes=function(a,c,b,d,e,f,g,h){e=e||this._svg;h=h||this.margins();g=g||this.height();f=f||this.width();var l=e.select(".axes"),m=l.select(".xAxis-grid"),p=l.select(".yAxis-grid"),q=l.select(".xAxis-line"),t=l.select(".yAxis-line");l.empty()&&(l=e.append("g").attr("class","axes"));m.empty()&&(m=l.append("g").attr("class","xAxis xAxis-grid"));p.empty()&&(p=l.append("g").attr("class","yAxis yAxis-grid"));q.empty()&&(q=l.append("g").attr("class","xAxis xAxis-line"));
t.empty()&&(t=l.append("g").attr("class","yAxis yAxis-line"));a&&(m.attr("transform","translate("+h.left()+", "+h.top()+")").selectAll("line.x").data(a.ticks(b)).enter().append("line").attr("x1",a).attr("x2",a).attr("y1",0).attr("y2",g-h.top()-h.bottom()).style("stroke","#eeeeee").style("shape-rendering","crispEdges"),a=d3.svg.axis().scale(a).orient("bottom").tickFormat(d3.format("s")),q.attr("transform","translate("+h.left()+", "+(g-h.bottom())+")").call(a));c&&(p.attr("transform","translate("+h.left()+
", "+h.top()+")").selectAll("line.y").data(c.ticks(d)).enter().append("line").attr("x1",0).attr("x2",f-h.left()-h.right()).attr("y1",c).attr("y2",c).style("stroke","#eeeeee").style("shape-rendering","crispEdges"),c=d3.svg.axis().scale(c).orient("left"),t.attr("transform","translate("+h.left()+", "+h.top()+")").call(c))};
epiviz.ui.charts.Chart.prototype.resize=function(a,c){a&&(this._properties.width=a);c&&(this._properties.height=c);this.draw();this._sizeChanged.notify({id:this._id,width:this._properties.width,height:this._properties.height})};epiviz.ui.charts.Chart.prototype.containerResize=function(){this.resize(this._widthDif+this._container.width()-epiviz.ui.charts.Chart.SVG_MARGIN,this._heightDif+this._container.height()-epiviz.ui.charts.Chart.SVG_MARGIN)};
epiviz.ui.charts.Chart.prototype.draw=function(a,c){this.removeLoaderAnimation();a&&(this._binSize=Math.ceil((a.end()-a.start())/this._nBins));c&&a&&(this._lastData=c,this._lastRange=a);this._svg.attr("width",this.width()).attr("height",this.height());return[]};epiviz.ui.charts.Chart.prototype.id=function(){return this._id};epiviz.ui.charts.Chart.prototype.properties=function(){return this._properties};epiviz.ui.charts.Chart.prototype.height=function(){return this._properties.height};
epiviz.ui.charts.Chart.prototype.width=function(){return this._properties.width};epiviz.ui.charts.Chart.prototype.margins=function(){return this._properties.margins};epiviz.ui.charts.Chart.prototype.measurements=function(){return this._properties.measurements};epiviz.ui.charts.Chart.prototype.colors=function(){return this._properties.colors};epiviz.ui.charts.Chart.prototype.displayType=function(){throw Error("unimplemented abstract method");};
epiviz.ui.charts.Chart.prototype.chartTypeName=function(){throw Error("unimplemented abstract method");};epiviz.ui.charts.Chart.prototype.onHover=function(){return this._hover};epiviz.ui.charts.Chart.prototype.onUnhover=function(){return this._unhover};epiviz.ui.charts.Chart.prototype.onSelect=function(){return this._select};epiviz.ui.charts.Chart.prototype.onDeselect=function(){return this._deselect};
epiviz.ui.charts.Chart.prototype._changeObjectSelection=function(a,c,b){var d=this._filterClassSelection(a);if(null==d){var d="",e=Math.floor(a.end/this._binSize);for(a=Math.floor(a.start/this._binSize);a<=e;++a)d+=sprintf("> .bin-%s,",a)}c=c.find(d);b.append(c);return c};
epiviz.ui.charts.Chart.prototype.doHover=function(a){var c=this._container.find(".items"),b=c.find("> .hovered"),d=c.find("> .selected"),e=d.find("> .hovered"),f=function(){return a.overlapsWith(d3.select(this).data()[0])},c=c.find("> .item").filter(f);b.append(c);c=d.find("> .item").filter(f);e.append(c)};epiviz.ui.charts.Chart.prototype.doUnhover=function(){var a=this._container.find(".items"),c=a.find("> .hovered"),b=a.find("> .selected"),d=b.find("> .hovered");a.prepend(c.children());b.prepend(d.children())};
epiviz.ui.charts.Chart.prototype.doSelect=function(a){var c=this._container.find(".items"),b=c.find("> .hovered"),d=c.find("> .selected"),e=d.find("> .hovered"),f=function(){return a.overlapsWith(d3.select(this).data()[0])},c=c.find("> .item").filter(f);d.append(c);c=b.find("> .item").filter(f);e.append(c)};epiviz.ui.charts.Chart.prototype.doDeselect=function(){var a=this._container.find(".items"),c=a.find("> .hovered"),b=a.find("> .selected"),d=b.find("> .hovered");a.prepend(b.find("> .item"));c.prepend(d.children())};
epiviz.ui.charts.Chart.prototype.colorMap=function(){var a=this,c=Array(this._properties.measurements.size());this._properties.measurements.foreach(function(b,d){c[d]={name:b.name(),color:a._properties.colors.get(d)}});return c};
epiviz.ui.charts.Chart.prototype.setColorMap=function(a){for(var c=[],b=0;b<a.length;++b)c.push(a[b].color);for(;b<this._properties.colors.size();++b)c.push(this._properties.colors.get(b));this._properties.colors=new epiviz.ui.charts.ColorPalette(c);this.draw();this._colorsChanged.notify({id:this._id,colors:this._properties.colors})};epiviz.ui.charts.Chart.prototype.onSave=function(){return this._save};epiviz.ui.charts.Chart.prototype.onRemove=function(){return this._remove};
epiviz.ui.charts.Chart.prototype.onColorsChanged=function(){return this._colorsChanged};epiviz.ui.charts.Chart.prototype.onCustomSettingsChanged=function(){return this._customSettingsChanged};epiviz.ui.charts.Chart.prototype.onSizeChanged=function(){return this._sizeChanged};epiviz.ui.charts.Chart.prototype.onMarginsChanged=function(){return this._marginsChanged};epiviz.ui.charts.Track=function(a,c,b){epiviz.ui.charts.Chart.call(this,a,c,b);this._highlightGroup=this._background=null};
epiviz.ui.charts.Track.prototype=epiviz.utils.mapCopy(epiviz.ui.charts.Chart.prototype);epiviz.ui.charts.Track.constructor=epiviz.ui.charts.Track;
epiviz.ui.charts.Track.prototype._initialize=function(){this._properties.width="100%";epiviz.ui.charts.Chart.prototype._initialize.call(this);var a=this;this._highlightGroup=this._svg.append("g").attr("class","track-highlight");this._background=this._svg.append("rect").attr("class","chart-background").attr("x",0).attr("y",0).attr("width","100%").attr("height","100%").attr("fill","#ffffff").attr("fill-opacity","0");this._background.on("mouseover",function(){a._captureMouseHover()}).on("mousemove",
function(){a._captureMouseHover()}).on("mouseout",function(){a._unhover.notify()})};epiviz.ui.charts.Track.prototype.draw=function(a,c,b,d){a=epiviz.ui.charts.Chart.prototype.draw.call(this,a,c);this._drawTitle();return a};epiviz.ui.charts.Track.prototype.displayType=function(){return epiviz.ui.charts.ChartType.DisplayType.TRACK};
epiviz.ui.charts.Track.prototype.doHover=function(a){epiviz.ui.charts.Chart.prototype.doHover.call(this,a);if(this._lastRange){this._highlightGroup.selectAll("rect").remove();this._highlightGroup.attr("transform","translate("+this.margins().left()+", 0)");var c=epiviz.ui.charts.Axis,b=d3.scale.linear().domain([this._lastRange.start(),this._lastRange.end()]).range([0,this.width()-this.margins().sumAxis(c.X)]),c=[];if(a.measurements&&a.measurements.length)for(var d=0;d<a.valueItems[0].length;++d){var e=
a.valueItems[0][d].rowItem;c.push({start:e.start(),end:e.end()})}else c.push({start:a.start,end:a.end});this._highlightGroup.selectAll("rect").data(c,function(a){return sprintf("%s-%s",a.start,a.end)}).enter().append("rect").style("fill",this.colors().get(0)).style("fill-opacity","0.1").attr("x",function(a){var c=b(a.end+1)-b(a.start),d=Math.max(5,c);return b(a.start)+.5*c-.5*d}).attr("width",function(a){return Math.max(5,b(a.end+1)-b(a.start))}).attr("y",0).attr("height",this.height())}};
epiviz.ui.charts.Track.prototype.doUnhover=function(){epiviz.ui.charts.Chart.prototype.doUnhover.call(this);this._highlightGroup.selectAll("rect").remove()};
epiviz.ui.charts.Track.prototype._captureMouseHover=function(){if(this._lastRange){this._unhover.notify();var a=d3.scale.linear().domain([0,this.width()]).range([this._lastRange.start(),this._lastRange.end()])(d3.mouse(this._background[0][0])[0])-this._binSize/2,c=a+this._binSize,a=new epiviz.ui.charts.UiObject(sprintf("%s-highlight",this._id),a,c,null,null,null,null,null);this._hover.notify(a)}};
epiviz.ui.charts.Track.prototype._drawTitle=function(){var a=this.measurements().toArray();epiviz.utils.arrayFlip(a);var c=this;this._svg.selectAll(".chart-title").remove();var a=this._svg.selectAll(".chart-title").data(a).enter().append("text").attr("class","chart-title").attr("font-weight","bold").attr("fill",function(a,b){return c.colors().get(b)}).attr("y",c.margins().top()-5).text(function(a,b){return a.name()}),b=0,d=[];$("#"+this.id()+" .chart-title").each(function(a){d.push(b);b+=this.getBBox().width+
3});a.attr("x",function(a,b){return c.margins().left()+3+d[b]})};epiviz.ui.charts.Plot=function(a,c,b){epiviz.ui.charts.Chart.call(this,a,c,b)};epiviz.ui.charts.Plot.prototype=epiviz.utils.mapCopy(epiviz.ui.charts.Chart.prototype);epiviz.ui.charts.Plot.constructor=epiviz.ui.charts.Plot;epiviz.ui.charts.Plot.prototype.displayType=function(){return epiviz.ui.charts.ChartType.DisplayType.PLOT};
epiviz.ui.charts.ChartType=function(a){var c=epiviz.Config.ChartPropertySettings;this._config=a;this._defaultSettings=epiviz.utils.mapCombine(a.chartSettings[this.typeName()],a.chartSettings[this.chartDisplayType()]);this._defaultWidth=this._defaultSettings[c.WIDTH];this._defaultHeight=this._defaultSettings[c.HEIGHT];this._defaultMargins=this._defaultSettings[c.MARGINS];this._defaultColors=this._defaultSettings[c.COLORS];this._customSettingsValues=a.chartCustomSettings[this.typeName()]||null};
epiviz.ui.charts.ChartType.DisplayType={PLOT:"plot",TRACK:"track"};epiviz.ui.charts.ChartType.prototype.createNew=function(a,c,b){throw Error("unimplemented abstract method");};epiviz.ui.charts.ChartType.prototype.typeName=function(){throw Error("unimplemented abstract method");};epiviz.ui.charts.ChartType.prototype.chartName=function(){throw Error("unimplemented abstract method");};
epiviz.ui.charts.ChartType.prototype.chartHtmlAttributeName=function(){throw Error("unimplemented abstract method");};epiviz.ui.charts.ChartType.prototype.chartDisplayType=function(){throw Error("unimplemented abstract method");};epiviz.ui.charts.ChartType.prototype.chartContentType=function(){throw Error("unimplemented abstract method");};epiviz.ui.charts.ChartType.prototype.isRestrictedToSameDatasourceGroup=function(){return!1};epiviz.ui.charts.ChartType.prototype.minSelectedMeasurements=function(){return 1};
epiviz.ui.charts.ChartType.prototype.chartContainer=function(){return epiviz.ui.ControlManager.CHART_TYPE_CONTAINERS[this.chartDisplayType()]};epiviz.ui.charts.ChartType.prototype.cssClass=function(){throw Error("unimplemented abstract method");};epiviz.ui.charts.ChartType.prototype.defaultWidth=function(){return this._defaultWidth};epiviz.ui.charts.ChartType.prototype.defaultHeight=function(){return this._defaultHeight};epiviz.ui.charts.ChartType.prototype.defaultMargins=function(){return this._defaultMargins};
epiviz.ui.charts.ChartType.prototype.defaultColors=function(){return this._defaultColors};epiviz.ui.charts.ChartType.prototype.customSettingsValues=function(){return this._customSettingsValues};
epiviz.ui.charts.ChartType.prototype.customSettingsDefs=function(){return[new epiviz.ui.charts.CustomSetting(epiviz.ui.charts.ChartType.CustomSettings.MARGIN_TOP,epiviz.ui.charts.CustomSetting.Type.NUMBER,this._defaultMargins.top(),"Top margin"),new epiviz.ui.charts.CustomSetting(epiviz.ui.charts.ChartType.CustomSettings.MARGIN_BOTTOM,epiviz.ui.charts.CustomSetting.Type.NUMBER,this._defaultMargins.bottom(),"Bottom margin"),new epiviz.ui.charts.CustomSetting(epiviz.ui.charts.ChartType.CustomSettings.MARGIN_LEFT,
epiviz.ui.charts.CustomSetting.Type.NUMBER,this._defaultMargins.left(),"Left margin"),new epiviz.ui.charts.CustomSetting(epiviz.ui.charts.ChartType.CustomSettings.MARGIN_RIGHT,epiviz.ui.charts.CustomSetting.Type.NUMBER,this._defaultMargins.right(),"Right margin")]};epiviz.ui.charts.ChartType.prototype.constructTitle=function(a){var c=[];a.foreach(function(a){c.push(a.name())});return c.join(", ")};
epiviz.ui.charts.ChartType.CustomSettings={MARGIN_LEFT:"marginLeft",MARGIN_RIGHT:"marginRight",MARGIN_TOP:"marginTop",MARGIN_BOTTOM:"marginBottom",X_MIN:"xMin",X_MAX:"xMax",Y_MIN:"yMin",Y_MAX:"yMax",LABEL:"label"};epiviz.ui.charts.TrackType=function(a){epiviz.ui.charts.ChartType.call(this,a)};epiviz.ui.charts.TrackType.prototype=epiviz.utils.mapCopy(epiviz.ui.charts.ChartType.prototype);epiviz.ui.charts.TrackType.constructor=epiviz.ui.charts.TrackType;
epiviz.ui.charts.TrackType.prototype.chartDisplayType=function(){return epiviz.ui.charts.ChartType.DisplayType.TRACK};epiviz.ui.charts.TrackType.prototype.cssClass=function(){return"track-container ui-widget-content"};epiviz.ui.charts.PlotType=function(a){epiviz.ui.charts.ChartType.call(this,a)};epiviz.ui.charts.PlotType.prototype=epiviz.utils.mapCopy(epiviz.ui.charts.ChartType.prototype);epiviz.ui.charts.PlotType.constructor=epiviz.ui.charts.PlotType;
epiviz.ui.charts.PlotType.prototype.chartDisplayType=function(){return epiviz.ui.charts.ChartType.DisplayType.PLOT};epiviz.ui.charts.PlotType.prototype.cssClass=function(){return"plot-container ui-widget-content"};epiviz.ui.charts.ChartFactory=function(a){this._config=a;this._types={};for(var c=this._size=0;c<a.chartTypes.length;++c)this.register(a.chartTypes[c])};epiviz.ui.charts.ChartFactory.prototype.size=function(){return this._size};
epiviz.ui.charts.ChartFactory.prototype.registerType=function(a){a.typeName()in this._types||++this._size;this._types[a.typeName()]=a};epiviz.ui.charts.ChartFactory.prototype.unregisterType=function(a){if(!(a.typeName()in this._types))return!1;--this._size;delete this._types[a.typeName()];return!0};epiviz.ui.charts.ChartFactory.prototype.register=function(a){a=epiviz.utils.evaluateFullyQualifiedTypeName(a);if(!a)return!1;this.registerType(new a(this._config));return!0};
epiviz.ui.charts.ChartFactory.prototype.unregister=function(a){return(a=epiviz.utils.evaluateFullyQualifiedTypeName(a))?this.unregisterType(new a(this._config)):!1};epiviz.ui.charts.ChartFactory.prototype.get=function(a){return a&&a in this._types?this._types[a]:null};epiviz.ui.charts.ChartFactory.prototype.foreach=function(a){for(var c in this._types)if(this._types.hasOwnProperty(c)&&a(c,this._types[c]))break};
epiviz.ui.charts.ChartManager=function(a){this._config=a;this._charts={};this._chartsOrder={};this._resizeInterval=null;this._chartAdded=new epiviz.events.Event;this._chartRemoved=new epiviz.events.Event;this._chartsCleared=new epiviz.events.Event;this._chartColorsChanged=new epiviz.events.Event;this._chartCustomSettingsChanged=new epiviz.events.Event;this._chartSizeChanged=new epiviz.events.Event;this._chartMarginsChanged=new epiviz.events.Event;this._registerWindowResize()};
epiviz.ui.charts.ChartManager.prototype.addChart=function(a,c,b,d){b=b||sprintf("%s-%s-%s",a.chartDisplayType(),a.chartHtmlAttributeName(),epiviz.utils.generatePseudoGUID(5));var e=a.cssClass(),f=$("#"+a.chartContainer());f.append(sprintf('<div id="%s" class="%s"></div>',b,e));e=f.find("#"+b);d=d||new epiviz.ui.charts.ChartProperties(a.defaultWidth(),a.defaultHeight(),a.defaultMargins(),c,a.defaultColors(),a.customSettingsValues(),a.customSettingsDefs());c=a.createNew(b,e,d);this._charts[b]=c;this._registerChartHover(c);
this._registerChartUnhover(c);this._registerChartSelect(c);this._registerChartDeselect(c);this._registerChartColorsChanged(c);this._registerChartCustomSettingsChanged(c);this._registerChartSizeChanged(c);this._registerChartMarginsChanged(c);this._registerChartRemove(c);this._registerChartSave(c);a.chartDisplayType()in this._chartsOrder||(this._chartsOrder[a.chartDisplayType()]=[]);this._chartsOrder[a.chartDisplayType()].push(b);this._chartAdded.notify({id:b,type:a,properties:d,chartsOrder:this._chartsOrder});
return b};epiviz.ui.charts.ChartManager.prototype.removeChart=function(a){$("#"+a).remove();var c=this._charts[a];delete this._charts[a];this._chartsOrder[c.displayType()].splice(this._chartsOrder[c.displayType()].indexOf(a),1);this._chartRemoved.notify({id:a,chartsOrder:this._chartsOrder})};epiviz.ui.charts.ChartManager.prototype.chartsMeasurements=function(){var a={},c;for(c in this._charts)this._charts.hasOwnProperty(c)&&(a[c]=this._charts[c].measurements());return a};
epiviz.ui.charts.ChartManager.prototype.updateCharts=function(a,c,b){b=b||Object.keys(this._charts);for(var d=0;d<b.length;++d)if(this._charts.hasOwnProperty(b[d])){var e=this._charts[b[d]];e&&e.draw(a,c)}};epiviz.ui.charts.ChartManager.prototype.clear=function(){this._charts={};this._chartsOrder={};var a=epiviz.ui.ControlManager.CHART_TYPE_CONTAINERS,c;for(c in a)a.hasOwnProperty(c)&&$("#"+a[c]).empty();this._chartsCleared.notify()};
epiviz.ui.charts.ChartManager.prototype.addChartsLoaderAnimation=function(a){if(a&&this._charts[a])this._charts[a].addLoaderAnimation();else for(var c in this._charts)this._charts.hasOwnProperty(a)&&this._charts[a].addLoaderAnimation()};epiviz.ui.charts.ChartManager.prototype.onChartAdded=function(){return this._chartAdded};epiviz.ui.charts.ChartManager.prototype.onChartRemoved=function(){return this._chartRemoved};epiviz.ui.charts.ChartManager.prototype.onChartsCleared=function(){return this._chartsCleared};
epiviz.ui.charts.ChartManager.prototype.onChartColorsChanged=function(){return this._chartColorsChanged};epiviz.ui.charts.ChartManager.prototype.onChartCustomSettingsChanged=function(){return this._chartCustomSettingsChanged};epiviz.ui.charts.ChartManager.prototype.onChartSizeChanged=function(){return this._chartSizeChanged};epiviz.ui.charts.ChartManager.prototype.onChartMarginsChanged=function(){return this._chartMarginsChanged};
epiviz.ui.charts.ChartManager.prototype._registerWindowResize=function(){var a=this;$(window).resize(function(c){null!==a._resizeInterval&&window.clearTimeout(a._resizeInterval);a._resizeInterval=window.setTimeout(function(){for(var b in a._charts)a._charts.hasOwnProperty(b)&&a._charts[b].containerResize();a._resizeInterval=null},500)})};
epiviz.ui.charts.ChartManager.prototype._registerChartHover=function(a){var c=this;a.onHover().addListener(new epiviz.events.EventListener(function(a){for(var d in c._charts)c._charts.hasOwnProperty(d)&&c._charts[d].doHover(a)}))};epiviz.ui.charts.ChartManager.prototype._registerChartUnhover=function(a){var c=this;a.onUnhover().addListener(new epiviz.events.EventListener(function(){for(var a in c._charts)c._charts.hasOwnProperty(a)&&c._charts[a].doUnhover()}))};
epiviz.ui.charts.ChartManager.prototype._registerChartSelect=function(a){var c=this;a.onSelect().addListener(new epiviz.events.EventListener(function(a){for(var d in c._charts)c._charts.hasOwnProperty(d)&&c._charts[d].doSelect(a)}))};epiviz.ui.charts.ChartManager.prototype._registerChartDeselect=function(a){var c=this;a.onDeselect().addListener(new epiviz.events.EventListener(function(){for(var a in c._charts)c._charts.hasOwnProperty(a)&&c._charts[a].doDeselect()}))};
epiviz.ui.charts.ChartManager.prototype._registerChartRemove=function(a){var c=this;a.onRemove().addListener(new epiviz.events.EventListener(function(){c.removeChart(a.id())}))};epiviz.ui.charts.ChartManager.prototype._registerChartSave=function(a){var c=this;a.onSave().addListener(new epiviz.events.EventListener(function(a){(new epiviz.ui.controls.SaveSvgAsImageDialog({ok:function(){},cancel:function(){}},a,c._config.dataServerLocation+c._config.chartSaverLocation)).show()}))};
epiviz.ui.charts.ChartManager.prototype._registerChartColorsChanged=function(a){var c=this;a.onColorsChanged().addListener(new epiviz.events.EventListener(function(a){c._chartColorsChanged.notify(a)}))};epiviz.ui.charts.ChartManager.prototype._registerChartCustomSettingsChanged=function(a){var c=this;a.onCustomSettingsChanged().addListener(new epiviz.events.EventListener(function(a){c._chartCustomSettingsChanged.notify(a)}))};
epiviz.ui.charts.ChartManager.prototype._registerChartSizeChanged=function(a){var c=this;a.onSizeChanged().addListener(new epiviz.events.EventListener(function(a){c._chartSizeChanged.notify(a)}))};epiviz.ui.charts.ChartManager.prototype._registerChartMarginsChanged=function(a){var c=this;a.onMarginsChanged().addListener(new epiviz.events.EventListener(function(a){c._chartMarginsChanged.notify(a)}))};epiviz.workspaces={};epiviz.workspaces.UserManager=function(a){this._config=a};
epiviz.workspaces.UserManager.USER_STATUS=epiviz.workspaces.UserManager.USER_STATUS||{loggedIn:!1,userData:null,oauthProvider:null};epiviz.workspaces.UserManager.prototype.toggleLogin=function(){epiviz.workspaces.UserManager.USER_STATUS.loggedIn?this._logout():this._login()};epiviz.workspaces.UserManager.prototype._login=function(){var a=window.location.toString();0<a.length&&(a=encodeURIComponent(a));window.location=this._config.dataServerLocation+"login.php?location="+a};
epiviz.workspaces.UserManager.prototype._logout=function(){var a=window.location.toString();0<a.length&&(a=encodeURIComponent(a));window.location=this._config.dataServerLocation+"logout.php?logout&location="+a};
epiviz.workspaces.Workspace=function(a,c,b){this._id=a;this._name=c;this._range=b.range;this._chartsOrder={};this._chartsById={};for(var d in b.charts)if(b.charts.hasOwnProperty(d))for(this._chartsOrder[d]=[],a=0;a<b.charts[d].length;++a)this._chartsById[b.charts[d][a].id]=b.charts[d][a],this._chartsOrder[d].push(b.charts[d][a].id);this._computedMeasurements=b.computedMeasurements||new epiviz.measurements.MeasurementSet;this._changed=!1};epiviz.workspaces.Workspace.DEFAULT_WORKSPACE_NAME="Default Workspace";
epiviz.workspaces.Workspace.prototype.id=function(){return this._id};epiviz.workspaces.Workspace.prototype.name=function(){return this._name};epiviz.workspaces.Workspace.prototype.range=function(){return this._range};epiviz.workspaces.Workspace.prototype.charts=function(){var a={},c;for(c in this._chartsOrder)if(this._chartsOrder.hasOwnProperty(c)){a[c]=[];for(var b=0;b<this._chartsOrder[c].length;++b)a[c].push(this._chartsById[this._chartsOrder[c][b]])}return a};
epiviz.workspaces.Workspace.prototype.chartsOrder=function(){return this._chartsOrder};epiviz.workspaces.Workspace.prototype.computedMeasurements=function(){return this._computedMeasurements};epiviz.workspaces.Workspace.prototype.chartAdded=function(a,c,b,d){this._chartsById[a]={id:a,type:c,properties:b.copy()};this._chartsOrder=d;this._setChanged()};epiviz.workspaces.Workspace.prototype.chartRemoved=function(a,c){this._chartsById[a]&&(delete this._chartsById[a],this._chartsOrder=c,this._setChanged())};
epiviz.workspaces.Workspace.prototype.chartSizeChanged=function(a,c,b){if(this._chartsById[a].properties.width!=c||this._chartsById[a].properties.height!=b)this._chartsById[a].properties.width=c,this._chartsById[a].properties.height=b,this._setChanged()};epiviz.workspaces.Workspace.prototype.chartMarginsChanged=function(a,c){this._chartsById[a].properties.margins.equals(c)||(this._chartsById[a].properties.margins=c?c.copy():c,this._setChanged())};
epiviz.workspaces.Workspace.prototype.chartColorsChanged=function(a,c){this._chartsById[a].properties.colors.equals(c)||(this._chartsById[a].properties.colors=c,this._setChanged())};epiviz.workspaces.Workspace.prototype.chartCustomSettingsChanged=function(a,c){epiviz.utils.mapEquals(this._chartsById[a].properties.customSettingsValues,c)||(this._chartsById[a].properties.customSettingsValues=c?epiviz.utils.mapCopy(c):c,this._setChanged())};
epiviz.workspaces.Workspace.prototype.locationChanged=function(a){this._range.equals(a)||(this._range=a,this._setChanged())};epiviz.workspaces.Workspace.prototype.computedMeasurementsAdded=function(a){var c=this._computedMeasurements.size();this._computedMeasurements.addAll(a);c!=this._computedMeasurements.size()&&this._setChanged()};
epiviz.workspaces.Workspace.prototype.computedMeasurementsRemoved=function(a){var c=this._computedMeasurements.size();this._computedMeasurements.removeAll(a);c!=this._computedMeasurements.size()&&this._setChanged()};epiviz.workspaces.Workspace.prototype.changed=function(){return this._changed};epiviz.workspaces.Workspace.prototype.resetChanged=function(){this._changed=!1};epiviz.workspaces.Workspace.prototype._setChanged=function(){this._changed=!0};
epiviz.workspaces.Workspace.prototype.copy=function(a,c){var b=this.charts();return new epiviz.workspaces.Workspace(c||null,a,{range:this._range,computedMeasurements:new epiviz.measurements.MeasurementSet(this._computedMeasurements),charts:b})};
epiviz.workspaces.Workspace.prototype.raw=function(){var a=new epiviz.measurements.MeasurementHashtable,c={};this._computedMeasurements.foreach(function(b){var c;b.componentMeasurements().foreach(function(b){var c=a.get(b);null===c&&(c=a.size(),a.put(b,c))});var d=b.formula().referredMeasurements,e;for(e in d)d.hasOwnProperty(e)&&(c=a.get(d[e]),null===c&&(c=a.size(),a.put(d[e],c)));c=a.get(b);null===c&&(c=a.size(),a.put(b,c))});for(var b in this._chartsOrder)if(this._chartsOrder.hasOwnProperty(b)){c[b]=
[];for(var d=0;d<this._chartsOrder[b].length;++d){var e=this._chartsById[this._chartsOrder[b][d]],f=e.properties,g=[];(function(b){f.measurements.foreach(function(c){var d=a.get(c);null===d&&(d=a.size(),a.put(c,d));b.push(d)})})(g);c[b].push({id:e.id,type:e.type.typeName(),properties:{width:f.width,height:f.height,margins:f.margins.raw(),measurements:g,colors:f.colors.raw(),customSettings:f.customSettingsValues||null}})}}var h=Array(a.size());a.foreach(function(b,c){h[c]=b.raw(a)});return{id:this._id,
name:this._name,content:{range:this._range.raw(),measurements:h,charts:c}}};
epiviz.workspaces.Workspace.fromRawObject=function(a,c){var b,d=Array(a.content.measurements.length),e=new epiviz.measurements.MeasurementSet;for(b=0;b<a.content.measurements.length;++b)a.content.measurements[b].formula||(d[b]=epiviz.measurements.Measurement.fromRawObject(a.content.measurements[b]));for(b=0;b<a.content.measurements.length;++b)a.content.measurements[b].formula&&(d[b]=epiviz.measurements.Measurement.fromRawObject(a.content.measurements[b],d),e.add(d[b]));var f={},g;for(g in a.content.charts)if(a.content.charts.hasOwnProperty(g))for(f[g]=
[],b=0;b<a.content.charts[g].length;++b){for(var h=a.content.charts[g][b],l=new epiviz.measurements.MeasurementSet,m=0;m<h.properties.measurements.length;++m)l.add(d[h.properties.measurements[m]]);(m=c.get(h.type))&&f[g].push({id:h.id,type:m,properties:new epiviz.ui.charts.ChartProperties(h.properties.width,h.properties.height,epiviz.ui.charts.Margins.fromRawObject(h.properties.margins),l,epiviz.ui.charts.ColorPalette.fromRawObject(h.properties.colors),h.properties.customSettings,m.customSettingsDefs())})}return new epiviz.workspaces.Workspace(a.id,
a.name,{range:epiviz.datatypes.GenomicRange.fromRawObject(a.content.range),computedMeasurements:e,charts:f})};
epiviz.workspaces.WorkspaceManager=function(a,c,b,d,e){this._config=a;this._locationManager=c;this._measurementsManager=b;this._chartManager=d;this._chartFactory=e;this._workspacesByName=this._workspaces=this._activeWorkspace=null;this._workspacesLoaded=new epiviz.events.Event;this._activeWorkspaceChanged=new epiviz.events.Event;this._activeWorkspaceChanging=!1;this._requestWorkspaces=new epiviz.events.Event;this._registerLocationChanged();this._registerComputedMeasurementAdded();this._registerComputedMeasurementRemoved();
this._registerChartAdded();this._registerChartRemoved();this._registerChartColorsChanged();this._registerChartSizeChanged();this._registerChartMarginsChanged();this._registerChartCustomSettingsChanged()};epiviz.workspaces.WorkspaceManager.prototype.activeWorkspace=function(){return this._activeWorkspace||null};epiviz.workspaces.WorkspaceManager.prototype.get=function(a){return a&&this._workspaces?this._workspaces[a]||null:null};
epiviz.workspaces.WorkspaceManager.prototype.getByName=function(a){return a&&this._workspacesByName?this._workspacesByName[a]||null:null};epiviz.workspaces.WorkspaceManager.prototype.initialize=function(){this._requestWorkspaces.notify({activeWorkspaceId:epiviz.ui.WebArgsManager.WEB_ARGS.ws||epiviz.ui.WebArgsManager.WEB_ARGS.workspace||null})};
epiviz.workspaces.WorkspaceManager.prototype.updateWorkspaces=function(a,c,b){if(a){this._workspaces={};this._workspacesByName={};for(var d=0;d<a.length;++d)null!==a[d].id()&&(this._workspaces[a[d].id()]=a[d],this._workspacesByName[a[d].name()]=a[d])}c||(c=a&&a.length?a[0]:epiviz.workspaces.Workspace.fromRawObject(this._config.defaultWorkspaceSettings,this._chartFactory));d=this._activeWorkspace;this._activeWorkspace=c;var e=epiviz.ui.WebArgsManager.WEB_ARGS;c=e.seqName||this._activeWorkspace.range().seqName();
var f=parseInt(e.start)||this._activeWorkspace.range().start(),e=parseInt(e.end)||this._activeWorkspace.range().end();this._activeWorkspace.locationChanged(epiviz.datatypes.GenomicRange.fromStartEnd(c,f,e));this._workspacesLoaded.notify({activeWorkspace:this._activeWorkspace,workspaces:a});this._activeWorkspaceChanged.notify({oldValue:d,newValue:this._activeWorkspace,workspaceId:this._activeWorkspace.id()||b})};
epiviz.workspaces.WorkspaceManager.prototype.updateWorkspace=function(a){this._workspaces[a.id()]=a;this._workspacesByName[a.name()]=a};
epiviz.workspaces.WorkspaceManager.prototype.deleteActiveWorkspace=function(){var a=this._activeWorkspace;if(a&&a.id()){delete this._workspaces[a.id()];delete this._workspacesByName[a.name()];var c=null,b;for(b in this._workspaces)if(this._workspaces.hasOwnProperty(b)){c=this._workspaces[b];break}c||(c=epiviz.workspaces.Workspace.fromRawObject(this._config.defaultWorkspaceSettings,this._chartFactory));this._activeWorkspace=c;c=a.range().seqName();b=a.range().start();var d=a.range().end();this._activeWorkspace.locationChanged(epiviz.datatypes.GenomicRange.fromStartEnd(c,
b,d));this._activeWorkspaceChanged.notify({oldValue:a,newValue:this._activeWorkspace,workspaceId:this._activeWorkspace.id()})}};epiviz.workspaces.WorkspaceManager.prototype.onWorkspacesLoaded=function(){return this._workspacesLoaded};epiviz.workspaces.WorkspaceManager.prototype.onActiveWorkspaceChanged=function(){return this._activeWorkspaceChanged};epiviz.workspaces.WorkspaceManager.prototype.startChangingActiveWorkspace=function(){this._activeWorkspaceChanging=!0};
epiviz.workspaces.WorkspaceManager.prototype.endChangingActiveWorkspace=function(){this._activeWorkspaceChanging=!1};epiviz.workspaces.WorkspaceManager.prototype.activeWorkspaceChanging=function(){return this._activeWorkspaceChanging};epiviz.workspaces.WorkspaceManager.prototype.onRequestWorkspaces=function(){return this._requestWorkspaces};
epiviz.workspaces.WorkspaceManager.prototype.changeActiveWorkspace=function(a,c){if((c=c||this._workspaces[a])&&c!==this._activeWorkspace){var b=this._activeWorkspace;this._activeWorkspace=c;this._activeWorkspaceChanged.notify({oldValue:b,newValue:this._activeWorkspace,workspaceId:a})}};
epiviz.workspaces.WorkspaceManager.prototype._registerLocationChanged=function(){var a=this;this._locationManager.onCurrentLocationChanged().addListener(new epiviz.events.EventListener(function(c){a._activeWorkspaceChanging||a._activeWorkspace&&a._activeWorkspace.locationChanged(c.newValue)}))};
epiviz.workspaces.WorkspaceManager.prototype._registerChartAdded=function(){var a=this;this._chartManager.onChartAdded().addListener(new epiviz.events.EventListener(function(c){a._activeWorkspaceChanging||a._activeWorkspace&&a._activeWorkspace.chartAdded(c.id,c.type,c.properties,c.chartsOrder)}))};
epiviz.workspaces.WorkspaceManager.prototype._registerChartRemoved=function(){var a=this;this._chartManager.onChartRemoved().addListener(new epiviz.events.EventListener(function(c){a._activeWorkspaceChanging||a._activeWorkspace&&a._activeWorkspace.chartRemoved(c.id,c.chartsOrder)}))};
epiviz.workspaces.WorkspaceManager.prototype._registerChartColorsChanged=function(){var a=this;this._chartManager.onChartColorsChanged().addListener(new epiviz.events.EventListener(function(c){a._activeWorkspaceChanging||a._activeWorkspace&&a._activeWorkspace.chartColorsChanged(c.id,c.colors)}))};
epiviz.workspaces.WorkspaceManager.prototype._registerChartCustomSettingsChanged=function(){var a=this;this._chartManager.onChartCustomSettingsChanged().addListener(new epiviz.events.EventListener(function(c){a._activeWorkspaceChanging||a._activeWorkspace&&a._activeWorkspace.chartCustomSettingsChanged(c.id,c.customSettingsValues)}))};
epiviz.workspaces.WorkspaceManager.prototype._registerChartSizeChanged=function(){var a=this;this._chartManager.onChartSizeChanged().addListener(new epiviz.events.EventListener(function(c){a._activeWorkspaceChanging||a._activeWorkspace&&a._activeWorkspace.chartSizeChanged(c.id,c.width,c.height)}))};
epiviz.workspaces.WorkspaceManager.prototype._registerChartMarginsChanged=function(){var a=this;this._chartManager.onChartMarginsChanged().addListener(new epiviz.events.EventListener(function(c){a._activeWorkspaceChanging||a._activeWorkspace&&a._activeWorkspace.chartMarginsChanged(c.id,c.margins)}))};
epiviz.workspaces.WorkspaceManager.prototype._registerComputedMeasurementAdded=function(){var a=this;this._measurementsManager.onComputedMeasurementsAdded().addListener(new epiviz.events.EventListener(function(c){a._activeWorkspaceChanging||a._activeWorkspace&&a._activeWorkspace.computedMeasurementsAdded(c)}))};
epiviz.workspaces.WorkspaceManager.prototype._registerComputedMeasurementRemoved=function(){var a=this;this._measurementsManager.onComputedMeasurementsRemoved().addListener(new epiviz.events.EventListener(function(c){a._activeWorkspaceChanging||a._activeWorkspace&&a._activeWorkspace.computedMeasurementsRemoved(c)}))};epiviz.datatypes.GenomicRange=function(a,c,b){this._seqname=a;this._start=c;this._width=b};
epiviz.datatypes.GenomicRange.fromStartEnd=function(a,c,b){return new epiviz.datatypes.GenomicRange(a,c,b-c)};epiviz.datatypes.GenomicRange.prototype.seqName=function(){return this._seqname};epiviz.datatypes.GenomicRange.prototype.start=function(){return this._start};epiviz.datatypes.GenomicRange.prototype.width=function(){return this._width};epiviz.datatypes.GenomicRange.prototype.end=function(){return this._start+this._width};
epiviz.datatypes.GenomicRange.prototype.isEmpty=function(){return 0>=this._width};
epiviz.datatypes.GenomicRange.prototype.subtract=function(a){return!a||a.seqName()!=this._seqname||a.isEmpty()||a.start()>=this.end()||this._start>=a.end()?[this]:a.start()<=this._start&&a.end()>=this.end()?[]:a.start()>this._start&&a.end()<this.end()?[epiviz.datatypes.GenomicRange.fromStartEnd(this._seqname,this._start,a.start()),epiviz.datatypes.GenomicRange.fromStartEnd(this._seqname,a.end(),this.end())]:a.start()>this._start?[epiviz.datatypes.GenomicRange.fromStartEnd(this._seqname,this._start,
a.start())]:[epiviz.datatypes.GenomicRange.fromStartEnd(this._seqname,a.end(),this.end())]};epiviz.datatypes.GenomicRange.prototype.equals=function(a){return a?a==this?!0:this._seqname==a._seqname&&this._start==a._start&&this._width==a._width:!1};epiviz.datatypes.GenomicRange.prototype.overlapsWith=function(a){return a?this==a?!0:this.seqName()!=a.seqName()?!1:this.start()<a.end()&&this.end()>a.start():!1};
epiviz.datatypes.GenomicRange.prototype.raw=function(){return{seqName:this._seqname,start:this._start,width:this._width}};epiviz.datatypes.GenomicRange.fromRawObject=function(a){return new epiviz.datatypes.GenomicRange(a.seqName,a.start,a.width)};
epiviz.ui.LocationManager=function(a){this._seqInfos={};this._timeout=this._lastUnfilledRequest=this._currentLocation=null;this._navigationDelay=a.navigationDelay;this._currentLocationChanged=new epiviz.events.Event;this._seqInfosUpdated=new epiviz.events.Event;this._requestSeqInfos=new epiviz.events.Event};epiviz.ui.LocationManager.prototype.initialize=function(){this._requestSeqInfos.notify()};
epiviz.ui.LocationManager.prototype.changeCurrentLocation=function(a){if(!this._currentLocationChanged.isFiring()){this._lastUnfilledRequest=a;null!==this._timeout&&(window.clearTimeout(this._timeout),this._timeout=null);var c=this;a=function(){var a=c._lastUnfilledRequest;null!==a&&c._doChangeCurrentLocation(a)};this._navigationDelay?this._timeout=window.setTimeout(a,this._navigationDelay):a()}};
epiviz.ui.LocationManager.prototype._doChangeCurrentLocation=function(a){var c=this._currentLocation,b=a.seqName();if(!(a.seqName()in this._seqInfos)){if(!c)return;b=c.seqName()}var d=a.start()>=this._seqInfos[b].min?a.start():this._seqInfos[b].min,e=d+a.width();e>this._seqInfos[b].max&&(e=this._seqInfos[b].max,d=Math.max(this._seqInfos[b].min,e-a.width()));this._lastUnfilledRequest=null;this._currentLocation=epiviz.datatypes.GenomicRange.fromStartEnd(b,d,e);this._currentLocationChanged.notify({oldValue:c,
newValue:this._currentLocation})};epiviz.ui.LocationManager.prototype.currentLocation=function(){return this._currentLocation};epiviz.ui.LocationManager.prototype.lastUnfilledLocationChangeRequest=function(){return this._lastUnfilledRequest};epiviz.ui.LocationManager.prototype.updateSeqInfos=function(a){this._seqInfos={};for(var c=0;c<a.length;++c)this._seqInfos[a[c].seqName]=a[c];this._seqInfosUpdated.notify(a);null!==this._lastUnfilledRequest&&this._doChangeCurrentLocation(this._lastUnfilledRequest)};
epiviz.ui.LocationManager.prototype.addSeqInfos=function(a){for(var c=0;c<a.length;++c)this._seqInfos[a[c].seqName]||(this._seqInfos[a[c].seqName]=a[c]);a=[];for(var b in this._seqInfos)this._seqInfos.hasOwnProperty(b)&&a.push(this._seqInfos[b]);this._seqInfosUpdated.notify(a)};
epiviz.ui.LocationManager.prototype.removeSeqNames=function(a){for(var c=0;c<a.length;++c)delete this._seqInfos[a[c]];a=[];for(var b in this._seqInfos)this._seqInfos.hasOwnProperty(b)&&a.push(this._seqInfos[b]);this._seqInfosUpdated.notify(a);this._currentLocation.seqName()in this._seqInfos||this.changeCurrentLocation(new epiviz.datatypes.GenomicRange(a[0].seqName,this._currentLocation.start(),this._currentLocation.width()))};epiviz.ui.LocationManager.prototype.seqInfos=function(){return this._seqInfos};
epiviz.ui.LocationManager.prototype.onCurrentLocationChanged=function(){return this._currentLocationChanged};epiviz.ui.LocationManager.prototype.onSeqInfosUpdated=function(){return this._seqInfosUpdated};epiviz.ui.LocationManager.prototype.onRequestSeqInfos=function(){return this._requestSeqInfos};
epiviz.ui.ControlManager=function(a,c,b,d,e){this._config=a;this._chartFactory=c;this._chartManager=b;this._measurementsManager=d;this._locationManager=e;this._addChart=new epiviz.events.Event;this._activeWorkspaceChanged=new epiviz.events.Event;this._saveWorkspace=new epiviz.events.Event;this._deleteActiveWorkspace=new epiviz.events.Event;this._loginLinkClicked=new epiviz.events.Event;this._searchWorkspaces=new epiviz.events.Event;this._search=new epiviz.events.Event;this._activeWorkspaceInfo=null;
this._stepRatio=a.navigationStepRatio;this._zoominRatio=a.zoominRatio;this._zoomoutRatio=a.zoomoutRatio};epiviz.ui.ControlManager.CHART_TYPE_CONTAINERS={plot:"chart-container",track:"track-container"};
epiviz.ui.ControlManager.prototype.initialize=function(){this._initializeAccordions();this._initializeChromosomeSelector();this._initializeLocationTextbox();this._initializeNavigationButtons();this._initializeZoomButtons();this._initializeLocationSettingsDialog();this._initializeChartMenus();this._initializeComputedMeasurementsMenu();this._initializeHelpButton();this._initializeSearchBox();this._initializeWorkspaceSaving();this._initializeLoginLink();this._initializeLayout();this._checkBrowserCompatibility();
this._registerLocationChanged();this._registerSeqInfosUpdated()};epiviz.ui.ControlManager.prototype.onAddChart=function(){return this._addChart};epiviz.ui.ControlManager.prototype.onActiveWorkspaceChanged=function(){return this._activeWorkspaceChanged};epiviz.ui.ControlManager.prototype.onSaveWorkspace=function(){return this._saveWorkspace};epiviz.ui.ControlManager.prototype.onDeleteActiveWorkspace=function(){return this._deleteActiveWorkspace};
epiviz.ui.ControlManager.prototype.onLoginLinkClicked=function(){return this._loginLinkClicked};epiviz.ui.ControlManager.prototype.onSearchWorkspaces=function(){return this._searchWorkspaces};epiviz.ui.ControlManager.prototype.onSearch=function(){return this._search};
epiviz.ui.ControlManager.prototype._updateSeqNames=function(a){var c=$("#chromosome-selector");c.empty();for(var b=0;b<a.length;++b){var d=sprintf('<option value="%s"%s>%s</option>',a[b].seqName,this._locationManager.currentLocation()&&a[b].seqName==this._locationManager.currentLocation().seqName()?'selected="selected"':"",a[b].seqName);c.append(d)}c.selectmenu()};
epiviz.ui.ControlManager.prototype._updateSelectedLocation=function(a){if(a){this._locationManager.changeCurrentLocation(a);a=this._locationManager.currentLocation();$("#text-location").val(Globalize.format(a.start(),"n0")+" - "+Globalize.format(a.end(),"n0"));var c=$("#chromosome-selector");c.val(a.seqName());c.selectmenu()}};
epiviz.ui.ControlManager.prototype.updateSelectedWorkspace=function(a){var c=this,b=$("#save-workspace-text"),d=this._activeWorkspaceInfo;b.val(a.name);this._activeWorkspaceInfo=a;this._activeWorkspaceChanged.notify({oldValue:d,newValue:a,cancel:function(){b.val(d.name);c._activeWorkspaceInfo=d}})};
epiviz.ui.ControlManager.prototype._initializeAccordions=function(){var a=$("#top-accordion");a.multiAccordion();a.multiAccordion("option","active","all");a=$("#bottom-accordion");a.multiAccordion();a.multiAccordion("option","active","all")};
epiviz.ui.ControlManager.prototype._initializeChromosomeSelector=function(){var a=$("#chromosome-selector");a.selectmenu({style:"popup",width:"90",maxHeight:"100",menuWidth:"90"});var c=this;a.change(function(){var a=c._locationManager.lastUnfilledLocationChangeRequest()||c._locationManager.currentLocation(),d=$(this).val();c._updateSelectedLocation(new epiviz.datatypes.GenomicRange(d,a.start(),a.width()))})};
epiviz.ui.ControlManager.prototype._initializeLocationTextbox=function(){var a=this;$("#text-location").keypress(function(c){if(13!=c.which)return!0;try{var b=$(this).val().split("-"),d=Globalize.parseInt(b[0]),e=Globalize.parseInt(b[1]),f=a._locationManager.lastUnfilledLocationChangeRequest()||a._locationManager.currentLocation();a._updateSelectedLocation(epiviz.datatypes.GenomicRange.fromStartEnd(f.seqName(),d,e));return!0}catch(g){return!1}})};
epiviz.ui.ControlManager.prototype._initializeNavigationButtons=function(){var a=this;$("#moveright").button({icons:{primary:"ui-icon ui-icon-seek-next"},text:!1}).click(function(){var c=a._locationManager.lastUnfilledLocationChangeRequest()||a._locationManager.currentLocation(),b=c.start()+Math.round(c.width()*a._stepRatio);a._updateSelectedLocation(new epiviz.datatypes.GenomicRange(c.seqName(),b,c.width()))});$("#moveleft").button({icons:{primary:"ui-icon ui-icon-seek-prev"},text:!1}).click(function(){var c=
a._locationManager.lastUnfilledLocationChangeRequest()||a._locationManager.currentLocation(),b=c.start()-Math.round(c.width()*a._stepRatio);a._updateSelectedLocation(new epiviz.datatypes.GenomicRange(c.seqName(),b,c.width()))})};
epiviz.ui.ControlManager.prototype._initializeZoomButtons=function(){var a=this,c=$("#zoomin");c.button({icons:{primary:"ui-icon ui-icon-zoomin"},text:!1});var b=$("#zoomout");b.button({icons:{primary:"ui-icon ui-icon-zoomout"},text:!1});var d=function(b){var c=a._locationManager.lastUnfilledLocationChangeRequest()||a._locationManager.currentLocation(),d=c.start()+.5*c.width();b=Math.round(c.width()*b);d=Math.round(d-.5*b);a._updateSelectedLocation(new epiviz.datatypes.GenomicRange(c.seqName(),d,
b))};c.click(function(){d(a._zoominRatio)});b.click(function(){d(a._zoomoutRatio)})};
epiviz.ui.ControlManager.prototype._initializeLocationSettingsDialog=function(){var a=this;$("#location-settings").button({text:!1,icons:{primary:"ui-icon ui-icon-gear"}}).click(function(){$("#location-settings-dialog").dialog("open")});$("#location-settings-dialog").dialog({autoOpen:!1,resizable:!1,width:"300",buttons:{Ok:function(){a._zoominRatio=$("#zoomin-ratio-text").val();a._zoomoutRatio=$("#zoomout-ratio-text").val();a._stepRatio=$("#navigation-step-ratio-text").val();$(this).dialog("close")},
Cancel:function(){$("#zoomin-ratio-text").val(Globalize.format(a._zoominRatio,"n3"));$("#zoomout-ratio-text").val(Globalize.format(a._zoomoutRatio,"n3"));$("#navigation-step-ratio-text").val(Globalize.format(a._stepRatio,"n6"));$(this).dialog("close")}},modal:!0});$("#zoomout-ratio-text").spinner({min:1.001,max:1E3,step:.001,start:1.2,numberFormat:"n3"}).val(a._zoomoutRatio);$("#zoomin-ratio-text").spinner({min:.001,max:.999,step:.01,start:.8,numberFormat:"n3"}).val(a._zoominRatio);$("#navigation-step-ratio-text").spinner({min:1E-6,
max:1,step:1E-6,start:.2,numberFormat:"n6"}).val(a._stepRatio)};
epiviz.ui.ControlManager.prototype._initializeChartMenus=function(){var a=this,c=$("#plot-menu"),b=$("#track-menu");$("#plot-button").button({text:!1,icons:{primary:"ui-icon ui-icon-scatterplot",secondary:"ui-icon-triangle-1-s"}}).click(function(){var a=c.is(":visible");$(".dropdown-menu").find(">:first-child").hide();a||c.show().position({my:"left top",at:"left bottom",of:this});$(document).one("click",function(){c.hide()});return!1});$("#track-button").button({text:!1,icons:{primary:"ui-icon ui-icon-track",
secondary:"ui-icon-triangle-1-s"}}).click(function(){var a=b.is(":visible");$(".dropdown-menu").find(">:first-child").hide();a||b.show().position({my:"left top",at:"left bottom",of:this});$(document).one("click",function(){b.hide()});return!1});this._chartFactory.foreach(function(d,e){var f=sprintf("%s-menu-add-%s",e.chartDisplayType(),e.chartHtmlAttributeName());(e.chartDisplayType()==epiviz.ui.charts.ChartType.DisplayType.PLOT?c:b).append(sprintf('<li><a href="javascript:void(0)" id="%s">Add New %s</a></li>',
f,e.chartName()));$("#"+f).click(function(){(new epiviz.ui.controls.Wizard(sprintf("Add new %s",e.chartName()),{finish:function(b){a._addChart.notify({type:e,measurements:b.measurements})}},e.isRestrictedToSameDatasourceGroup()?[new epiviz.ui.controls.DatasourceGroupWizardStep,new epiviz.ui.controls.MeaurementsWizardStep]:[new epiviz.ui.controls.MeaurementsWizardStep],new epiviz.ui.controls.MeasurementsDialogData(a._measurementsManager.measurements(),e.chartContentType(),void 0,void 0,void 0,void 0,
e.chartName(),e.minSelectedMeasurements()),"750",void 0,e.isRestrictedToSameDatasourceGroup())).show()})});c.hide().menu();b.hide().menu()};
epiviz.ui.ControlManager.prototype._initializeComputedMeasurementsMenu=function(){var a=this;$("#computed-measurements-button").button({text:!1,icons:{primary:"ui-icon ui-icon-calculator"}}).click(function(){(new epiviz.ui.controls.ComputedMeasurementsDialog("Computed Measurements",{add:function(c){a._measurementsManager.addMeasurement(c)},remove:function(c){a._measurementsManager.removeMeasurement(c)},close:function(){}},a._measurementsManager.measurements(),a._chartManager.chartsMeasurements())).show()})};
epiviz.ui.ControlManager.prototype._initializeHelpButton=function(){$("#help-button").button({text:!1,icons:{primary:"ui-icon ui-icon-help"}}).click(function(){window.open("http://epiviz.github.io/","_blank").focus()})};
epiviz.ui.ControlManager.prototype._initializeSearchBox=function(){var a=this,c=$("#search-box");c.watermark("Find Gene/Probe");c.autocomplete({source:function(b,c){a._search.notify({searchTerm:b.term,callback:function(a){for(var b=[],g=0;g<a.length;++g)b.push({value:a[g].probe||a[g].gene,label:a[g].probe||a[g].gene,html:a[g].probe?sprintf("<b>%s</b>, %s, [%s: %s - %s]",a[g].probe,a[g].gene,a[g].seqName,Globalize.format(a[g].start,"n0"),Globalize.format(a[g].end,"n0")):sprintf("<b>%s</b>, [%s: %s - %s]",
a[g].gene,a[g].seqName,Globalize.format(a[g].start,"n0"),Globalize.format(a[g].end,"n0")),range:epiviz.datatypes.GenomicRange.fromStartEnd(a[g].seqName,a[g].start,a[g].end)});c(b)}})},minLength:1,select:function(b,c){var e=a._locationManager.lastUnfilledLocationChangeRequest()||a._locationManager.currentLocation(),f=c.item.range.seqName(),g=Math.round(c.item.range.start()+.5*c.item.range.width()-.5*e.width()),e=e.width();a._updateSelectedLocation(new epiviz.datatypes.GenomicRange(f,g,e))},focus:function(a){a.preventDefault()},
open:function(){},close:function(){}}).data("autocomplete")._renderItem=function(a,c){return $("<li></li>").data("item.autocomplete",c).append(sprintf("<a>%s</a>",c.html)).appendTo(a)}};
epiviz.ui.ControlManager.prototype._initializeWorkspaceSaving=function(){var a=this,c=$("#save-workspace-text"),b=$("#save-workspace-button"),d=$("#delete-workspace-button");b.button({text:!1,icons:{primary:"ui-icon-disk"}}).click(function(){var b=null;try{var d=c.val();/[a-zA-Z0-9_\s]+/g.exec(d)==d?epiviz.workspaces.UserManager.USER_STATUS.loggedIn?a._saveWorkspace.notify({name:d,id:d==a._activeWorkspaceInfo.name?a._activeWorkspaceInfo.id:null}):(b=new epiviz.ui.controls.MessageDialog("User not logged in",
{Yes:function(){a._loginLinkClicked.notify()},No:function(){}},"You need to log in in order to save the workspace. Do you wish to log in now?",epiviz.ui.controls.MessageDialog.Icon.QUESTION),b.show()):(b=new epiviz.ui.controls.MessageDialog("Invalid workspace name",{Ok:function(){$(this).remove()}},"Invalid workspace name: "+d,epiviz.ui.controls.MessageDialog.Icon.ERROR),b.show())}catch(g){b=new epiviz.ui.controls.MessageDialog("Error",{ok:function(){$(this).remove()}},"An error occurred while trying to save workspace: "+
g.message,epiviz.ui.controls.MessageDialog.Icon.ERROR),b.show()}});d.button({text:!1,icons:{primary:"ui-icon-trash"}}).click(function(b){epiviz.workspaces.UserManager.USER_STATUS.loggedIn&&(new epiviz.ui.controls.MessageDialog("Delete active workspace",{Yes:function(){a._deleteActiveWorkspace.notify()},No:function(){}},"Are you sure you want to delete the active workspace?",epiviz.ui.controls.MessageDialog.Icon.QUESTION)).show()});c.watermark("Save Workspace Name");c.autocomplete({source:function(b,
c){a._searchWorkspaces.notify({searchTerm:b.term,callback:function(a){for(var b=[],d=0;d<a.length;++d)b.push({value:a[d].id,label:a[d].name,html:sprintf("<b>%s</b> %s",a[d].name,a[d].id||"")});c(b)}})},minLength:0,select:function(b,d){b.preventDefault();a.updateSelectedWorkspace({id:d.item.value||c.val(),name:d.item.label})},focus:function(a){a.preventDefault()},open:function(){},close:function(){}}).data("autocomplete")._renderItem=function(a,b){return $("<li></li>").data("item.autocomplete",b).append(sprintf("<a>%s</a>",
b.html)).appendTo(a)};c.click(function(){c.autocomplete("search","")})};epiviz.ui.ControlManager.prototype._initializeLoginLink=function(){var a=this;$("#login-link").live({click:function(){a._loginLinkClicked.notify()}})};epiviz.ui.ControlManager.prototype._initializeLayout=function(){$("body").layout({applyDefaultStyles:!0,east__size:390,east__minSize:390,east__initHidden:!0,north__resizable:!1,north__initHidden:!1,south__initHidden:!0,east__initClosed:!0})};
epiviz.ui.ControlManager.prototype._checkBrowserCompatibility=function(){0<epiviz.utils.getInternetExplorerVersion()&&(new epiviz.ui.controls.MessageDialog("Browser compatibility warning",{Ok:function(){}},"EpiViz works best on Google Chrome, Apple Safari or Mozilla Firefox. Please open it using one of those browsers.",epiviz.ui.controls.MessageDialog.Icon.ERROR)).show()};epiviz.ui.ControlManager.prototype._registerLocationChanged=function(){var a=this;this._locationManager.onCurrentLocationChanged().addListener(new epiviz.events.EventListener(function(c){a._updateSelectedLocation(c.newValue)}))};
epiviz.ui.ControlManager.prototype._registerSeqInfosUpdated=function(){var a=this;this._locationManager.onSeqInfosUpdated().addListener(new epiviz.events.EventListener(function(c){a._updateSeqNames(c)}))};epiviz.ui.WebArgsManager=function(a,c){this._locationManager=a;this._workspaceManager=c;this._registerLocationChanged();this._registerActiveWorkspaceChanged()};epiviz.ui.WebArgsManager.WEB_ARGS=epiviz.ui.WebArgsManager.WEB_ARGS||{};
epiviz.ui.WebArgsManager.prototype._updateUrl=function(){var a="?",c=epiviz.ui.WebArgsManager.WEB_ARGS;!("ws"in c)&&"workspace"in c&&(c.ws=c.workspace,delete c.workspace);for(var b in c)if(c.hasOwnProperty(b))if(Array.isArray(c[b]))for(var d=0;d<c[b].length;++d)a+=sprintf("%s[]=%s&",b,c[b][d]);else a+=sprintf("%s=%s&",b,c[b]);c=epiviz.utils.getInternetExplorerVersion();if(0>c||10<=c)switch(window.location.protocol){case "http:":case "https:":history.replaceState(null,"",a)}};
epiviz.ui.WebArgsManager.prototype._registerLocationChanged=function(){var a=this;this._locationManager.onCurrentLocationChanged().addListener(new epiviz.events.EventListener(function(c){epiviz.ui.WebArgsManager.WEB_ARGS.seqName=c.newValue.seqName();epiviz.ui.WebArgsManager.WEB_ARGS.start=c.newValue.start();epiviz.ui.WebArgsManager.WEB_ARGS.end=c.newValue.end();a._updateUrl()}))};
epiviz.ui.WebArgsManager.prototype._registerActiveWorkspaceChanged=function(){var a=this;this._workspaceManager.onActiveWorkspaceChanged().addListener(new epiviz.events.EventListener(function(c){epiviz.ui.WebArgsManager.WEB_ARGS.ws=c.workspaceId||"";delete epiviz.ui.WebArgsManager.WEB_ARGS.workspace;a._updateUrl()}))};
epiviz.EpiViz=function(a,c,b,d,e,f,g,h,l,m){this._config=a;this._locationManager=c;this._measurementsManager=b;this._controlManager=d;this._dataManager=e;this._chartFactory=f;this._chartManager=g;this._workspaceManager=h;this._userManager=l;this._webArgsManager=m;this._registerRequestSeqInfos();this._registerRequestMeasurements();this._registerUiAddChart();this._registerUiSaveWorkspace();this._registerUiDeleteActiveWorkspace();this._registerUiLoginLinkClicked();this._registerUiSearchWorkspaces();
this._registerUiActiveWorkspaceChanged();this._registerUiSearch();this._registerDataAddMeasurements();this._registerDataRemoveMeasurements();this._registerDataAddChart();this._registerDataRemoveChart();this._registerDataAddSeqInfos();this._registerDataRemoveSeqNames();this._registerDataNavigate();this._registerDataRedraw();this._registerDataGetCurrentLocation();this._registerRequestWorkspaces();this._registerWorkspacesLoaded();this._registerActiveWorkspaceChanged();this._registerLocationChanged();
var p=this;window.onbeforeunload=function(){if(epiviz.workspaces.UserManager.USER_STATUS.loggedIn&&p._workspaceManager.activeWorkspace().changed())return"There are unsaved changes in the current workspace. Do you wish to discard them?"}};epiviz.EpiViz.SETTINGS={};epiviz.EpiViz.VERSION="2";epiviz.EpiViz.prototype.start=function(){this._controlManager.initialize();this._workspaceManager.initialize();this._measurementsManager.initialize();this._locationManager.initialize()};
epiviz.EpiViz.prototype.config=function(){return this._config};epiviz.EpiViz.prototype._addChart=function(a,c,b,d){b=this._chartManager.addChart(a,c,b,d);var e=this._workspaceManager.activeWorkspace().range();this._chartManager.addChartsLoaderAnimation(b);a={};a[b]=c;var f=this;this._dataManager.getData(e,a,function(a,b){f._chartManager.updateCharts(e,b,[a])});return b};epiviz.EpiViz.prototype._registerRequestSeqInfos=function(){var a=this;this._locationManager.onRequestSeqInfos().addListener(new epiviz.events.EventListener(function(){a._dataManager.getSeqInfos(function(c){a._locationManager.updateSeqInfos(c)})}))};
epiviz.EpiViz.prototype._registerRequestMeasurements=function(){var a=this;this._measurementsManager.onRequestMeasurements().addListener(new epiviz.events.EventListener(function(){a._dataManager.getMeasurements(function(c){a._measurementsManager.addMeasurements(c)})}))};
epiviz.EpiViz.prototype._registerRequestWorkspaces=function(){var a=this;this._workspaceManager.onRequestWorkspaces().addListener(new epiviz.events.EventListener(function(c){a._dataManager.getWorkspaces(function(b){for(var d=[],e=null,f=0;f<b.length;++f){var g=epiviz.workspaces.Workspace.fromRawObject(b[f],a._chartFactory);null===g.id()?e=g:(g.id()==c.activeWorkspaceId&&(e=g),d.push(g))}a._workspaceManager.updateWorkspaces(d,e,c.activeWorkspaceId);a._workspaceManager.activeWorkspace().resetChanged()},
"",c.activeWorkspaceId)}))};epiviz.EpiViz.prototype._registerUiAddChart=function(){var a=this;this._controlManager.onAddChart().addListener(new epiviz.events.EventListener(function(c){a._addChart(c.type,c.measurements)}))};
epiviz.EpiViz.prototype._registerUiSaveWorkspace=function(){var a=this;this._controlManager.onSaveWorkspace().addListener(new epiviz.events.EventListener(function(c){var b=a._workspaceManager.getByName(c.name),b=b?a._workspaceManager.activeWorkspace().copy(c.name,b.id()):a._workspaceManager.activeWorkspace().copy(c.name);a._dataManager.saveWorkspace(b,function(c){b=b.copy(b.name(),c);b.resetChanged();a._workspaceManager.updateWorkspace(b);a._workspaceManager.changeActiveWorkspace(c)})}))};
epiviz.EpiViz.prototype._registerUiDeleteActiveWorkspace=function(){var a=this;this._controlManager.onDeleteActiveWorkspace().addListener(new epiviz.events.EventListener(function(){a._dataManager.deleteWorkspace(a._workspaceManager.activeWorkspace());a._workspaceManager.deleteActiveWorkspace()}))};epiviz.EpiViz.prototype._registerUiLoginLinkClicked=function(){var a=this;this._controlManager.onLoginLinkClicked().addListener(new epiviz.events.EventListener(function(){a._userManager.toggleLogin()}))};
epiviz.EpiViz.prototype._registerUiSearchWorkspaces=function(){var a=this;this._controlManager.onSearchWorkspaces().addListener(new epiviz.events.EventListener(function(c){a._dataManager.getWorkspaces(function(a){c.callback(a)},c.searchTerm,c.searchTerm)}))};
epiviz.EpiViz.prototype._registerUiActiveWorkspaceChanged=function(){var a=this;this._controlManager.onActiveWorkspaceChanged().addListener(new epiviz.events.EventListener(function(c){var b=function(){a._workspaceManager.get(c.newValue.id)?a._workspaceManager.changeActiveWorkspace(c.newValue.id):a._dataManager.getWorkspaces(function(b){for(var e=null,f=0;f<b.length;++f){var g=epiviz.workspaces.Workspace.fromRawObject(b[f],a._chartFactory);if(null===g.id()){e=g;break}}e&&a._workspaceManager.changeActiveWorkspace(c.newValue.id,
e)},c.newValue.name,c.newValue.id)};epiviz.workspaces.UserManager.USER_STATUS.loggedIn&&!a._workspaceManager.activeWorkspaceChanging()&&a._workspaceManager.activeWorkspace().changed()?(new epiviz.ui.controls.MessageDialog("Discard workspace changes",{Yes:function(){b()},No:function(){c.cancel()}},"There are unsaved changes in the current workspace. Do you wish to discard them?",epiviz.ui.controls.MessageDialog.Icon.QUESTION)).show():b()}))};
epiviz.EpiViz.prototype._registerUiSearch=function(){var a=this;this._controlManager.onSearch().addListener(new epiviz.events.EventListener(function(c){a._dataManager.search(function(a){c.callback(a)},c.searchTerm)}))};
epiviz.EpiViz.prototype._registerDataAddMeasurements=function(){var a=this;this._dataManager.onRequestAddMeasurements().addListener(new epiviz.events.EventListener(function(c){try{a._measurementsManager.addMeasurements(c.measurements),c.result.success=!0}catch(b){c.result.success=!1,c.result.errorMessage=b.toString()}}))};
epiviz.EpiViz.prototype._registerDataRemoveMeasurements=function(){var a=this;this._dataManager.onRequestRemoveMeasurements().addListener(new epiviz.events.EventListener(function(c){try{a._measurementsManager.removeMeasurements(c.measurements),c.result.success=!0}catch(b){c.result.success=!1,c.result.errorMessage=b.toString()}}))};
epiviz.EpiViz.prototype._registerDataAddChart=function(){var a=this;this._dataManager.onRequestAddChart().addListener(new epiviz.events.EventListener(function(c){try{var b=a._chartFactory.get(c.type),d=a._addChart(b,c.measurements);c.result.success=!0;c.result.value={id:d}}catch(e){c.result.success=!1,c.result.errorMessage=e.toString()}}))};
epiviz.EpiViz.prototype._registerDataRemoveChart=function(){var a=this;this._dataManager.onRequestRemoveChart().addListener(new epiviz.events.EventListener(function(c){try{a._chartManager.removeChart(c.id),c.result.success=!0}catch(b){c.result.success=!1,c.errorMessage=b.toString()}}))};
epiviz.EpiViz.prototype._registerDataAddSeqInfos=function(){var a=this;this._dataManager.onRequestAddSeqInfos().addListener(new epiviz.events.EventListener(function(c){try{a._locationManager.addSeqInfos(c.seqInfos),c.result.success=!0}catch(b){c.result.success=!1,c.errorMessage=b.toString()}}))};
epiviz.EpiViz.prototype._registerDataRemoveSeqNames=function(){var a=this;this._dataManager.onRequestRemoveSeqNames().addListener(new epiviz.events.EventListener(function(c){try{a._locationManager.removeSeqNames(c.seqNames),c.result.success=!0}catch(b){c.result.success=!1,c.errorMessage=b.toString()}}))};
epiviz.EpiViz.prototype._registerDataNavigate=function(){var a=this;this._dataManager.onRequestNavigate().addListener(new epiviz.events.EventListener(function(c){try{a._locationManager.changeCurrentLocation(c.range),c.result.success=!0}catch(b){c.result.success=!1,c.errorMessage=b.toString()}}))};
epiviz.EpiViz.prototype._registerDataRedraw=function(){var a=this;this._dataManager.onRequestRedraw().addListener(new epiviz.events.EventListener(function(c){try{var b=a._locationManager.currentLocation();a._locationManager.changeCurrentLocation(b);c.result.success=!0}catch(d){c.result.success=!1,c.errorMessage=d.toString()}}))};
epiviz.EpiViz.prototype._registerDataGetCurrentLocation=function(){var a=this;this._dataManager.onRequestCurrentLocation().addListener(new epiviz.events.EventListener(function(c){try{var b=a._locationManager.currentLocation();c.result.value={seqName:b.seqName(),start:b.start(),end:b.end()};c.result.success=!0}catch(d){c.result.success=!1,c.errorMessage=d.toString()}}))};epiviz.EpiViz.prototype._registerWorkspacesLoaded=function(){this._workspaceManager.onWorkspacesLoaded().addListener(new epiviz.events.EventListener(function(a){}))};
epiviz.EpiViz.prototype._registerActiveWorkspaceChanged=function(){var a=this;this._workspaceManager.onActiveWorkspaceChanged().addListener(new epiviz.events.EventListener(function(c){a._workspaceManager.startChangingActiveWorkspace();a._controlManager.updateSelectedWorkspace({id:c.newValue.id(),name:c.newValue.name()});a._locationManager.changeCurrentLocation(c.newValue.range());a._measurementsManager.removeMeasurements(a._measurementsManager.computedMeasurements());a._measurementsManager.addMeasurements(c.newValue.computedMeasurements());
a._chartManager.clear();c=c.newValue.charts();for(var b in c)if(c.hasOwnProperty(b))for(var d=0;d<c[b].length;++d)a._addChart(c[b][d].type,c[b][d].properties.measurements,c[b][d].id,c[b][d].properties.copy());a._workspaceManager.endChangingActiveWorkspace()}))};
epiviz.EpiViz.prototype._registerLocationChanged=function(){var a=this;this._locationManager.onCurrentLocationChanged().addListener(new epiviz.events.EventListener(function(c){a._chartManager.addChartsLoaderAnimation();var b=a._chartManager.chartsMeasurements();a._dataManager.getData(c.newValue,b,function(b,e){a._chartManager.updateCharts(c.newValue,e,[b])})}))};
epiviz.ui.controls.MeasurementsDialogData=function(a,c,b,d,e,f,g,h){this.measurements=a;this.type=c;this.datasource=b;this.datasourceGroup=d;this.dataprovider=e;this.annotation=f;this.defaultChartType=g;this.minSelectedMeasurements=h||1};
epiviz.ui.controls.DataTable=function(a,c,b,d,e,f){epiviz.ui.controls.Control.call(this,a);this._columns=c;this._rows=b;this._rowsArray=[];var g=this;this._rows.foreach(function(a){g._rowsArray.push(a)});this._rowParser=d;this._multiselect=e||!1;this._showColumnSelector=f||!1;this._columnSelector=this._table=null;this._selectedIndices=[];this._selectedIndicesMap={};this._lastSelection=this._deselectList=this._selectList=null};epiviz.ui.controls.DataTable.prototype=epiviz.utils.mapCopy(epiviz.ui.controls.Control.prototype);
epiviz.ui.controls.DataTable.constructor=epiviz.ui.controls.DataTable;epiviz.ui.controls.DataTable.ColumnType={STRING:"string",NUMBER:"number",BOOLEAN:"boolean"};
epiviz.ui.controls.DataTable.prototype.initialize=function(){this._container.append('<div class="epiviz-data-table"><table style="width: 100%!important;"><thead></thead><tbody></tbody><tfoot></tfoot></table></div>');this._table=this._container.find("table");var a=this._table.find("thead"),c=this._table.find("tfoot"),b=this._table.find("tbody"),d=sprintf("<tr><th>%s</th></tr>",this._columns.join("</th><th>"));a.append(d);c.append(d);var e=this;this._rows.foreach(function(a){for(var c="",d=0;d<e._columns.length;++d)c+=
sprintf("<td>%s</td>",e._rowParser(a,e._columns[d]));b.append(sprintf("<tr>%s</tr>",c))});c=Array(this._columns.length);for(a=0;a<this._columns.length;++a)c[a]={type:"text",bRegex:!0,bSmart:!0};this._table.dataTable({bJQueryUI:!0,sDom:'<"H"lfr>Tt<"F"ip>',oTableTools:{sRowSelect:this._multiselect?"multi":"single",aButtons:[],fnPreRowSelect:function(a,b,c){return e._preRowSelect(this,a,b,c)},fnRowSelected:function(a){return e._select(this,a)},fnRowDeselected:function(a){return e._select(this,a)}}}).columnFilter({aoColumns:c});
c=-1;for(a=0;a<this._columns.length;++a)this._columns[a].isVisible&&++c,this._table.fnSetColumnVis(a,this._columns[a].isVisible),this._columns[a].defaultFilter&&(this._table.fnFilter(sprintf("(%s)|any",this._columns[a].defaultFilter),a,!0,!0),this._table.find("tfoot").find(sprintf("th:eq(%s)",c)).find("input").removeClass("search_init").val(sprintf("(%s)|any",this._columns[a].defaultFilter)));this._container.find(".ui-buttonset").first().attr("style","position: absolute!important;");if(this._showColumnSelector){this._container.find(".fg-toolbar").first().append(sprintf('<div style="float: right; margin-right: 5px;"><label>Selected Columns: </label><select class="%s" multiple="multiple" style=""><option value="-1">All</option></select></div>',
"epiviz-data-table-column-selector"));this._columnSelector=this._container.find(".epiviz-data-table-column-selector");for(a=0;a<this._columns.length;++a)c=sprintf('<option value="%s"%s%s>%s</option>',a,this._columns[a].isVisible?' selected="selected"':"",this._columns[a].isFixed?' disabled="disabled"':"",this._columns[a].name),this._columnSelector.append(c);this._columnSelector.dropdownchecklist({width:"80px",firstItemChecksAll:!0,onComplete:function(a){e._selectColumns(a)}})}};
epiviz.ui.controls.DataTable.prototype.selectedIndices=function(){return this._selectedIndices||[]};epiviz.ui.controls.DataTable.prototype.selectedRows=function(){if(!this._selectedIndices)return[];for(var a=Array(this._selectedIndices.length),c=0;c<this._selectedIndices.length;++c)a[c]=this._rowsArray[this._selectedIndices[c]];return a};
epiviz.ui.controls.DataTable.prototype._preRowSelect=function(a,c,b,d){c&&(this._selectList=this._deselectList=null,c.shiftKey&&1==b.length?(this._deselectList=a.fnGetSelected(),this._lastSelection||(this._lastSelection=b[0]),this._selectList=this._getRangeOfRows(this._lastSelection,b[0])):(this._lastSelection=b[0],c.ctrlKey||c.metaKey||(this._deselectList=a.fnGetSelected(),d||(this._selectList=b))));return!0};
epiviz.ui.controls.DataTable.prototype._getRangeOfRows=function(a,c){var b=this._table.fnGetPosition(a),d=this._table.fnGetPosition(c),e=this._table.fnSettings(),b=$.inArray(b,e.aiDisplay),d=$.inArray(d,e.aiDisplay),f=[];if(0<=b&&0<=d)for(var g=Math.min(b,d);g<=Math.max(b,d);++g)f.push(e.aoData[e.aiDisplay[g]].nTr);return 0<f.length?f:null};
epiviz.ui.controls.DataTable.prototype._select=function(a,c){var b;this._deselectList&&(b=this._deselectList,this._deselectList=null,a.fnDeselect(b));this._selectList&&(b=this._selectList,!this._multiselect&&0<b.length&&(b=[b[b.length-1]]),this._selectList=null,a.fnSelect(b));b=a.fnGetSelected();var d=Array(b.length),e={},f;for(f=0;f<b.length;++f)d[f]=this._table.fnGetPosition(b[f]),e[d[f]]=!0;for(f=0;f<this._selectedIndices.length;++f)e[this._selectedIndices[f]]||(delete this._selectedIndicesMap[this._selectedIndices[f]],
this._selectedIndices.splice(f,1),--f);for(f=0;f<d.length;++f)this._selectedIndicesMap[d[f]]||(this._selectedIndicesMap[d[f]]=!0,this._selectedIndices.push(d[f]));return!0};epiviz.ui.controls.DataTable.prototype._selectColumns=function(a){var c={},b;for(b=0;b<a.options.length;++b)a.options[b].selected&&a.options[b].value&&(c[parseInt(a.options[b].value)]=!0);for(b=0;b<this._columns.length;++b)this._table.fnSetColumnVis(b,c[b]||this._columns[b].isFixed)};
epiviz.ui.controls.DataTable.Column=function(a,c,b,d,e,f){this.id=a;this.name=c;this.type=b;this.isVisible=!d;this.isFixed=e||!1;this.defaultFilter=f||""};epiviz.ui.controls.DataTable.Column.prototype.toString=function(){return this.name};epiviz.ui.controls.Wizard=function(a,c,b,d,e,f,g){epiviz.ui.controls.Dialog.call(this,a,c);this._steps=b;this._initialData=d;this._width=e;this._height=f;this._showTabs=g||!1;this._tabs=null;this._initialize()};epiviz.ui.controls.Wizard.prototype=epiviz.utils.mapCopy(epiviz.ui.controls.Dialog.prototype);
epiviz.ui.controls.Wizard.constructor=epiviz.ui.controls.Wizard;
epiviz.ui.controls.Wizard.prototype._initialize=function(){var a=this;this._dialog=$("#"+this._id);this._dialog.append('<div class="wizard-dialog"><div class="wizard-tabs"><ul class="wizard-tabs-title-list"></ul></div></div>');this._tabs=this._dialog.find(".wizard-tabs");for(var c=this._tabs.find(".wizard-tabs-title-list"),b=0;b<this._steps.length;++b)c.append(sprintf('<li><a href="#%s-tab-%s">%s</a></li>',this._id,b,this._steps[b].title())),this._tabs.append(sprintf('<div id="%s-tab-%s"></div>',
this._id,b));this._showTabs||(c.css("visibility","hidden"),c.css("position","absolute"));this._tabs.tabs({activate:function(b,c){a._tabActivate(c)},disabled:epiviz.utils.range(this._steps.length-1,1)});this._dialog.dialog({autoOpen:!1,resizable:!0,width:this._width||void 0,height:this._height||void 0,buttons:{Back:function(){var b=a._tabs.tabs("option","active");0!=b&&(a._tabs.tabs("option","disabled",epiviz.utils.range(a._steps.length-b,b)),a._tabs.tabs("option","active",b-1))},Next:function(){var b=
a._tabs.tabs("option","active"),c=a._steps[b].next();c.error?(new epiviz.ui.controls.MessageDialog("Error",{Ok:function(){}},c.error,epiviz.ui.controls.MessageDialog.Icon.ERROR)).show():(a._steps[b+1].initialize($(sprintf("#%s-tab-%s",a._id,b+1)),c.data),a._tabs.tabs("option","disabled",epiviz.utils.range(a._steps.length-b-2,b+2)),a._tabs.tabs("option","active",b+1))},Finish:function(){var b=a._steps[a._steps.length-1].next();b.error?(new epiviz.ui.controls.MessageDialog("Error",{Ok:function(){}},
b.error,epiviz.ui.controls.MessageDialog.Icon.ERROR)).show():(a._handlers.finish&&a._handlers.finish(b.data),$(this).dialog("close"))},Cancel:function(){a._handlers.close&&a._handlers.close();$(this).dialog("close")}},modal:!0});1<this._steps.length?(this._dialog.parent().find('button:contains("Finish")').button("disable"),this._dialog.parent().find('button:contains("Next")').button("enable")):(this._dialog.parent().find('button:contains("Finish")').button("enable"),this._dialog.parent().find('button:contains("Next")').button("disable"));
this._steps[0].initialize($(sprintf("#%s-tab-0",a._id)),this._initialData)};epiviz.ui.controls.Wizard.prototype._tabActivate=function(a){a=this._tabs.tabs("option","active");var c=this._dialog.parent().find('button:contains("Finish")'),b=this._dialog.parent().find('button:contains("Next")');a==this._steps.length-1?(b.button("disable"),c.button("enable")):(b.button("enable"),c.button("disable"));this._tabs.tabs("option","disabled",epiviz.utils.range(this._steps.length-a-1,a+1))};
epiviz.ui.controls.Wizard.prototype.show=function(){var a=this;this._dialog.dialog("open");this._dialog.dialog("option","position","center");this._dialog.dialog({close:function(c,b){$(this).remove();a._dialog=null}})};epiviz.ui.controls.Wizard.Step=function(){};epiviz.ui.controls.Wizard.Step.prototype.initialize=function(a,c){};epiviz.ui.controls.Wizard.Step.prototype.next=function(){};epiviz.ui.controls.Wizard.Step.prototype.title=function(){};
epiviz.ui.controls.DatasourceGroupWizardStep=function(){this._data=this._dataTable=null};
epiviz.ui.controls.DatasourceGroupWizardStep.prototype.initialize=function(a,c){this._data=c;a.find(".epiviz-data-table").remove();var b=[new epiviz.ui.controls.DataTable.Column("datasourceGroup","Data Source Group",epiviz.ui.controls.DataTable.ColumnType.STRING)],d={};c.measurements.foreach(function(a){if(!c.type||c.type==a.type())if(!c.dataprovider||c.dataprovider==a.dataprovider()){if(c.annotation)for(var b in c.annotation)if(c.annotation.hasOwnProperty(b)&&(!a.annotation()||a.annotation()[b]!=
c.annotation[b]))return;d[a.datasourceGroup()]=!0}});this._dataTable=new epiviz.ui.controls.DataTable(a,b,new epiviz.utils.IterableArray(Object.keys(d)),function(a){return a});this._dataTable.initialize()};epiviz.ui.controls.DatasourceGroupWizardStep.prototype.next=function(){var a=this._dataTable?this._dataTable.selectedRows():[];if(0==a.length)return{error:"No rows selected"};this._data.datasourceGroup=a[0];return{data:this._data}};epiviz.ui.controls.DatasourceGroupWizardStep.prototype.title=function(){return"Select Datasource Group"};
epiviz.ui.controls.MeaurementsWizardStep=function(){this._measurements=this._data=this._dataTable=null};
epiviz.ui.controls.MeaurementsWizardStep.prototype.initialize=function(a,c){this._data=c;a.find(".epiviz-data-table").remove();var b=epiviz.ui.controls.DataTable.ColumnType,b=[new epiviz.ui.controls.DataTable.Column("id","Id",b.STRING,!0),new epiviz.ui.controls.DataTable.Column("name","Name",b.STRING,!1,!0),new epiviz.ui.controls.DataTable.Column("defaultChartType","Default Chart Type",b.STRING,!1,!0,c.defaultChartType||""),new epiviz.ui.controls.DataTable.Column("type","Type",b.STRING,!0),new epiviz.ui.controls.DataTable.Column("datasourceId",
"Data Source",b.STRING,!0),new epiviz.ui.controls.DataTable.Column("datasourceGroup","Data Source Group",b.STRING,!0),new epiviz.ui.controls.DataTable.Column("dataprovider","Data Provider",b.STRING,!0),new epiviz.ui.controls.DataTable.Column("formulaStr","Formula",b.STRING,!0),new epiviz.ui.controls.DataTable.Column("annotation","Annotation",b.STRING)];this._measurements=c.measurements.subset(function(a){if(c.type&&c.type!=a.type()||c.datasource&&c.datasource!=a.datasourceId()||c.datasourceGroup&&
c.datasourceGroup!=a.datasourceGroup()||c.dataprovider&&c.dataprovider!=a.dataprovider())return!1;if(c.annotation)for(var b in c.annotation)if(c.annotation.hasOwnProperty(b)&&(!a.annotation()||a.annotation()[b]!=c.annotation[b]))return!1;return!0});if(c.type&&c.type==epiviz.measurements.Measurement.Type.RANGE){var d=this,e={};c.measurements.foreach(function(a){a.type()==epiviz.measurements.Measurement.Type.RANGE||a.datasourceGroup()in e||a.isComputed()||(d._measurements.add(a.datasource()),e[a.datasourceGroup()]=
!0)})}this._dataTable=new epiviz.ui.controls.DataTable(a,b,this._measurements,function(a,b){var c=null;switch(b.id){case "annotation":c=epiviz.utils.mapJoin(a.annotation(),": ","<br />");break;default:c=a[b.id]()}return 0===c||""===c||c?c:""},!0,!0);this._dataTable.initialize()};
epiviz.ui.controls.MeaurementsWizardStep.prototype.next=function(){var a=this._dataTable?this._dataTable.selectedRows():[];if(a.length<this._data.minSelectedMeasurements)return{error:"Minimum selected rows required is "+this._data.minSelectedMeasurements};for(var c=new epiviz.measurements.MeasurementSet,b=0;b<a.length;++b)c.add(a[b]);this._data.measurements=c;return{data:this._data}};epiviz.ui.controls.MeaurementsWizardStep.prototype.title=function(){return"Select Measurements"};
epiviz.ui.controls.MessageDialog=function(a,c,b,d){epiviz.ui.controls.Dialog.call(this,a,c);this._message=b;this._icon=d||epiviz.ui.controls.MessageDialog.Icon.INFO};epiviz.ui.controls.MessageDialog.prototype=epiviz.utils.mapCopy(epiviz.ui.controls.Dialog.prototype);epiviz.ui.controls.MessageDialog.constructor=epiviz.ui.controls.MessageDialog;epiviz.ui.controls.MessageDialog.Icon={INFO:"info",ERROR:"error",QUESTION:"question"};
epiviz.ui.controls.MessageDialog.prototype.show=function(){epiviz.ui.controls.Dialog.prototype.show.call(this);var a=epiviz.ui.controls.MessageDialog.Icon;if(!this._dialog){var c=this;this._dialog=$("#"+this._id);this._dialog.css("display","inline");this._dialog.append(sprintf('<div class="ui-state-%s ui-corner-all" style="margin: 5px; padding: 5px; height: auto;"><div class="ui-icon ui-icon-%s" style="float: left; margin-right: 5px;"></div><div class="dialog-text">%s</div></div>',this._icon==a.ERROR?
"error":"highlight",this._icon==a.ERROR?"alert":"info",this._message));var b={},d;for(d in this._handlers)this._handlers.hasOwnProperty(d)&&function(a){b[a]=function(){c._handlers[a]();$(this).dialog("close")}}(d);this._dialog.dialog({autoOpen:!1,resizable:!1,buttons:b,modal:!0});this._dialog.dialog({close:function(a,b){$(this).remove();c._dialog=null}})}this._dialog.dialog("open");this._dialog.dialog("option","position","center")};
epiviz.ui.controls.ColorPickerDialog=function(a,c){epiviz.ui.controls.Dialog.call(this,"Pick Colors",a);this._dialog=$("#"+this._id);this._dialog.append('<div class="color-picker-form" action="" style="width: 420px;"><div class="chart-picker" style="float: right;"></div></div>');this._colors=this._initialColors=c;for(var b=this._dialog.find(".color-picker-form"),d="",e=0;e<this._colors.length;++e)var f=sprintf("color-%s",e),d=d+sprintf('<tr><td><label>%s:&nbsp;</label></td><td><input type="text" name="%s" class="colorwell %s" value="%s" /></td></tr>',
c[e].name,f,f,this._colors[e].color);b.append(sprintf('<table class="color-picker-table">%s</table>',d));var g=epiviz.utils.farbtastic(sprintf("#%s .chart-picker",this._id)),h=$(sprintf("#%s .chart-picker",this._id)).css("opacity",.25),l;$(sprintf("#%s .colorwell",this._id)).each(function(){g.linkTo(this);$(this).css("opacity",.75)}).focus(function(){l&&$(l).css("opacity",.75).removeClass("colorwell-selected");g.linkTo(this);h.css("opacity",1);$(l=this).css("opacity",1).addClass("colorwell-selected")});
var m=this;this._dialog.dialog({autoOpen:!1,resizable:!1,width:"440",buttons:{Ok:function(){for(var a=b.find(".colorwell"),c=0;c<a.length;++c)m._colors[c].color=a[c].value;m._handlers.ok(m._colors);$(this).dialog("close")},Cancel:function(){m._handlers.cancel();$(this).dialog("close")},Reset:function(){m._colors=m._initialColors;for(var a=0;a<m._colors.length;++a){var b=sprintf(".color-%s",a);g.linkTo($(sprintf("#%s %s",m._id,b)));g.setColor(m._colors[a].color);++a}l&&g.linkTo(l);m._handlers.reset()}},
modal:!0})};epiviz.ui.controls.ColorPickerDialog.prototype=epiviz.utils.mapCopy(epiviz.ui.controls.Dialog.prototype);epiviz.ui.controls.ColorPickerDialog.constructor=epiviz.ui.controls.ColorPickerDialog;epiviz.ui.controls.ColorPickerDialog.prototype.show=function(){epiviz.ui.controls.Dialog.prototype.show.call(this);var a=this;this._dialog&&(this._dialog.dialog("open"),this._dialog.dialog("option","position","center"),this._dialog.dialog({close:function(c,b){$(this).remove();a._dialog=null}}))};
epiviz.ui.controls.SaveSvgAsImageDialog=function(a,c,b){epiviz.ui.controls.Dialog.call(this,"Save Chart SVG as Image",a);this._dialog=$("#"+this._id);this._dialog.append('<div class="save-svg-dialog"><label class="dialog-label">Choose file format:</label><br/><br/><div style="position:absolute; right:15px;"><select class="svg-file-format"><option value="pdf" selected="selected">PDF</option><option value="ps" >PS</option><option value="png" >PNG</option><option value="svg">SVG</option><option value="eps">EPS</option></select></div>'+
sprintf('<form name="%s-svg-save-form" method="POST">',this._id)+'<div><input type="hidden" name="svg" /><input type="hidden" name="format" /><br/><br/></div></form></div>');this._chartId=c;this._chartSaverLocation=b;var d=this;this._dialog.dialog({autoOpen:!1,resizable:!1,width:"200",buttons:{Ok:function(){var a=$("#"+d._chartId).find("svg").clone();a.attr("xmlns","http://www.w3.org/2000/svg");a.attr("version","1.1");var b=d._dialog.find(".svg-file-format"),c=document.forms[sprintf("%s-svg-save-form",
d._id)];c.action=d._chartSaverLocation;c.svg.value=$("<div>").append(a).html();c.format.value=b.val();c.submit();d._handlers.ok();$(this).dialog("close")},Cancel:function(){d._handlers.cancel();$(this).dialog("close")}},modal:!0})};epiviz.ui.controls.SaveSvgAsImageDialog.prototype=epiviz.utils.mapCopy(epiviz.ui.controls.Dialog.prototype);epiviz.ui.controls.SaveSvgAsImageDialog.constructor=epiviz.ui.controls.SaveSvgAsImageDialog;
epiviz.ui.controls.SaveSvgAsImageDialog.prototype.show=function(){epiviz.ui.controls.Dialog.prototype.show.call(this);var a=this;this._dialog&&(this._dialog.dialog("open"),this._dialog.dialog("option","position","center"),this._dialog.dialog({close:function(c,b){$(this).remove();a._dialog=null}}))};
epiviz.ui.controls.ComputedMeasurementsDialog=function(a,c,b,d){epiviz.ui.controls.Dialog.call(this,a,c);this._measurements=b;this._chartsMeasurements=d;this._measurementsList=this._maxTextBox=this._minTextBox=this._nameTextBox=this._idTextBox=this._expressionTextBox=null;this._addButtonProperties={text:!1,icons:{primary:"ui-icon ui-icon-plus"}};this._deleteButtonsProperties={text:!1,icons:{primary:"ui-icon ui-icon-trash"}};this._datasourceGroupMeasurements=this._selectedDatasourceGroup=this._tabs=
null;this._addTabs();this._addDialogContents();this._addDatasourceGroupTable(b)};epiviz.ui.controls.ComputedMeasurementsDialog.prototype=epiviz.utils.mapCopy(epiviz.ui.controls.Dialog.prototype);epiviz.ui.controls.ComputedMeasurementsDialog.constructor=epiviz.ui.controls.ComputedMeasurementsDialog;
epiviz.ui.controls.ComputedMeasurementsDialog.prototype.show=function(){epiviz.ui.controls.Dialog.prototype.show.call(this);var a=this;this._dialog&&(this._dialog.dialog("open"),this._dialog.dialog("option","position","center"),this._dialog.dialog({close:function(c,b){$(this).remove();a._dialog=null;a._handlers.close()}}))};
epiviz.ui.controls.ComputedMeasurementsDialog.prototype._addDatasourceGroupTable=function(a){var c=this,b=$(sprintf("#datasource-group-tab-%s",this._id)),d="",e={};a.foreach(function(a){a.type()==epiviz.measurements.Measurement.Type.FEATURE&&(a.datasourceGroup()in e||(e[a.datasourceGroup()]=[]),e[a.datasourceGroup()].push(a))});for(var f in e)e.hasOwnProperty(f)&&(d+=sprintf('<tr><td class="center">%s</td></tr>',f));b.append(sprintf('<table style="border-spacing:0; border-collapse:collapse; -webkit-touch-callout: none; -webkit-user-select: none; -khtml-user-select: none; -moz-user-select: moz-none; -ms-user-select: none; user-select: none; width: 100%%;" class="computed-measurements-dialog-raw-table">%s</table>',
"<thead><tr><th>Data Source Group</th></tr></thead>"+d+"<tfoot><tr><th>Data Source Group</th></tr></tfoot>"));var g=b.find(".computed-measurements-dialog-raw-table").dataTable({bJQueryUI:!0,sDom:'<"H"lfr>Tt<"F"ip>',oTableTools:{sRowSelect:"single",aButtons:[],fnPreRowSelect:function(a,b,c){return!0},fnRowSelected:function(a){a=g.fnGetData(a[0]);c._selectedDatasourceGroup=a[0];c._datasourceGroupMeasurements=e[c._selectedDatasourceGroup]},fnRowDeselected:function(a){g.fnGetData(a[0])==c._selectedDatasourceGroup&&
(c._selectedDatasourceGroup=null,c._datasourceGroupMeasurements=null)}}});b.find(".DTTT_container").css("position","absolute")};
epiviz.ui.controls.ComputedMeasurementsDialog.prototype._addTabs=function(){var a=this;this._selectDialog().append('<div class="computed-measurements-dialog"><div class="computed-measurements-tabs"><ul>'+sprintf('<li><a href="#datasource-group-tab-%s">Data Source Group</a></li>',this._id)+sprintf('<li><a href="#formula-tab-%s">Expression</a></li>',this._id)+"</ul>"+sprintf('<div id="datasource-group-tab-%s"></div>',this._id)+sprintf('<div id="formula-tab-%s"></div>',this._id)+"</div></div>");this._tabs=
this._selectTabs();this._tabs.tabs({activate:function(c,b){a._tabActivate(b)}})};
epiviz.ui.controls.ComputedMeasurementsDialog.prototype._addDialogContents=function(){var a=this;this._selectDialog().dialog({autoOpen:!1,resizable:!0,width:"600",height:"550",buttons:{Back:function(){0!=a._tabs.tabs("option","active")&&a._tabs.tabs("option","active",0)},Next:function(){1!=a._tabs.tabs("option","active")&&a._tabs.tabs("option","active",1)},Add:function(){for(var c=epiviz.utils.ExpressionParser.parse(a._selectExpressionTextBox().val().trim()),b={},d=c.variables(),e=null,f=null,g=[],
h={},l=0;l<d.length;++l){var m=d[l];if(epiviz.utils.stringStartsWith(m,"{")&&epiviz.utils.stringEndsWith(m,"}")){var p=parseInt(m.substring(1,m.length-1)),m=a._datasourceGroupMeasurements[p];b[p]=m;if(null===e||e>m.minValue())e=m.minValue();if(null===f||f<m.maxValue())f=m.maxValue();if(m.metadata())for(p=0;p<m.metadata().length;++p)h[m.metadata()[p]]||(h[m.metadata()[p]]=!0,g.push(m.metadata()[p]))}}d=a._selectMinTextBox().val().trim();h=a._selectMaxTextBox().val().trim();e=d?parseFloat(d):e;f=h?
parseFloat(h):f;d=a._selectIdTextBox().val().trim()||epiviz.utils.generatePseudoGUID(5);c=new epiviz.measurements.Measurement(d,a._selectNameTextBox().val().trim()||"Unnamed ["+d+"]",epiviz.measurements.Measurement.Type.FEATURE,null,a._selectedDatasourceGroup,null,{referredMeasurements:b,expression:c},"any",null,e,f,g);b=a._datasourceGroupMeasurements.length;$(sprintf("#computed-measurement-measurements-%s",a._id)).append(sprintf('<div style="min-height: 30px; padding: 2px;"><div style="margin: 6px; float: left;">%1$s {<b>%2$s</b>}</div><div style="float: right;"><button id="delete-button-%2$s-%3$s" data-measurement="%2$s">Delete</button><button style="" id="measurement-button-%2$s-%3$s" data-measurement="%2$s">Insert %2$s</button></div></div>',
c.name(),b,a._id));$("#measurement-button-"+b+"-"+a._id).button(a._addButtonProperties).click(function(){a._addButtonClick($(this))});$("#delete-button-"+b+"-"+a._id).button(a._deleteButtonsProperties).click(function(){a._deleteButtonClick($(this))});a._datasourceGroupMeasurements.push(c);a._handlers.add(c)},Close:function(){a._handlers.close();$(this).dialog("close")}},modal:!0})};
epiviz.ui.controls.ComputedMeasurementsDialog.prototype._addButtonClick=function(a){a=a.data("measurement");var c=this._selectExpressionTextBox();c.val(c.val().trim()+" {"+a+"}")};
epiviz.ui.controls.ComputedMeasurementsDialog.prototype._deleteButtonClick=function(a){for(var c=a.data("measurement"),b=this._datasourceGroupMeasurements[c],d=0;d<this._datasourceGroupMeasurements.length;++d){var e=this._datasourceGroupMeasurements[d];if(null!=e&&e!==b&&e.isComputed()&&e.componentMeasurements().contains(b)){a=new epiviz.ui.controls.MessageDialog("Measurement cannot be deleted",{Ok:function(){}},"There are other measurements that depend on the one selected. Please delete those before deleting this.",
epiviz.ui.controls.MessageDialog.Icon.ERROR);a.show();return}}for(var f in this._chartsMeasurements)if(this._chartsMeasurements.hasOwnProperty(f)&&this._chartsMeasurements[f].contains(b)){a=new epiviz.ui.controls.MessageDialog("Measurement cannot be deleted",{Ok:function(){}},"There are charts using the selected measurement. Remove them from the workspace and then try again.",epiviz.ui.controls.MessageDialog.Icon.ERROR);a.show();return}this._datasourceGroupMeasurements[c]=null;a.parent().parent().remove();
this._handlers.remove(b)};
epiviz.ui.controls.ComputedMeasurementsDialog.prototype._tabActivate=function(a){if(0!=this._selectTabs().tabs("option","active")&&(a.newPanel.empty(),this._measurementsList=this._maxTextBox=this._minTextBox=this._expressionTextBox=this._nameTextBox=this._idTextBox=null,this._selectedDatasourceGroup)){a.newPanel.append(sprintf('<label for="computed-measurement-key-%1$s"><b>Id:</b></label> <input id="computed-measurement-key-%1$s" class="ui-widget-content ui-corner-all" style="padding: 2px;" type="text"/>&nbsp;<label for="computed-measurement-name-%1$s"><b>Name:</b></label> <input id="computed-measurement-name-%1$s" class="ui-widget-content ui-corner-all" style="padding: 2px;" type="text"/><br /><br /><div id="computed-measurement-measurements-%1$s" style="overflow: auto; max-height: 200px; border-style: solid; border-width: 1px; border-color: #999999;"></div><br/><label for="computed-measurement-min-%1$s"><b>Min:</b></label> <input id="computed-measurement-min-%1$s" class="ui-widget-content ui-corner-all" style="padding: 2px;" type="text"/>&nbsp;<label for="computed-measurement-max-%1$s"><b>Max:</b></label> <input id="computed-measurement-max-%1$s" class="ui-widget-content ui-corner-all" style="padding: 2px;" type="text"/><br/><div style="overflow: hidden; padding: 10px; padding-right: 20px; margin: 0px;"><textarea id="computed-measurement-expr-%1$s" class="ui-widget-content ui-corner-all" style="width: 100%%; height: 55px; padding: 5px; margin: 0; resize: none;"></textarea></div>',this._id));
a=this._selectMeasurementsList();for(var c="",b=0;b<this._datasourceGroupMeasurements.length;++b){var d=this._datasourceGroupMeasurements[b],e="";d.isComputed()&&(e='<button id="delete-button-%2$s-%3$s" data-measurement="%2$s">Delete %2$s</button>');c+=sprintf('<div style="min-height: 30px; padding: 2px;"><div style="margin: 6px; float: left;">%1$s {<b>%2$s</b>}</div><div style="float: right;">'+e+'<button style="" id="measurement-button-%2$s-%3$s" data-measurement="%2$s">Insert %2$s</button></div></div>',
d.name(),b,this._id)}a.append(c);for(var f=this,b=0;b<this._datasourceGroupMeasurements.length;++b)d=this._datasourceGroupMeasurements[b],d.isComputed()&&$("#delete-button-"+b+"-"+this._id).button(this._deleteButtonsProperties).click(function(){f._deleteButtonClick($(this))}),$("#measurement-button-"+b+"-"+this._id).button(this._addButtonProperties).click(function(){f._addButtonClick($(this))});this._selectIdTextBox().watermark("[auto]");this._selectNameTextBox().watermark("[auto]");this._selectMinTextBox().watermark("[auto]");
this._selectMaxTextBox().watermark("[auto]");this._selectExpressionTextBox().watermark("[expression; for example: {0} - {1}]")}};epiviz.ui.controls.ComputedMeasurementsDialog.prototype._selectDialog=function(){this._dialog||(this._dialog=$("#"+this._id));return this._dialog};epiviz.ui.controls.ComputedMeasurementsDialog.prototype._selectExpressionTextBox=function(){this._expressionTextBox||(this._expressionTextBox=$("#computed-measurement-expr-"+this._id));return this._expressionTextBox};
epiviz.ui.controls.ComputedMeasurementsDialog.prototype._selectIdTextBox=function(){this._idTextBox||(this._idTextBox=$("#computed-measurement-key-"+this._id));return this._idTextBox};epiviz.ui.controls.ComputedMeasurementsDialog.prototype._selectNameTextBox=function(){this._nameTextBox||(this._nameTextBox=$("#computed-measurement-name-"+this._id));return this._nameTextBox};
epiviz.ui.controls.ComputedMeasurementsDialog.prototype._selectMinTextBox=function(){this._minTextBox||(this._minTextBox=$("#computed-measurement-min-"+this._id));return this._minTextBox};epiviz.ui.controls.ComputedMeasurementsDialog.prototype._selectMaxTextBox=function(){this._maxTextBox||(this._maxTextBox=$("#computed-measurement-max-"+this._id));return this._maxTextBox};
epiviz.ui.controls.ComputedMeasurementsDialog.prototype._selectTabs=function(){this._tabs||(this._tabs=this._dialog.find(".computed-measurements-tabs"));return this._tabs};epiviz.ui.controls.ComputedMeasurementsDialog.prototype._selectMeasurementsList=function(){this._measurementsList||(this._measurementsList=$("#computed-measurement-measurements-"+this._id));return this._measurementsList};
epiviz.ui.controls.CustomSettingsDialog=function(a,c,b,d){epiviz.ui.controls.Dialog.call(this,a,c);this._customSettingsDefs=b;this._customSettingsValues=epiviz.utils.mapCopy(d)};epiviz.ui.controls.CustomSettingsDialog.prototype=epiviz.utils.mapCopy(epiviz.ui.controls.Dialog.prototype);epiviz.ui.controls.CustomSettingsDialog.constructor=epiviz.ui.controls.CustomSettingsDialog;
epiviz.ui.controls.CustomSettingsDialog.prototype.show=function(){epiviz.ui.controls.Dialog.prototype.show.call(this);var a=epiviz.ui.charts.CustomSetting.Type;if(!this._dialog){var c=this;this._dialog=$("#"+this._id);this._dialog.css("display","inline");var b,d,e,f,g="";for(b=0;b<this._customSettingsDefs.length;++b){d=sprintf("%s-%s",this._id,this._customSettingsDefs[b].id);var h=sprintf('<tr><td><label for="%s">%s</label></td><td style="text-align: right;">%%s</td></tr>',d,this._customSettingsDefs[b].label);
e=null;f=this._customSettingsValues[this._customSettingsDefs[b].id];switch(this._customSettingsDefs[b].type){case a.BOOLEAN:h=sprintf(h,sprintf('<div id="%1$s"><label for="%1$s-true">On</label><input type="radio" id="%1$s-true" name="%1$s" %2$s /><label for="%1$s-false">Off</label><input type="radio" id="%1$s-false" name="%1$s" %3$s /></div>',d,f?'checked="checked"':"",f?"":'checked="checked"'));break;case a.ARRAY:h=sprintf(h,sprintf('<input id="%s" value="%s" class="ui-widget-content ui-corner-all" style="text-align: right; padding: 5px;" />',
d,f.join(",")));break;case a.NUMBER:case a.STRING:h=sprintf(h,sprintf('<input id="%s" value="%s" class="ui-widget-content ui-corner-all" style="text-align: right; padding: 5px;" />',d,f));break;case a.CATEGORICAL:var l="",m=this._customSettingsDefs[b];if(m.possibleValues)for(var p=0;p<m.possibleValues.length;++p)l+=sprintf('<option value="%1$s"%2$s>%1$s</option>',m.possibleValues[p],m.possibleValues[p]==f?'selected="selected"':"");f=sprintf('<select id="%s">%s</select>',d,l);h=sprintf(h,f)}g+=h}g=
sprintf('<div style="margin: 5px; padding: 5px; height: auto;"><table style="width: 100%%;">%s</table></div>',g);this._dialog.append(g);for(b=0;b<this._customSettingsDefs.length;++b)switch(d=sprintf("%s-%s",this._id,this._customSettingsDefs[b].id),e=$("#"+d),f=this._customSettingsValues[this._customSettingsDefs[b].id],this._customSettingsDefs[b].type){case a.BOOLEAN:e.buttonset();break;case a.NUMBER:case a.ARRAY:case a.STRING:e.watermark(this._customSettingsDefs[b].label);break;case a.CATEGORICAL:e.selectmenu()}this._dialog.dialog({autoOpen:!1,
resizable:!1,buttons:{Ok:function(){for(var b=0;b<c._customSettingsDefs.length;++b){d=sprintf("%s-%s",c._id,c._customSettingsDefs[b].id);e=$("#"+d);var f=null;if(e.val()==epiviz.ui.charts.CustomSetting.DEFAULT)f=c._customSettingsDefs[b].defaultValue;else{var g=null;try{switch(c._customSettingsDefs[b].type){case a.BOOLEAN:var h=$("#"+d+" :radio:checked").attr("id"),f="true"==h.substr(h.lastIndexOf("-")+1);break;case a.NUMBER:f=e.val()==epiviz.ui.charts.CustomSetting.DEFAULT?c._customSettingsDefs[b].defaultValue:
parseFloat(e.val());if(isNaN(f)){g=new epiviz.ui.controls.MessageDialog("Invalid property value",{Ok:function(){}},sprintf('Invalid value for setting "%s" (%s)',c._customSettingsDefs[b].label,c._customSettingsDefs[b].id),epiviz.ui.controls.MessageDialog.Icon.ERROR);g.show();return}break;case a.ARRAY:f=e.val().split(/[\s,]+/g);break;case a.STRING:case a.CATEGORICAL:f=e.val()}}catch(l){g=new epiviz.ui.controls.MessageDialog("Invalid property value",{Ok:function(){}},sprintf('Invalid value for setting "%s" (%s)',
c._customSettingsDefs[b].label,c._customSettingsDefs[b].id),epiviz.ui.controls.MessageDialog.Icon.ERROR);g.show();return}}c._customSettingsValues[c._customSettingsDefs[b].id]=f}c._handlers.ok(c._customSettingsValues);$(this).dialog("close")},Cancel:function(){c._handlers.cancel();$(this).dialog("close")}},modal:!0});this._dialog.dialog({close:function(a,b){$(this).remove();c._dialog=null}})}this._dialog.dialog("open");this._dialog.dialog("option","position","center")};epiviz.plugins={};
epiviz.plugins.charts={};epiviz.plugins.charts.BlocksTrack=function(a,c,b){epiviz.ui.charts.Track.call(this,a,c,b);this._initialize()};epiviz.plugins.charts.BlocksTrack.prototype=epiviz.utils.mapCopy(epiviz.ui.charts.Track.prototype);epiviz.plugins.charts.BlocksTrack.constructor=epiviz.plugins.charts.BlocksTrack;epiviz.plugins.charts.BlocksTrack.prototype._initialize=function(){epiviz.ui.charts.Track.prototype._initialize.call(this)};
epiviz.plugins.charts.BlocksTrack.prototype._addStyles=function(){var a="#"+this._svgId,a=sprintf("%s .items { shape-rendering: crispEdges; fill-opacity: 0.6; stroke: #555555; stroke-opacity: 0.5; stroke-width: 1; }\n",a)+sprintf("%s .items .selected { stroke: #ffc600; stroke-width: 5; stroke-opacity: 0.7; fill-opacity: 1; }\n",a)+sprintf("%s .items .hovered { stroke: #ffc600; stroke-width: 5; stroke-opacity: 0.7; fill-opacity: 1; }\n",a);this._container.find("svg").append(sprintf('<style type="text/css">%s</style>',
a))};epiviz.plugins.charts.BlocksTrack.prototype.draw=function(a,c,b,d){epiviz.ui.charts.Track.prototype.draw.call(this,a,c,b,d);c=this._lastData;a=this._lastRange;return c&&a?this._drawBlocks(a,c,b||0,d||1):[]};
epiviz.plugins.charts.BlocksTrack.prototype._drawBlocks=function(a,c,b,d){var e=epiviz.ui.charts.Axis,f=a.start(),g=a.end(),h=this.width(),l=this.height(),m=this.margins(),p=this.measurements(),q=this.colors(),t=this._customSettingsValues[epiviz.plugins.charts.BlocksTrackType.CustomSettings.MIN_BLOCK_DISTANCE],y=d3.scale.linear().domain([f,g]).range([0,h-m.sumAxis(e.X)]),u=b*(h-m.sumAxis(e.X))/(g-f);this._clearAxes();this._drawAxes(y,null,10,5);var C=this,B=[],I=0;p.foreach(function(b){for(var d=
c.get(b),e=[],f=0;f<d.size();++f){var g=d.get(f);if(!(g.rowItem.start()>a.end()||g.rowItem.end()<a.start())){var h=sprintf("item data-series-%s",I);if(null!==t&&0<e.length){var l=e[e.length-1],m=y(g.rowItem.start()),p=y(l.end);if(m-p<t){l.end=Math.max(l.end,g.rowItem.end());l.valueItems[0].push(g);l.id=sprintf("b-%s-%s-%s",I,l.start,l.end);continue}}e.push(new epiviz.ui.charts.UiObject(sprintf("b-%s-%s-%s",I,g.rowItem.start(),g.rowItem.end()),g.rowItem.start(),g.rowItem.end(),null,I,[[g]],[b],h))}}B=
B.concat(e);++I});b=this._svg.select(".items");f=b.select(".selected");f=this._svg.select("#clip-"+this._id);b.empty()&&(f.empty()&&this._svg.select("defs").append("clipPath").attr("id","clip-"+this._id).append("rect").attr("class","clip-path-rect"),b=this._svg.append("g").attr("class","items").attr("id",this._id+"-gene-content").attr("clip-path","url(#clip-"+this._id+")"),f=b.append("g").attr("class","selected"),b.append("g").attr("class","hovered"),f.append("g").attr("class","hovered"));b.attr("transform",
"translate("+m.left()+", "+m.top()+")");this._svg.select(".clip-path-rect").attr("x",0).attr("y",0).attr("width",h-m.sumAxis(e.X)).attr("height",l-m.sumAxis(e.Y));h=b.selectAll(".item").data(B,function(a){return a.id});h.enter().insert("rect",":first-child").attr("class",function(a){return a.cssClasses}).style("fill",function(a){return q.get(a.seriesIndex)}).attr("x",function(a){return y(a.start)/d+u}).attr("width",function(a){return d*(y(a.end+1)-y(a.start))}).on("mouseout",function(a){C._unhover.notify()}).on("mouseover",
function(a){C._hover.notify(a)}).on("click",function(a){C._deselect.notify();C._select.notify(a);d3.event.stopPropagation()});h.attr("class",function(a){return a.cssClasses}).attr("height",l-m.sumAxis(e.Y)).attr("y",0).transition().duration(500).attr("x",function(a){return y(a.start)}).attr("width",function(a){return y(a.end+1)-y(a.start)});h.exit().transition().duration(500).attr("x",function(a){return y(a.start)}).remove();return B};epiviz.plugins.charts.BlocksTrack.prototype.chartTypeName=function(){return"epiviz.plugins.charts.BlocksTrack"};
epiviz.plugins.charts.BlocksTrack.prototype.setColorMap=function(a){this._container.find(".items").remove();epiviz.ui.charts.Chart.prototype.setColorMap.call(this,a)};epiviz.plugins.charts.BlocksTrackType=function(a){epiviz.ui.charts.TrackType.call(this,a)};epiviz.plugins.charts.BlocksTrackType.prototype=epiviz.utils.mapCopy(epiviz.ui.charts.TrackType.prototype);epiviz.plugins.charts.BlocksTrackType.constructor=epiviz.plugins.charts.BlocksTrackType;
epiviz.plugins.charts.BlocksTrackType.prototype.createNew=function(a,c,b){return new epiviz.plugins.charts.BlocksTrack(a,c,b)};epiviz.plugins.charts.BlocksTrackType.prototype.typeName=function(){return"epiviz.plugins.charts.BlocksTrack"};epiviz.plugins.charts.BlocksTrackType.prototype.chartName=function(){return"Blocks Track"};epiviz.plugins.charts.BlocksTrackType.prototype.chartHtmlAttributeName=function(){return"blocks"};epiviz.plugins.charts.BlocksTrackType.prototype.chartContentType=function(){return epiviz.measurements.Measurement.Type.RANGE};
epiviz.plugins.charts.BlocksTrackType.prototype.customSettingsDefs=function(){return epiviz.ui.charts.TrackType.prototype.customSettingsDefs.call(this).concat([new epiviz.ui.charts.CustomSetting(epiviz.plugins.charts.BlocksTrackType.CustomSettings.MIN_BLOCK_DISTANCE,epiviz.ui.charts.CustomSetting.Type.NUMBER,5,"Minimum block distance")])};epiviz.plugins.charts.BlocksTrackType.CustomSettings={MIN_BLOCK_DISTANCE:"minBlockDistance"};
epiviz.plugins.charts.LineTrack=function(a,c,b){epiviz.ui.charts.Track.call(this,a,c,b);this._initialize()};epiviz.plugins.charts.LineTrack.prototype=epiviz.utils.mapCopy(epiviz.ui.charts.Track.prototype);epiviz.plugins.charts.LineTrack.constructor=epiviz.plugins.charts.LineTrack;epiviz.plugins.charts.LineTrack.prototype._initialize=function(){epiviz.ui.charts.Track.prototype._initialize.call(this)};
epiviz.plugins.charts.LineTrack.prototype.draw=function(a,c,b,d){var e=this._lastRange;epiviz.ui.charts.Track.prototype.draw.call(this,a,c,b,d);c=this._lastData;a=this._lastRange;e&&a&&e.overlapsWith(a)&&e.width()==a.width()&&(b=a.start()-e.start());if(!c||!a)return[];var e=epiviz.ui.charts.CustomSetting,f=this._customSettingsValues[epiviz.ui.charts.ChartType.CustomSettings.Y_MIN],g=this._customSettingsValues[epiviz.ui.charts.ChartType.CustomSettings.Y_MAX];f==e.DEFAULT&&(f=null,this.measurements().foreach(function(a){null!==
a&&(null===f||a.minValue()<f)&&(f=a.minValue())}));g==e.DEFAULT&&(g=null,this.measurements().foreach(function(a){null!==a&&(null===g||a.maxValue()>g)&&(g=a.maxValue())}));null===f&&null===g&&(f=-1,g=1);null===f&&(f=g-1);null===g&&(g=f+1);var h=epiviz.ui.charts.Axis,e=d3.scale.linear().domain([a.start(),a.end()]).range([0,this.width()-this.margins().sumAxis(h.X)]),l=d3.scale.linear().domain([f,g]).range([this.height()-this.margins().sumAxis(h.Y),0]);this._clearAxes();this._drawAxes(e,l,10,5);b=(b||
0)*(this.width()-this.margins().sumAxis(h.X))/a.width();if(this._svg.selectAll(".lines").empty()){var m=this._svg.append("g").attr("class","lines").attr("transform","translate("+this.margins().left()+", "+this.margins().top()+")");this.measurements().foreach(function(a,b){m.append("g").attr("class","line-series-index-"+b);m.append("g").attr("class","point-series-index-"+b)})}return this._drawLines(a,c,b,d||1,e,l)};
epiviz.plugins.charts.LineTrack.prototype._drawLines=function(a,c,b,d,e,f){this.margins();var g=this.colors(),h=this._customSettingsValues[epiviz.plugins.charts.LineTrackType.CustomSettings.MAX_POINTS],l=this._customSettingsValues[epiviz.plugins.charts.LineTrackType.CustomSettings.SHOW_POINTS],m=this._customSettingsValues[epiviz.plugins.charts.LineTrackType.CustomSettings.SHOW_LINES],p=this._customSettingsValues[epiviz.plugins.charts.LineTrackType.CustomSettings.POINT_RADIUS],q=this._customSettingsValues[epiviz.plugins.charts.LineTrackType.CustomSettings.LINE_THICKNESS],
t=this._customSettingsValues[epiviz.plugins.charts.LineTrackType.CustomSettings.INTERPOLATION],y=this;d=d3.scale.linear().domain([0,this.width()-this.margins().sumAxis(epiviz.ui.charts.Axis.X)]).range([a.start(),a.end()])(b)-a.start();var u=epiviz.datatypes.GenomicRange.fromStartEnd(a.seqName(),Math.min(a.start(),a.start()+d),Math.max(a.end(),a.end()+d)),C=this._svg.select(".lines"),B=[];this.measurements().foreach(function(a,d){var A=c.get(a),r=A.binarySearchStarts(u);if(0!=r.length){0<r.index&&
(--r.index,++r.length);r.index+r.length<A.size()&&++r.length;var v=null;if(null===h||r.length<=h)v=epiviz.utils.range(r.length,r.index);else for(var z=r.length/h,v=[],H=0;Math.round(H)<r.length;H+=z)v.push(r.index+Math.round(H));for(r=0;r<v.length;++r)z=A.get(v[r]),B.push(new epiviz.ui.charts.UiObject(sprintf("line_%s_%s",d,z.globalIndex),z.rowItem.start(),z.rowItem.end(),[z.value],d,[[z]],[a],sprintf("item data-series-%s",d)));r=function(a){a=A.get(a);return e(a.rowItem.start())};z=function(a){a=
A.get(a);return f(a.value)};if(m){var H=d3.svg.line().x(r).y(z).interpolate(t),O=C.select(".line-series-index-"+d).selectAll("path").data([v]);O.enter().append("path").attr("d",H).style("shape-rendering","auto").style("stroke-opacity","0.7").on("mouseover",function(){y._captureMouseHover()}).on("mousemove",function(){y._captureMouseHover()}).on("mouseout",function(){y._unhover.notify()});O.attr("d",H).style("stroke",g.get(d)).style("stroke-width",q).attr("transform","translate("+ +b+")").transition().duration(500).attr("transform",
"translate(0)")}else C.select(".line-series-index-"+d).selectAll("path").remove();C.select(".point-series-index-"+d).selectAll("circle").remove();l&&(v=C.select(".point-series-index-"+d).selectAll("circle").data(v),v.enter().append("circle").attr("class","point-series-index-"+d).attr("r",p).attr("cx",r).attr("cy",z).attr("fill","none").attr("stroke",g.get(d)).attr("transform","translate("+ +b+")").transition().duration(500).attr("transform","translate(0)"),v.on("mouseover",function(){y._captureMouseHover()}).on("mousemove",
function(){y._captureMouseHover()}).on("mouseout",function(){y._unhover.notify()}),v.exit().transition().duration(500).style("opacity",0).remove())}});return B};epiviz.plugins.charts.LineTrack.prototype.chartTypeName=function(){return"epiviz.plugins.charts.LineTrack"};epiviz.plugins.charts.LineTrackType=function(a){epiviz.ui.charts.TrackType.call(this,a)};epiviz.plugins.charts.LineTrackType.prototype=epiviz.utils.mapCopy(epiviz.ui.charts.TrackType.prototype);
epiviz.plugins.charts.LineTrackType.constructor=epiviz.plugins.charts.LineTrackType;epiviz.plugins.charts.LineTrackType.prototype.createNew=function(a,c,b){return new epiviz.plugins.charts.LineTrack(a,c,b)};epiviz.plugins.charts.LineTrackType.prototype.typeName=function(){return"epiviz.plugins.charts.LineTrack"};epiviz.plugins.charts.LineTrackType.prototype.chartName=function(){return"Line Track"};epiviz.plugins.charts.LineTrackType.prototype.chartHtmlAttributeName=function(){return"lines"};
epiviz.plugins.charts.LineTrackType.prototype.chartContentType=function(){return epiviz.measurements.Measurement.Type.FEATURE};
epiviz.plugins.charts.LineTrackType.prototype.customSettingsDefs=function(){return epiviz.ui.charts.TrackType.prototype.customSettingsDefs.call(this).concat([new epiviz.ui.charts.CustomSetting(epiviz.plugins.charts.LineTrackType.CustomSettings.MAX_POINTS,epiviz.ui.charts.CustomSetting.Type.NUMBER,100,"Maximum points"),new epiviz.ui.charts.CustomSetting(epiviz.plugins.charts.LineTrackType.CustomSettings.SHOW_POINTS,epiviz.ui.charts.CustomSetting.Type.BOOLEAN,!1,"Show points"),new epiviz.ui.charts.CustomSetting(epiviz.plugins.charts.LineTrackType.CustomSettings.SHOW_LINES,
epiviz.ui.charts.CustomSetting.Type.BOOLEAN,!0,"Show lines"),new epiviz.ui.charts.CustomSetting(epiviz.plugins.charts.LineTrackType.CustomSettings.POINT_RADIUS,epiviz.ui.charts.CustomSetting.Type.NUMBER,1,"Point radius"),new epiviz.ui.charts.CustomSetting(epiviz.plugins.charts.LineTrackType.CustomSettings.LINE_THICKNESS,epiviz.ui.charts.CustomSetting.Type.NUMBER,1,"Line thickness"),new epiviz.ui.charts.CustomSetting(epiviz.ui.charts.ChartType.CustomSettings.Y_MIN,epiviz.ui.charts.CustomSetting.Type.NUMBER,
epiviz.ui.charts.CustomSetting.DEFAULT,"Min Y"),new epiviz.ui.charts.CustomSetting(epiviz.ui.charts.ChartType.CustomSettings.Y_MAX,epiviz.ui.charts.CustomSetting.Type.NUMBER,epiviz.ui.charts.CustomSetting.DEFAULT,"Max Y"),new epiviz.ui.charts.CustomSetting(epiviz.plugins.charts.LineTrackType.CustomSettings.INTERPOLATION,epiviz.ui.charts.CustomSetting.Type.CATEGORICAL,"linear","Interpolation","linear step-before step-after basis basis-open basis-closed bundle cardinal cardinal-open monotone".split(" "))])};
epiviz.plugins.charts.LineTrackType.CustomSettings={MAX_POINTS:"maxPoints",SHOW_POINTS:"showPoints",SHOW_LINES:"showLines",POINT_RADIUS:"pointRadius",LINE_THICKNESS:"lineThickness",INTERPOLATION:"interpolation"};
epiviz.plugins.charts.ScatterPlot=function(a,c,b){epiviz.ui.charts.Plot.call(this,a,c,b);this._legend=this._jChartContent=this._chartContent=null;this._measurementsX=[];this._measurementsY=[];var d=this;this.measurements().foreach(function(a,b){0==b%2?d._measurementsX.push(a):d._measurementsY.push(a)});this._yLabel=this._xLabel="";for(a=0;a<Math.min(this._measurementsX.length,this._measurementsY.length);++a)0<a&&(this._xLabel+=", ",this._yLabel+=", "),this._xLabel+=this._measurementsX[a].name(),this._yLabel+=
this._measurementsY[a].name();this._initialize()};epiviz.plugins.charts.ScatterPlot.prototype=epiviz.utils.mapCopy(epiviz.ui.charts.Plot.prototype);epiviz.plugins.charts.ScatterPlot.constructor=epiviz.plugins.charts.ScatterPlot;
epiviz.plugins.charts.ScatterPlot.prototype._initialize=function(){epiviz.ui.charts.Plot.prototype._initialize.call(this);this._chartContent=this._svg.append("g").attr("class","chart-content");this._jChartContent=this._container.find(".chart-content");this._legend=this._svg.append("g").attr("class","chart-legend")};
epiviz.plugins.charts.ScatterPlot.prototype._addStyles=function(){for(var a="#"+this._svgId,c=sprintf("%s .items {}\n",a)+sprintf("%s .items .selected { fill: #1a6d00; stroke: #ffc600; stroke-width: 2; stroke-opacity: 1.0; opacity: 1; }\n",a)+sprintf("%s .items .hovered { fill: #1a6d00; stroke: #ffc600; stroke-width: 2; stroke-opacity: 1.0; opacity: 1; }\n",a),b=Math.min(this._measurementsX.length,this._measurementsY.length),d=0;d<b;++d)c+=sprintf("%s .data-series-%s { opacity: 1.0; }\n",a,d);this._container.find("svg").append(sprintf('<style type="text/css">%s</style>',
c))};epiviz.plugins.charts.ScatterPlot.prototype.draw=function(a,c){epiviz.ui.charts.Plot.prototype.draw.call(this,a,c);c=this._lastData;a=this._lastRange;return c&&a?this._drawCircles(a,c):[]};
epiviz.plugins.charts.ScatterPlot.prototype._drawCircles=function(a,c){var b=this,d=epiviz.ui.charts.Axis,e=Math.max(1,this._customSettingsValues[epiviz.plugins.charts.ScatterPlotType.CustomSettings.CIRCLE_RADIUS_RATIO]*Math.min(this.width(),this.height())),f=Math.max(Math.floor(e),1),g=Math.min(this._measurementsX.length,this._measurementsY.length),h=c.first().value.globalStartIndex(),l=c.first().value.size()+h;c.foreach(function(a,b){var c=b.globalStartIndex(),d=b.size()+c;c>h&&(h=c);d<l&&(l=d)});
var m=l-h,p=this.margins(),q=this.width(),t=this.height(),y=epiviz.ui.charts.CustomSetting,u=this._customSettingsValues[epiviz.ui.charts.ChartType.CustomSettings.Y_MIN],C=this._customSettingsValues[epiviz.ui.charts.ChartType.CustomSettings.Y_MAX],B=this._customSettingsValues[epiviz.ui.charts.ChartType.CustomSettings.X_MIN],I=this._customSettingsValues[epiviz.ui.charts.ChartType.CustomSettings.X_MAX];B==y.DEFAULT&&(B=this._measurementsX[0].minValue());u==y.DEFAULT&&(u=this._measurementsY[0].minValue());
I==y.DEFAULT&&(I=this._measurementsX[0].maxValue());C==y.DEFAULT&&(C=this._measurementsY[0].maxValue());var y=d3.scale.linear().domain([B,I]).range([0,q-p.sumAxis(d.X)]),F=d3.scale.linear().domain([u,C]).range([t-p.sumAxis(d.Y),0]);this._clearAxes(this._chartContent);this._drawAxes(y,F,15,15,this._chartContent);var A,r,v=[];for(A=0;A<m;++A){r=A+h;var z=c.get(this._measurementsX[0]).getByGlobalIndex(r).rowItem;if(z.start()<a.end()&&z.end()>a.start())for(z=0;z<g;++z)v.push(z*m+A)}var z={},g=[],H=1;
for(A=0;A<v.length;++A){r=v[A]%m;var O=r+h;r=Math.floor(r/m);var T=b._measurementsX[r],J=b._measurementsY[r],Z=c.get(T).getByGlobalIndex(O),O=c.get(J).getByGlobalIndex(O),na=sprintf("item data-series-%s",r),sa=y(Z.value),ia=F(O.value),sa=Math.floor(sa/f)*f,ia=Math.floor(ia/f)*f,aa=null;z[ia]&&z[ia][sa]?(aa=z[ia][sa],aa.id+="_"+Z.globalIndex,aa.start=Math.min(aa.start,Z.rowItem.start()),aa.end=Math.max(aa.end,Z.rowItem.end()),aa.values[0]=(aa.values[0]*aa.valueItems[0].length+Z.value)/(aa.valueItems[0].length+
1),aa.values[1]=(aa.values[1]*aa.valueItems[1].length+O.value)/(aa.valueItems[1].length+1),aa.valueItems[0].push(Z),aa.valueItems[1].push(O),aa.valueItems[0].length>H&&(H=aa.valueItems[0].length)):(aa=new epiviz.ui.charts.UiObject(sprintf("scatter_%s_%s",r,Z.globalIndex),Z.rowItem.start(),Z.rowItem.end(),[Z.value,O.value],r,[[Z],[O]],[T,J],na),z[ia]||(z[ia]={}),z[ia][sa]=aa,g.push(aa))}f=this._chartContent.select(".items");f.empty()&&(f=this._chartContent.append("g").attr("class","items"),m=f.append("g").attr("class",
"selected"),f.append("g").attr("class","hovered"),m.append("g").attr("class","hovered"));f=f.selectAll("circle").data(g,function(a){return a.id});f.enter().insert("circle",":first-child").attr("id",function(a){return sprintf("%s-item-%s-%s",b._id,a.seriesIndex,a.valueItems[0][0].globalIndex)}).style("opacity",0).style("fill-opacity",0).attr("r",0);f.each(function(a){d3.select(this).attr("cx",p.left()+(a.values[0]-B)*(q-p.sumAxis(d.X))/(I-B)).attr("cy",t-p.bottom()-(a.values[1]-u)*(t-p.sumAxis(d.Y))/
(C-u)).attr("class",a.cssClasses).style("fill",b.colors().get(a.seriesIndex))});f.transition().duration(1E3).style("fill-opacity",function(a){return Math.max(.3,a.valueItems[0].length/H)}).style("opacity",null).attr("r",e);f.exit().transition().duration(1E3).style("opacity",0).attr("r",0).remove();f.on("mouseover",function(a){b._hover.notify(a)}).on("mouseout",function(a){b._unhover.notify()}).on("click",function(a){b._deselect.notify();b._select.notify(a);d3.event.stopPropagation()});return g};
epiviz.plugins.charts.ScatterPlot.prototype.chartTypeName=function(){return"epiviz.plugins.charts.ScatterPlot"};epiviz.plugins.charts.ScatterPlot.prototype.colorMap=function(){for(var a=Math.min(this._measurementsX.length,this._measurementsY.length),c=Array(a),b=0;b<a;++b)c[b]={name:sprintf("%s vs %s",this._measurementsX[b].name(),this._measurementsY[b].name()),color:this._properties.colors.get(b)};return c};
epiviz.plugins.charts.ScatterPlot.prototype._drawAxes=function(a,c,b,d,e,f,g,h){epiviz.ui.charts.Plot.prototype._drawAxes.call(this,a,c,b,d,e,f,g,h);this._legend.selectAll("text").remove();a=7*this._xLabel.length;c=7*this._yLabel.length;this._legend.append("text").attr("x",.5*(this.width()-a)).attr("y",this.height()-this.margins().bottom()+35).attr("style","font-weight: regular; font-size: 12;").attr("fill","#000000").attr("stroke","none").style("fill-opacity",1).text(this._xLabel);this._legend.append("text").attr("x",
-this.height()+.5*(this.height()-c)+this.margins().top()).attr("y",this.margins().left()-25).attr("transform","rotate(-90)").attr("style","font-weight: regular; font-size: 12;").attr("fill","#000000").attr("stroke","none").style("fill-opacity",1).text(this._yLabel)};epiviz.plugins.charts.ScatterPlotType=function(a){epiviz.ui.charts.PlotType.call(this,a)};epiviz.plugins.charts.ScatterPlotType.prototype=epiviz.utils.mapCopy(epiviz.ui.charts.PlotType.prototype);
epiviz.plugins.charts.ScatterPlotType.constructor=epiviz.plugins.charts.ScatterPlotType;epiviz.plugins.charts.ScatterPlotType.prototype.createNew=function(a,c,b){return new epiviz.plugins.charts.ScatterPlot(a,c,b)};epiviz.plugins.charts.ScatterPlotType.prototype.typeName=function(){return"epiviz.plugins.charts.ScatterPlot"};epiviz.plugins.charts.ScatterPlotType.prototype.chartName=function(){return"Scatter Plot"};epiviz.plugins.charts.ScatterPlotType.prototype.chartHtmlAttributeName=function(){return"scatter"};
epiviz.plugins.charts.ScatterPlotType.prototype.chartContentType=function(){return epiviz.measurements.Measurement.Type.FEATURE};epiviz.plugins.charts.ScatterPlotType.prototype.isRestrictedToSameDatasourceGroup=function(){return!0};epiviz.plugins.charts.ScatterPlotType.prototype.minSelectedMeasurements=function(){return 2};
epiviz.plugins.charts.ScatterPlotType.prototype.customSettingsDefs=function(){return epiviz.ui.charts.PlotType.prototype.customSettingsDefs.call(this).concat([new epiviz.ui.charts.CustomSetting(epiviz.plugins.charts.ScatterPlotType.CustomSettings.CIRCLE_RADIUS_RATIO,epiviz.ui.charts.CustomSetting.Type.NUMBER,.015,"Circle radius ratio"),new epiviz.ui.charts.CustomSetting(epiviz.ui.charts.ChartType.CustomSettings.X_MIN,epiviz.ui.charts.CustomSetting.Type.NUMBER,epiviz.ui.charts.CustomSetting.DEFAULT,
"Min X"),new epiviz.ui.charts.CustomSetting(epiviz.ui.charts.ChartType.CustomSettings.X_MAX,epiviz.ui.charts.CustomSetting.Type.NUMBER,epiviz.ui.charts.CustomSetting.DEFAULT,"Max X"),new epiviz.ui.charts.CustomSetting(epiviz.ui.charts.ChartType.CustomSettings.Y_MIN,epiviz.ui.charts.CustomSetting.Type.NUMBER,epiviz.ui.charts.CustomSetting.DEFAULT,"Min Y"),new epiviz.ui.charts.CustomSetting(epiviz.ui.charts.ChartType.CustomSettings.Y_MAX,epiviz.ui.charts.CustomSetting.Type.NUMBER,epiviz.ui.charts.CustomSetting.DEFAULT,
"Max Y")])};epiviz.plugins.charts.ScatterPlotType.CustomSettings={CIRCLE_RADIUS_RATIO:"circleRadiusRatio"};epiviz.plugins.charts.GenesTrack=function(a,c,b){epiviz.ui.charts.Track.call(this,a,c,b);this._initialize()};epiviz.plugins.charts.GenesTrack.prototype=epiviz.utils.mapCopy(epiviz.ui.charts.Track.prototype);epiviz.plugins.charts.GenesTrack.constructor=epiviz.plugins.charts.GenesTrack;epiviz.plugins.charts.GenesTrack.prototype._initialize=function(){epiviz.ui.charts.Track.prototype._initialize.call(this)};
epiviz.plugins.charts.GenesTrack.prototype._addStyles=function(){var a="#"+this._svgId,a=sprintf("%s .items { shape-rendering: auto; /* fill: %s; */ stroke: #555555; fill-opacity: 0.6; }\n",a,this.colors().get(0))+sprintf("%s .exons { /* fill: %s; */ stroke: none; }\n",a,this.colors().get(1))+sprintf("%s .gene-name { font-weight: bold; font-size: 12; fill: #000000; stroke: none; fill-opacity: 0; }\n",a)+sprintf("%s .selected { /*filter: url(#%s-dropshadow);*/ fill-opacity: 1; stroke: #555555; }\n",
a,this._id)+sprintf("%s .selected .gene-body { /* fill: #ffc600; */ stroke: %s; stroke-width: 3; stroke-opacity: 0.7; }\n",a,this.colors().get(1))+sprintf("%s .hovered { /*filter: url(#%s-dropshadow);*/ fill-opacity: 1; stroke: #555555; }\n",a,this._id)+sprintf("%s .hovered .gene-body { /* fill: #ffc600; */ stroke: %s; stroke-width: 3; stroke-opacity: 0.7; }\n",a,this.colors().get(1))+sprintf("%s .hovered .gene-name { fill-opacity: 1; }\n",a)+sprintf("%s .selected .gene-name { fill-opacity: 1; }\n",
a);this._container.find("svg").append(sprintf('<style type="text/css">%s</style>',a))};epiviz.plugins.charts.GenesTrack.prototype.draw=function(a,c,b,d){var e=this._lastRange;epiviz.ui.charts.Track.prototype.draw.call(this,a,c,b,d);c=this._lastData;a=this._lastRange;e&&a&&e.overlapsWith(a)&&e.width()==a.width()&&(b=a.start()-e.start());e&&a&&e.overlapsWith(a)&&e.width()!=a.width()&&(d=e.width()/a.width());return c&&a?this._drawGenes(a,c,b||0,d||1):[]};
epiviz.plugins.charts.GenesTrack.prototype._drawGenes=function(a,c,b,d){var e=epiviz.ui.charts.Axis,f=a.start(),g=a.end();a=this.width();var h=this.height(),l=this.margins();this.measurements();this.colors();var m=d3.scale.linear().domain([f,g]).range([0,a-l.sumAxis(e.X)]),p=b*(a-l.sumAxis(e.X))/(g-f);this._clearAxes();this._drawAxes(m,null,10,5);var q=this,t=c.first().value;c=epiviz.utils.range(t.size()).map(function(a){a=t.get(a);var b=a.rowItem,c=sprintf("item gene-%s",b.metadata("gene"));return new epiviz.ui.charts.UiObject(b.metadata("gene"),
b.start(),b.end(),null,0,[[a]],[t.measurement()],c)});d&&(this._svg.select(".items").remove(),this._svg.select("defs").select("#clip-"+this._id).remove());d=this._svg.select(".items");b=d.select(".selected");d.empty()&&(this._svg.select("defs").append("clipPath").attr("id","clip-"+this._id).append("rect").attr("x",0).attr("y",0).attr("width",a-l.sumAxis(e.X)).attr("height",h-l.sumAxis(e.Y)),d=this._svg.append("g").attr("class","items").attr("transform","translate("+l.left()+", "+l.top()+")").attr("id",
this._id+"-gene-content").attr("clip-path","url(#clip-"+this._id+")"),b=d.append("g").attr("class","selected"),d.append("g").attr("class","hovered"),b.append("g").attr("class","hovered"));e=d.selectAll(".item").data(c,function(a){return a.id});e.enter().insert("g",":first-child").on("mouseout",function(a){q._unhover.notify()}).on("mouseover",function(a){q._hover.notify(a)}).on("click",function(a){q._deselect.notify();q._select.notify(a);d3.event.stopPropagation()}).attr("transform","translate("+p+
", 0) scale(1, 1)").each(function(a){q._drawGene(this,a,m)});p&&e.each(function(a){q._translateGene(this,a,p)});e.exit().transition().duration(500).style("opacity",0).remove();return c};
epiviz.plugins.charts.GenesTrack.prototype._translateGene=function(a,c,b){a=d3.select(a);c=a.attr("transform");var d=RegExp("translate\\([\\d\\.\\-]+[\\,\\s]+[\\d\\.\\-]+\\)","g"),e=RegExp("[\\d\\.\\-]+","g"),f=c.match(d)[0],e=parseFloat(f.match(e)[0]);c=c.replace(d,"translate("+(e-b)+", 0)");a.transition().duration(500).attr("transform",c)};
epiviz.plugins.charts.GenesTrack.prototype._drawGene=function(a,c,b){var d=epiviz.ui.charts.Axis,e=this,f=c.valueItems[0][0].rowItem,g=b(c.start),h=b(c.end),l="+"==f.strand()?1:-1,m=-l*(this.height()-this.margins().sumAxis(d.Y))*.25,p=f.metadata("exon_starts").split(",").map(function(a){return parseInt(a)}),q=f.metadata("exon_ends").split(",").map(function(a){return parseInt(a)}),t=d3.range(0,p.length),y=.08*this.height(),u=.16*this.height(),C=y*Math.sqrt(3)*.5;a=d3.select(a);a.attr("class",c.cssClasses);
a.append("polygon").attr("class","gene-body").style("fill",this.colors().get(0)).attr("points",function(){var a=null,b=null,a=.5*(e.height()-e.margins().sumAxis(d.Y)-y)+m,b=[a,a,a+.5*y,a+y,a+y],a="+"==f.strand()?[g,h,h+C,h,g]:[h,g,g-C,g,h];return sprintf("%s,%s %s,%s %s,%s %s,%s %s,%s",a[0],b[0],a[1],b[1],a[2],b[2],a[3],b[3],a[4],b[4])});a.append("g").attr("class","exons").style("fill",this.colors().get(1)).selectAll("rect").data(t).enter().append("rect").attr("x",function(a){return b(p[a])}).attr("y",
.5*(e.height()-u-e.margins().sumAxis(d.Y))+m).attr("width",function(a){return b(q[a])-b(p[a])}).attr("height",u);a.append("text").attr("class","gene-name").attr("x",g+2).attr("y",.5*(e.height()-e.margins().sumAxis(d.Y))+m-l*(y+2)).style("dominant-baseline","central").text(c.id)};epiviz.plugins.charts.GenesTrack.prototype.chartTypeName=function(){return"epiviz.plugins.charts.GenesTrack"};
epiviz.plugins.charts.GenesTrack.prototype.colorMap=function(){return[{name:"Genes",color:this._properties.colors.get(0)},{name:"Exons",color:this._properties.colors.get(1)}]};
epiviz.plugins.charts.GenesTrack.prototype._drawAxes=function(a,c,b,d,e,f,g,h){epiviz.ui.charts.Track.prototype._drawAxes.call(this,a,c,b,d,e,f,g,h);a=epiviz.ui.charts.Axis;this._svg.select(".axes").append("g").attr("class","xAxis").append("line").attr("x1",this.margins().left()).attr("x2",this.width()-this.margins().left()).attr("y1",this.margins().top()+.5*(this.height()-this.margins().sumAxis(a.Y))).attr("y2",this.margins().top()+.5*(this.height()-this.margins().sumAxis(a.Y))).style("stroke","#555555").style("shape-rendering",
"crispEdges")};epiviz.plugins.charts.GenesTrackType=function(a){epiviz.ui.charts.TrackType.call(this,a)};epiviz.plugins.charts.GenesTrackType.prototype=epiviz.utils.mapCopy(epiviz.ui.charts.TrackType.prototype);epiviz.plugins.charts.GenesTrackType.constructor=epiviz.plugins.charts.GenesTrackType;epiviz.plugins.charts.GenesTrackType.prototype.createNew=function(a,c,b){return new epiviz.plugins.charts.GenesTrack(a,c,b)};epiviz.plugins.charts.GenesTrackType.prototype.typeName=function(){return"epiviz.plugins.charts.GenesTrack"};
epiviz.plugins.charts.GenesTrackType.prototype.chartName=function(){return"Genes Track"};epiviz.plugins.charts.GenesTrackType.prototype.chartHtmlAttributeName=function(){return"genes"};epiviz.plugins.charts.GenesTrackType.prototype.chartContentType=function(){return epiviz.measurements.Measurement.Type.RANGE};
epiviz.plugins.charts.HeatmapPlot=function(a,c,b){epiviz.ui.charts.Plot.call(this,a,c,b);this._jChartContent=this._chartContent=null;this._min=this.measurements().first().minValue();this._max=this.measurements().first().maxValue();this._colorScale=epiviz.utils.colorizeBinary(this._min,this._max,this.colors().get(0),this.colors().get(1));this._initialize()};epiviz.plugins.charts.HeatmapPlot.prototype=epiviz.utils.mapCopy(epiviz.ui.charts.Plot.prototype);
epiviz.plugins.charts.HeatmapPlot.constructor=epiviz.plugins.charts.HeatmapPlot;epiviz.plugins.charts.HeatmapPlot.prototype._initialize=function(){epiviz.ui.charts.Plot.prototype._initialize.call(this);this._chartContent=this._svg.append("g").attr("class","chart-content");this._jChartContent=this._container.find(".chart-content")};
epiviz.plugins.charts.HeatmapPlot.prototype._addStyles=function(){var a="#"+this._svgId,a=sprintf("%s .items { stroke: #efefef; stroke-opacity: 0.3; shape-rendering: 'crispEdges'; }\n",a)+sprintf("%s .selected .item { stroke: #ffc600; stroke-width: 2; stroke-opacity: 1.0; fill-opacity: 1; }\n",a)+sprintf("%s .hovered .item { stroke: #ffc600; stroke-width: 2; stroke-opacity: 1.0; fill-opacity: 1; }\n",a)+sprintf("%s .col-text { text-anchor: start; font-size: 10px; }\n",a)+sprintf("%s .row-text { text-anchor: end; font-size: 9px; }\n",
a)+sprintf("%s .selected .col-text { font-weight: bold; fill-opacity: 1; font-size: 10px; }\n",a)+sprintf("%s .hovered .col-text { font-weight: bold; fill-opacity: 1; font-size: 10px; }\n",a)+sprintf("%s .selected .row-text { font-weight: bold; fill-opacity: 1; font-size: 10px; }\n",a)+sprintf("%s .hovered .row-text { font-weight: bold; fill-opacity: 1; font-size: 10px; }\n",a);this._container.find("svg").append(sprintf('<style type="text/css">%s</style>',a))};
epiviz.plugins.charts.HeatmapPlot.prototype.draw=function(a,c){epiviz.ui.charts.Plot.prototype.draw.call(this,a,c);c=this._lastData;a=this._lastRange;if(!c||!a)return[];var b=this._applyClustering(a,c);return this._drawCells(a,b)};
epiviz.plugins.charts.HeatmapPlot.prototype._applyClustering=function(a,c){var b=epiviz.ui.charts.transform.clustering.ClusteringAlgorithmFactory.instance(),d=b.algorithm(this._customSettingsValues[epiviz.plugins.charts.HeatmapPlotType.CustomSettings.CLUSTERING_ALG]),e=b.metric(this._customSettingsValues[epiviz.plugins.charts.HeatmapPlotType.CustomSettings.CLUSTERING_METRIC]),b=b.linkage(this._customSettingsValues[epiviz.plugins.charts.HeatmapPlotType.CustomSettings.CLUSTERING_LINKAGE]),f=[];c.foreach(function(b,
c,d){b=[];for(d=0;d<c.size();++d){var e=c.get(d).rowItem;e.start()<a.end()&&e.end()>a.start()&&b.push(c.get(d).value)}f.push(b)});var d=d.cluster(f,e,b),g=d.root().data(),h=[];c.foreach(function(a){h.push(a)});e=[];for(b=0;b<g.length;++b)e[b]=h[g[b]];g=new epiviz.measurements.MeasurementHashtable;for(b=0;b<e.length;++b)g.put(e[b],c.get(e[b]));this._drawDendrogram(d);return g};
epiviz.plugins.charts.HeatmapPlot.prototype._drawCells=function(a,c){var b=this,d=epiviz.ui.charts.Axis,e=this._customSettingsValues[epiviz.plugins.charts.HeatmapPlotType.CustomSettings.MAX_COLUMNS],f=c.first().value.globalStartIndex(),g=c.first().value.size()+f,h=[];c.foreach(function(a,b){var c=b.globalStartIndex(),d=b.size()+c;c>f&&(f=c);d<g&&(g=d);h.push(a.name())});var l=g-f,m=this._customSettingsValues[epiviz.ui.charts.ChartType.CustomSettings.LABEL],p=this._customSettingsValues[epiviz.plugins.charts.HeatmapPlotType.CustomSettings.DENDROGRAM_RATIO],
p=this.width()*(1-p);this.height();var q=[],t={},y,u;for(y=0;y<l;++y){u=y+f;var C=c.get(this.measurements().first()).getByGlobalIndex(u).rowItem;C.start()<a.end()&&C.end()>a.start()&&(C=C.metadata(m)||""+C.id(),t[q.length]=u,q.push(C))}var B=[],I={};c.foreach(function(a,b,c){for(var d=Math.ceil(q.length/e),f=0,g=e,h=0;h<q.length;++h){u=t[h];var d=b.getByGlobalIndex(u),l=null;0==f?(f=sprintf("item data-series-%s",c),l=new epiviz.ui.charts.UiObject(sprintf("heatmap_%s_%s",c,u),d.rowItem.start(),d.rowItem.end(),
[d.value],c,[[d]],[a],f),B.push(l),f=d=Math.ceil((q.length-h)/g),--g):(l=B[B.length-1],l.id+="_"+u,l.start=Math.min(l.start,d.rowItem.start()),l.end=Math.max(l.end,d.rowItem.end()),l.values[0]=(l.values[0]*l.valueItems[0].length+d.value)/(l.valueItems[0].length+1),l.valueItems[0].push(d));0==c&&(I[u]=B.length-1);--f}});var F=(l=Math.min(q.length,e))?(p-this.margins().sumAxis(d.X))/l:0,A=(this.height()-this.margins().sumAxis(d.Y))/this.measurements().size();this._colorScale=epiviz.utils.colorizeBinary(this._min,
this._max,this.colors().get(0),this.colors().get(1));d=this._chartContent.select(".items");d.empty()&&(d=this._chartContent.append("g").attr("class","items"),m=d.append("g").attr("class","selected"),d.append("g").attr("class","hovered"),m.append("g").attr("class","hovered"));d.attr("transform","translate("+this.margins().left()+", "+this.margins().top()+")");m=d.selectAll("rect").data(B,function(a){return a.id});m.enter().append("rect").attr("id",function(a){return sprintf("%s-item-%s-%s",b._id,a.seriesIndex,
a.valueItems[0][0].globalIndex)}).attr("class",function(a){return a.cssClasses}).style("opacity",0).style("fill-opacity",0).attr("x",function(a,b){return F*I[a.valueItems[0][0].globalIndex]}).attr("y",function(a){return A*a.seriesIndex}).attr("width",F).attr("height",A).style("fill",function(a){return b._colorScale(a.values[0])});m.transition().duration(1E3).style("fill-opacity",null).style("opacity",null).attr("x",function(a,b){return F*I[a.valueItems[0][0].globalIndex]}).attr("y",function(a){return A*
a.seriesIndex}).attr("width",F).attr("height",A).style("fill",function(a){return b._colorScale(a.values[0])});m.exit().transition().duration(1E3).style("opacity",0).remove();m.on("mouseover",function(a){b._hover.notify(a)}).on("mouseout",function(a){b._unhover.notify()}).on("click",function(a){b._deselect.notify();b._select.notify(a);d3.event.stopPropagation()});m=d.selectAll(".col-text");q.length>l?m.transition().duration(500).style("opacity",0).remove():(m=m.data(q,function(a,b){return a+t[b]}),
m.enter().append("text").attr("class","col-text").style("opacity","0").attr("x",0).attr("y",0).attr("transform",function(a,b){return"translate("+(b*F+.5*F)+",-5)rotate(-60)"}).text(function(a){return a}),m.transition().duration(500).attr("x",0).attr("y",0).attr("transform",function(a,b){return"translate("+(b*F+.5*F)+",-5)rotate(-60)"}).style("opacity",null),m.exit().transition().duration(500).style("opacity",0).remove());d=d.selectAll(".row-text").data(h,String);d.enter().append("text").attr("class",
function(a){return"row-text"}).attr("x",0).attr("y",0).attr("transform",function(a,b){return"translate(-5,"+(b*A+.5*A)+")rotate(30)"}).text(function(a){return a});d.transition().duration(500).attr("x",0).attr("y",0).attr("transform",function(a,b){return"translate(-5,"+(b*A+.5*A)+")rotate(30)"});return B};
epiviz.plugins.charts.HeatmapPlot.prototype._drawDendrogram=function(a){this._svg.select(".dendrogram").remove();var c=this._customSettingsValues[epiviz.plugins.charts.HeatmapPlotType.CustomSettings.DENDROGRAM_RATIO],b=this._customSettingsValues[epiviz.plugins.charts.HeatmapPlotType.CustomSettings.SHOW_DENDROGRAM_LABELS];if(0<c){this._svg.append("g").attr("class","dendrogram");var c=this.width()*c,d=this.height()-this.margins().sumAxis(epiviz.ui.charts.Axis.Y),e=this.margins().top(),f=this.width()-
c-this.margins().right();this._drawSubDendrogram(this._svg.select(".dendrogram"),a.root(),e,f,c,d,b)}};
epiviz.plugins.charts.HeatmapPlot.prototype._drawSubDendrogram=function(a,c,b,d,e,f,g){var h=c.children();if(0==h.length)return b+.5*f;for(var l=d3.scale.linear().domain([0,c.distance()]).range([0,e]),m=0,p,q,t=0;t<h.length;++t){var y=b+m,u=f/c.weight()*h[t].weight(),C=l(h[t].distance()),y=this._drawSubDendrogram(a,h[t],y,d,C,u,g);a.append("line").attr("x1",d+C).attr("x2",d+e).attr("y1",y).attr("y2",y).style("stroke","#555555").style("stroke-width",1).style("shape-rendering","crispEdges");0==t&&g&&
a.append("text").attr("class","row-text").attr("x",Math.max(d+10,d+.5*(C+e))).attr("y",y-10).style("text-anchor","middle").text(Globalize.format(c.distance(),"n2"));if(void 0==p||p>y)p=y;if(void 0==q||q<y)q=y;m+=f/c.weight()*h[t].weight()}a.append("line").attr("x1",d+e).attr("x2",d+e).attr("y1",p).attr("y2",q).style("stroke","#555555").style("stroke-width",1).style("shape-rendering","crispEdges");return.5*(p+q)};epiviz.plugins.charts.HeatmapPlot.prototype.chartTypeName=function(){return"epiviz.plugins.charts.HeatmapPlot"};
epiviz.plugins.charts.HeatmapPlot.prototype.colorMap=function(){return[{name:"Min",color:this.colors().get(0)},{name:"Max",color:this.colors().get(1)}]};epiviz.plugins.charts.HeatmapPlotType=function(a){epiviz.ui.charts.PlotType.call(this,a)};epiviz.plugins.charts.HeatmapPlotType.prototype=epiviz.utils.mapCopy(epiviz.ui.charts.PlotType.prototype);epiviz.plugins.charts.HeatmapPlotType.constructor=epiviz.plugins.charts.HeatmapPlotType;
epiviz.plugins.charts.HeatmapPlotType.prototype.createNew=function(a,c,b){return new epiviz.plugins.charts.HeatmapPlot(a,c,b)};epiviz.plugins.charts.HeatmapPlotType.prototype.typeName=function(){return"epiviz.plugins.charts.HeatmapPlot"};epiviz.plugins.charts.HeatmapPlotType.prototype.chartName=function(){return"Heatmap"};epiviz.plugins.charts.HeatmapPlotType.prototype.chartHtmlAttributeName=function(){return"heatmap"};epiviz.plugins.charts.HeatmapPlotType.prototype.chartContentType=function(){return epiviz.measurements.Measurement.Type.FEATURE};
epiviz.plugins.charts.HeatmapPlotType.prototype.isRestrictedToSameDatasourceGroup=function(){return!0};
epiviz.plugins.charts.HeatmapPlotType.prototype.customSettingsDefs=function(){var a=epiviz.ui.charts.transform.clustering.ClusteringAlgorithmFactory.instance();return epiviz.ui.charts.PlotType.prototype.customSettingsDefs.call(this).concat([new epiviz.ui.charts.CustomSetting(epiviz.ui.charts.ChartType.CustomSettings.LABEL,epiviz.ui.charts.CustomSetting.Type.STRING,"probe","Columns labels"),new epiviz.ui.charts.CustomSetting(epiviz.plugins.charts.HeatmapPlotType.CustomSettings.MAX_COLUMNS,epiviz.ui.charts.CustomSetting.Type.NUMBER,
40,"Max columns"),new epiviz.ui.charts.CustomSetting(epiviz.plugins.charts.HeatmapPlotType.CustomSettings.CLUSTERING_ALG,epiviz.ui.charts.CustomSetting.Type.CATEGORICAL,a.algorithms()[0],"Clustering Algorithm",a.algorithms()),new epiviz.ui.charts.CustomSetting(epiviz.plugins.charts.HeatmapPlotType.CustomSettings.CLUSTERING_METRIC,epiviz.ui.charts.CustomSetting.Type.CATEGORICAL,a.metrics()[0],"Clustering Metric",a.metrics()),new epiviz.ui.charts.CustomSetting(epiviz.plugins.charts.HeatmapPlotType.CustomSettings.CLUSTERING_LINKAGE,
epiviz.ui.charts.CustomSetting.Type.CATEGORICAL,a.linkages()[0],"Clustering Linkage",a.linkages()),new epiviz.ui.charts.CustomSetting(epiviz.plugins.charts.HeatmapPlotType.CustomSettings.DENDROGRAM_RATIO,epiviz.ui.charts.CustomSetting.Type.NUMBER,0,"Dendrogram Ratio"),new epiviz.ui.charts.CustomSetting(epiviz.plugins.charts.HeatmapPlotType.CustomSettings.SHOW_DENDROGRAM_LABELS,epiviz.ui.charts.CustomSetting.Type.BOOLEAN,!0,"Show Dendrogram Labels")])};
epiviz.plugins.charts.HeatmapPlotType.CustomSettings={MAX_COLUMNS:"maxColumns",CLUSTERING_ALG:"clusteringAlg",CLUSTERING_METRIC:"clusteringMetric",CLUSTERING_LINKAGE:"clusteringLinkage",DENDROGRAM_RATIO:"dendrogramRatio",SHOW_DENDROGRAM_LABELS:"showDendrogramLabels"};
epiviz.main=function(){var a=new epiviz.Config(epiviz.EpiViz.SETTINGS),c=new epiviz.ui.LocationManager(a),b=new epiviz.measurements.MeasurementsManager,d=new epiviz.ui.charts.ChartFactory(a),e=new epiviz.ui.charts.ChartManager(a),f=new epiviz.ui.ControlManager(a,d,e,b,c),g=new epiviz.data.DataProviderFactory(a),g=new epiviz.data.DataManager(a,g),h=new epiviz.workspaces.WorkspaceManager(a,c,b,e,d),l=new epiviz.workspaces.UserManager(a),m=new epiviz.ui.WebArgsManager(c,h),c=new epiviz.EpiViz(a,c,b,
f,g,d,e,h,l,m);epiviz.ui.charts.transform.clustering.ClusteringAlgorithmFactory.initialize(a);c.start()};goog.exportSymbol("epiviz.main",epiviz.main);
